<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://twitter.com/lihautan" rel="me" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<meta name="theme-color" content="#bd93f9" />
		<link rel="apple-touch-icon" sizes="48x48" href="/icon-48x48.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="96x96" href="/icon-96x96.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="192x192" href="/icon-192x192.png" />
		<link rel="apple-touch-icon" sizes="256x256" href="/icon-256x256.png" />
		<link rel="apple-touch-icon" sizes="384x384" href="/icon-384x384.png" />
		<link rel="apple-touch-icon" sizes="512x512" href="/icon-512x512.png" />
		<link rel="icon" href="/icon-48x48.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="preload"
			href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,500;0,700;1,300&family=Noto+Sans+SC:wght@500&display=swap" as="style"
			onload="this.rel='stylesheet'">
		<link rel="alternate" type="application/rss+xml" title="Tan Li Hau&#x27;s RSS Feed" href="/rss.xml"/>
		<link rel="sitemap" type="application/xml" href="/sitemap.xml"/>
		<link rel="webmention" href="https://webmention.io/lihautan.com/webmention" />
		<link rel="pingback" href="https://webmention.io/lihautan.com/xmlrpc" />
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6Y89Q69VY"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-Z6Y89Q69VY');
		</script>
		<meta http-equiv="content-security-policy" content=""><title>Demystifying Transitions | Tan Li Hau</title><meta name="description" content="Slides[Link to slides] (Left arrow and right arrow to navigate)ScriptThank you for having me.Transitions allow user to understand where thing comes from and where it goes to.Much like the button over here, when I click on it, it fells into the center, and the title of my talk floats up from it...." data-svelte="svelte-1jsbgzp"><meta name="image" content="https://lihautan.com/_app/assets/hero-twitter-9c2cf96e.jpg" data-svelte="svelte-1jsbgzp"><meta name="og:image" content="https://lihautan.com/_app/assets/hero-twitter-9c2cf96e.jpg" data-svelte="svelte-1jsbgzp"><meta name="og:title" content="Demystifying Transitions" data-svelte="svelte-1jsbgzp"><meta name="og:description" content="Slides[Link to slides] (Left arrow and right arrow to navigate)ScriptThank you for having me.Transitions allow user to understand where thing comes from and where it goes to.Much like the button over here, when I click on it, it fells into the center, and the title of my talk floats up from it...." data-svelte="svelte-1jsbgzp"><meta name="og:type" content="website" data-svelte="svelte-1jsbgzp"><meta name="twitter:card" content="summary_large_image" data-svelte="svelte-1jsbgzp"><meta name="twitter:creator" content="@lihautan" data-svelte="svelte-1jsbgzp"><meta name="twitter:title" content="Demystifying Transitions" data-svelte="svelte-1jsbgzp"><meta name="twitter:description" content="Slides[Link to slides] (Left arrow and right arrow to navigate)ScriptThank you for having me.Transitions allow user to understand where thing comes from and where it goes to.Much like the button over here, when I click on it, it fells into the center, and the title of my talk floats up from it...." data-svelte="svelte-1jsbgzp"><meta name="twitter:image" content="https://lihautan.com/_app/assets/hero-twitter-9c2cf96e.jpg" data-svelte="svelte-1jsbgzp"><meta itemprop="url" content="https://lihautan.com/demystifying-transitions/" data-svelte="svelte-1jsbgzp"><meta itemprop="image" content="https://lihautan.com/_app/assets/hero-twitter-9c2cf96e.jpg" data-svelte="svelte-1jsbgzp"><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"Tan Li Hau"},"copyrightHolder":{"@type":"Person","name":"Tan Li Hau"},"copyrightYear":"2022","creator":{"@type":"Person","name":"Tan Li Hau"},"publisher":{"@type":"Person","name":"Tan Li Hau"},"description":"Slides[Link to slides] (Left arrow and right arrow to navigate)ScriptThank you for having me.Transitions allow user to understand where thing comes from and where it goes to.Much like the button over here, when I click on it, it fells into the center, and the title of my talk floats up from it....","headline":"Demystifying Transitions","name":"Demystifying Transitions","inLanguage":"en"}</script><!-- HTML_TAG_END --><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","description":"Breadcrumbs list","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","item":{"@id":"https://lihautan.com","name":"Homepage"},"name":"Homepage","position":1},{"@type":"ListItem","item":{"@id":"https://lihautan.com/demystifying-transitions/","name":"Demystifying Transitions"},"name":"Demystifying Transitions","position":2}]}</script><!-- HTML_TAG_END -->
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/vendor-cb7fd1e3.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/pages/__layout.svelte-b5830581.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/Links-79a96fb3.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/code-snippet-c7c00025.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/TalkLayout-68d5aac2.css">
	<link rel="stylesheet" href="https://lihautan.com/_app/assets/ldjson-f7523d2e.css">
	<link rel="modulepreload" href="https://lihautan.com/_app/start-c7a2dfb9.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/vendor-da4388d4.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/pages/__layout.svelte-c3db4d7b.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/stores-1fad7c36.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/Links-79c47f65.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/pages/demystifying-transitions/index.md-012eda6f.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/TalkLayout-ea325345.js">
	<link rel="modulepreload" href="https://lihautan.com/_app/chunks/ldjson-b0805387.js">
	</head>
	<body>
		<div id="svelte">




<a href="#content" class="skip svelte-1x8iuzz">Skip to content</a>

	<header class="svelte-1x8iuzz"><nav><ul class="mode-sidebar svelte-2qf5mw"><li class="svelte-2qf5mw"><a href="/" class="svelte-2qf5mw">Tan Li Hau</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/about" class="svelte-2qf5mw">About</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/blogs" class="svelte-2qf5mw">Writings</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/talks" class="svelte-2qf5mw">Talks</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/notes" class="svelte-2qf5mw">Notes</a></li>
	<li class="desktop svelte-2qf5mw"><a sveltekit:prefetch href="/newsletter" class="svelte-2qf5mw">Newsletter</a></li>
	<li class="social svelte-2qf5mw"><a aria-label="Twitter account" href="https://twitter.com/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66
  10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5
  4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a>
		<a aria-label="Github account" href="https://github.com/tanhauhau" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0
  0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07
  5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65
  5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42
  3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
		<a aria-label="YouTube account" href="https://youtube.com/c/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 461.001 461.001" width="1em" height="1em" class="svelte-2qf5mw"><path d="M365.257 67.393H95.744C42.866 67.393 0 110.259 0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878 0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zm-64.751 169.663-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881c3.748 1.899 3.683 7.274-.109 9.082z"></path></svg></a></li>
</ul></nav></header>

	<div class="sidebar svelte-s9hlkv"><div class="float svelte-s9hlkv"><svg viewBox="0 0 30 50" width="30" height="50"><circle fill="currentColor" cy="15" cx="15" r="3"></circle><circle fill="currentColor" cy="25" cx="15" r="3"></circle><circle fill="currentColor" cy="35" cx="15" r="3"></circle></svg></div>
</div>

<main id="content" class="svelte-1x8iuzz">

<h1>Demystifying Transitions</h1>

<ul class="svelte-642bx3"><li class="svelte-642bx3"><span class="icon svelte-642bx3">ðŸ—“</span>October 19, 2020</li>
	
	
	</ul>



<section role="navigation" aria-label="Table of Contents" class="svelte-zmasws"><ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#slides" class="svelte-zmasws">Slides</a>
				
			</li><li class="svelte-zmasws"><a href="#script" class="svelte-zmasws">Script</a>
				<ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#who-am-i" class="svelte-zmasws">Who am I</a>
								
							</li><li class="svelte-zmasws"><a href="#level-1-using-transition" class="svelte-zmasws">Level 1. Using  `transition:` .</a>
								
							</li><li class="svelte-zmasws"><a href="#level-2-the-transition-contract" class="svelte-zmasws">Level 2. The  `transition:`  contract.</a>
								
							</li><li class="svelte-zmasws"><a href="#easing" class="svelte-zmasws">Easing</a>
								
							</li><li class="svelte-zmasws"><a href="#level-3-compile-transition-in-your-head" class="svelte-zmasws">Level 3, compile transition in your head.</a>
								
							</li><li class="svelte-zmasws"><a href="#live-coding" class="svelte-zmasws">Live Coding</a>
								
							</li><li class="svelte-zmasws"><a href="#transition-in-compiled-js" class="svelte-zmasws">`transition:`  in compiled JS</a>
								
							</li><li class="svelte-zmasws"><a href="#recap" class="svelte-zmasws">Recap</a>
								
							</li>
					</ol>
			</li></ol>
</section>

<article class="blog"><section><h2><a href="#slides" id="slides">Slides</a></h2>
<p>[<a href="/slides/demystifying-transitions/">Link to slides</a>] (Left arrow and right arrow to navigate)</p></section>
<section><h2><a href="#script" id="script">Script</a></h2>
<p>Thank you for having me.</p>
<p>Transitions allow user to understand where thing comes from and where it goes to.</p>
<p>Much like the button over here, when I click on it, it fells into the center, and the title of my talk floats up from it.</p>
<p>Yes, today, I will demystify transitions in svelte. And how am I going to do it?</p>
<p>We will dive into Svelte transitions level-by-level.</p>
<p>We start at the first level, where we will learn how to use <code class="inline">transition:</code> in svelte.
As we reached the 2nd level, we&#39;ll look at how to author a transition in svelte.
At the 3rd level, we go deeper and take a look at how Svelte compiles and handle transitions under the hood.</p></section>
<section><h3><a href="#who-am-i" id="who-am-i">Who am I</a></h3>
<p>My name is Tan Li Hau, I am a software engineer at Shopee. Shopee is a e-commerce platform in South east asia that is based in Singapore. </p>
<p>I grew up in a lovely town called penang in malaysia, which has the best street food in malaysia, such as char koay teow, stir-fry flat rice noodles; rojak, a eclectic fruit salad with palm sugar, peanuts and chilli dressing, and well, these are just one of the many great street foods that i hope to try again when I can go back after this coronavirus pandemic is over.</p>
<p>last but not the least, im one of the maintainers of svelte</p></section>
<section><h3><a href="#level-1-using-transition" id="level-1-using-transition">Level 1. Using <code class="inline">transition:</code>.</a></h3>
<p>Here, we have a list of items, rendered using the <code class="inline">{#each}</code> block. When we add or remove an item, the item appears and disappears in an instant. we have no idea where the item is coming from, or disappear into.</p>
<p>To add transition for the items, firstly, we import a transition from <code class="inline">svelte/transtion</code>. here we import fade. to add an entrance transition for the item, we add <code class="inline">in</code> colon <code class="inline">fade</code>.</p>
<p>Now the item fades into existence.</p>
<p>To customise the transition, we can add parameters. such as duration, or delay. For exit transition, we use <code class="inline">out</code> colon <code class="inline">fade</code>.</p>
<p>If you want both entrance and exit transtion, you can use <code class="inline">transition</code> colon <code class="inline">transition name</code>.</p>
<p>There are multiple built-in transitions in svelte, such as <code class="inline">fly</code>, <code class="inline">slide</code>, <code class="inline">scale</code>, <code class="inline">blur</code> and more. this list is not exhaustive, which i recommend you to check them out in the docs as well as the tutorials.</p></section>
<section><h3><a href="#level-2-the-transition-contract" id="level-2-the-transition-contract">Level 2. The <code class="inline">transition:</code> contract.</a></h3>
<p>Not sure if you&#39;ve heard about the store contract in svelte, which states that, if any object follows the store contract, that object can be used like a store, where you can subscribe to it and read the value like a store using the <code class="inline">$</code>-prefix.</p>
<p>The same thing goes with the <code class="inline">transition</code>. A transition has a contract. Any function that follows the transition contract, can be used together with the <code class="inline">in:</code>, <code class="inline">out:</code> or <code class="inline">transition:</code> directives.</p>
<p>Here is how the transition function should look like. It&#39;s a function that takes in 2 parameters, the element node that the transition is applied to, and the parameter that is passed into the transition.</p>
<p>And, it should return an object that describes the transition, or return a function that returns that object.</p>
<p>The object should contain properties such as <code class="inline">delay</code>, in milliseconds, how long before the transition starts; <code class="inline">duration</code>, in millisecond, how long the transition takes; <code class="inline">easing</code>, the easing function, which I&#39;ll explained later together with; <code class="inline">css</code>, a function that returns a css string; and <code class="inline">tick</code> a callback function.</p>
<p>All of the properties are optional, if not specified, the default for delay is 0ms, the default for duration is 300ms, and the default easing is linear.</p>
<p>Usually you would want the transition to be customisable, that&#39;s where the parameter is for you can return the delay or duration, passed into the parameter from the user.</p></section>
<section><h3><a href="#easing" id="easing">Easing</a></h3>
<p>Now, let&#39;s talk about easing.</p>
<p>Easing describes how much an animation progresses at different point of time throughout the animation.</p>
<p>For convenience sake, we describe time from 0 to 1, begins with 0% and ends in a 100%.</p>
<p>Here, as the red dot moves from time 0 to 1 along the red line, the value of eased time moves from 0 to 1 as well.</p>
<p>The easing function that we are looking at now, is the linear function. The eased value grows linearly with time.</p>
<p>However if I switch to <code class="inline">cubicIn</code>, the eased value grows in the power of 3 with time.</p>
<p>This is described by the <code class="inline">cubicIn</code> function.</p>
<p>Here&#39;s why we use 0 to 1 for time, because 0 power 3 is 0, and 1 power 3 is still 1. So after we power 3 the value of time, we still starts with 0 and ends in 1.</p>
<p>Well, the easing function does not have to be a polynomial function, you can have if-else case in your easing function, like the <code class="inline">bounceOut</code>, or calling another function like (bounceInOut) <code class="inline">bounceInOut</code>.</p>
<p>So, how do we calculate the time?</p>
<p>At the beginning of the transition, we record the start time.</p>
<p>Throughout the transition, we have <code class="inline">t</code>, the time passed since the starting time, in milliseconds.</p>
<p>We divide the value of <code class="inline">t</code> by the duration of the transition, so now we get the value from <code class="inline">0</code> to <code class="inline">1</code> for <code class="inline">t</code>, <code class="inline">0</code> in the beginning of the transition, and <code class="inline">1</code> at the end of the transition.</p>
<p>Now if I pass in the value of <code class="inline">t</code> into the easing function, in this case <code class="inline">bounceInOut</code>, I&#39;ll get the eased value.</p>
<p>The value does not go from <code class="inline">0</code> to <code class="inline">1</code> directly, it goes to 0.05, back to 0, 0.14~5, back to 0, all the 1, 0.85, 1, 0.95, 1.</p>
<p>And if I use this eased value to calculate how much I need to translate an element, I&#39;ll get an element that bounce in out.</p>
<p>And that&#39;s how the css function works. it takes in <code class="inline">t</code>, and you return a css style in string, that will be applied to the element. You also have <code class="inline">u</code>, the 2nd paramter, which is <code class="inline">1 - t</code>, the inverse of <code class="inline">t</code>. as you can see if you use <code class="inline">u</code> instead, then the element moves in the opposite direction.</p>
<p>So, if you transition an element into the view, the <code class="inline">t</code> will go from <code class="inline">0</code> to <code class="inline">1</code>, but if you transition an element out of the view, <code class="inline">t</code> will go from <code class="inline">1</code> to <code class="inline">0</code>.</p>
<p>And, if you want to manipulate the element beyond CSS, you can use the <code class="inline">tick</code> function.</p>
<p>It also takes in the <code class="inline">t</code> and <code class="inline">u</code> the same way as the <code class="inline">css</code> function.</p>
<p>One very common use case of this <code class="inline">tick</code> function is to create a typewriter transition.</p>
<p>Do take note that, the tick function is going to be called on every frame, if you want your application to be buttery smooth 60 frames per second, make sure the tick function is fast to prevent jank.</p>
<p>So we&#39;ve covered all the properties in the transtion contract, let&#39;s take an example of a custom transition</p>
<p><a href="https://svelte.dev/repl/c88da2fde68a415cbd43aa738bfcefab?version=3.29.0" rel="nofollow">REPL</a></p>
<p>Here I applied different font styles to the element, so the text stays bold and maroon for the 1st 40% of the time, then italic the next 40% of time, and then back to regular text.</p>
<p>Well, 40% of time is debatable depending on the easing function, in this case we are using linear easing, so it is exactly 40%.</p>
<p>As you can see, you don&#39;t have to limit your css transition to just CSS transform, or having to interpolate the value of <code class="inline">t</code>. <strong>the sky is the limit.</strong></p>
<p>Likewise, the text stays at &#39;coming soon&#39; at the 1st 40% of time, before changing back to the original text.</p></section>
<section><h3><a href="#level-3-compile-transition-in-your-head" id="level-3-compile-transition-in-your-head">Level 3, compile transition in your head.</a></h3>
<p>This is a reference to the series of blogs i&#39;ve written, &quot;compile svelte in your head&quot;. be sure to check them out.</p>
<p>As, how we usually start with a compile svelte in your head article, we are going to explore how we can write a transition in vanilla javascript.</p>
<p>There are a few technologies at our hands we can make use of, the 1st is CSS Transition.</p>
<p>We add the transition property to a selector, describing which css property to be transitioned, the duration, easing function and delay.</p>
<p>And when you change the value of the specified property, in this case opacity, the opacity of the element will transition smoothly based on the easing function.
so here i add the class to change the opacity to 0 and back to 1</p>
<p>However the CSS transition is a bit restrictive, you have limited easing functions, no offense, cubic bezier is great.</p>
<p>Another thing CSS offers us is CSS Animation.</p>
<p>We can define the keyframes of the animation, and then apply it to the element using the <code class="inline">animation</code> property.</p>
<p>We can have multiple animations happening at the same time, and as we change the value of the transformation, we can have different easing. Noticed that we can still use the linear easing in the <code class="inline">animation</code> property, so the keyframes will happen linearly. but as the transformation in each frame grows <strong>in cubic power</strong>, the element translates in cubic easing. </p>
<p><strong>We are no longer limited by the easing functions provided by CSS.</strong></p>
<p>If the transition is not CSS based, we can use JavaScript.</p>
<p><code class="inline">requestAnimationFrame</code> lets you tell the browser that you wish to perform an animation, the browser will call the function provided for your animation update, right before the next repaint.</p>
<p>As you can see here, we can create a loop using <code class="inline">requestAnimationFrame</code>, and the <code class="inline">loop</code> function will be called on every frame right before the next repaint.</p>
<p>In the <code class="inline">loop</code> function, we have similar code as we&#39;ve seen earlier, we calculate the duration since the start, and set the text content based on the duration passed.</p>
<p>So, with CSS animation and JS animation, let see how we can implement transition in vanilla JS.</p></section>
<section><h3><a href="#live-coding" id="live-coding">Live Coding</a></h3>
<div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.getElementById</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;app&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-constant)">btn1</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">btn2</span><span style="color: var(--shiki-color-text)">] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-token-function)">.querySelectorAll</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;button&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">btn1</span><span style="color: var(--shiki-token-function)">.addEventListener</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;click&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> insertNewItem);</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">btn2</span><span style="color: var(--shiki-token-function)">.addEventListener</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;click&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> removeLastItem);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> ul </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-token-function)">.querySelector</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;ul&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> list </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">generateAnimation</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">insertNewItem</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">li</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.createElement</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;li&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">li</span><span style="color: var(--shiki-color-text)">.textContent </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;new item </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-token-constant)">list</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">ul</span><span style="color: var(--shiki-token-function)">.append</span><span style="color: var(--shiki-color-text)">(li);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">list</span><span style="color: var(--shiki-token-function)">.push</span><span style="color: var(--shiki-color-text)">(li);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">transitionIn</span><span style="color: var(--shiki-color-text)">(li</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    delay</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    duration</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">500</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">css</span><span style="color: var(--shiki-color-text)">(t</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> u) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;transform: translateY(</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">u </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">50</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">px)&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">tick</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">generateAnimation</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">duration</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">2000</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-comment)">// 2seconds</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">keyframes</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Math</span><span style="color: var(--shiki-token-function)">.ceil</span><span style="color: var(--shiki-color-text)">(duration </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">16.66</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">rules</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    @keyframes bounceIn &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">      </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-token-constant)">Array</span><span style="color: var(--shiki-color-text)">(keyframes)</span><span style="color: var(--shiki-token-function)">.fill</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.map</span><span style="color: var(--shiki-color-text)">((_</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> index)</span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> index </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> keyframes;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> eased_t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">bounceOut</span><span style="color: var(--shiki-color-text)">(t);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">t </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">100</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">% &#123; transform: translateY(</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> eased_t) </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">50</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">px) &#125;&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      &#125;)</span><span style="color: var(--shiki-token-function)">.join</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;&#92;n&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">      100% &#123; transform: translateY(0px); &#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    &#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">  &#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.createElement</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;style&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">head</span><span style="color: var(--shiki-token-function)">.appendChild</span><span style="color: var(--shiki-color-text)">(style);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">sheet</span><span style="color: var(--shiki-token-function)">.insertRule</span><span style="color: var(--shiki-color-text)">(rules);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">removeLastItem</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">list</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span><span style="color: var(--shiki-color-text)">) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">li</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">list</span><span style="color: var(--shiki-token-function)">.pop</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">li</span><span style="color: var(--shiki-color-text)">.textContent;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">transitionIn</span><span style="color: var(--shiki-color-text)">(li</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      delay</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      duration</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">500</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">css</span><span style="color: var(--shiki-color-text)">(t</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> u) &#123; </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;&#39;</span><span style="color: var(--shiki-color-text)">; &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">tick</span><span style="color: var(--shiki-color-text)">(t</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> u) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (t </span><span style="color: var(--shiki-token-keyword)">===</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-constant)">ul</span><span style="color: var(--shiki-token-function)">.removeChild</span><span style="color: var(--shiki-color-text)">(li);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        &#125; </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)">&#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-constant)">li</span><span style="color: var(--shiki-color-text)">.textContent </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-token-function)">.slice</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Math</span><span style="color: var(--shiki-token-function)">.round</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> t)));</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> i </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transitionIn</span><span style="color: var(--shiki-color-text)">(element</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123; duration</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> delay</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> easing</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> css</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tick &#125;) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">name</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;bounceIn</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">i</span><span style="color: var(--shiki-token-keyword)">++</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">keyframes</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Math</span><span style="color: var(--shiki-token-function)">.ceil</span><span style="color: var(--shiki-color-text)">(duration </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">16.66</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">rules</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">  @keyframes </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">name</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-token-constant)">Array</span><span style="color: var(--shiki-color-text)">(keyframes)</span><span style="color: var(--shiki-token-function)">.fill</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.map</span><span style="color: var(--shiki-color-text)">((_</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> index)</span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> index </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> keyframes;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> eased_t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">bounceOut</span><span style="color: var(--shiki-color-text)">(t);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">t </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">100</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">% &#123; </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-token-function)">css</span><span style="color: var(--shiki-color-text)">(eased_t</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> eased_t)</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> &#125;&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;)</span><span style="color: var(--shiki-token-function)">.join</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;&#92;n&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">&#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    100% &#123; </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-token-function)">css</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> &#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.createElement</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;style&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">document</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">head</span><span style="color: var(--shiki-token-function)">.appendChild</span><span style="color: var(--shiki-color-text)">(style);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">sheet</span><span style="color: var(--shiki-token-function)">.insertRule</span><span style="color: var(--shiki-color-text)">(rules);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">element</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-color-text)">.animation </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">name</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">duration</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">ms linear </span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">delay</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">ms 1 both&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// js animation</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> start </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Date</span><span style="color: var(--shiki-token-function)">.now</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> end </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> start </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> duration;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">tick</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">loop</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> now </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Date</span><span style="color: var(--shiki-token-function)">.now</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (now </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> end) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">tick</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (now </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> start) </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> duration;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> eased_t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> t;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">tick</span><span style="color: var(--shiki-color-text)">(eased_t</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> eased_t);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">requestAnimationFrame</span><span style="color: var(--shiki-color-text)">(loop);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">requestAnimationFrame</span><span style="color: var(--shiki-color-text)">(loop);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">startJsTransition</span><span style="color: var(--shiki-color-text)">(element</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> duration </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">2000</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-comment)">// 2s</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> start </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Date</span><span style="color: var(--shiki-token-function)">.now</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> end </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> start </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> duration;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">element</span><span style="color: var(--shiki-color-text)">.textContent;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">loop</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> now </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Date</span><span style="color: var(--shiki-token-function)">.now</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (now </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> end) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (now </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> start) </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> duration;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> eased_t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> t;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">element</span><span style="color: var(--shiki-color-text)">.textContent </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-token-function)">.slice</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Math</span><span style="color: var(--shiki-token-function)">.round</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">text</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> eased_t)));</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">requestAnimationFrame</span><span style="color: var(--shiki-color-text)">(loop);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">requestAnimationFrame</span><span style="color: var(--shiki-color-text)">(loop);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">bounceOut</span><span style="color: var(--shiki-color-text)">(t) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">a</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">4.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">11.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">b</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">8.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">11.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">c</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">9.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">10.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ca</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">4356.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">361.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">cb</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">35442.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1805.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">cc</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">16061.0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">/</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1805.0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">t2</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> a</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">7.5625</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t2</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> b</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">9.075</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t2 </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">9.9</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">3.4</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> c</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> ca </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t2 </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> cb </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> cc</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">10.8</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">20.52</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> t </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">10.72</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div></section>
<section><h3><a href="#transition-in-compiled-js" id="transition-in-compiled-js"><code class="inline">transition:</code> in compiled JS</a></h3>
<p>As we&#39;ve seen how we can implement transition in vanilla JS, let see how transition is compiled by Svelte.</p>
<p>If you&#39;ve read my compile svelte in your head blog series, you should know about the <code class="inline">create_fragment</code> function. To those that haven&#39;t read it and have no idea what a <code class="inline">create_fragment</code> function is, well, go read it! what are you waiting for?</p>
<p>Anyway, a <code class="inline">create_fragment</code> function is part of the Svelte compiled code, it returns an object describing how to create, mount, update and destroy elements for the Svelte component. You can think of it as a recipe for Svelte components, and create, mount, update and destroy are the basics operations of all Svelte components.</p>
<p>Here are 2 more operations added if you use transitions <code class="inline">intro</code> and <code class="inline">outro</code>.</p>
<p>Let&#39;s see how is it being used.</p>
<p>Say you have an each block. so in the main <code class="inline">create_fragment</code> function, you create the each block. and you have the <code class="inline">create_each_block</code> function that has the recipe to create elements for individual each items.</p>
<p>In the <code class="inline">create_fragment</code> function, we call the <code class="inline">transition_in</code> and <code class="inline">transition_out</code> in the <code class="inline">intro</code> and <code class="inline">outro</code> function. This will in turn call the <code class="inline">intro</code> and <code class="inline">outro</code> method of the individual each item block.</p>
<p>And when the each block has changes, say adding a new item to the array, svelte will also transition in the newly created block.</p>
<p>And when the item is removed from the array, svelte will start a new group of outros, transition out the removed items and synchronises the outros.</p>
<p>let&#39;s take a look how&#39;s the <code class="inline">intro</code> and <code class="inline">outro</code> method look like for each item.
first in the <code class="inline">intro</code> method, it will create a bidirectional transition for the <code class="inline">&lt;div /&gt;</code>, the element we applied transition on, if it has not been created, and run it to <code class="inline">1</code>. for the <code class="inline">outro</code> method on the other hand, we run the transition to <code class="inline">0</code>.</p>
<p>Here, both the intro and outro is sharing the same transition object, so, if the item is added and removed immediately, when we run the transition to 0, the intro animation is cancelled and the outro animation is played immediately, depending on the outro delay.</p>
<p>If you only use the <code class="inline">in:</code> directive, then, only the intro transition is created.</p>
<p>On the other hand, same thing goes if you use only the <code class="inline">out:</code> directive.</p>
<p>Let&#39;s take a look at the how <code class="inline">create_in_transition</code> looks like, hopefully you can see some resemblance with the vanilla code that we&#39;ve just written. We are going to look at just the <code class="inline">create_in_transition</code>, as the <code class="inline">create_out_transition</code> and <code class="inline">create_bidirectional_transition</code> is almost similar in structure.</p>
<p>Here we have the <code class="inline">start</code>, <code class="inline">invalidate</code> and <code class="inline">end</code>, and the <code class="inline">start</code> will call the function <code class="inline">go</code>, which starts the transition.</p>
<p>First we create the css rule. where we construct the keyframes and we insert the keyframes into the stylesheet, and apply it to the element.</p>
<p>Next we start the loop. if you look into the loop, it is implemented using <code class="inline">requestAnimationFrame</code>. before we start, we record down the start time of the animation and the end time, so we know when it will end.
and we call the 1st <code class="inline">tick</code> function.</p>
<p>If the current time has passed the start time, we calculate the eased time, and call the <code class="inline">tick</code> function.</p>
<p>And if the time passed the end time, we call the <code class="inline">tick</code> function 1 last time.</p>
<p>In the begining of the loop, we dispatch the <code class="inline">on:introstart</code> event, and when it ends, we dispatch the <code class="inline">on:introend</code> event.</p>
<p>And of course some cleanup after that. </p>
<p>Here are some source code reference if you are interested.</p>
<ul><li><p><a href="https://github.com/sveltejs/svelte/blob/master/src/runtime/internal/transitions.ts" rel="nofollow">src/runtime/internal/transitions.ts</a></p>
<ul><li><code class="inline">transition_in</code>, <code class="inline">transition_out</code></li>
<li><code class="inline">create_in_transition</code>, <code class="inline">create_out_transition</code>, <code class="inline">create_bidirectional_transition</code></li></ul></li>
<li><p><a href="https://github.com/sveltejs/svelte/blob/master/src/runtime/internal/style_manager.ts" rel="nofollow">src/runtime/internal/style_manager.ts</a></p>
<ul><li><code class="inline">create_rule</code>, <code class="inline">delete_rule</code>, <code class="inline">clear_rules</code></li></ul></li>
<li><p><a href="https://github.com/sveltejs/svelte/blob/master/src/runtime/transition/index.ts" rel="nofollow">src/runtime/transition/index.ts</a> (<code class="inline">svelte/transition</code>)</p>
<ul><li><code class="inline">fade</code>, <code class="inline">fly</code>, <code class="inline">slide</code>, <code class="inline">crossfade</code>, ...</li></ul></li></ul>
<p>First is the internal transitions, where the <code class="inline">transition_in</code>, <code class="inline">transition_out</code>, <code class="inline">create_transition</code>s method being defined.</p>
<p>Following on that is the internal style manager, the part where how svelte create new keyframe rules and manages stylesheets.</p>
<p>Lastly is the runtime transitions, that&#39;s where you import <code class="inline">svelte/transtions</code> from. You can check out the code for <code class="inline">fade</code>, <code class="inline">fly</code>, <code class="inline">slide</code>, <code class="inline">crossfade</code> and many other transitions.</p></section>
<section><h3><a href="#recap" id="recap">Recap</a></h3>
<p>Finally a recap, we&#39;ve seen how you can use a transition in svelte, author a transition in svelte, and finally how svelte implements the transition mechanism.</p>
<p>Hopefully, transition is no longer a mystical feature to you, and hope to see more creative transitions coming up. </p>
<p>Tag me on twitter or discord <a href="https://twitter.com/lihautan" rel="nofollow">@lihautan</a>, if you created a something cool with transitions, I look forward to see them.</p>
<p>Once again, I&#39;m <a href="https://twitter.com/lihautan" rel="nofollow">@lihautan</a> on twitter, follow me where i post cool and fun knowledge about svelte.</p>
<p>Thank you and enjoy the Svelte summit!</p></section></article>

<div style="height: 1px; width: 100%"></div>

</main>

<footer class="svelte-1x8iuzz">
</footer>


		<script type="module" data-hydrate="aj084t">
		import { start } from "https://lihautan.com/_app/start-c7a2dfb9.js";
		start({
			target: document.querySelector('[data-hydrate="aj084t"]').parentNode,
			paths: {"base":"","assets":"https://lihautan.com"},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "always",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("https://lihautan.com/_app/pages/__layout.svelte-c3db4d7b.js"),
						import("https://lihautan.com/_app/pages/demystifying-transitions/index.md-012eda6f.js")
				],
				params: {}
			}
		});
	</script></div>
	</body>
</html>
