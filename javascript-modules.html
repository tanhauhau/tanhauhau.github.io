<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://twitter.com/lihautan" rel="me" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<meta name="theme-color" content="#bd93f9" />
		<link rel="apple-touch-icon" sizes="48x48" href="/icon-48x48.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="96x96" href="/icon-96x96.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="192x192" href="/icon-192x192.png" />
		<link rel="apple-touch-icon" sizes="256x256" href="/icon-256x256.png" />
		<link rel="apple-touch-icon" sizes="384x384" href="/icon-384x384.png" />
		<link rel="apple-touch-icon" sizes="512x512" href="/icon-512x512.png" />
		<link rel="icon" href="/icon-48x48.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="preload"
			href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,500;0,700;1,300&family=Noto+Sans+SC:wght@500&display=swap"
			as="style"
			onload="this.rel='stylesheet'"
		/>
		<link
			rel="alternate"
			type="application/rss+xml"
			title="Tan Li Hau&#x27;s RSS Feed"
			href="/rss.xml"
		/>
		<link rel="sitemap" type="application/xml" href="/sitemap.xml" />
		<link rel="webmention" href="https://webmention.io/lihautan.com/webmention" />
		<link rel="pingback" href="https://webmention.io/lihautan.com/xmlrpc" />
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6Y89Q69VY"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-Z6Y89Q69VY');
		</script>
		
		<link href="https://lihautan.com/_app/immutable/assets/2.CDMtzrzD.css" rel="stylesheet">
		<link href="https://lihautan.com/_app/immutable/assets/Links.Barm56k2.css" rel="stylesheet">
		<link href="https://lihautan.com/_app/immutable/assets/PreloadingIndicator.CHlB5uuK.css" rel="stylesheet">
		<link href="https://lihautan.com/_app/immutable/assets/code-snippet.Ch6n4AYw.css" rel="stylesheet">
		<link href="https://lihautan.com/_app/immutable/assets/TalkLayout.CQwcANoI.css" rel="stylesheet">
		<link href="https://lihautan.com/_app/immutable/assets/ldjson.CkgGHe4J.css" rel="stylesheet">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/entry/start.nOswNUmb.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/entry.CeLgi06w.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/scheduler.D6VJxl8L.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/entry/app.CwnX_Ycn.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/index.CLAVN-Y5.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/nodes/0.DLHgrcY7.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/nodes/2.BftalsR3.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/stores.BQgOlvpj.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/Links.C4jMQkMc.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/each.DI7TeU31.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/index.DueORT-9.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/PreloadingIndicator.6QGaXoVk.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/nodes/44.DY_UhQYs.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/code-snippet.Gym6WUAG.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/TalkLayout.Bt3itjC_.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/ldjson.Hcz0M7wa.js">
		<link rel="modulepreload" href="https://lihautan.com/_app/immutable/chunks/twitter-card-image.C3bQ3Oc7.js"><title>History of Web Development: JavaScript Modules | Tan Li Hau</title><!-- HEAD_svelte-1jsbgzp_START --><meta name="description" content="MotivationA while ago, I posted an article about understanding frontend tools. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions...."><meta name="image" content="https://lihautan.com/_app/immutable/assets/twitter-card-image.bFm5iFME.jpg"><meta name="og:image" content="https://lihautan.com/_app/immutable/assets/twitter-card-image.bFm5iFME.jpg"><meta name="og:title" content="History of Web Development: JavaScript Modules"><meta name="og:description" content="MotivationA while ago, I posted an article about understanding frontend tools. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions...."><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@lihautan"><meta name="twitter:title" content="History of Web Development: JavaScript Modules"><meta name="twitter:description" content="MotivationA while ago, I posted an article about understanding frontend tools. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions...."><meta name="twitter:image" content="https://lihautan.com/_app/immutable/assets/twitter-card-image.bFm5iFME.jpg"><meta itemprop="url" content="https://lihautan.com/javascript-modules"><meta itemprop="image" content="https://lihautan.com/_app/immutable/assets/twitter-card-image.bFm5iFME.jpg"><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"Tan Li Hau"},"copyrightHolder":{"@type":"Person","name":"Tan Li Hau"},"copyrightYear":"2022","creator":{"@type":"Person","name":"Tan Li Hau"},"publisher":{"@type":"Person","name":"Tan Li Hau"},"description":"MotivationA while ago, I posted an article about understanding frontend tools. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions....","headline":"History of Web Development: JavaScript Modules","name":"History of Web Development: JavaScript Modules","inLanguage":"en"}</script><!-- HTML_TAG_END --><!-- HTML_TAG_START --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","description":"Breadcrumbs list","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","item":{"@id":"https://lihautan.com","name":"Homepage"},"name":"Homepage","position":1},{"@type":"ListItem","item":{"@id":"https://lihautan.com/javascript-modules","name":"History of Web Development: JavaScript Modules"},"name":"History of Web Development: JavaScript Modules","position":2}]}</script><!-- HTML_TAG_END --><!-- HEAD_svelte-1jsbgzp_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">   <a href="#content" class="skip svelte-1x8iuzz" data-svelte-h="svelte-198b79b">Skip to content</a> <header class="svelte-1x8iuzz"><nav><ul class="mode-sidebar svelte-2qf5mw"><li class="svelte-2qf5mw" data-svelte-h="svelte-1c15i4q"><a href="/" class="svelte-2qf5mw">Tan Li Hau</a></li> <li class="desktop svelte-2qf5mw" data-svelte-h="svelte-jyiaso"><a data-sveltekit-preload-data href="/about" class="svelte-2qf5mw">About</a></li> <li class="desktop svelte-2qf5mw" data-svelte-h="svelte-nil8z4"><a data-sveltekit-preload-data href="/blogs" class="svelte-2qf5mw">Writings</a></li> <li class="desktop svelte-2qf5mw" data-svelte-h="svelte-lr8cqc"><a data-sveltekit-preload-data href="/talks" class="svelte-2qf5mw">Talks</a></li> <li class="desktop svelte-2qf5mw" data-svelte-h="svelte-1oruudc"><a data-sveltekit-preload-data href="/notes" class="svelte-2qf5mw">Notes</a></li> <li class="desktop svelte-2qf5mw" data-svelte-h="svelte-18xilfe"><a data-sveltekit-preload-data href="/books" class="svelte-2qf5mw">Books</a></li> <li class="social svelte-2qf5mw" data-svelte-h="svelte-1bsaw7m"><a aria-label="Twitter account" href="https://twitter.com/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66
  10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5
  4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a> <a aria-label="Github account" href="https://github.com/tanhauhau" class="svelte-2qf5mw"><svg viewBox="0 0 24 24" width="1em" height="1em" class="svelte-2qf5mw"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0
  0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07
  5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65
  5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42
  3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a> <a aria-label="YouTube account" href="https://youtube.com/c/lihautan" class="svelte-2qf5mw"><svg viewBox="0 0 461.001 461.001" width="1em" height="1em" class="svelte-2qf5mw"><path d="M365.257 67.393H95.744C42.866 67.393 0 110.259 0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878 0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zm-64.751 169.663-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881c3.748 1.899 3.683 7.274-.109 9.082z"></path></svg></a></li> </ul></nav></header> <div class="sidebar svelte-s9hlkv">  <div class="float svelte-s9hlkv" data-svelte-h="svelte-x1w5me"><svg viewBox="0 0 30 50" width="30" height="50"><circle fill="currentColor" cy="15" cx="15" r="3"></circle><circle fill="currentColor" cy="25" cx="15" r="3"></circle><circle fill="currentColor" cy="35" cx="15" r="3"></circle></svg></div> </div> <main id="content" class="svelte-1x8iuzz"> <h1>History of Web Development: JavaScript Modules</h1> <ul class="svelte-642bx3"><li class="svelte-642bx3"><span class="icon svelte-642bx3" data-svelte-h="svelte-iqkxxu">üóì</span>April 12, 2019</li> <li class="svelte-642bx3"><span class="icon svelte-642bx3" data-svelte-h="svelte-irmyag">üë•</span><a href="https://github.com/Shopee/react-knowledgeable/issues/89">React Knowledgeable Week 25</a></li> <li class="venue svelte-642bx3"><span class="icon svelte-642bx3" data-svelte-h="svelte-rx8ae8">üìç</span><a href="https://www.google.com/maps/place/Shopee+SG/@1.291278,103.7846628,15z/data=!4m2!3m1!1s0x0:0x7ddf2e854cf6e4e4?ved=2ahUKEwi5jbz6z_vgAhVBP48KHWSEAmMQ_BIwFXoECAEQCA">Shopee SG</a></li> <li class="video svelte-642bx3"><span class="icon svelte-642bx3" data-svelte-h="svelte-4y9mes">üìπ</span><a href="https://www.youtube.com/watch?v=iRSdPqIHOqg">Video</a></li></ul>  <section role="navigation" aria-label="Table of Contents" class="svelte-zmasws"><ol class="svelte-zmasws"><li class="svelte-zmasws"><a href="#motivation" class="svelte-zmasws">Motivation</a>  </li><li class="svelte-zmasws"><a href="#the-vanilla-way" class="svelte-zmasws">The Vanilla way</a>  </li><li class="svelte-zmasws"><a href="#installability" class="svelte-zmasws">Installability</a>  </li><li class="svelte-zmasws"><a href="#importability" class="svelte-zmasws">Importability</a>  </li><li class="svelte-zmasws"><a href="#scopability" class="svelte-zmasws">Scopability</a>  </li><li class="svelte-zmasws"><a href="#summary" class="svelte-zmasws">Summary</a>  </li><li class="svelte-zmasws"><a href="#further-readings" class="svelte-zmasws">Further Readings</a>  </li></ol> </section> <article class="blog"><section data-svelte-h="svelte-1n1l6h9"><h2><a href="#motivation" id="motivation">Motivation</a></h2> <p>A while ago, I posted an article about <a href="/understand-the-frontend-tools/">understanding frontend tools</a>. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions.</p> <p>One of the question is:</p> <blockquote><p><strong>How do we make our JavaScript code modular</strong>, having each piece of code <strong>independent</strong> of each other, without having to worry other parts of code affecting it, yet able to <strong>share functionality</strong> among different modules.</p></blockquote> <p>So I will attempt to answer the question by first exploring how things are done in a &quot;Vanilla&quot; way, and my two cents about the inherent problem with it and how each tooling come about solving those problems.</p></section> <section><h2 data-svelte-h="svelte-15tbj27"><a href="#the-vanilla-way" id="the-vanilla-way">The Vanilla way</a></h2> <p data-svelte-h="svelte-1yqr1tw">Imagine the following scenario:</p> <p data-svelte-h="svelte-1qkl45j">You are writing a web application. You created a script, <code class="inline">app.js</code>, and you added a <code class="inline">&lt;script&gt;</code> tag into your <code class="inline">index.html</code>.</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">&lt;!-- filename: index.html --&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/app.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-vnznit">Then you decided to add jQuery, because you heard that jQuery is amazing.</p> <p data-svelte-h="svelte-1p4ejls"><strong>So how would you add jQuery into your application?</strong></p> <p data-svelte-h="svelte-1pu7r83">There&#39;s a few ways to go about, but the easiest would be:</p> <ul data-svelte-h="svelte-chxhyo"><li>heading to <a href="https://jquery.com/" rel="nofollow">jQuery&#39;s website</a></li> <li>click download</li> <li>dragged the downloaded file to your project folder</li> <li>and add another script tag before your <code class="inline">app.js</code>.</li></ul> <p data-svelte-h="svelte-lcgsy0"><span style="display: block; position: relative; padding-top: 25.161%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/immutable/assets/jquery.BdTBK2uT.webp, https://lihautan.com/_app/immutable/assets/jquery.tRAdHTz0.webp 2x"><img src="https://lihautan.com/_app/immutable/assets/jquery.BLRZ4k1c.png" srcset="https://lihautan.com/_app/immutable/assets/jquery.BLRZ4k1c.png, https://lihautan.com/_app/immutable/assets/jquery.L9vZcD9V.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="jquery page" title="Downloading jQuery from jQuery.com"></picture></span></p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">&lt;!-- filename: index.html --&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/jquery.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/app.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-1gl2d0k"><em>Adding <code class="inline">jquery</code> into html</em></p> <p data-svelte-h="svelte-169gsmn">Although jQuery is awesome, but adding it takes <strong>a lot of steps and effort</strong>. And to upgrade jQuery, you would have to redo all the step.</p> <blockquote data-svelte-h="svelte-1wsfoa8"><p><strong>Installing a library</strong> is a hassle back then.</p></blockquote> <p data-svelte-h="svelte-fcvzra">Let&#39;s say we add another file, <code class="inline">utils.js</code> for all our utility functions.</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">&lt;!-- filename: index.html --&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/jquery.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/utils.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/app.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre><!-- HTML_TAG_END --></div> <div class="code-section"><!-- HTML_TAG_START --><div class="filename">utils.js</div><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> pi </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">3.142</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">area</span><span style="color: var(--shiki-color-text)">(radius) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> pi </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> radius </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> radius;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-11ul3p0">Although you meant to just share the function <code class="inline">area</code> from <code class="inline">utils.js</code>, in <code class="inline">app.js</code>, you would notice that both <code class="inline">pi</code> and <code class="inline">area</code> are available.</p> <div class="code-section"><!-- HTML_TAG_START --><div class="filename">app.js</div><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)">area</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">5</span><span style="color: var(--shiki-color-text)">)); </span><span style="color: var(--shiki-token-comment)">// 78.55</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// pi is available too!</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(pi); </span><span style="color: var(--shiki-token-comment)">// 3.142</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-1ru8g23">That is because when you declare a variable or a function within a script, it will be available to the <strong>global scope</strong>.</p> <p data-svelte-h="svelte-x1tabe">The only way to hide it, is to use Immediately Invoked Function Expression (IIFE).</p> <div class="code-section"><!-- HTML_TAG_START --><div class="filename">utils.js</div><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> utils </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// you hide &#96;pi&#96; within the function scope</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> pi </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">3.142</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">area</span><span style="color: var(--shiki-color-text)">(radius) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> pi </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> radius </span><span style="color: var(--shiki-token-keyword)">*</span><span style="color: var(--shiki-color-text)"> radius;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> &#123; area &#125;;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;)();</span></span></code></pre><!-- HTML_TAG_END --></div> <div class="code-section"><!-- HTML_TAG_START --><div class="filename">app.js</div><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">utils</span><span style="color: var(--shiki-token-function)">.area</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">5</span><span style="color: var(--shiki-color-text)">)); </span><span style="color: var(--shiki-token-comment)">// 78.55</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(pi); </span><span style="color: var(--shiki-token-comment)">// Reference error, &#96;pi&#96; is not defined</span></span></code></pre><!-- HTML_TAG_END --></div>  <p data-svelte-h="svelte-1xg95bh">This is called the <strong>module pattern</strong>. The only way to control what to exposed to the global scope.</p> <blockquote data-svelte-h="svelte-1av47lc"><p><strong>Scoping the variables</strong> within the module is hard, and you can only do it via the <strong>module pattern</strong>.</p></blockquote> <p data-svelte-h="svelte-1jyl5h7">If you have noticed, we access <code class="inline">utils</code> freely, because it is defined in the global scope. If you have another module / library that named <code class="inline">utils</code>, they would have conflicted against each other.</p> <p data-svelte-h="svelte-1qy0igx">We want to <em>&quot;import&quot;</em> the modules freely, and renamed it anyway we want, without worrying naming conflicts amongst modules / libraries.</p> <blockquote data-svelte-h="svelte-fd843u"><p><strong>Importing</strong> without naming conflicts is what we want.</p></blockquote> <p data-svelte-h="svelte-woa6bx">So I hereby summarize, the &quot;module&quot; problem in JavaScript,</p> <ul data-svelte-h="svelte-ctjd8e"><li><strong>Installability</strong> - the ability to install easily</li> <li><strong>Scopability</strong> - the ability of having clearly defined scoped within modules</li> <li><strong>Importability</strong> - the ability to import modules freely without worry</li></ul> <p data-svelte-h="svelte-feih8g">Well, I am not sure some of these word existed, I think I might have made up some of them to make it rhyme.</p> <p data-svelte-h="svelte-hmcry1">The problems above are no longer a concern any more in the 2019 world, yet it is still interesting to see what the JavaScript community has created to solve these problems.</p></section> <section><h2 data-svelte-h="svelte-10uwoz3"><a href="#installability" id="installability">Installability</a></h2> <blockquote data-svelte-h="svelte-1xoj4iw"><p>The &quot;how easy is it to install&quot; problem.</p></blockquote> <p data-svelte-h="svelte-10w9ypk">As mentioned in the earlier example, to &quot;install&quot; jQuery into your web app is to download jQuery from their main website. To &quot;install&quot; a different version would mean to visit their &quot;Past Releases&quot; Page to download the specific version you want.</p> <p data-svelte-h="svelte-io2aat"><span style="display: block; position: relative; padding-top: 56.360%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/immutable/assets/jquery-version.BkTnmXzJ.webp, https://lihautan.com/_app/immutable/assets/jquery-version.C_1wclBA.webp 2x"><img src="https://lihautan.com/_app/immutable/assets/jquery-version.DHpEtL_5.png" srcset="https://lihautan.com/_app/immutable/assets/jquery-version.DHpEtL_5.png, https://lihautan.com/_app/immutable/assets/jquery-version.DASDWbAj.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="jQuery past releases page" title="Visit &quot;Past Releases&quot; to download an older version of jQuery"></picture></span></p> <p data-svelte-h="svelte-8ja3pj">A &quot;faster&quot; alternative to this, is to get jQuery served from a CDN provider. <a href="https://cdnjs.com/" rel="nofollow">cdnjs.com</a> is a site that catalogues the CDN url for different libraries. The CDN will serve the script faster to the user, because of their delivery network, as well as if multiple sites are using the same CDN url, the file will be cached by browser. And it is faster to &quot;install&quot;, as <a href="https://cdnjs.com/" rel="nofollow">cdnjs.com</a> provides a one-click to &quot;Copy as script tag&quot;, all you only need to do is to paste it in to your <code class="inline">html</code> file.</p> <p data-svelte-h="svelte-1nq5so0"><span style="display: block; position: relative; padding-top: 39.187%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/immutable/assets/cdnjs.CdPS6Xq2.webp, https://lihautan.com/_app/immutable/assets/cdnjs.bG_AsGlj.webp 2x"><img src="https://lihautan.com/_app/immutable/assets/cdnjs.BZQj-FCH.png" srcset="https://lihautan.com/_app/immutable/assets/cdnjs.BZQj-FCH.png, https://lihautan.com/_app/immutable/assets/cdnjs.DbJ-1sxR.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="cdnjs copy as script tag" title="One click to &quot;Copy as script tag&quot;"></picture></span></p> <p data-svelte-h="svelte-1kcivk6">Parallelly in the <a href="http://nodejs.org/" rel="nofollow">Node.js</a> world, <a href="http://npmjs.com" rel="nofollow">npm</a>, the Node.js Package Manager was created. With npm, it is much easier to install and maintain packages and their version, <em>(a &quot;package&quot; can be seen as a group of JavaScript modules and their description file)</em>, for a Node.js project. All a developer need to do list out the dependencies and their version in <code class="inline">package.json</code> and run <code class="inline">npm install</code>.</p> <p data-svelte-h="svelte-lw336p">If you think the <em>problem of installability</em> stops here, well, not quite. See, npm was created for Node.js application, packages that are published to the npm registry was not meant for browser use. The JavaScript &quot;modules&quot; uses &quot;syntax&quot; like the <code class="inline">module.exports</code> and <code class="inline">require</code> which are not readily understandable by the browser. Therefore you can&#39;t add a script tag to include files you just installed from npm. <em>(I will explain what <code class="inline">module.exports</code> and <code class="inline">require</code> syntax are in the later part of this article)</em></p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- This will not work out of the box! --&gt;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;/node_modules/foo/bar.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">body</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-de4eto">That&#39;s why <a href="https://bower.io" rel="nofollow">bower</a> was created. It is called the package manager for the web, because the &quot;package&quot; you installed from bower are readily to be used in the <code class="inline">html</code>.</p> <p data-svelte-h="svelte-1yoyf4m"><span style="display: block; position: relative; padding-top: 43.340%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/immutable/assets/bower.AORUcext.webp, https://lihautan.com/_app/immutable/assets/bower.C3rInfZK.webp 2x"><img src="https://lihautan.com/_app/immutable/assets/bower.DggVyKxi.png" srcset="https://lihautan.com/_app/immutable/assets/bower.DggVyKxi.png, https://lihautan.com/_app/immutable/assets/bower.B0Z0MA9M.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="bower"></picture></span></p>  <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">/project</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /bower_components</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /node_modules</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /app</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /bower.json</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /package.json</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-3lot62"><em>A typical web application project setup with both bower and npm</em></p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">&lt;!-- filename: index.html --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">src</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;bower_components/jquery/dist/jquery.min.js&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-1h8g8j3"><em>Adding bower packages into index.html</em></p> <p data-svelte-h="svelte-1rk3gux">Bower components for browser libraries and npm packages for build tools, had been a common web app projects setup until the next tool comes up to change it.</p> <p data-svelte-h="svelte-3zt8rv"><a href="http://browserify.org/" rel="nofollow">Browserify</a> tries to bring the vast registry of packages from <code class="inline">npm</code> to the web. Browserify is a module bundler, it reads and understands the <code class="inline">require</code> syntax, and tries to bundle all the modules into one file.</p> <p data-svelte-h="svelte-yhkkjo"><span style="display: block; position: relative; padding-top: 76.221%; width: 100%;"><picture><source type="image/webp" srcset="https://lihautan.com/_app/immutable/assets/browserify.CWca4zYb.webp, https://lihautan.com/_app/immutable/assets/browserify.B-VbaIZL.webp 2x"><img src="https://lihautan.com/_app/immutable/assets/browserify.Bud-6HNH.png" srcset="https://lihautan.com/_app/immutable/assets/browserify.Bud-6HNH.png, https://lihautan.com/_app/immutable/assets/browserify.CGGEa48M.png 2x" loading="lazy" style="position: absolute; top: 0; width: 100%; height: 100%" alt="browserify"></picture></span></p> <p data-svelte-h="svelte-12zq3h">With <a href="http://browserify.org/" rel="nofollow">Browserify</a>, and other module bundler, eg <a href="https://webpack.js.org" rel="nofollow">webpack</a>, <a href="https://rollupjs.org/" rel="nofollow">rollup</a> etc, we are now able to freely share code among Node.js and browser application, and use <code class="inline">npm</code> as a package manager for installing and upgrading packages.</p></section> <section><h2 data-svelte-h="svelte-cvlvnt"><a href="#importability" id="importability">Importability</a></h2> <blockquote data-svelte-h="svelte-1ugbnx6"><p>The &quot;how easy is it to import&quot; problem.</p></blockquote> <p data-svelte-h="svelte-zhnj82">Let&#39;s recap the problem of <em>&quot;importability&quot;</em> with the example earlier. We mentioned that everything we declare within each file, are available to other files via the global scope. There is no control of what you are importing, the sequence of the importing. At this point of time, each JavaScript files is just a script, until module systems were introduced.</p> <p data-svelte-h="svelte-l6qz0w">With the advent of Node.js, there&#39;s a need to <em>require</em> common modules into your JavaScript code. Because in Node.js context, there&#39;s no <code class="inline">index.html</code> where you can <em>&quot;insert script tags&quot;</em>. At some point you need to <em>require</em> some external modules, or else you will end up writing a very long JavaScript file.</p> <p data-svelte-h="svelte-1u91yrt">So <a href="http://commonjs.org" rel="nofollow">CommonJS</a> were introduced into Node.js. It allows your JavaScript code to <code class="inline">require</code> and <code class="inline">export</code> other JavaScript modules.</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;./circle&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.pi </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">3.142</span><span style="color: var(--shiki-color-text)">;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-vdzwdh"><em>the commonjs &quot;require&quot; and &quot;export&quot; syntax</em></p> <p data-svelte-h="svelte-k3uyz6">Note that <code class="inline">require()</code> is <strong>synchronous</strong>.</p> <p data-svelte-h="svelte-1wrnm4s">When you call <code class="inline">require(&#39;./circle.js&#39;)</code>, Node runtime will:</p> <ul data-svelte-h="svelte-1aq7qdp"><li>find the file you are <code class="inline">require</code>ing</li> <li>parse and eval the content</li> <li>return what is assigned to <code class="inline">exports</code>.</li></ul> <p data-svelte-h="svelte-10hlv3l">But, if we are going to port the <code class="inline">require</code> syntax into the browser, it will not be able to be synchronous. Because, fetching content involves network call, and it will have to be asynchronous. So, it only make sense to have a asynchronous <code class="inline">require</code>:</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;./circle.js&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(circle) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// callback when circle is ready</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-xe91gn">And this is exactly how <a href="http://www.tysoncadenhead.com/blog/script-loaders/" rel="nofollow"><strong>script loaders</strong></a> work!</p> <p data-svelte-h="svelte-bg0kz5">If you find the concept of script loading similar, that&#39;s because it is the exact same concept of dynamic import we have today. In fact, if you look at the code, they have the same mechanics of loading the script asynchronously!</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// script loading</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">load</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;lib/jquery.min.js&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// dynamic import</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;lib/jquery.min.js&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">(callback);</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-h64mcp">CommonJS&#39;s <code class="inline">require</code> statement did not take into consideration of the asynchronicity of the browser land, therefore the JavaScript community came up with another module system, <a href="https://requirejs.org/docs/whyamd.html#amd" rel="nofollow">AMD (Asynchronous Module Definition)</a>.</p> <p data-svelte-h="svelte-1u8zsc0">AMD uses an asynchronous <code class="inline">require</code> syntax, that takes a callback that would be called only after the dependency is available.</p> <div class="code-section"><!-- HTML_TAG_START --><div class="filename">main.js</div><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">([</span><span style="color: var(--shiki-token-string-expression)">&#39;jquery&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;circle&#39;</span><span style="color: var(--shiki-color-text)">]</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">($</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> circle) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// we can use &#96;$&#96; and &#96;circle&#96; now!</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-3skh7i">We have both module system in JavaScript, CommonJS and AMD, with both seemed valid and useful, yet troubling, because it meant to library owners to support both module system, by means such as a unified module definition via <a href="https://github.com/umdjs/umd" rel="nofollow">UMDjs</a>.</p> <p data-svelte-h="svelte-pqiqp4">So, <a href="https://www.ecma-international.org/memento/tc39.htm" rel="nofollow">TC39</a>, the standards body charged with defining the syntax and semantics of ECMAScript decided to introduce the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" rel="nofollow">ES modules</a> in ES6 (ES2015).</p> <p data-svelte-h="svelte-1prpkye">ES Modules introduced 2 new syntax, the <code class="inline">import</code> and <code class="inline">export</code>.</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// importing &#96;circle&#96; from &#39;./circle&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> circle </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./circle&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// export the constant &#96;PI&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">pi</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">3.142</span><span style="color: var(--shiki-color-text)">;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-9qkv43">Although at that point of time, most browser still does not support the syntax. So module bundler, like <a href="https://webpack.js.org" rel="nofollow">webpack</a> came into picture. <a href="https://webpack.js.org" rel="nofollow">webpack</a> transform the code with <code class="inline">import</code> and <code class="inline">export</code> syntax, by concatenating &quot;import&quot;ed modules, and link them together.</p> <p data-svelte-h="svelte-1er3sbw">Now, most <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#Applying_the_module_to_your_HTML" rel="nofollow">modern browsers have supported <code class="inline">&lt;script type=&quot;module&quot;&gt;</code></a>, which means, the <code class="inline">import</code> and <code class="inline">export</code> syntax is supported by default without needing any build tools.</p> <p data-svelte-h="svelte-80ssmj">Over the years, the JavaScript community have been trying to split JavaScript code into multiple files, and link them together with some module system, such as CommonJS and AMD. <a href="https://www.ecma-international.org/memento/tc39.htm" rel="nofollow">TC39</a> introduced <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" rel="nofollow">ES modules</a> in ES6 (ES2015) to offer an official module syntax in JavaScript, and before browsers supporting the ES modules syntax, we have to rely on build tools such as <a href="https://webpack.js.org" rel="nofollow">webpack</a>. Finally, modern browsers are now supporting <code class="inline">&lt;script type=&quot;module&quot;&gt;</code>, which means we can now use <code class="inline">import</code> and <code class="inline">export</code> in our JavaScript application without any configurations.</p></section> <section><h2 data-svelte-h="svelte-4psgi9"><a href="#scopability" id="scopability">Scopability</a></h2> <blockquote data-svelte-h="svelte-1cbrjnz"><p>The &quot;scope pollution&quot; problem.</p></blockquote> <p data-svelte-h="svelte-2pyhqj">There are 2 ways to look at the scope polution problem:</p> <ul data-svelte-h="svelte-1fevvcu"><li>2 modules are declaring into the same scope, which might have naming conflicts</li> <li>variables declared within a module is now &quot;public&quot; and available to other modules, which wasn&#39;t intended</li></ul> <p data-svelte-h="svelte-1kffjhs">In this aspect, there are 2 solutions in general for the problem, and I am going to bring out 2 different tools for each solution as an example.</p> <p data-svelte-h="svelte-1334wqt">Firstly, scope naming conflicts can be solved via <a href="https://en.wikipedia.org/wiki/Namespace" rel="nofollow">namespace</a>. If you read the compiled code from <a href="https://developers.google.com/closure/" rel="nofollow">Google Closure Tools</a>, you will find that the built-in libraries from Google Closure Tools are namespaced:</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-token-function)">.provide</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;tutorial.notepad&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-token-function)">.require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;goog.dom&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">tutorial</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">notepad</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">makeNotes</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(data) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">//...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">dom</span><span style="color: var(--shiki-token-function)">.appendChild</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.parent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> data);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-riy7lo"><em>Examples from &quot;Building an Application with the Closure Library&quot; tutorial</em></p> <p data-svelte-h="svelte-ayttk1">Compiled into:</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// goog.provide(&#39;tutorial.notepad&#39;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">tutorial </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> tutorial </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> &#123;&#125;;</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">tutorial</span><span style="color: var(--shiki-color-text)">.notepad </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tutorial</span><span style="color: var(--shiki-color-text)">.notepad </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> &#123;&#125;;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// goog.require(&#39;goog.dom&#39;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">goog </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> goog </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> &#123;&#125;;</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-color-text)">.dom </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-color-text)">.dom </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">() &#123; </span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-color-text)"> &#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">tutorial</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">notepad</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">makeNotes</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(data) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">//...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">dom</span><span style="color: var(--shiki-token-function)">.appendChild</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.parent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> data);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-3axzdj">All the code will get concatenated, and declared on the same scope, yet because it is namespace-d, you will have less chance of having a conflict.</p> <p data-svelte-h="svelte-17khhun">The other solution for the scope problem, is to wrap each module with a function to create a scope for each module. If you look at AMD&#39;s way of writing, you would end up into something like the following:</p> <div class="code-section"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">define</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;goog/dom&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">() &#123; </span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-color-text)"> &#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">define</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;tutorial/notepad&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;goog/dom&#39;</span><span style="color: var(--shiki-color-text)">]</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> (googDom) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">makeNotes</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(data) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">//...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">goog</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">dom</span><span style="color: var(--shiki-token-function)">.appendChild</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.parent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> data);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre><!-- HTML_TAG_END --></div> <p data-svelte-h="svelte-18i4qmd">You have modules wrapped into their own scope, and hence the only way for 2 modules to interact is through the module systems&#39; <code class="inline">import</code> and <code class="inline">export</code>.</p> <p data-svelte-h="svelte-160xk4y">In terms of &quot;scopeability&quot;, the solutions are namespace it or create a new function scope.</p> <p data-svelte-h="svelte-mw6xi">In fact, these are the 2 different ways module bundlers bundled JavaScript modules into 1 JavaScript file. (which I will explained them further in my future talk).</p></section> <section data-svelte-h="svelte-f0k64z"><h2><a href="#summary" id="summary">Summary</a></h2> <p>We&#39;ve seen how module system was introduced into JavaScript, and how different tools, standards, or syntax come about in solving the <strong>Installability</strong>, <strong>Scopability</strong> and <strong>Importability</strong> problem.</p></section> <section data-svelte-h="svelte-11r8lzt"><h2><a href="#further-readings" id="further-readings">Further Readings</a></h2> <ul><li><a href="https://arstechnica.com/information-technology/2009/12/commonjs-effort-sets-javascript-on-path-for-world-domination/" rel="nofollow">CommonJS effort sets javascript on path for world domination</a></li> <li><a href="https://addyosmani.com/writing-modular-js/" rel="nofollow">Writing Modular JavaScript With AMD, CommonJS &amp; ES Harmony</a></li> <li><a href="https://www.blueskyonmars.com/2009/01/29/what-server-side-javascript-needs/" rel="nofollow">What server side JavaScript needs</a></li> <li><a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" rel="nofollow">ES Modules: a cartoon deep dive</a></li></ul></section></article> <div style="height: 1px; width: 100%"></div> </main> <footer class="svelte-1x8iuzz"> </footer> 
			
			<script>
				{
					__sveltekit_afq9wf = {
						base: new URL(".", location).pathname.slice(0, -1),
						assets: "https://lihautan.com"
					};

					const element = document.currentScript.parentElement;

					const data = [null,null,null];

					Promise.all([
						import("https://lihautan.com/_app/immutable/entry/start.nOswNUmb.js"),
						import("https://lihautan.com/_app/immutable/entry/app.CwnX_Ycn.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 44],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
