function e(){}function a(e,a){for(const n in a)e[n]=a[n];return e}function n(e){return e()}function t(){return Object.create(null)}function s(e){e.forEach(n)}function o(e){return"function"==typeof e}function r(e,a){return e!=e?a==a:e!==a||e&&"object"==typeof e||"function"==typeof e}function c(e,n,t,s){return e[1]&&s?a(t.ctx.slice(),e[1](s(n))):t.ctx}function p(e,a,n,t,s,o,r){const p=function(e,a,n,t){if(e[2]&&t){const s=e[2](t(n));if(void 0===a.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(a.dirty.length,s.length);for(let t=0;t<n;t+=1)e[t]=a.dirty[t]|s[t];return e}return a.dirty|s}return a.dirty}(a,t,s,o);if(p){const s=c(a,n,t,r);e.p(s,p)}}function i(e,a){e.appendChild(a)}function l(e,a,n){e.insertBefore(a,n||null)}function u(e){e.parentNode.removeChild(e)}function h(e,a){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(a)}function d(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function k(){return m(" ")}function g(){return m("")}function w(e,a,n){null==n?e.removeAttribute(a):e.getAttribute(a)!==n&&e.setAttribute(a,n)}function v(e){return Array.from(e.childNodes)}function y(e,a,n,t){for(let t=0;t<e.length;t+=1){const s=e[t];if(s.nodeName===a){let a=0;const o=[];for(;a<s.attributes.length;){const e=s.attributes[a++];n[e.name]||o.push(e.name)}for(let e=0;e<o.length;e++)s.removeAttribute(o[e]);return e.splice(t,1)[0]}}return t?f(a):d(a)}function b(e,a){for(let n=0;n<e.length;n+=1){const t=e[n];if(3===t.nodeType)return t.data=""+a,e.splice(n,1)[0]}return m(a)}function E(e){return b(e," ")}function I(e,a){a=""+a,e.wholeText!==a&&(e.data=a)}function T(e,a){e.value=null==a?"":a}class A{constructor(e=null){this.a=e,this.e=this.n=null}m(e,a,n=null){this.e||(this.e=d(a.nodeName),this.t=a,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let a=0;a<this.n.length;a+=1)l(this.t,this.n[a],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(u)}}let x;function $(e){x=e}function j(e){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(e)}const P=[],O=[],C=[],S=[],_=Promise.resolve();let L=!1;function R(e){C.push(e)}let N=!1;const M=new Set;function D(){if(!N){N=!0;do{for(let e=0;e<P.length;e+=1){const a=P[e];$(a),H(a.$$)}for(P.length=0;O.length;)O.pop()();for(let e=0;e<C.length;e+=1){const a=C[e];M.has(a)||(M.add(a),a())}C.length=0}while(P.length);for(;S.length;)S.pop()();L=!1,N=!1,M.clear()}}function H(e){if(null!==e.fragment){e.update(),s(e.before_update);const a=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,a),e.after_update.forEach(R)}}const B=new Set;function q(e,a){e&&e.i&&(B.delete(e),e.i(a))}function F(e,a,n,t){if(e&&e.o){if(B.has(e))return;B.add(e),(void 0).c.push(()=>{B.delete(e),t&&(n&&e.d(1),t())}),e.o(a)}}function G(e){e&&e.c()}function U(e,a){e&&e.l(a)}function W(e,a,t){const{fragment:r,on_mount:c,on_destroy:p,after_update:i}=e.$$;r&&r.m(a,t),R(()=>{const a=c.map(n).filter(o);p?p.push(...a):s(a),e.$$.on_mount=[]}),i.forEach(R)}function z(e,a){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(a),n.on_destroy=n.fragment=null,n.ctx=[])}function V(e,a){-1===e.$$.dirty[0]&&(P.push(e),L||(L=!0,_.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[a/31|0]|=1<<a%31}function J(a,n,o,r,c,p,i=[-1]){const l=x;$(a);const h=n.props||{},d=a.$$={fragment:null,ctx:null,props:p,update:e,not_equal:c,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:t(),dirty:i};let f=!1;if(d.ctx=o?o(a,h,(e,n,...t)=>{const s=t.length?t[0]:n;return d.ctx&&c(d.ctx[e],d.ctx[e]=s)&&(d.bound[e]&&d.bound[e](s),f&&V(a,e)),n}):[],d.update(),f=!0,s(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const e=v(n.target);d.fragment&&d.fragment.l(e),e.forEach(u)}else d.fragment&&d.fragment.c();n.intro&&q(a.$$.fragment),W(a,n.target,n.anchor),D()}$(l)}class K{$destroy(){z(this,1),this.$destroy=e}$on(e,a){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(a),()=>{const e=n.indexOf(a);-1!==e&&n.splice(e,1)}}$set(){}}function Y(a){let n,t,s,o,r,c,p,h,g,I,T,A,x,$,j,P,O,C,S,_,L,R,N,M,D,H,B,q,F,G,U,W,z,V,J;return{c(){n=d("header"),t=d("nav"),s=d("ul"),o=d("li"),r=d("a"),c=m("Tan Li Hau"),p=k(),h=d("li"),g=d("a"),I=m("About"),T=k(),A=d("li"),x=d("a"),$=m("Writings"),j=k(),P=d("li"),O=d("a"),C=m("Talks"),S=k(),_=d("li"),L=d("a"),R=m("Notes"),N=k(),M=d("li"),D=d("a"),H=m("Newsletter"),B=k(),q=d("li"),F=d("a"),G=f("svg"),U=f("path"),W=k(),z=d("a"),V=f("svg"),J=f("path"),this.h()},l(e){n=y(e,"HEADER",{class:!0});var a=v(n);t=y(a,"NAV",{});var i=v(t);s=y(i,"UL",{class:!0});var l=v(s);o=y(l,"LI",{class:!0});var d=v(o);r=y(d,"A",{href:!0,class:!0});var f=v(r);c=b(f,"Tan Li Hau"),f.forEach(u),d.forEach(u),p=E(l),h=y(l,"LI",{class:!0});var m=v(h);g=y(m,"A",{href:!0,class:!0});var k=v(g);I=b(k,"About"),k.forEach(u),m.forEach(u),T=E(l),A=y(l,"LI",{class:!0});var w=v(A);x=y(w,"A",{href:!0,class:!0});var K=v(x);$=b(K,"Writings"),K.forEach(u),w.forEach(u),j=E(l),P=y(l,"LI",{class:!0});var Y=v(P);O=y(Y,"A",{href:!0,class:!0});var Q=v(O);C=b(Q,"Talks"),Q.forEach(u),Y.forEach(u),S=E(l),_=y(l,"LI",{class:!0});var Z=v(_);L=y(Z,"A",{href:!0,class:!0});var X=v(L);R=b(X,"Notes"),X.forEach(u),Z.forEach(u),N=E(l),M=y(l,"LI",{class:!0});var ee=v(M);D=y(ee,"A",{href:!0,class:!0});var ae=v(D);H=b(ae,"Newsletter"),ae.forEach(u),ee.forEach(u),B=E(l),q=y(l,"LI",{class:!0});var ne=v(q);F=y(ne,"A",{"aria-label":!0,href:!0,class:!0});var te=v(F);G=y(te,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var se=v(G);U=y(se,"path",{d:!0},1),v(U).forEach(u),se.forEach(u),te.forEach(u),W=E(ne),z=y(ne,"A",{"aria-label":!0,href:!0,class:!0});var oe=v(z);V=y(oe,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var re=v(V);J=y(re,"path",{d:!0},1),v(J).forEach(u),re.forEach(u),oe.forEach(u),ne.forEach(u),l.forEach(u),i.forEach(u),a.forEach(u),this.h()},h(){w(r,"href","/"),w(r,"class","svelte-f3e4uo"),w(o,"class","svelte-f3e4uo"),w(g,"href","/about"),w(g,"class","svelte-f3e4uo"),w(h,"class","svelte-f3e4uo"),w(x,"href","/blogs"),w(x,"class","svelte-f3e4uo"),w(A,"class","svelte-f3e4uo"),w(O,"href","/talks"),w(O,"class","svelte-f3e4uo"),w(P,"class","svelte-f3e4uo"),w(L,"href","/notes"),w(L,"class","svelte-f3e4uo"),w(_,"class","svelte-f3e4uo"),w(D,"href","/newsletter"),w(D,"class","svelte-f3e4uo"),w(M,"class","svelte-f3e4uo"),w(U,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),w(G,"viewBox","0 0 24 24"),w(G,"width","1em"),w(G,"height","1em"),w(G,"class","svelte-f3e4uo"),w(F,"aria-label","Twitter account"),w(F,"href","https://twitter.com/lihautan"),w(F,"class","svelte-f3e4uo"),w(J,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),w(V,"viewBox","0 0 24 24"),w(V,"width","1em"),w(V,"height","1em"),w(V,"class","svelte-f3e4uo"),w(z,"aria-label","Github account"),w(z,"href","https://github.com/tanhauhau"),w(z,"class","svelte-f3e4uo"),w(q,"class","social svelte-f3e4uo"),w(s,"class","svelte-f3e4uo"),w(n,"class","svelte-f3e4uo")},m(e,a){l(e,n,a),i(n,t),i(t,s),i(s,o),i(o,r),i(r,c),i(s,p),i(s,h),i(h,g),i(g,I),i(s,T),i(s,A),i(A,x),i(x,$),i(s,j),i(s,P),i(P,O),i(O,C),i(s,S),i(s,_),i(_,L),i(L,R),i(s,N),i(s,M),i(M,D),i(D,H),i(s,B),i(s,q),i(q,F),i(F,G),i(G,U),i(q,W),i(q,z),i(z,V),i(V,J)},p:e,i:e,o:e,d(e){e&&u(n)}}}class Q extends K{constructor(e){super(),J(this,e,null,Y,r,{})}}function Z(a){let n,t,s,o,r,c,p,h,f,g,I,A,x,$,j,P,O,C,S,_;return{c(){n=d("div"),t=d("h1"),s=m("Subscribe to my newsletter"),o=k(),r=d("h2"),c=m("Get the latest blog posts and project updates delivered right to your inbox"),p=k(),h=d("form"),f=d("div"),g=d("input"),I=k(),A=d("input"),$=k(),j=d("input"),P=k(),O=d("p"),C=m("Powered by Buttondown."),this.h()},l(e){n=y(e,"DIV",{class:!0});var a=v(n);t=y(a,"H1",{});var i=v(t);s=b(i,"Subscribe to my newsletter"),i.forEach(u),o=E(a),r=y(a,"H2",{class:!0});var l=v(r);c=b(l,"Get the latest blog posts and project updates delivered right to your inbox"),l.forEach(u),p=E(a),h=y(a,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var d=v(h);f=y(d,"DIV",{class:!0});var m=v(f);g=y(m,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),I=E(m),A=y(m,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),m.forEach(u),$=E(d),j=y(d,"INPUT",{type:!0,value:!0,name:!0,class:!0}),P=E(d),O=y(d,"P",{class:!0});var k=v(O);C=b(k,"Powered by Buttondown."),k.forEach(u),d.forEach(u),a.forEach(u),this.h()},h(){w(r,"class","svelte-1k1s1co"),w(g,"type","email"),w(g,"name","email"),w(g,"id","bd-email"),w(g,"aria-label","email address"),w(g,"placeholder","youremail@example.com"),w(g,"class","svelte-1k1s1co"),w(A,"type","submit"),A.value="Subscribe",A.disabled=x=!a[0],w(A,"class","svelte-1k1s1co"),w(f,"class","form-item svelte-1k1s1co"),w(j,"type","hidden"),j.value="1",w(j,"name","embed"),w(j,"class","svelte-1k1s1co"),w(O,"class","svelte-1k1s1co"),w(h,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),w(h,"method","post"),w(h,"target","popupwindow"),w(h,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),w(h,"class","embeddable-buttondown-form"),w(n,"class","form svelte-1k1s1co")},m(e,u){var d,m,k,w;l(e,n,u),i(n,t),i(t,s),i(n,o),i(n,r),i(r,c),i(n,p),i(n,h),i(h,f),i(f,g),T(g,a[0]),i(f,I),i(f,A),i(h,$),i(h,j),i(h,P),i(h,O),i(O,C),S||(d=g,m="input",k=a[1],d.addEventListener(m,k,w),_=()=>d.removeEventListener(m,k,w),S=!0)},p(e,[a]){1&a&&g.value!==e[0]&&T(g,e[0]),1&a&&x!==(x=!e[0])&&(A.disabled=x)},i:e,o:e,d(e){e&&u(n),S=!1,_()}}}function X(e,a,n){let t;return[t,function(){t=this.value,n(0,t)}]}class ee extends K{constructor(e){super(),J(this,e,X,Z,r,{})}}function ae(e){return j(()=>(setTimeout(()=>{if(window.innerWidth>1080){const e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",e.id="_carbonads_js",document.body.appendChild(e)}},5e3),()=>{try{const e=document.getElementById("carbonads");e.parentNode.removeChild(e)}catch(e){}})),[]}class ne extends K{constructor(e){super(),J(this,e,ae,null,r,{})}}var te="https://lihautan.com/debugging-build-failed-error-from-terser/assets/hero-twitter-3dd2a5b4.jpg";function se(e,a,n){const t=e.slice();return t[6]=a[n],t}function oe(e,a,n){const t=e.slice();return t[6]=a[n],t}function re(e){let a,n;return{c(){a=d("meta"),this.h()},l(e){a=y(e,"META",{name:!0,content:!0}),this.h()},h(){w(a,"name","keywords"),w(a,"content",n=e[6])},m(e,n){l(e,a,n)},p(e,t){4&t&&n!==(n=e[6])&&w(a,"content",n)},d(e){e&&u(a)}}}function ce(e){let a,n,t=e[6]+"";return{c(){a=d("span"),n=m(t),this.h()},l(e){a=y(e,"SPAN",{class:!0});var s=v(a);n=b(s,t),s.forEach(u),this.h()},h(){w(a,"class","svelte-9tqnza")},m(e,t){l(e,a,t),i(a,n)},p(e,a){4&a&&t!==(t=e[6]+"")&&I(n,t)},d(e){e&&u(a)}}}function pe(e){let a,n,t,s,o,r,f,T,x,$,j,P,O,C,S,_,L,R,N,M,D,H,B,V,J,K,Y,Z,X,ae,pe,ie,le,ue,he,de,fe,me,ke,ge=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`,we=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fdebugging-build-failed-error-from-terser",name:e[0]},position:2}]})}<\/script>`;document.title=a=e[0]+" | Tan Li Hau";let ve=e[2],ye=[];for(let a=0;a<ve.length;a+=1)ye[a]=re(oe(e,ve,a));B=new Q({});let be=e[2],Ee=[];for(let a=0;a<be.length;a+=1)Ee[a]=ce(se(e,be,a));const Ie=e[5].default,Te=function(e,a,n,t){if(e){const s=c(e,a,n,t);return e[0](s)}}(Ie,e,e[4],null);return le=new ee({}),he=new ne({}),{c(){n=d("meta"),t=d("meta"),s=d("meta"),o=d("meta"),r=d("meta"),f=d("meta"),T=d("meta"),x=d("meta"),$=d("meta"),j=d("meta"),P=d("meta");for(let e=0;e<ye.length;e+=1)ye[e].c();O=d("meta"),C=d("meta"),_=g(),R=g(),N=k(),M=d("a"),D=m("Skip to content"),H=k(),G(B.$$.fragment),V=k(),J=d("main"),K=d("h1"),Y=m(e[0]),Z=k();for(let e=0;e<Ee.length;e+=1)Ee[e].c();X=k(),ae=d("article"),Te&&Te.c(),pe=k(),ie=d("footer"),G(le.$$.fragment),ue=k(),G(he.$$.fragment),de=k(),me=g(),this.h()},l(a){const c=function(e,a=document.body){return Array.from(a.querySelectorAll(e))}('[data-svelte="svelte-n0q11s"]',document.head);n=y(c,"META",{name:!0,content:!0}),t=y(c,"META",{name:!0,content:!0}),s=y(c,"META",{name:!0,content:!0}),o=y(c,"META",{name:!0,content:!0}),r=y(c,"META",{name:!0,content:!0}),f=y(c,"META",{name:!0,content:!0}),T=y(c,"META",{name:!0,content:!0}),x=y(c,"META",{name:!0,content:!0}),$=y(c,"META",{name:!0,content:!0}),j=y(c,"META",{name:!0,content:!0}),P=y(c,"META",{name:!0,content:!0});for(let e=0;e<ye.length;e+=1)ye[e].l(c);O=y(c,"META",{itemprop:!0,content:!0}),C=y(c,"META",{itemprop:!0,content:!0}),_=g(),R=g(),c.forEach(u),N=E(a),M=y(a,"A",{href:!0,class:!0});var p=v(M);D=b(p,"Skip to content"),p.forEach(u),H=E(a),U(B.$$.fragment,a),V=E(a),J=y(a,"MAIN",{id:!0,class:!0});var i=v(J);K=y(i,"H1",{});var l=v(K);Y=b(l,e[0]),l.forEach(u),Z=E(i);for(let e=0;e<Ee.length;e+=1)Ee[e].l(i);X=E(i),ae=y(i,"ARTICLE",{});var h=v(ae);Te&&Te.l(h),h.forEach(u),i.forEach(u),pe=E(a),ie=y(a,"FOOTER",{class:!0});var d=v(ie);U(le.$$.fragment,d),ue=E(d),U(he.$$.fragment,d),d.forEach(u),de=E(a),me=g(),this.h()},h(){w(n,"name","description"),w(n,"content",e[1]),w(t,"name","image"),w(t,"content",te),w(s,"name","og:image"),w(s,"content",te),w(o,"name","og:title"),w(o,"content",e[0]),w(r,"name","og:description"),w(r,"content",e[1]),w(f,"name","og:type"),w(f,"content","website"),w(T,"name","twitter:card"),w(T,"content","summary_large_image"),w(x,"name","twitter:creator"),w(x,"content","@lihautan"),w($,"name","twitter:title"),w($,"content",e[0]),w(j,"name","twitter:description"),w(j,"content",e[1]),w(P,"name","twitter:image"),w(P,"content",te),w(O,"itemprop","url"),w(O,"content","https%3A%2F%2Flihautan.com%2Fdebugging-build-failed-error-from-terser"),w(C,"itemprop","image"),w(C,"content",te),S=new A(_),L=new A(R),w(M,"href","#content"),w(M,"class","skip svelte-9tqnza"),w(J,"id","content"),w(J,"class","blog svelte-9tqnza"),w(ie,"class","svelte-9tqnza"),fe=new A(me)},m(e,a){i(document.head,n),i(document.head,t),i(document.head,s),i(document.head,o),i(document.head,r),i(document.head,f),i(document.head,T),i(document.head,x),i(document.head,$),i(document.head,j),i(document.head,P);for(let e=0;e<ye.length;e+=1)ye[e].m(document.head,null);i(document.head,O),i(document.head,C),S.m(ge,document.head),i(document.head,_),L.m(we,document.head),i(document.head,R),l(e,N,a),l(e,M,a),i(M,D),l(e,H,a),W(B,e,a),l(e,V,a),l(e,J,a),i(J,K),i(K,Y),i(J,Z);for(let e=0;e<Ee.length;e+=1)Ee[e].m(J,null);i(J,X),i(J,ae),Te&&Te.m(ae,null),l(e,pe,a),l(e,ie,a),W(le,ie,null),i(ie,ue),W(he,ie,null),l(e,de,a),fe.m('<script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>',e,a),l(e,me,a),ke=!0},p(e,[t]){if((!ke||1&t)&&a!==(a=e[0]+" | Tan Li Hau")&&(document.title=a),(!ke||2&t)&&w(n,"content",e[1]),(!ke||1&t)&&w(o,"content",e[0]),(!ke||2&t)&&w(r,"content",e[1]),(!ke||1&t)&&w($,"content",e[0]),(!ke||2&t)&&w(j,"content",e[1]),4&t){let a;for(ve=e[2],a=0;a<ve.length;a+=1){const n=oe(e,ve,a);ye[a]?ye[a].p(n,t):(ye[a]=re(n),ye[a].c(),ye[a].m(O.parentNode,O))}for(;a<ye.length;a+=1)ye[a].d(1);ye.length=ve.length}if((!ke||3&t)&&ge!==(ge=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`)&&S.p(ge),(!ke||1&t)&&we!==(we=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fdebugging-build-failed-error-from-terser",name:e[0]},position:2}]})}<\/script>`)&&L.p(we),(!ke||1&t)&&I(Y,e[0]),4&t){let a;for(be=e[2],a=0;a<be.length;a+=1){const n=se(e,be,a);Ee[a]?Ee[a].p(n,t):(Ee[a]=ce(n),Ee[a].c(),Ee[a].m(J,X))}for(;a<Ee.length;a+=1)Ee[a].d(1);Ee.length=be.length}Te&&Te.p&&16&t&&p(Te,Ie,e,e[4],t,null,null)},i(e){ke||(q(B.$$.fragment,e),q(Te,e),q(le.$$.fragment,e),q(he.$$.fragment,e),ke=!0)},o(e){F(B.$$.fragment,e),F(Te,e),F(le.$$.fragment,e),F(he.$$.fragment,e),ke=!1},d(e){u(n),u(t),u(s),u(o),u(r),u(f),u(T),u(x),u($),u(j),u(P),h(ye,e),u(O),u(C),u(_),e&&S.d(),u(R),e&&L.d(),e&&u(N),e&&u(M),e&&u(H),z(B,e),e&&u(V),e&&u(J),h(Ee,e),Te&&Te.d(e),e&&u(pe),e&&u(ie),z(le),z(he),e&&u(de),e&&u(me),e&&fe.d()}}}function ie(e,a,n){let{title:t=""}=a,{description:s=""}=a,{tags:o=[]}=a;const r={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:p}=a;return e.$set=e=>{"title"in e&&n(0,t=e.title),"description"in e&&n(1,s=e.description),"tags"in e&&n(2,o=e.tags),"$$scope"in e&&n(4,p=e.$$scope)},[t,s,o,r,p,c]}class le extends K{constructor(e){super(),J(this,e,ie,pe,r,{title:0,description:1,tags:2})}}function ue(a){let n,t,s,o,r,c,p,h,f,g,I,T,A,x,$,j,P,O,C,S,_,L,R,N,M,D,H,B,q,F,G,U,W,z,V,J,K,Y,Q,Z,X,ee,ae,ne,te,se,oe,re,ce,pe,ie,le,ue,he,de,fe,me,ke,ge,we,ve,ye,be,Ee,Ie,Te,Ae,xe,$e,je,Pe,Oe,Ce,Se,_e,Le,Re,Ne,Me,De,He,Be,qe,Fe,Ge,Ue,We,ze,Ve,Je,Ke,Ye,Qe,Ze,Xe,ea,aa,na,ta,sa,oa,ra,ca,pa,ia,la,ua,ha,da,fa,ma,ka,ga,wa,va,ya,ba,Ea,Ia,Ta,Aa,xa,$a,ja,Pa,Oa,Ca,Sa,_a,La,Ra,Na,Ma,Da,Ha,Ba,qa,Fa,Ga,Ua,Wa,za,Va,Ja,Ka,Ya,Qa,Za,Xa,en,an,nn,tn,sn,on,rn,cn,pn,ln,un,hn,dn,fn,mn,kn,gn,wn,vn,yn,bn,En,In,Tn,An,xn,$n,jn,Pn,On,Cn,Sn,_n,Ln,Rn,Nn,Mn,Dn,Hn,Bn,qn,Fn,Gn,Un,Wn,zn,Vn,Jn,Kn,Yn,Qn,Zn,Xn,et,at,nt,tt,st,ot,rt,ct,pt,it,lt,ut,ht,dt,ft,mt,kt,gt,wt,vt,yt,bt,Et,It,Tt,At,xt,$t,jt,Pt,Ot,Ct,St,_t,Lt,Rt,Nt,Mt,Dt,Ht,Bt,qt,Ft,Gt,Ut,Wt,zt,Vt,Jt,Kt,Yt,Qt,Zt,Xt,es,as,ns,ts,ss,os,rs,cs,ps,is,ls,us,hs,ds,fs,ms,ks,gs,ws,vs,ys,bs,Es,Is,Ts,As,xs,$s,js,Ps,Os,Cs,Ss,_s,Ls,Rs,Ns,Ms,Ds,Hs,Bs,qs,Fs,Gs,Us,Ws,zs,Vs,Js,Ks,Ys,Qs,Zs,Xs,eo,ao,no,to,so,oo,ro,co,po,io,lo,uo,ho,fo,mo,ko,go,wo,vo,yo,bo,Eo,Io,To,Ao,xo,$o,jo,Po,Oo,Co,So,_o,Lo,Ro,No,Mo,Do,Ho,Bo,qo,Fo,Go,Uo,Wo,zo,Vo,Jo,Ko,Yo,Qo,Zo,Xo,er,ar,nr,tr;return{c(){n=d("section"),t=d("ul"),s=d("li"),o=d("a"),r=m("Act I - The First Attempt"),c=d("li"),p=d("a"),h=m("Act II - terser-webpack-plugin"),f=d("li"),g=d("a"),I=m("Act III - Terser"),T=d("li"),A=d("a"),x=m("Final Act - The Resolution"),$=d("li"),j=d("a"),P=m("Closing Note"),O=k(),C=d("p"),S=m("The following is a record of the steps I went through when debugging a build-time bug I encountered during work."),_=k(),L=d("p"),R=m("It all started with an error message during the build."),N=k(),M=d("pre"),D=k(),H=d("p"),B=m("What is wrong with Terser and our code?"),q=k(),F=d("p"),G=d("strong"),U=m("I must find the root cause of this!"),W=k(),z=d("section"),V=d("h2"),J=d("a"),K=m("Act I - The First Attempt"),Y=k(),Q=d("p"),Z=m("We used Terser to minify our build code. It was part of our webpack pipeline, installed through "),X=d("code"),ee=m("terser-webpack-plugin"),ae=m(". Since terser is throwing an error, so I disabled "),ne=d("code"),te=m("terser-webpack-plugin"),se=m(" and build again."),oe=k(),re=d("pre"),ce=k(),pe=d("p"),ie=m("Ok. The build was successful. Nothing wrong with the code nor the build."),le=k(),ue=d("p"),he=m("So, I run the terser manually:"),de=k(),fe=d("pre"),me=k(),ke=d("p"),ge=m("The console output an error that was cryptic"),we=k(),ve=d("pre"),ye=k(),be=d("p"),Ee=m("I clicked into the terser source code to see what was going wrong over there. "),Ie=d("em"),Te=m("(Maybe it's my chance to contribute to terser?)"),Ae=k(),xe=d("p"),$e=m("Little did I know, how wrong I could be."),je=k(),Pe=d("p"),Oe=d("code"),Ce=m("terser/dist/bundle.js"),Se=m(" was a minified code and it wasn't meant for humans eyes üò≠"),_e=k(),Le=d("p"),Re=m("Allow me to share a small snippet of what I saw:"),Ne=k(),Me=d("pre"),De=k(),He=d("p"),Be=m("At this point in time, I had another meeting to attend, so I stopped at this juncture."),qe=k(),Fe=d("p"),Ge=m("On my way there, I was thinking, well, maybe I should probe this later in another direction."),Ue=k(),We=d("section"),ze=d("h2"),Ve=d("a"),Je=m("Act II - terser-webpack-plugin"),Ke=k(),Ye=d("p"),Qe=m("After the meeting, I was thinking, well let me reenable the terser plugin, and try to probe through the plugin."),Ze=k(),Xe=d("p"),ea=m("Remember the error message: "),aa=d("code"),na=m('"ERROR in bundle.xxxx.js from Terser"'),ta=m(" ?"),sa=k(),oa=d("p"),ra=m("I looked into the "),ca=d("code"),pa=m("node_modules/terser-webpack/plugin/dist/index.js"),ia=m(" and search for the word "),la=d("code"),ua=m('"from Terser"'),ha=m("."),da=k(),fa=d("p"),ma=d("strong"),ka=m("Tip:"),ga=m(" Usually when you want to debug a library installed in "),wa=d("code"),va=m("node_modules"),ya=m(", you can first look at the "),ba=d("code"),Ea=m("package.json"),Ia=m(", it usually has an entry called "),Ta=d("code"),Aa=m('"main"'),xa=m(" that tells you the entry file to first look into. The main file usually exports all the public API that you use, so it is a good place to start diving into."),$a=k(),ja=d("p"),Pa=m("So I found the line:"),Oa=k(),Ca=d("pre"),Sa=k(),_a=d("p"),La=m("After adding logs "),Ra=d("code"),Na=m("console.log(err)"),Ma=m(" and run the build again, I realised the err is an empty object "),Da=d("code"),Ha=m("{}"),Ba=m(", which explained why I saw "),qa=d("code"),Fa=m("undefined"),Ga=m(" after the "),Ua=d("code"),Wa=m("ERROR in ... from Terser"),za=m("."),Va=k(),Ja=d("p"),Ka=m("So, I slowly traced back the caller, and find out where this "),Ya=d("code"),Qa=m("err"),Za=m(" object was initially created."),Xa=k(),en=d("p"),an=d("strong"),nn=m("Tip:"),tn=m(" To trace the callers of a function that leads up to a certain state of your application, you can:"),sn=k(),on=d("ul"),rn=d("li"),cn=m("Use a "),pn=d("a"),ln=m("conditional breakpoint"),un=m(" if you are debugging through a debugger"),hn=k(),dn=d("li"),fn=m("Throw an error within a try catch"),mn=k(),kn=d("pre"),gn=k(),wn=d("p"),vn=m("This is especially useful if you are tracing an unfamiliar code, you can quickly get a call stack that leads up to the current condition."),yn=k(),bn=d("p"),En=m("After tracing through the call stack, I ended up at the line where the "),In=d("code"),Tn=m("terser-webpack-plugin"),An=m(" calls the terser, and when I logged out the error, it shows:"),xn=k(),$n=d("pre"),jn=k(),Pn=d("p"),On=m("So familiar! After an hour of tracing and debugging, I ended up at the same place."),Cn=k(),Sn=d("p"),_n=d("strong"),Ln=m("Note:"),Rn=m(" the error must have lost somewhere from the terser to the actual print out of "),Nn=d("code"),Mn=m("terser-webpack-plugin"),Dn=m(", it might have fixed in a later version of "),Hn=d("code"),Bn=m("terser-webpack-plugin"),qn=m(", but I'm not sure of it yet. Anyone interested can help check."),Fn=k(),Gn=d("section"),Un=d("h2"),Wn=d("a"),zn=m("Act III - Terser"),Vn=k(),Jn=d("p"),Kn=m("The circumstances left me with no choice. I needed to face the cryptic minified code."),Yn=k(),Qn=d("p"),Zn=m("Luckily VSCode still able to open the huge minified file, and able to set the cursor to the right line and column:"),Xn=k(),et=d("pre"),at=k(),nt=d("p"),tt=m("(By the way, in the minified code, all the code is in one line. ü§¶‚Äç‚ôÇÔ∏è)"),st=k(),ot=d("p"),rt=m("Well, this may seem like the right place to throw the "),ct=d("code"),pt=m("\"Cannot read property 'name' of undefined\""),it=m(" error."),lt=k(),ut=d("p"),ht=m("To understand what is going on in this line, I cloned "),dt=d("a"),ft=m("terser"),mt=m(", checked out to the version tag that was installed in our codebase, and tried to figure out where that line was in the original code."),kt=k(),gt=d("p"),wt=d("strong"),vt=m("Tip:"),yt=m(" String, property and method names are usually the best marker to trace a "),bt=d("a"),Et=m("mangled code"),It=m(". Even though all the variables have mangled into a single character variable name, you can still clearly see the method "),Tt=d("code"),At=m("has_directive()"),xt=m(" and the string "),$t=d("code"),jt=m('"use strict"'),Pt=m("."),Ot=k(),Ct=d("p"),St=m("Conversely, please don't write long windy property / method names, it doesn't mangle well."),_t=k(),Lt=d("p"),Rt=m("So I global searched the keyword "),Nt=d("code"),Mt=m('has_directive("use strict")'),Dt=m(" and landed with a small number of results, which I looked through every one of them and ended up with the following line:"),Ht=k(),Bt=d("pre"),qt=k(),Ft=d("p"),Gt=m("Which I was and still am clueless of what this code was trying to do."),Ut=k(),Wt=d("p"),zt=m("So I did the most reasonable thing, add a "),Vt=d("code"),Jt=m("console.log(node)"),Kt=m("."),Yt=k(),Qt=d("pre"),Zt=k(),Xt=d("p"),es=m("I found out that the "),as=d("code"),ns=m("node"),ts=m(" is an object, that does not have a property "),ss=d("code"),os=m("key"),rs=m(", which explains the error. And "),cs=d("code"),ps=m("node"),is=m(" has a property call "),ls=d("code"),us=m("name"),hs=m(" that has a value "),ds=d("code"),fs=m('"foobar"'),ms=m(", which I assumed is a variable name in our codebase. Luckily "),ks=d("code"),gs=m("foobar"),ws=m(" wasn't commonly used in our codebase, and I managed to find only 1 instance of it, and astonishingly, the code was last changed 1 year ago!"),vs=k(),ys=d("p"),bs=m("So Terser just decided to break, without a sign, on a line of code that was written 1 year ago. This is the life of a programmer."),Es=k(),Is=d("section"),Ts=d("h2"),As=d("a"),xs=m("Final Act - The Resolution"),$s=k(),js=d("p"),Ps=m("I kind of concluded that the root cause was a Terser bug, (because I can't just change the code that wasn't touched for nearly 1 year for no good reason), so the obvious thing to do next was to figured out whether someone fixed it on Terser upstream."),Os=k(),Cs=d("p"),Ss=m("So, I checked out the master branch of Terser, found out the code has changed to"),_s=k(),Ls=d("pre"),Rs=k(),Ns=d("p"),Ms=d("code"),Ds=m("node.key"),Hs=m(" is checked to be existed before checking "),Bs=d("code"),qs=m("node.key.name"),Fs=m(". What a simple patch!"),Gs=k(),Us=d("p"),Ws=m("The next thing I needed to figure out was when was this fix landed, whether I can upgrade it."),zs=k(),Vs=d("p"),Js=m("The Terser in the codebase was one major version behind the latest Terser version, so, I was more reserved to upgrade to the latest version."),Ks=k(),Ys=d("p"),Qs=m("The git blame for the line of code was for some code refactoring, so I went to Github to trace the blame."),Zs=k(),Xs=d("p"),eo=d("strong"),ao=m("Tip:"),no=m(" Github blame has this very useful button, that allows you to view blame prior to the change."),to=k(),so=d("p"),oo=d("picture"),ro=d("source"),co=d("source"),po=d("img"),lo=k(),uo=d("p"),ho=m("A few blame traces later, I ended up with a commit that fixed the bug:"),fo=k(),mo=d("blockquote"),ko=d("p"),go=d("a"),wo=m("fix node.key crashing lib/compress by hytromo ¬∑ Pull Request #286 ¬∑ terser/terser"),vo=k(),yo=d("p"),bo=m("By looking at the MR merged date, I found that the commit was landed in between "),Eo=d("a"),Io=m("v3.16.0 and v3.17.0"),To=m("."),Ao=k(),xo=d("p"),$o=m("v3.17.0 was a minor version bump for our codebase, so I assumed it has no breaking changes."),jo=k(),Po=d("p"),Oo=d("code"),Co=m("terser"),So=m(" was installed as a dependency of "),_o=d("code"),Lo=m("terser-webpack-plugin"),Ro=m(", which we had no control on the terser version, so I added a resolution to our "),No=d("code"),Mo=m("package.json"),Do=m(":"),Ho=k(),Bo=d("pre"),qo=k(),Fo=d("p"),Go=m("After I upgraded terser, I build the code again."),Uo=k(),Wo=d("p"),zo=m("The build was successful! üéâ"),Vo=k(),Jo=d("section"),Ko=d("h2"),Yo=d("a"),Qo=m("Closing Note"),Zo=k(),Xo=d("p"),er=m("As I was explaining all these to my colleague, I realised that should I upgraded the terser once I found out that it was a terser error, it would have fixed the bug as well. I wouldn't need to go through all these to end up in the same fix."),ar=k(),nr=d("p"),tr=m("Oh well. ü§∑‚Äç‚ôÇÔ∏è"),this.h()},l(e){n=y(e,"SECTION",{});var a=v(n);t=y(a,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var i=v(t);s=y(i,"LI",{});var l=v(s);o=y(l,"A",{href:!0});var d=v(o);r=b(d,"Act I - The First Attempt"),d.forEach(u),l.forEach(u),c=y(i,"LI",{});var m=v(c);p=y(m,"A",{href:!0});var k=v(p);h=b(k,"Act II - terser-webpack-plugin"),k.forEach(u),m.forEach(u),f=y(i,"LI",{});var w=v(f);g=y(w,"A",{href:!0});var io=v(g);I=b(io,"Act III - Terser"),io.forEach(u),w.forEach(u),T=y(i,"LI",{});var sr=v(T);A=y(sr,"A",{href:!0});var or=v(A);x=b(or,"Final Act - The Resolution"),or.forEach(u),sr.forEach(u),$=y(i,"LI",{});var rr=v($);j=y(rr,"A",{href:!0});var cr=v(j);P=b(cr,"Closing Note"),cr.forEach(u),rr.forEach(u),i.forEach(u),a.forEach(u),O=E(e),C=y(e,"P",{});var pr=v(C);S=b(pr,"The following is a record of the steps I went through when debugging a build-time bug I encountered during work."),pr.forEach(u),_=E(e),L=y(e,"P",{});var ir=v(L);R=b(ir,"It all started with an error message during the build."),ir.forEach(u),N=E(e),M=y(e,"PRE",{class:!0}),v(M).forEach(u),D=E(e),H=y(e,"P",{});var lr=v(H);B=b(lr,"What is wrong with Terser and our code?"),lr.forEach(u),q=E(e),F=y(e,"P",{});var ur=v(F);G=y(ur,"STRONG",{});var hr=v(G);U=b(hr,"I must find the root cause of this!"),hr.forEach(u),ur.forEach(u),W=E(e),z=y(e,"SECTION",{});var dr=v(z);V=y(dr,"H2",{});var fr=v(V);J=y(fr,"A",{href:!0,id:!0});var mr=v(J);K=b(mr,"Act I - The First Attempt"),mr.forEach(u),fr.forEach(u),Y=E(dr),Q=y(dr,"P",{});var kr=v(Q);Z=b(kr,"We used Terser to minify our build code. It was part of our webpack pipeline, installed through "),X=y(kr,"CODE",{});var gr=v(X);ee=b(gr,"terser-webpack-plugin"),gr.forEach(u),ae=b(kr,". Since terser is throwing an error, so I disabled "),ne=y(kr,"CODE",{});var wr=v(ne);te=b(wr,"terser-webpack-plugin"),wr.forEach(u),se=b(kr," and build again."),kr.forEach(u),oe=E(dr),re=y(dr,"PRE",{class:!0}),v(re).forEach(u),ce=E(dr),pe=y(dr,"P",{});var vr=v(pe);ie=b(vr,"Ok. The build was successful. Nothing wrong with the code nor the build."),vr.forEach(u),le=E(dr),ue=y(dr,"P",{});var yr=v(ue);he=b(yr,"So, I run the terser manually:"),yr.forEach(u),de=E(dr),fe=y(dr,"PRE",{class:!0}),v(fe).forEach(u),me=E(dr),ke=y(dr,"P",{});var br=v(ke);ge=b(br,"The console output an error that was cryptic"),br.forEach(u),we=E(dr),ve=y(dr,"PRE",{class:!0}),v(ve).forEach(u),ye=E(dr),be=y(dr,"P",{});var Er=v(be);Ee=b(Er,"I clicked into the terser source code to see what was going wrong over there. "),Ie=y(Er,"EM",{});var Ir=v(Ie);Te=b(Ir,"(Maybe it's my chance to contribute to terser?)"),Ir.forEach(u),Er.forEach(u),Ae=E(dr),xe=y(dr,"P",{});var Tr=v(xe);$e=b(Tr,"Little did I know, how wrong I could be."),Tr.forEach(u),je=E(dr),Pe=y(dr,"P",{});var Ar=v(Pe);Oe=y(Ar,"CODE",{});var xr=v(Oe);Ce=b(xr,"terser/dist/bundle.js"),xr.forEach(u),Se=b(Ar," was a minified code and it wasn't meant for humans eyes üò≠"),Ar.forEach(u),_e=E(dr),Le=y(dr,"P",{});var $r=v(Le);Re=b($r,"Allow me to share a small snippet of what I saw:"),$r.forEach(u),Ne=E(dr),Me=y(dr,"PRE",{class:!0}),v(Me).forEach(u),De=E(dr),He=y(dr,"P",{});var jr=v(He);Be=b(jr,"At this point in time, I had another meeting to attend, so I stopped at this juncture."),jr.forEach(u),qe=E(dr),Fe=y(dr,"P",{});var Pr=v(Fe);Ge=b(Pr,"On my way there, I was thinking, well, maybe I should probe this later in another direction."),Pr.forEach(u),dr.forEach(u),Ue=E(e),We=y(e,"SECTION",{});var Or=v(We);ze=y(Or,"H2",{});var Cr=v(ze);Ve=y(Cr,"A",{href:!0,id:!0});var Sr=v(Ve);Je=b(Sr,"Act II - terser-webpack-plugin"),Sr.forEach(u),Cr.forEach(u),Ke=E(Or),Ye=y(Or,"P",{});var _r=v(Ye);Qe=b(_r,"After the meeting, I was thinking, well let me reenable the terser plugin, and try to probe through the plugin."),_r.forEach(u),Ze=E(Or),Xe=y(Or,"P",{});var Lr=v(Xe);ea=b(Lr,"Remember the error message: "),aa=y(Lr,"CODE",{});var Rr=v(aa);na=b(Rr,'"ERROR in bundle.xxxx.js from Terser"'),Rr.forEach(u),ta=b(Lr," ?"),Lr.forEach(u),sa=E(Or),oa=y(Or,"P",{});var Nr=v(oa);ra=b(Nr,"I looked into the "),ca=y(Nr,"CODE",{});var Mr=v(ca);pa=b(Mr,"node_modules/terser-webpack/plugin/dist/index.js"),Mr.forEach(u),ia=b(Nr," and search for the word "),la=y(Nr,"CODE",{});var Dr=v(la);ua=b(Dr,'"from Terser"'),Dr.forEach(u),ha=b(Nr,"."),Nr.forEach(u),da=E(Or),fa=y(Or,"P",{});var Hr=v(fa);ma=y(Hr,"STRONG",{});var Br=v(ma);ka=b(Br,"Tip:"),Br.forEach(u),ga=b(Hr," Usually when you want to debug a library installed in "),wa=y(Hr,"CODE",{});var qr=v(wa);va=b(qr,"node_modules"),qr.forEach(u),ya=b(Hr,", you can first look at the "),ba=y(Hr,"CODE",{});var Fr=v(ba);Ea=b(Fr,"package.json"),Fr.forEach(u),Ia=b(Hr,", it usually has an entry called "),Ta=y(Hr,"CODE",{});var Gr=v(Ta);Aa=b(Gr,'"main"'),Gr.forEach(u),xa=b(Hr," that tells you the entry file to first look into. The main file usually exports all the public API that you use, so it is a good place to start diving into."),Hr.forEach(u),$a=E(Or),ja=y(Or,"P",{});var Ur=v(ja);Pa=b(Ur,"So I found the line:"),Ur.forEach(u),Oa=E(Or),Ca=y(Or,"PRE",{class:!0}),v(Ca).forEach(u),Sa=E(Or),_a=y(Or,"P",{});var Wr=v(_a);La=b(Wr,"After adding logs "),Ra=y(Wr,"CODE",{});var zr=v(Ra);Na=b(zr,"console.log(err)"),zr.forEach(u),Ma=b(Wr," and run the build again, I realised the err is an empty object "),Da=y(Wr,"CODE",{});var Vr=v(Da);Ha=b(Vr,"{}"),Vr.forEach(u),Ba=b(Wr,", which explained why I saw "),qa=y(Wr,"CODE",{});var Jr=v(qa);Fa=b(Jr,"undefined"),Jr.forEach(u),Ga=b(Wr," after the "),Ua=y(Wr,"CODE",{});var Kr=v(Ua);Wa=b(Kr,"ERROR in ... from Terser"),Kr.forEach(u),za=b(Wr,"."),Wr.forEach(u),Va=E(Or),Ja=y(Or,"P",{});var Yr=v(Ja);Ka=b(Yr,"So, I slowly traced back the caller, and find out where this "),Ya=y(Yr,"CODE",{});var Qr=v(Ya);Qa=b(Qr,"err"),Qr.forEach(u),Za=b(Yr," object was initially created."),Yr.forEach(u),Xa=E(Or),en=y(Or,"P",{});var Zr=v(en);an=y(Zr,"STRONG",{});var Xr=v(an);nn=b(Xr,"Tip:"),Xr.forEach(u),tn=b(Zr," To trace the callers of a function that leads up to a certain state of your application, you can:"),Zr.forEach(u),sn=E(Or),on=y(Or,"UL",{});var ec=v(on);rn=y(ec,"LI",{});var ac=v(rn);cn=b(ac,"Use a "),pn=y(ac,"A",{href:!0,rel:!0});var nc=v(pn);ln=b(nc,"conditional breakpoint"),nc.forEach(u),un=b(ac," if you are debugging through a debugger"),ac.forEach(u),hn=E(ec),dn=y(ec,"LI",{});var tc=v(dn);fn=b(tc,"Throw an error within a try catch"),tc.forEach(u),ec.forEach(u),mn=E(Or),kn=y(Or,"PRE",{class:!0}),v(kn).forEach(u),gn=E(Or),wn=y(Or,"P",{});var sc=v(wn);vn=b(sc,"This is especially useful if you are tracing an unfamiliar code, you can quickly get a call stack that leads up to the current condition."),sc.forEach(u),yn=E(Or),bn=y(Or,"P",{});var oc=v(bn);En=b(oc,"After tracing through the call stack, I ended up at the line where the "),In=y(oc,"CODE",{});var rc=v(In);Tn=b(rc,"terser-webpack-plugin"),rc.forEach(u),An=b(oc," calls the terser, and when I logged out the error, it shows:"),oc.forEach(u),xn=E(Or),$n=y(Or,"PRE",{class:!0}),v($n).forEach(u),jn=E(Or),Pn=y(Or,"P",{});var cc=v(Pn);On=b(cc,"So familiar! After an hour of tracing and debugging, I ended up at the same place."),cc.forEach(u),Cn=E(Or),Sn=y(Or,"P",{});var pc=v(Sn);_n=y(pc,"STRONG",{});var ic=v(_n);Ln=b(ic,"Note:"),ic.forEach(u),Rn=b(pc," the error must have lost somewhere from the terser to the actual print out of "),Nn=y(pc,"CODE",{});var lc=v(Nn);Mn=b(lc,"terser-webpack-plugin"),lc.forEach(u),Dn=b(pc,", it might have fixed in a later version of "),Hn=y(pc,"CODE",{});var uc=v(Hn);Bn=b(uc,"terser-webpack-plugin"),uc.forEach(u),qn=b(pc,", but I'm not sure of it yet. Anyone interested can help check."),pc.forEach(u),Or.forEach(u),Fn=E(e),Gn=y(e,"SECTION",{});var hc=v(Gn);Un=y(hc,"H2",{});var dc=v(Un);Wn=y(dc,"A",{href:!0,id:!0});var fc=v(Wn);zn=b(fc,"Act III - Terser"),fc.forEach(u),dc.forEach(u),Vn=E(hc),Jn=y(hc,"P",{});var mc=v(Jn);Kn=b(mc,"The circumstances left me with no choice. I needed to face the cryptic minified code."),mc.forEach(u),Yn=E(hc),Qn=y(hc,"P",{});var kc=v(Qn);Zn=b(kc,"Luckily VSCode still able to open the huge minified file, and able to set the cursor to the right line and column:"),kc.forEach(u),Xn=E(hc),et=y(hc,"PRE",{class:!0}),v(et).forEach(u),at=E(hc),nt=y(hc,"P",{});var gc=v(nt);tt=b(gc,"(By the way, in the minified code, all the code is in one line. ü§¶‚Äç‚ôÇÔ∏è)"),gc.forEach(u),st=E(hc),ot=y(hc,"P",{});var wc=v(ot);rt=b(wc,"Well, this may seem like the right place to throw the "),ct=y(wc,"CODE",{});var vc=v(ct);pt=b(vc,"\"Cannot read property 'name' of undefined\""),vc.forEach(u),it=b(wc," error."),wc.forEach(u),lt=E(hc),ut=y(hc,"P",{});var yc=v(ut);ht=b(yc,"To understand what is going on in this line, I cloned "),dt=y(yc,"A",{href:!0,rel:!0});var bc=v(dt);ft=b(bc,"terser"),bc.forEach(u),mt=b(yc,", checked out to the version tag that was installed in our codebase, and tried to figure out where that line was in the original code."),yc.forEach(u),kt=E(hc),gt=y(hc,"P",{});var Ec=v(gt);wt=y(Ec,"STRONG",{});var Ic=v(wt);vt=b(Ic,"Tip:"),Ic.forEach(u),yt=b(Ec," String, property and method names are usually the best marker to trace a "),bt=y(Ec,"A",{href:!0,rel:!0});var Tc=v(bt);Et=b(Tc,"mangled code"),Tc.forEach(u),It=b(Ec,". Even though all the variables have mangled into a single character variable name, you can still clearly see the method "),Tt=y(Ec,"CODE",{});var Ac=v(Tt);At=b(Ac,"has_directive()"),Ac.forEach(u),xt=b(Ec," and the string "),$t=y(Ec,"CODE",{});var xc=v($t);jt=b(xc,'"use strict"'),xc.forEach(u),Pt=b(Ec,"."),Ec.forEach(u),Ot=E(hc),Ct=y(hc,"P",{});var $c=v(Ct);St=b($c,"Conversely, please don't write long windy property / method names, it doesn't mangle well."),$c.forEach(u),_t=E(hc),Lt=y(hc,"P",{});var jc=v(Lt);Rt=b(jc,"So I global searched the keyword "),Nt=y(jc,"CODE",{});var Pc=v(Nt);Mt=b(Pc,'has_directive("use strict")'),Pc.forEach(u),Dt=b(jc," and landed with a small number of results, which I looked through every one of them and ended up with the following line:"),jc.forEach(u),Ht=E(hc),Bt=y(hc,"PRE",{class:!0}),v(Bt).forEach(u),qt=E(hc),Ft=y(hc,"P",{});var Oc=v(Ft);Gt=b(Oc,"Which I was and still am clueless of what this code was trying to do."),Oc.forEach(u),Ut=E(hc),Wt=y(hc,"P",{});var Cc=v(Wt);zt=b(Cc,"So I did the most reasonable thing, add a "),Vt=y(Cc,"CODE",{});var Sc=v(Vt);Jt=b(Sc,"console.log(node)"),Sc.forEach(u),Kt=b(Cc,"."),Cc.forEach(u),Yt=E(hc),Qt=y(hc,"PRE",{class:!0}),v(Qt).forEach(u),Zt=E(hc),Xt=y(hc,"P",{});var _c=v(Xt);es=b(_c,"I found out that the "),as=y(_c,"CODE",{});var Lc=v(as);ns=b(Lc,"node"),Lc.forEach(u),ts=b(_c," is an object, that does not have a property "),ss=y(_c,"CODE",{});var Rc=v(ss);os=b(Rc,"key"),Rc.forEach(u),rs=b(_c,", which explains the error. And "),cs=y(_c,"CODE",{});var Nc=v(cs);ps=b(Nc,"node"),Nc.forEach(u),is=b(_c," has a property call "),ls=y(_c,"CODE",{});var Mc=v(ls);us=b(Mc,"name"),Mc.forEach(u),hs=b(_c," that has a value "),ds=y(_c,"CODE",{});var Dc=v(ds);fs=b(Dc,'"foobar"'),Dc.forEach(u),ms=b(_c,", which I assumed is a variable name in our codebase. Luckily "),ks=y(_c,"CODE",{});var Hc=v(ks);gs=b(Hc,"foobar"),Hc.forEach(u),ws=b(_c," wasn't commonly used in our codebase, and I managed to find only 1 instance of it, and astonishingly, the code was last changed 1 year ago!"),_c.forEach(u),vs=E(hc),ys=y(hc,"P",{});var Bc=v(ys);bs=b(Bc,"So Terser just decided to break, without a sign, on a line of code that was written 1 year ago. This is the life of a programmer."),Bc.forEach(u),hc.forEach(u),Es=E(e),Is=y(e,"SECTION",{});var qc=v(Is);Ts=y(qc,"H2",{});var Fc=v(Ts);As=y(Fc,"A",{href:!0,id:!0});var Gc=v(As);xs=b(Gc,"Final Act - The Resolution"),Gc.forEach(u),Fc.forEach(u),$s=E(qc),js=y(qc,"P",{});var Uc=v(js);Ps=b(Uc,"I kind of concluded that the root cause was a Terser bug, (because I can't just change the code that wasn't touched for nearly 1 year for no good reason), so the obvious thing to do next was to figured out whether someone fixed it on Terser upstream."),Uc.forEach(u),Os=E(qc),Cs=y(qc,"P",{});var Wc=v(Cs);Ss=b(Wc,"So, I checked out the master branch of Terser, found out the code has changed to"),Wc.forEach(u),_s=E(qc),Ls=y(qc,"PRE",{class:!0}),v(Ls).forEach(u),Rs=E(qc),Ns=y(qc,"P",{});var zc=v(Ns);Ms=y(zc,"CODE",{});var Vc=v(Ms);Ds=b(Vc,"node.key"),Vc.forEach(u),Hs=b(zc," is checked to be existed before checking "),Bs=y(zc,"CODE",{});var Jc=v(Bs);qs=b(Jc,"node.key.name"),Jc.forEach(u),Fs=b(zc,". What a simple patch!"),zc.forEach(u),Gs=E(qc),Us=y(qc,"P",{});var Kc=v(Us);Ws=b(Kc,"The next thing I needed to figure out was when was this fix landed, whether I can upgrade it."),Kc.forEach(u),zs=E(qc),Vs=y(qc,"P",{});var Yc=v(Vs);Js=b(Yc,"The Terser in the codebase was one major version behind the latest Terser version, so, I was more reserved to upgrade to the latest version."),Yc.forEach(u),Ks=E(qc),Ys=y(qc,"P",{});var Qc=v(Ys);Qs=b(Qc,"The git blame for the line of code was for some code refactoring, so I went to Github to trace the blame."),Qc.forEach(u),Zs=E(qc),Xs=y(qc,"P",{});var Zc=v(Xs);eo=y(Zc,"STRONG",{});var Xc=v(eo);ao=b(Xc,"Tip:"),Xc.forEach(u),no=b(Zc," Github blame has this very useful button, that allows you to view blame prior to the change."),Zc.forEach(u),to=E(qc),so=y(qc,"P",{});var ep=v(so);oo=y(ep,"PICTURE",{});var ap=v(oo);ro=y(ap,"SOURCE",{type:!0,srcset:!0}),co=y(ap,"SOURCE",{type:!0,srcset:!0}),po=y(ap,"IMG",{alt:!0,src:!0}),ap.forEach(u),ep.forEach(u),lo=E(qc),uo=y(qc,"P",{});var np=v(uo);ho=b(np,"A few blame traces later, I ended up with a commit that fixed the bug:"),np.forEach(u),fo=E(qc),mo=y(qc,"BLOCKQUOTE",{});var tp=v(mo);ko=y(tp,"P",{});var sp=v(ko);go=y(sp,"A",{href:!0,rel:!0});var op=v(go);wo=b(op,"fix node.key crashing lib/compress by hytromo ¬∑ Pull Request #286 ¬∑ terser/terser"),op.forEach(u),sp.forEach(u),tp.forEach(u),vo=E(qc),yo=y(qc,"P",{});var rp=v(yo);bo=b(rp,"By looking at the MR merged date, I found that the commit was landed in between "),Eo=y(rp,"A",{href:!0,rel:!0});var cp=v(Eo);Io=b(cp,"v3.16.0 and v3.17.0"),cp.forEach(u),To=b(rp,"."),rp.forEach(u),Ao=E(qc),xo=y(qc,"P",{});var pp=v(xo);$o=b(pp,"v3.17.0 was a minor version bump for our codebase, so I assumed it has no breaking changes."),pp.forEach(u),jo=E(qc),Po=y(qc,"P",{});var ip=v(Po);Oo=y(ip,"CODE",{});var lp=v(Oo);Co=b(lp,"terser"),lp.forEach(u),So=b(ip," was installed as a dependency of "),_o=y(ip,"CODE",{});var up=v(_o);Lo=b(up,"terser-webpack-plugin"),up.forEach(u),Ro=b(ip,", which we had no control on the terser version, so I added a resolution to our "),No=y(ip,"CODE",{});var hp=v(No);Mo=b(hp,"package.json"),hp.forEach(u),Do=b(ip,":"),ip.forEach(u),Ho=E(qc),Bo=y(qc,"PRE",{class:!0}),v(Bo).forEach(u),qo=E(qc),Fo=y(qc,"P",{});var dp=v(Fo);Go=b(dp,"After I upgraded terser, I build the code again."),dp.forEach(u),Uo=E(qc),Wo=y(qc,"P",{});var fp=v(Wo);zo=b(fp,"The build was successful! üéâ"),fp.forEach(u),qc.forEach(u),Vo=E(e),Jo=y(e,"SECTION",{});var mp=v(Jo);Ko=y(mp,"H2",{});var kp=v(Ko);Yo=y(kp,"A",{href:!0,id:!0});var gp=v(Yo);Qo=b(gp,"Closing Note"),gp.forEach(u),kp.forEach(u),Zo=E(mp),Xo=y(mp,"P",{});var wp=v(Xo);er=b(wp,"As I was explaining all these to my colleague, I realised that should I upgraded the terser once I found out that it was a terser error, it would have fixed the bug as well. I wouldn't need to go through all these to end up in the same fix."),wp.forEach(u),ar=E(mp),nr=y(mp,"P",{});var vp=v(nr);tr=b(vp,"Oh well. ü§∑‚Äç‚ôÇÔ∏è"),vp.forEach(u),mp.forEach(u),this.h()},h(){w(o,"href","#act-i-the-first-attempt"),w(p,"href","#act-ii-terser-webpack-plugin"),w(g,"href","#act-iii-terser"),w(A,"href","#final-act-the-resolution"),w(j,"href","#closing-note"),w(t,"class","sitemap"),w(t,"id","sitemap"),w(t,"role","navigation"),w(t,"aria-label","Table of Contents"),w(M,"class","language-null"),w(J,"href","#act-i-the-first-attempt"),w(J,"id","act-i-the-first-attempt"),w(re,"class","language-js"),w(fe,"class","language-js"),w(ve,"class","language-null"),w(Me,"class","language-null"),w(Ve,"href","#act-ii-terser-webpack-plugin"),w(Ve,"id","act-ii-terser-webpack-plugin"),w(Ca,"class","language-js"),w(pn,"href","https://blittle.github.io/chrome-dev-tools/sources/conditional-breakpoints.html"),w(pn,"rel","nofollow"),w(kn,"class","language-js"),w($n,"class","language-null"),w(Wn,"href","#act-iii-terser"),w(Wn,"id","act-iii-terser"),w(et,"class","language-js"),w(dt,"href","https://github.com/terser/terser"),w(dt,"rel","nofollow"),w(bt,"href","http://lisperator.net/uglifyjs/mangle"),w(bt,"rel","nofollow"),w(Bt,"class","language-js"),w(Qt,"class","language-js"),w(As,"href","#final-act-the-resolution"),w(As,"id","final-act-the-resolution"),w(Ls,"class","language-js"),w(ro,"type","image/webp"),w(ro,"srcset","45c8d1207d7caa4c.webp"),w(co,"type","image/jpeg"),w(co,"srcset","45c8d1207d7caa4c.png"),w(po,"alt","Github: view blame prior to the change"),po.src!==(io="45c8d1207d7caa4c.png")&&w(po,"src","45c8d1207d7caa4c.png"),w(go,"href","https://github.com/terser/terser/pull/286"),w(go,"rel","nofollow"),w(Eo,"href","https://github.com/terser/terser/compare/v3.16.0...v3.17.0"),w(Eo,"rel","nofollow"),w(Bo,"class","language-json"),w(Yo,"href","#closing-note"),w(Yo,"id","closing-note")},m(e,a){l(e,n,a),i(n,t),i(t,s),i(s,o),i(o,r),i(t,c),i(c,p),i(p,h),i(t,f),i(f,g),i(g,I),i(t,T),i(T,A),i(A,x),i(t,$),i($,j),i(j,P),l(e,O,a),l(e,C,a),i(C,S),l(e,_,a),l(e,L,a),i(L,R),l(e,N,a),l(e,M,a),M.innerHTML='\n<code class="language-">ERROR in bundle.xxxx.js from Terser\nundefined\n\n...\n\nCommand failed with exit code 2\nVisit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\nError: Command failed: yarn build</code>',l(e,D,a),l(e,H,a),i(H,B),l(e,q,a),l(e,F,a),i(F,G),i(G,U),l(e,W,a),l(e,z,a),i(z,V),i(V,J),i(J,K),i(z,Y),i(z,Q),i(Q,Z),i(Q,X),i(X,ee),i(Q,ae),i(Q,ne),i(ne,te),i(Q,se),i(z,oe),i(z,re),re.innerHTML='<code class="language-js"><span class="token comment">// filename: webpackConfig.prod.js</span>\n\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// ...</span>\n    <span class="token comment">// disable terser first</span>\n    <span class="token comment">// new TerserPlugin(&#123;</span>\n    <span class="token comment">// \tterserOptions: &#123;</span>\n    <span class="token comment">//     // ...</span>\n    <span class="token comment">//   &#125;,</span>\n    <span class="token comment">// &#125;),</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(z,ce),i(z,pe),i(pe,ie),i(z,le),i(z,ue),i(ue,he),i(z,de),i(z,fe),fe.innerHTML='<code class="language-js"><span class="token keyword">const</span> terser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'terser\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> input <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token method function property-access">readFileSync</span><span class="token punctuation">(</span>\n  path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'dist/bundle.xxxx.js\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token string">\'utf-8\'</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> output <span class="token operator">=</span> terser<span class="token punctuation">.</span><span class="token method function property-access">minify</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...terser options</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(z,me),i(z,ke),i(ke,ge),i(z,we),i(z,ve),ve.innerHTML='\n<code class="language-">&#123;\n  &quot;error&quot;:\n  TypeError: Cannot read property &#39;name&#39; of undefined\n      at A.f (node_modules/terser/dist/bundle.js:44:146028)\n      at D (node_modules/terser/dist/bundle.js:44:2863)\n      at A (node_modules/terser/dist/bundle.js:44:146075)\n      at k (node_modules/terser/dist/bundle.js:44:146998)\n      at vn (node_modules/terser/dist/bundle.js:44:133003)\n      at node_modules/terser/dist/bundle.js:44:165250\n      at AST_BlockStatement.optimize (node_modules/terser/dist/bundle.js:44:121400)\n      at Ct.before (node_modules/terser/dist/bundle.js:44:121157)\n      at AST_BlockStatement.transform (node_modules/terser/dist/bundle.js:44:78200)\n      at node_modules/terser/dist/bundle.js:44:78849\n&#125;</code>',i(z,ye),i(z,be),i(be,Ee),i(be,Ie),i(Ie,Te),i(z,Ae),i(z,xe),i(xe,$e),i(z,je),i(z,Pe),i(Pe,Oe),i(Oe,Ce),i(Pe,Se),i(z,_e),i(z,Le),i(Le,Re),i(z,Ne),i(z,Me),Me.innerHTML='\n<code class="language-">...\ns) &#125; else if (u instanceof Se &amp;&amp; r === u.expression &amp;&amp; (p(e, t, i, u, o = n(o, u.property), a + 1,\n  s + 1), o)) return; a &gt; 0 || u instanceof Be &amp;&amp; r !== u.tail_node() || u instanceof S ||\n(t.direct_access = !0) &#125; e(F, u); var d = new qn(function (e) &#123; if (e instanceof Je) &#123; var n =\ne.definition(); n &amp;&amp; (e instanceof hn &amp;&amp; n.references.push(e), n.fixed = !1) &#125; &#125;); function h(e, n,\nt) &#123; this.inlined = !1; var r = e.safe_ids; return e.safe_ids = Object.create(null), i(e, t, this),\nn(), e.safe_ids = r, !0 &#125; function m(e, n, t) &#123; var r, o = this; return o.inlined = !1, a(e), i(e,\nt, o), !o.name &amp;&amp; (r = e.parent()) instanceof ke &amp;&amp; r.expression === o &amp;&amp; o.argnames.forEach(\nfunction (n, t) &#123; if (n.definition) &#123; var i = n.definition(); void 0 !== i.fixed || o.uses_arguments\n&amp;&amp; !e.has_directive(&quot;use strict&quot;) ? i.fixed = !1 : (i.fixed = function () &#123; return r.args[t] || v(kn, r)\n...</code>',i(z,De),i(z,He),i(He,Be),i(z,qe),i(z,Fe),i(Fe,Ge),l(e,Ue,a),l(e,We,a),i(We,ze),i(ze,Ve),i(Ve,Je),i(We,Ke),i(We,Ye),i(Ye,Qe),i(We,Ze),i(We,Xe),i(Xe,ea),i(Xe,aa),i(aa,na),i(Xe,ta),i(We,sa),i(We,oa),i(oa,ra),i(oa,ca),i(ca,pa),i(oa,ia),i(oa,la),i(la,ua),i(oa,ha),i(We,da),i(We,fa),i(fa,ma),i(ma,ka),i(fa,ga),i(fa,wa),i(wa,va),i(fa,ya),i(fa,ba),i(ba,Ea),i(fa,Ia),i(fa,Ta),i(Ta,Aa),i(fa,xa),i(We,$a),i(We,ja),i(ja,Pa),i(We,Oa),i(We,Ca),Ca.innerHTML='<code class="language-js"><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>file<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> from Terser&#92;n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>err<span class="token punctuation">.</span><span class="token property-access">message</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(We,Sa),i(We,_a),i(_a,La),i(_a,Ra),i(Ra,Na),i(_a,Ma),i(_a,Da),i(Da,Ha),i(_a,Ba),i(_a,qa),i(qa,Fa),i(_a,Ga),i(_a,Ua),i(Ua,Wa),i(_a,za),i(We,Va),i(We,Ja),i(Ja,Ka),i(Ja,Ya),i(Ya,Qa),i(Ja,Za),i(We,Xa),i(We,en),i(en,an),i(an,nn),i(en,tn),i(We,sn),i(We,on),i(on,rn),i(rn,cn),i(rn,pn),i(pn,ln),i(rn,un),i(on,hn),i(on,dn),i(dn,fn),i(We,mn),i(We,kn),kn.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>someConditionThatLeadsToErrorLaterOn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(We,gn),i(We,wn),i(wn,vn),i(We,yn),i(We,bn),i(bn,En),i(bn,In),i(In,Tn),i(bn,An),i(We,xn),i(We,$n),$n.innerHTML='\n<code class="language-">&#123;\n  &quot;error&quot;:\n  TypeError: Cannot read property &#39;name&#39; of undefined\n      at A.f (node_modules/terser/dist/bundle.js:44:146028)\n      at D (node_modules/terser/dist/bundle.js:44:2863)\n      at A (node_modules/terser/dist/bundle.js:44:146075)\n      at k (node_modules/terser/dist/bundle.js:44:146998)\n      at vn (node_modules/terser/dist/bundle.js:44:133003)\n      at node_modules/terser/dist/bundle.js:44:165250\n      at AST_BlockStatement.optimize (node_modules/terser/dist/bundle.js:44:121400)\n      at Ct.before (node_modules/terser/dist/bundle.js:44:121157)\n      at AST_BlockStatement.transform (node_modules/terser/dist/bundle.js:44:78200)\n      at node_modules/terser/dist/bundle.js:44:78849\n&#125;</code>',i(We,jn),i(We,Pn),i(Pn,On),i(We,Cn),i(We,Sn),i(Sn,_n),i(_n,Ln),i(Sn,Rn),i(Sn,Nn),i(Nn,Mn),i(Sn,Dn),i(Sn,Hn),i(Hn,Bn),i(Sn,qn),l(e,Fn,a),l(e,Gn,a),i(Gn,Un),i(Un,Wn),i(Wn,zn),i(Gn,Vn),i(Gn,Jn),i(Jn,Kn),i(Gn,Yn),i(Gn,Qn),i(Qn,Zn),i(Gn,Xn),i(Gn,et),et.innerHTML='<code class="language-js"><span class="token keyword">var</span> f <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token method function property-access">option</span><span class="token punctuation">(</span><span class="token string">"ecma"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token method function property-access">has_directive</span><span class="token punctuation">(</span><span class="token string">"use strict"</span><span class="token punctuation">)</span> <span class="token operator">?</span>\n<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token operator">!=</span>u <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token operator">!=</span>u <span class="token punctuation">&#125;</span>\n                                        <span class="token operator">^</span></code>',i(Gn,at),i(Gn,nt),i(nt,tt),i(Gn,st),i(Gn,ot),i(ot,rt),i(ot,ct),i(ct,pt),i(ot,it),i(Gn,lt),i(Gn,ut),i(ut,ht),i(ut,dt),i(dt,ft),i(ut,mt),i(Gn,kt),i(Gn,gt),i(gt,wt),i(wt,vt),i(gt,yt),i(gt,bt),i(bt,Et),i(gt,It),i(gt,Tt),i(Tt,At),i(gt,xt),i(gt,$t),i($t,jt),i(gt,Pt),i(Gn,Ot),i(Gn,Ct),i(Ct,St),i(Gn,_t),i(Gn,Lt),i(Lt,Rt),i(Lt,Nt),i(Nt,Mt),i(Lt,Dt),i(Gn,Ht),i(Gn,Bt),Bt.innerHTML='<code class="language-js"><span class="token keyword">var</span> diff <span class="token operator">=</span>\n  compressor<span class="token punctuation">.</span><span class="token method function property-access">option</span><span class="token punctuation">(</span><span class="token string">\'ecma\'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> compressor<span class="token punctuation">.</span><span class="token method function property-access">has_directive</span><span class="token punctuation">(</span><span class="token string">\'use strict\'</span><span class="token punctuation">)</span>\n    <span class="token operator">?</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        <span class="token keyword">return</span> node<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">!=</span> prop <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">!=</span> prop<span class="token punctuation">;</span>\n      <span class="token punctuation">&#125;</span>\n    <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        <span class="token keyword">return</span> node<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">!=</span> prop<span class="token punctuation">;</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(Gn,qt),i(Gn,Ft),i(Ft,Gt),i(Gn,Ut),i(Gn,Wt),i(Wt,zt),i(Wt,Vt),i(Vt,Jt),i(Wt,Kt),i(Gn,Yt),i(Gn,Qt),Qt.innerHTML='<code class="language-js"><span class="token keyword">var</span> f <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token method function property-access">option</span><span class="token punctuation">(</span><span class="token string">"ecma"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token method function property-access">has_directive</span><span class="token punctuation">(</span><span class="token string">"use strict"</span><span class="token punctuation">)</span> <span class="token operator">?</span>\n<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token operator">!=</span>u\n               <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span>\n<span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token operator">!=</span>u <span class="token punctuation">&#125;</span></code>',i(Gn,Zt),i(Gn,Xt),i(Xt,es),i(Xt,as),i(as,ns),i(Xt,ts),i(Xt,ss),i(ss,os),i(Xt,rs),i(Xt,cs),i(cs,ps),i(Xt,is),i(Xt,ls),i(ls,us),i(Xt,hs),i(Xt,ds),i(ds,fs),i(Xt,ms),i(Xt,ks),i(ks,gs),i(Xt,ws),i(Gn,vs),i(Gn,ys),i(ys,bs),l(e,Es,a),l(e,Is,a),i(Is,Ts),i(Ts,As),i(As,xs),i(Is,$s),i(Is,js),i(js,Ps),i(Is,Os),i(Is,Cs),i(Cs,Ss),i(Is,_s),i(Is,Ls),Ls.innerHTML='<code class="language-js"><span class="token keyword">var</span> diff <span class="token operator">=</span> compressor<span class="token punctuation">.</span><span class="token method function property-access">option</span><span class="token punctuation">(</span><span class="token string">"ecma"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2015</span>\n    <span class="token operator">&amp;&amp;</span> compressor<span class="token punctuation">.</span><span class="token method function property-access">has_directive</span><span class="token punctuation">(</span><span class="token string">"use strict"</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> node<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">!=</span> prop <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">!=</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span> <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> node<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">!=</span> prop<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(Is,Rs),i(Is,Ns),i(Ns,Ms),i(Ms,Ds),i(Ns,Hs),i(Ns,Bs),i(Bs,qs),i(Ns,Fs),i(Is,Gs),i(Is,Us),i(Us,Ws),i(Is,zs),i(Is,Vs),i(Vs,Js),i(Is,Ks),i(Is,Ys),i(Ys,Qs),i(Is,Zs),i(Is,Xs),i(Xs,eo),i(eo,ao),i(Xs,no),i(Is,to),i(Is,so),i(so,oo),i(oo,ro),i(oo,co),i(oo,po),i(Is,lo),i(Is,uo),i(uo,ho),i(Is,fo),i(Is,mo),i(mo,ko),i(ko,go),i(go,wo),i(Is,vo),i(Is,yo),i(yo,bo),i(yo,Eo),i(Eo,Io),i(yo,To),i(Is,Ao),i(Is,xo),i(xo,$o),i(Is,jo),i(Is,Po),i(Po,Oo),i(Oo,Co),i(Po,So),i(Po,_o),i(_o,Lo),i(Po,Ro),i(Po,No),i(No,Mo),i(Po,Do),i(Is,Ho),i(Is,Bo),Bo.innerHTML='<code class="language-json"><span class="token punctuation">&#123;</span>\n  <span class="token property">"resolution"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>\n    <span class="token property">"terser"</span><span class="token operator">:</span> <span class="token string">"3.17.0"</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(Is,qo),i(Is,Fo),i(Fo,Go),i(Is,Uo),i(Is,Wo),i(Wo,zo),l(e,Vo,a),l(e,Jo,a),i(Jo,Ko),i(Ko,Yo),i(Yo,Qo),i(Jo,Zo),i(Jo,Xo),i(Xo,er),i(Jo,ar),i(Jo,nr),i(nr,tr)},p:e,d(e){e&&u(n),e&&u(O),e&&u(C),e&&u(_),e&&u(L),e&&u(N),e&&u(M),e&&u(D),e&&u(H),e&&u(q),e&&u(F),e&&u(W),e&&u(z),e&&u(Ue),e&&u(We),e&&u(Fn),e&&u(Gn),e&&u(Es),e&&u(Is),e&&u(Vo),e&&u(Jo)}}}function he(e){let n,t;const s=[de];let o={$$slots:{default:[ue]},$$scope:{ctx:e}};for(let e=0;e<s.length;e+=1)o=a(o,s[e]);return n=new le({props:o}),{c(){G(n.$$.fragment)},l(e){U(n.$$.fragment,e)},m(e,a){W(n,e,a),t=!0},p(e,[a]){const t=0&a?function(e,a){const n={},t={},s={$$scope:1};let o=e.length;for(;o--;){const r=e[o],c=a[o];if(c){for(const e in r)e in c||(t[e]=1);for(const e in c)s[e]||(n[e]=c[e],s[e]=1);e[o]=c}else for(const e in r)s[e]=1}for(const e in t)e in n||(n[e]=void 0);return n}(s,[(o=de,"object"==typeof o&&null!==o?o:{})]):{};var o;1&a&&(t.$$scope={dirty:a,ctx:e}),n.$set(t)},i(e){t||(q(n.$$.fragment,e),t=!0)},o(e){F(n.$$.fragment,e),t=!1},d(e){z(n,e)}}}const de={title:"Debugging Story: Build failed, error from Terser",date:"2020-01-08T08:00:00Z",tags:["debugging"],description:"It all started with an error message during the build: 'ERROR in bundle.xxx.js from Terser'.",slug:"debugging-build-failed-error-from-terser",type:"blog"};class fe extends K{constructor(e){super(),J(this,e,null,he,r,{})}}setTimeout(()=>{new fe({target:document.querySelector("#app"),hydrate:!0})},3e3);
