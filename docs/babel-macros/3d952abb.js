function n(){}function a(n,a){for(const s in a)n[s]=a[s];return n}function s(n){return n()}function t(){return Object.create(null)}function e(n){n.forEach(s)}function o(n){return"function"==typeof n}function p(n,a){return n!=n?a==a:n!==a||n&&"object"==typeof n||"function"==typeof n}function c(n,s,t,e){return n[1]&&e?a(t.ctx.slice(),n[1](e(s))):t.ctx}function r(n,a,s,t,e,o,p){const r=function(n,a,s,t){if(n[2]&&t){const e=n[2](t(s));if(void 0===a.dirty)return e;if("object"==typeof e){const n=[],s=Math.max(a.dirty.length,e.length);for(let t=0;t<s;t+=1)n[t]=a.dirty[t]|e[t];return n}return a.dirty|e}return a.dirty}(a,t,e,o);if(r){const e=c(a,s,t,p);n.p(e,r)}}function i(n,a){n.appendChild(a)}function l(n,a,s){n.insertBefore(a,s||null)}function u(n){n.parentNode.removeChild(n)}function h(n,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].d(a)}function k(n){return document.createElement(n)}function f(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function d(n){return document.createTextNode(n)}function m(){return d(" ")}function g(){return d("")}function y(n,a,s){null==s?n.removeAttribute(a):n.getAttribute(a)!==s&&n.setAttribute(a,s)}function b(n){return Array.from(n.childNodes)}function v(n,a,s,t){for(let t=0;t<n.length;t+=1){const e=n[t];if(e.nodeName===a){let a=0;const o=[];for(;a<e.attributes.length;){const n=e.attributes[a++];s[n.name]||o.push(n.name)}for(let n=0;n<o.length;n++)e.removeAttribute(o[n]);return n.splice(t,1)[0]}}return t?f(a):k(a)}function w(n,a){for(let s=0;s<n.length;s+=1){const t=n[s];if(3===t.nodeType)return t.data=""+a,n.splice(s,1)[0]}return d(a)}function E(n){return w(n," ")}function x(n,a){a=""+a,n.wholeText!==a&&(n.data=a)}function I(n,a){n.value=null==a?"":a}class A{constructor(n=null){this.a=n,this.e=this.n=null}m(n,a,s=null){this.e||(this.e=k(a.nodeName),this.t=a,this.h(n)),this.i(s)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let a=0;a<this.n.length;a+=1)l(this.t,this.n[a],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(u)}}let T;function P(n){T=n}function S(n){(function(){if(!T)throw new Error("Function called outside component initialization");return T})().$$.on_mount.push(n)}const C=[],O=[],j=[],M=[],$=Promise.resolve();let L=!1;function R(n){j.push(n)}let D=!1;const B=new Set;function H(){if(!D){D=!0;do{for(let n=0;n<C.length;n+=1){const a=C[n];P(a),N(a.$$)}for(C.length=0;O.length;)O.pop()();for(let n=0;n<j.length;n+=1){const a=j[n];B.has(a)||(B.add(a),a())}j.length=0}while(C.length);for(;M.length;)M.pop()();L=!1,D=!1,B.clear()}}function N(n){if(null!==n.fragment){n.update(),e(n.before_update);const a=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,a),n.after_update.forEach(R)}}const F=new Set;function U(n,a){n&&n.i&&(F.delete(n),n.i(a))}function _(n,a,s,t){if(n&&n.o){if(F.has(n))return;F.add(n),(void 0).c.push(()=>{F.delete(n),t&&(s&&n.d(1),t())}),n.o(a)}}function q(n){n&&n.c()}function G(n,a){n&&n.l(a)}function W(n,a,t){const{fragment:p,on_mount:c,on_destroy:r,after_update:i}=n.$$;p&&p.m(a,t),R(()=>{const a=c.map(s).filter(o);r?r.push(...a):e(a),n.$$.on_mount=[]}),i.forEach(R)}function K(n,a){const s=n.$$;null!==s.fragment&&(e(s.on_destroy),s.fragment&&s.fragment.d(a),s.on_destroy=s.fragment=null,s.ctx=[])}function Y(n,a){-1===n.$$.dirty[0]&&(C.push(n),L||(L=!0,$.then(H)),n.$$.dirty.fill(0)),n.$$.dirty[a/31|0]|=1<<a%31}function z(a,s,o,p,c,r,i=[-1]){const l=T;P(a);const h=s.props||{},k=a.$$={fragment:null,ctx:null,props:r,update:n,not_equal:c,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:t(),dirty:i};let f=!1;if(k.ctx=o?o(a,h,(n,s,...t)=>{const e=t.length?t[0]:s;return k.ctx&&c(k.ctx[n],k.ctx[n]=e)&&(k.bound[n]&&k.bound[n](e),f&&Y(a,n)),s}):[],k.update(),f=!0,e(k.before_update),k.fragment=!!p&&p(k.ctx),s.target){if(s.hydrate){const n=b(s.target);k.fragment&&k.fragment.l(n),n.forEach(u)}else k.fragment&&k.fragment.c();s.intro&&U(a.$$.fragment),W(a,s.target,s.anchor),H()}P(l)}class J{$destroy(){K(this,1),this.$destroy=n}$on(n,a){const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(a),()=>{const n=s.indexOf(a);-1!==n&&s.splice(n,1)}}$set(){}}function X(a){let s,t,e,o,p,c,r,h,g,x,I,A,T,P,S,C,O,j,M,$,L,R,D,B,H,N,F,U,_,q,G,W,K,Y,z;return{c(){s=k("header"),t=k("nav"),e=k("ul"),o=k("li"),p=k("a"),c=d("Tan Li Hau"),r=m(),h=k("li"),g=k("a"),x=d("About"),I=m(),A=k("li"),T=k("a"),P=d("Writings"),S=m(),C=k("li"),O=k("a"),j=d("Talks"),M=m(),$=k("li"),L=k("a"),R=d("Notes"),D=m(),B=k("li"),H=k("a"),N=d("Newsletter"),F=m(),U=k("li"),_=k("a"),q=f("svg"),G=f("path"),W=m(),K=k("a"),Y=f("svg"),z=f("path"),this.h()},l(n){s=v(n,"HEADER",{class:!0});var a=b(s);t=v(a,"NAV",{});var i=b(t);e=v(i,"UL",{class:!0});var l=b(e);o=v(l,"LI",{class:!0});var k=b(o);p=v(k,"A",{href:!0,class:!0});var f=b(p);c=w(f,"Tan Li Hau"),f.forEach(u),k.forEach(u),r=E(l),h=v(l,"LI",{class:!0});var d=b(h);g=v(d,"A",{href:!0,class:!0});var m=b(g);x=w(m,"About"),m.forEach(u),d.forEach(u),I=E(l),A=v(l,"LI",{class:!0});var y=b(A);T=v(y,"A",{href:!0,class:!0});var J=b(T);P=w(J,"Writings"),J.forEach(u),y.forEach(u),S=E(l),C=v(l,"LI",{class:!0});var X=b(C);O=v(X,"A",{href:!0,class:!0});var V=b(O);j=w(V,"Talks"),V.forEach(u),X.forEach(u),M=E(l),$=v(l,"LI",{class:!0});var Q=b($);L=v(Q,"A",{href:!0,class:!0});var Z=b(L);R=w(Z,"Notes"),Z.forEach(u),Q.forEach(u),D=E(l),B=v(l,"LI",{class:!0});var nn=b(B);H=v(nn,"A",{href:!0,class:!0});var an=b(H);N=w(an,"Newsletter"),an.forEach(u),nn.forEach(u),F=E(l),U=v(l,"LI",{class:!0});var sn=b(U);_=v(sn,"A",{"aria-label":!0,href:!0,class:!0});var tn=b(_);q=v(tn,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var en=b(q);G=v(en,"path",{d:!0},1),b(G).forEach(u),en.forEach(u),tn.forEach(u),W=E(sn),K=v(sn,"A",{"aria-label":!0,href:!0,class:!0});var on=b(K);Y=v(on,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var pn=b(Y);z=v(pn,"path",{d:!0},1),b(z).forEach(u),pn.forEach(u),on.forEach(u),sn.forEach(u),l.forEach(u),i.forEach(u),a.forEach(u),this.h()},h(){y(p,"href","/"),y(p,"class","svelte-f3e4uo"),y(o,"class","svelte-f3e4uo"),y(g,"href","/about"),y(g,"class","svelte-f3e4uo"),y(h,"class","svelte-f3e4uo"),y(T,"href","/blogs"),y(T,"class","svelte-f3e4uo"),y(A,"class","svelte-f3e4uo"),y(O,"href","/talks"),y(O,"class","svelte-f3e4uo"),y(C,"class","svelte-f3e4uo"),y(L,"href","/notes"),y(L,"class","svelte-f3e4uo"),y($,"class","svelte-f3e4uo"),y(H,"href","/newsletter"),y(H,"class","svelte-f3e4uo"),y(B,"class","svelte-f3e4uo"),y(G,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),y(q,"viewBox","0 0 24 24"),y(q,"width","1em"),y(q,"height","1em"),y(q,"class","svelte-f3e4uo"),y(_,"aria-label","Twitter account"),y(_,"href","https://twitter.com/lihautan"),y(_,"class","svelte-f3e4uo"),y(z,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),y(Y,"viewBox","0 0 24 24"),y(Y,"width","1em"),y(Y,"height","1em"),y(Y,"class","svelte-f3e4uo"),y(K,"aria-label","Github account"),y(K,"href","https://github.com/tanhauhau"),y(K,"class","svelte-f3e4uo"),y(U,"class","social svelte-f3e4uo"),y(e,"class","svelte-f3e4uo"),y(s,"class","svelte-f3e4uo")},m(n,a){l(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(p,c),i(e,r),i(e,h),i(h,g),i(g,x),i(e,I),i(e,A),i(A,T),i(T,P),i(e,S),i(e,C),i(C,O),i(O,j),i(e,M),i(e,$),i($,L),i(L,R),i(e,D),i(e,B),i(B,H),i(H,N),i(e,F),i(e,U),i(U,_),i(_,q),i(q,G),i(U,W),i(U,K),i(K,Y),i(Y,z)},p:n,i:n,o:n,d(n){n&&u(s)}}}class V extends J{constructor(n){super(),z(this,n,null,X,p,{})}}function Q(a){let s,t,e,o,p,c,r,h,f,g,x,A,T,P,S,C,O,j,M,$;return{c(){s=k("div"),t=k("h1"),e=d("Subscribe to my newsletter"),o=m(),p=k("h2"),c=d("Get the latest blog posts and project updates delivered right to your inbox"),r=m(),h=k("form"),f=k("div"),g=k("input"),x=m(),A=k("input"),P=m(),S=k("input"),C=m(),O=k("p"),j=d("Powered by Buttondown."),this.h()},l(n){s=v(n,"DIV",{class:!0});var a=b(s);t=v(a,"H1",{});var i=b(t);e=w(i,"Subscribe to my newsletter"),i.forEach(u),o=E(a),p=v(a,"H2",{class:!0});var l=b(p);c=w(l,"Get the latest blog posts and project updates delivered right to your inbox"),l.forEach(u),r=E(a),h=v(a,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var k=b(h);f=v(k,"DIV",{class:!0});var d=b(f);g=v(d,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),x=E(d),A=v(d,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),d.forEach(u),P=E(k),S=v(k,"INPUT",{type:!0,value:!0,name:!0,class:!0}),C=E(k),O=v(k,"P",{class:!0});var m=b(O);j=w(m,"Powered by Buttondown."),m.forEach(u),k.forEach(u),a.forEach(u),this.h()},h(){y(p,"class","svelte-1k1s1co"),y(g,"type","email"),y(g,"name","email"),y(g,"id","bd-email"),y(g,"aria-label","email address"),y(g,"placeholder","youremail@example.com"),y(g,"class","svelte-1k1s1co"),y(A,"type","submit"),A.value="Subscribe",A.disabled=T=!a[0],y(A,"class","svelte-1k1s1co"),y(f,"class","form-item svelte-1k1s1co"),y(S,"type","hidden"),S.value="1",y(S,"name","embed"),y(S,"class","svelte-1k1s1co"),y(O,"class","svelte-1k1s1co"),y(h,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),y(h,"method","post"),y(h,"target","popupwindow"),y(h,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),y(h,"class","embeddable-buttondown-form"),y(s,"class","form svelte-1k1s1co")},m(n,u){var k,d,m,y;l(n,s,u),i(s,t),i(t,e),i(s,o),i(s,p),i(p,c),i(s,r),i(s,h),i(h,f),i(f,g),I(g,a[0]),i(f,x),i(f,A),i(h,P),i(h,S),i(h,C),i(h,O),i(O,j),M||(k=g,d="input",m=a[1],k.addEventListener(d,m,y),$=()=>k.removeEventListener(d,m,y),M=!0)},p(n,[a]){1&a&&g.value!==n[0]&&I(g,n[0]),1&a&&T!==(T=!n[0])&&(A.disabled=T)},i:n,o:n,d(n){n&&u(s),M=!1,$()}}}function Z(n,a,s){let t;return[t,function(){t=this.value,s(0,t)}]}class nn extends J{constructor(n){super(),z(this,n,Z,Q,p,{})}}function an(n){return S(()=>(setTimeout(()=>{if(window.innerWidth>1080){const n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",n.id="_carbonads_js",document.body.appendChild(n)}},5e3),()=>{try{const n=document.getElementById("carbonads");n.parentNode.removeChild(n)}catch(n){}})),[]}class sn extends J{constructor(n){super(),z(this,n,an,null,p,{})}}var tn="https://lihautan.com/babel-macros/assets/hero-twitter-d84d5f7e.jpg";function en(n,a,s){const t=n.slice();return t[6]=a[s],t}function on(n,a,s){const t=n.slice();return t[6]=a[s],t}function pn(n){let a,s;return{c(){a=k("meta"),this.h()},l(n){a=v(n,"META",{name:!0,content:!0}),this.h()},h(){y(a,"name","keywords"),y(a,"content",s=n[6])},m(n,s){l(n,a,s)},p(n,t){4&t&&s!==(s=n[6])&&y(a,"content",s)},d(n){n&&u(a)}}}function cn(n){let a,s,t=n[6]+"";return{c(){a=k("span"),s=d(t),this.h()},l(n){a=v(n,"SPAN",{class:!0});var e=b(a);s=w(e,t),e.forEach(u),this.h()},h(){y(a,"class","svelte-9tqnza")},m(n,t){l(n,a,t),i(a,s)},p(n,a){4&a&&t!==(t=n[6]+"")&&x(s,t)},d(n){n&&u(a)}}}function rn(n){let a,s,t,e,o,p,f,I,T,P,S,C,O,j,M,$,L,R,D,B,H,N,F,Y,z,J,X,Q,Z,an,rn,ln,un,hn,kn,fn,dn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`,mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fbabel-macros",name:n[0]},name:n[0],position:2}]})}<\/script>`;document.title=a=n[0]+" | Tan Li Hau";let gn=n[2],yn=[];for(let a=0;a<gn.length;a+=1)yn[a]=pn(on(n,gn,a));F=new V({});let bn=n[2],vn=[];for(let a=0;a<bn.length;a+=1)vn[a]=cn(en(n,bn,a));const wn=n[5].default,En=function(n,a,s,t){if(n){const e=c(n,a,s,t);return n[0](e)}}(wn,n,n[4],null);return un=new nn({}),kn=new sn({}),{c(){s=k("meta"),t=k("meta"),e=k("meta"),o=k("meta"),p=k("meta"),f=k("meta"),I=k("meta"),T=k("meta"),P=k("meta"),S=k("meta"),C=k("meta");for(let n=0;n<yn.length;n+=1)yn[n].c();O=k("meta"),j=k("meta"),$=g(),R=g(),D=m(),B=k("a"),H=d("Skip to content"),N=m(),q(F.$$.fragment),Y=m(),z=k("main"),J=k("h1"),X=d(n[0]),Q=m();for(let n=0;n<vn.length;n+=1)vn[n].c();Z=m(),an=k("article"),En&&En.c(),rn=m(),ln=k("footer"),q(un.$$.fragment),hn=m(),q(kn.$$.fragment),this.h()},l(a){const c=function(n,a=document.body){return Array.from(a.querySelectorAll(n))}('[data-svelte="svelte-15e3uyc"]',document.head);s=v(c,"META",{name:!0,content:!0}),t=v(c,"META",{name:!0,content:!0}),e=v(c,"META",{name:!0,content:!0}),o=v(c,"META",{name:!0,content:!0}),p=v(c,"META",{name:!0,content:!0}),f=v(c,"META",{name:!0,content:!0}),I=v(c,"META",{name:!0,content:!0}),T=v(c,"META",{name:!0,content:!0}),P=v(c,"META",{name:!0,content:!0}),S=v(c,"META",{name:!0,content:!0}),C=v(c,"META",{name:!0,content:!0});for(let n=0;n<yn.length;n+=1)yn[n].l(c);O=v(c,"META",{itemprop:!0,content:!0}),j=v(c,"META",{itemprop:!0,content:!0}),$=g(),R=g(),c.forEach(u),D=E(a),B=v(a,"A",{href:!0,class:!0});var r=b(B);H=w(r,"Skip to content"),r.forEach(u),N=E(a),G(F.$$.fragment,a),Y=E(a),z=v(a,"MAIN",{id:!0,class:!0});var i=b(z);J=v(i,"H1",{});var l=b(J);X=w(l,n[0]),l.forEach(u),Q=E(i);for(let n=0;n<vn.length;n+=1)vn[n].l(i);Z=E(i),an=v(i,"ARTICLE",{});var h=b(an);En&&En.l(h),h.forEach(u),i.forEach(u),rn=E(a),ln=v(a,"FOOTER",{class:!0});var k=b(ln);G(un.$$.fragment,k),hn=E(k),G(kn.$$.fragment,k),k.forEach(u),this.h()},h(){y(s,"name","description"),y(s,"content",n[1]),y(t,"name","image"),y(t,"content",tn),y(e,"name","og:image"),y(e,"content",tn),y(o,"name","og:title"),y(o,"content",n[0]),y(p,"name","og:description"),y(p,"content",n[1]),y(f,"name","og:type"),y(f,"content","website"),y(I,"name","twitter:card"),y(I,"content","summary_large_image"),y(T,"name","twitter:creator"),y(T,"content","@lihautan"),y(P,"name","twitter:title"),y(P,"content",n[0]),y(S,"name","twitter:description"),y(S,"content",n[1]),y(C,"name","twitter:image"),y(C,"content",tn),y(O,"itemprop","url"),y(O,"content","https%3A%2F%2Flihautan.com%2Fbabel-macros"),y(j,"itemprop","image"),y(j,"content",tn),M=new A($),L=new A(R),y(B,"href","#content"),y(B,"class","skip svelte-9tqnza"),y(z,"id","content"),y(z,"class","blog svelte-9tqnza"),y(ln,"class","svelte-9tqnza")},m(n,a){i(document.head,s),i(document.head,t),i(document.head,e),i(document.head,o),i(document.head,p),i(document.head,f),i(document.head,I),i(document.head,T),i(document.head,P),i(document.head,S),i(document.head,C);for(let n=0;n<yn.length;n+=1)yn[n].m(document.head,null);i(document.head,O),i(document.head,j),M.m(dn,document.head),i(document.head,$),L.m(mn,document.head),i(document.head,R),l(n,D,a),l(n,B,a),i(B,H),l(n,N,a),W(F,n,a),l(n,Y,a),l(n,z,a),i(z,J),i(J,X),i(z,Q);for(let n=0;n<vn.length;n+=1)vn[n].m(z,null);i(z,Z),i(z,an),En&&En.m(an,null),l(n,rn,a),l(n,ln,a),W(un,ln,null),i(ln,hn),W(kn,ln,null),fn=!0},p(n,[t]){if((!fn||1&t)&&a!==(a=n[0]+" | Tan Li Hau")&&(document.title=a),(!fn||2&t)&&y(s,"content",n[1]),(!fn||1&t)&&y(o,"content",n[0]),(!fn||2&t)&&y(p,"content",n[1]),(!fn||1&t)&&y(P,"content",n[0]),(!fn||2&t)&&y(S,"content",n[1]),4&t){let a;for(gn=n[2],a=0;a<gn.length;a+=1){const s=on(n,gn,a);yn[a]?yn[a].p(s,t):(yn[a]=pn(s),yn[a].c(),yn[a].m(O.parentNode,O))}for(;a<yn.length;a+=1)yn[a].d(1);yn.length=gn.length}if((!fn||3&t)&&dn!==(dn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`)&&M.p(dn),(!fn||1&t)&&mn!==(mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fbabel-macros",name:n[0]},name:n[0],position:2}]})}<\/script>`)&&L.p(mn),(!fn||1&t)&&x(X,n[0]),4&t){let a;for(bn=n[2],a=0;a<bn.length;a+=1){const s=en(n,bn,a);vn[a]?vn[a].p(s,t):(vn[a]=cn(s),vn[a].c(),vn[a].m(z,Z))}for(;a<vn.length;a+=1)vn[a].d(1);vn.length=bn.length}En&&En.p&&16&t&&r(En,wn,n,n[4],t,null,null)},i(n){fn||(U(F.$$.fragment,n),U(En,n),U(un.$$.fragment,n),U(kn.$$.fragment,n),fn=!0)},o(n){_(F.$$.fragment,n),_(En,n),_(un.$$.fragment,n),_(kn.$$.fragment,n),fn=!1},d(n){u(s),u(t),u(e),u(o),u(p),u(f),u(I),u(T),u(P),u(S),u(C),h(yn,n),u(O),u(j),u($),n&&M.d(),u(R),n&&L.d(),n&&u(D),n&&u(B),n&&u(N),K(F,n),n&&u(Y),n&&u(z),h(vn,n),En&&En.d(n),n&&u(rn),n&&u(ln),K(un),K(kn)}}}function ln(n,a,s){let{title:t=""}=a,{description:e=""}=a,{tags:o=[]}=a;const p={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:r}=a;return n.$set=n=>{"title"in n&&s(0,t=n.title),"description"in n&&s(1,e=n.description),"tags"in n&&s(2,o=n.tags),"$$scope"in n&&s(4,r=n.$$scope)},[t,e,o,p,r,c]}class un extends J{constructor(n){super(),z(this,n,ln,rn,p,{title:0,description:1,tags:2})}}function hn(a){let s,t,e,o,p,c,r,h,f,g,x,I,A,T,P,S,C,O,j,M,$,L,R,D,B,H,N,F,U,_,q,G,W,K,Y,z,J,X,V,Q,Z,nn,an,sn,tn,en,on,pn,cn,rn,ln,un,hn,kn,fn,dn,mn,gn,yn,bn,vn,wn,En,xn,In,An,Tn,Pn,Sn,Cn,On,jn,Mn,$n,Ln,Rn,Dn,Bn,Hn,Nn,Fn,Un,_n,qn,Gn,Wn,Kn,Yn,zn,Jn,Xn,Vn,Qn,Zn,na,aa,sa,ta,ea,oa,pa,ca,ra,ia,la,ua,ha,ka,fa,da,ma,ga,ya,ba,va,wa,Ea,xa,Ia,Aa,Ta,Pa,Sa,Ca,Oa,ja,Ma,$a,La,Ra,Da,Ba,Ha,Na,Fa,Ua,_a,qa,Ga,Wa,Ka,Ya,za,Ja,Xa,Va,Qa,Za,ns,as,ss,ts,es,os,ps,cs,rs,is,ls,us,hs,ks,fs,ds,ms,gs,ys,bs,vs,ws,Es,xs,Is,As,Ts,Ps,Ss,Cs,Os,js,Ms,$s,Ls,Rs,Ds,Bs,Hs,Ns,Fs,Us,_s,qs,Gs,Ws,Ks,Ys,zs,Js,Xs,Vs,Qs,Zs,nt,at,st,tt,et,ot,pt,ct,rt,it,lt,ut,ht,kt,ft,dt,mt,gt,yt,bt,vt,wt,Et,xt,It,At,Tt,Pt,St,Ct,Ot,jt,Mt,$t,Lt,Rt,Dt,Bt,Ht,Nt,Ft,Ut,_t,qt,Gt,Wt,Kt,Yt,zt,Jt,Xt,Vt,Qt,Zt,ne,ae,se,te,ee,oe,pe,ce,re,ie,le,ue,he,ke,fe,de,me,ge,ye,be,ve,we,Ee,xe,Ie,Ae,Te,Pe,Se,Ce,Oe,je,Me,$e,Le,Re,De,Be,He,Ne,Fe,Ue,_e,qe,Ge,We,Ke,Ye,ze,Je,Xe,Ve,Qe,Ze,no,ao,so,to,eo,oo,po,co,ro,io,lo,uo,ho,ko,fo,mo,go,yo,bo,vo,wo,Eo,xo,Io,Ao,To,Po,So,Co,Oo,jo,Mo,$o,Lo,Ro,Do,Bo,Ho,No,Fo,Uo,_o,qo,Go,Wo,Ko,Yo,zo,Jo,Xo,Vo,Qo,Zo,np,ap,sp,tp,ep,op,pp,cp,rp,ip,lp,up,hp,kp,fp,dp,mp,gp,yp,bp,vp,wp,Ep,xp,Ip,Ap,Tp,Pp,Sp,Cp,Op,jp,Mp,$p,Lp,Rp,Dp,Bp,Hp,Np,Fp,Up,_p,qp,Gp,Wp,Kp,Yp,zp,Jp,Xp,Vp,Qp,Zp,nc,ac,sc,tc,ec,oc,pc,cc,rc,ic,lc,uc,hc,kc,fc,dc,mc,gc,yc,bc,vc,wc,Ec,xc,Ic,Ac,Tc,Pc,Sc,Cc,Oc,jc,Mc,$c,Lc,Rc,Dc,Bc,Hc,Nc,Fc,Uc,_c,qc,Gc,Wc,Kc,Yc,zc,Jc,Xc,Vc,Qc,Zc,nr,ar,sr,tr,er,or,pr,cr,rr,ir,lr,ur,hr,kr,fr,dr,mr,gr,yr,br,vr,wr,Er,xr,Ir,Ar,Tr,Pr,Sr,Cr,Or,jr,Mr,$r,Lr,Rr,Dr,Br,Hr,Nr,Fr,Ur,_r,qr,Gr,Wr,Kr,Yr,zr,Jr,Xr,Vr,Qr,Zr,ni,ai,si,ti,ei,oi,pi,ci,ri,ii,li,ui,hi,ki,fi,di,mi,gi,yi,bi,vi,wi,Ei,xi,Ii,Ai,Ti,Pi,Si,Ci,Oi,ji,Mi,$i,Li,Ri,Di,Bi,Hi,Ni,Fi,Ui,_i,qi,Gi,Wi,Ki,Yi,zi,Ji,Xi,Vi,Qi,Zi,nl,al,sl,tl,el,ol,pl,cl,rl,il,ll,ul,hl,kl,fl,dl,ml,gl,yl,bl,vl,wl,El,xl,Il,Al,Tl,Pl,Sl,Cl,Ol,jl,Ml,$l,Ll,Rl,Dl,Bl,Hl,Nl,Fl,Ul,_l,ql,Gl,Wl,Kl,Yl,zl,Jl,Xl,Vl,Ql,Zl,nu,au,su,tu,eu,ou,pu,cu,ru,iu,lu,uu,hu,ku,fu,du,mu,gu,yu,bu,vu,wu,Eu,xu,Iu,Au;return{c(){s=k("section"),t=k("ul"),e=k("li"),o=k("a"),p=d("Motivation"),c=k("ul"),r=k("li"),h=k("a"),f=d("Documentation and community support"),g=k("li"),x=k("a"),I=d("Tooling"),A=k("li"),T=k("a"),P=d("Maintainability"),S=k("li"),C=k("a"),O=d("Consistency of the syntax"),j=k("li"),M=k("a"),$=d("Compile-time vs Runtime"),L=k("li"),R=k("a"),D=d("Babel macros"),B=k("ul"),H=k("li"),N=k("a"),F=d("So what is Babel macros again?"),U=k("li"),_=k("a"),q=d("How to write Babel macros"),G=k("ul"),W=k("li"),K=k("a"),Y=d("mock.macro"),z=k("li"),J=k("a"),X=d("Summary"),V=k("li"),Q=k("a"),Z=d("Further Reading"),nn=m(),an=k("p"),sn=d("In this article, I am going to talk about Babel macros."),tn=m(),en=k("section"),on=k("h2"),pn=k("a"),cn=d("Motivation"),rn=m(),ln=k("p"),un=d("In my previous post, "),hn=k("a"),kn=d('"Creating custom JavaScript syntax with Babel"'),fn=d(", I've shown you detailed steps on how you can create a custom syntax and write transform plugin or polyfills so that the syntax can be run in browsers today."),dn=m(),mn=k("p"),gn=d("However, it is purely educational, and I am not recommending you to create your custom JavaScript syntax for production projects for several reasons:"),yn=m(),bn=k("section"),vn=k("h3"),wn=k("a"),En=d("Documentation and community support"),xn=m(),In=k("p"),An=d("If anything goes wrong, the great JavaScript community out there has no idea what is the "),Tn=k("code"),Pn=d("@@"),Sn=d(" ("),Cn=k("a"),On=d("the curry function syntax we created previously"),jn=d(") means. Meaning the support that a new developer to the team can get is only as good as your documentation."),Mn=m(),$n=k("section"),Ln=k("h3"),Rn=k("a"),Dn=d("Tooling"),Bn=m(),Hn=k("p"),Nn=d("You need to make all the tooling you use to work. I mean eslint, prettier, Flowtype/TypeScript, your editor..."),Fn=m(),Un=k("section"),_n=k("h3"),qn=k("a"),Gn=d("Maintainability"),Wn=m(),Kn=k("p"),Yn=d("If the forked version has a bug, do you have enough support to fix it?\nIf the babel upstream fixed a bug or added a feature, how often do you merge the upstream into your fork?"),zn=m(),Jn=k("section"),Xn=k("h3"),Vn=k("a"),Qn=d("Consistency of the syntax"),Zn=m(),na=k("p"),aa=d("This is the hardest part of creating a new syntax. An added syntax is an added mental concept for the language users, so the new mental model should be transferable to every scenario of the language."),sa=m(),ta=k("p"),ea=d("Take our "),oa=k("code"),pa=d("@@"),ca=d(" syntax, for example, if it works for a normal function declaration, it's expected to work for anonymous functions, arrow functions, class methods. Have you thought about how it would work with generator functions and async functions? If a curried function returns another function, does that make the returned function curried as well?"),ra=m(),ia=k("section"),la=k("h2"),ua=k("a"),ha=d("Compile-time vs Runtime"),ka=m(),fa=k("p"),da=d("I think you get my point. But the idea of having a magical syntax that keeps the code elegant and short is enticing."),ma=m(),ga=k("p"),ya=d("Take "),ba=k("a"),va=d("optional chaining"),wa=d(" for example, before having the optional chaining operator "),Ea=k("code"),xa=d("?."),Ia=d(", we had a few ways to write "),Aa=k("code"),Ta=d("props?.user?.friends?.[0]?.friend"),Pa=d(", which is:"),Sa=m(),Ca=k("p"),Oa=k("strong"),ja=d("a mundane to write, not easy to read (less intentional), but most efficient possible:"),Ma=m(),$a=k("pre"),La=m(),Ra=k("p"),Da=k("strong"),Ba=d("easy to write, easy to read, but with slightly more runtime overhead:"),Ha=m(),Na=k("pre"),Fa=m(),Ua=k("blockquote"),_a=k("b"),qa=d("Note:"),Ga=d(" I've tried to search online whether a `try-catch` is more expensive, however the "),Wa=k("a"),Ka=d("search result"),Ya=m(),za=k("a"),Ja=d("is not"),Xa=m(),Va=k("a"),Qa=d("conclusive"),Za=d(". "),ns=k("a"),as=d("Let me know"),ss=d(" if you have a conclusive research on this."),ts=m(),es=k("p"),os=d("Is there a third option that is "),ps=k("strong"),cs=d("easy to read and write, yet without the try-catch runtime overhead?"),rs=m(),is=k("p"),ls=d("Well, if you look at the "),us=k("a"),hs=k("code"),ks=d("facebookincubator/idx"),fs=d(" library, it uses a "),ds=k("a"),ms=d("Babel plugin"),gs=d(" to search through require or imports of "),ys=k("code"),bs=d("idx"),vs=d(" and replaces all its usages, for example when you write:"),ws=m(),Es=k("pre"),xs=m(),Is=k("p"),As=d("it gets transformed into:"),Ts=m(),Ps=k("pre"),Ss=m(),Cs=k("p"),Os=d("So your code is easy to read, and no runtime overhead. You get the best of both worlds!"),js=m(),Ms=k("p"),$s=d("Though nothing is perfect. Here, I wanted to point out some of my personal opinions about this approach:"),Ls=m(),Rs=k("blockquote"),Ds=k("p"),Bs=d("While maintaining a good developer experience (DX), we've shifted the runtime overhead to compile time."),Hs=m(),Ns=k("p"),Fs=d("You can keep the way you wanted to write the code while having the compiler to transform the code to something you are "),Us=k("em"),_s=d('"supposed"'),qs=d(" to write."),Gs=m(),Ws=k("p"),Ks=d("A win-win solution."),Ys=m(),zs=k("p"),Js=k("strong"),Xs=d("How do we apply this technique to other similar situations?"),Vs=m(),Qs=k("p"),Zs=d("First, you need to "),nt=k("a"),at=d("write a Babel plugin"),st=d("."),tt=m(),et=k("p"),ot=d("Secondly, you need a "),pt=k("strong"),ct=d("marker"),rt=d(" to target the transformation."),it=m(),lt=k("p"),ut=d("In this example, the default import from the "),ht=k("code"),kt=d('"idx"'),ft=d(" module is the "),dt=k("strong"),mt=d("marker"),gt=d(", all the usage of the default import would be transformed by the Babel plugin."),yt=m(),bt=k("p"),vt=d("Thirdly, you need to update your babel configuration. For every new plugin, "),wt=k("strong"),Et=d("you need to add them in"),xt=d("; "),It=k("strong"),At=d("you need to make sure the order of plugin is correct"),Tt=d("."),Pt=m(),St=k("p"),Ct=k("strong"),Ot=d("What if there's a bug in the Babel plugin?"),jt=m(),Mt=k("p"),$t=d("This would be the most confusing part for the new developers on the codebase."),Lt=m(),Rt=k("p"),Dt=d("In this example, if the "),Bt=k("code"),Ht=d("idx"),Nt=d(" function has a bug, it is natural for developers to dig into the source code of "),Ft=k("code"),Ut=d("idx"),_t=d(". However, "),qt=k("code"),Gt=d('"idx"'),Wt=d(" is nothing but a "),Kt=k("strong"),Yt=d("marker"),zt=d(" for the "),Jt=k("code"),Xt=d("babel-plugin-idx"),Vt=d(" to transform away. So if there's any bug, it should be inside "),Qt=k("code"),Zt=d("babel-plugin-idx"),ne=d(" instead of "),ae=k("code"),se=d("idx"),te=d("."),ee=m(),oe=k("p"),pe=d("Besides, the bug may be due to the configuration of the Babel plugin instead of the code logic itself. However if you change the configuration, it could affect all the usages of the "),ce=k("code"),re=d("idx"),ie=d(" function, because "),le=k("strong"),ue=d("babel configuration is global"),he=d("."),ke=m(),fe=k("hr"),de=m(),me=k("p"),ge=d("To summarise, I think that this solution is a win-win for DX vs User Experience (UX), however, if we can make the transform plugin more accessible to all developers, eg: without having to update babel configuration for every new transform plugin, easier to debug, and a localized configuration."),ye=m(),be=k("p"),ve=d("Well, you are looking at "),we=k("a"),Ee=d("babel macros"),xe=d(". ðŸ‘€"),Ie=m(),Ae=k("section"),Te=k("h2"),Pe=k("a"),Se=d("Babel macros"),Ce=m(),Oe=k("p"),je=d("So, here's how it would look like with babel macro:"),Me=m(),$e=k("p"),Le=k("strong"),Re=d("You add "),De=k("code"),Be=d("babel-plugin-macro"),He=d(" to babel config"),Ne=m(),Fe=k("p"),Ue=d("And that's all the change you need for babel configuration."),_e=m(),qe=k("pre"),Ge=m(),We=k("p"),Ke=k("strong"),Ye=d("You write your own macro"),ze=m(),Je=k("pre"),Xe=m(),Ve=k("p"),Qe=d("We'll talk about the code later, one thing to take away here is that your filename has to end with "),Ze=k("code"),no=d(".macro"),ao=d(" or "),so=k("code"),to=d(".macro.js"),eo=d("."),oo=m(),po=k("p"),co=k("strong"),ro=d("Use it"),io=m(),lo=k("pre"),uo=m(),ho=k("p"),ko=d("As you can see here, if there's something wrong about "),fo=k("code"),mo=d("idx"),go=d(", the user would know which file exactly to look at."),yo=m(),bo=k("p"),vo=d("You don't get the disconnection between the module "),wo=k("code"),Eo=d("idx"),xo=d(" and the plugin "),Io=k("code"),Ao=d("babel-plugin-idx"),To=d("."),Po=m(),So=k("p"),Co=d("Besides, if you want to modify configuration, say for this usage, you can do it easily:"),Oo=m(),jo=k("pre"),Mo=m(),$o=k("p"),Lo=d("Simple and explicit. Isn't that great?"),Ro=m(),Do=k("section"),Bo=k("h3"),Ho=k("a"),No=d("So what is Babel macros again?"),Fo=m(),Uo=k("p"),_o=k("strong"),qo=d("Babel macros"),Go=d(" is a concept from the "),Wo=k("a"),Ko=k("code"),Yo=d("babel-plugin-macros"),zo=d(", which defines the standard interface between compile-time code transformation and your runtime code."),Jo=m(),Xo=k("p"),Vo=d("In compile-time, "),Qo=k("code"),Zo=d("babel-plugin-macros"),np=d(" will look for all "),ap=k("code"),sp=d("import"),tp=d(" or "),ep=k("code"),op=d("require"),pp=d(" from modules ends with "),cp=k("code"),rp=d(".macro"),ip=d(", finds all references of the imported variables, and passes them to the "),lp=k("code"),up=d(".macro"),hp=d(" file to transform them."),kp=m(),fp=k("p"),dp=d("The imported variables are not restricted to be a function, it can be a variable, a type from type system (Flow / TypeScript)."),mp=m(),gp=k("p"),yp=d("If it is a default export, you can name it any way you like, if it is a named export, you can reassign to another variable name too."),bp=m(),vp=k("p"),wp=d("Cool, so how can I write my Babel macros?"),Ep=m(),xp=k("section"),Ip=k("h2"),Ap=k("a"),Tp=d("How to write Babel macros"),Pp=m(),Sp=k("p"),Cp=k("a"),Op=d("Kent C Dodds"),jp=d(" has written "),Mp=k("a"),$p=d("a fantastic guide for macro authors"),Lp=d("."),Rp=m(),Dp=k("p"),Bp=d("Please go read it."),Hp=m(),Np=k("p"),Fp=d("If you insist to stay, I am going to show you how I wrote my Babel macros, in particular, the "),Up=k("a"),_p=d("mock.macro"),qp=d(". And hopefully, along the way, you learned how to write your Babel macros as well."),Gp=m(),Wp=k("section"),Kp=k("h3"),Yp=k("a"),zp=d("mock.macro"),Jp=m(),Xp=k("p"),Vp=k("strong"),Qp=d("Motivation"),Zp=m(),nc=k("p"),ac=d("Usually, when working with a backend developer on a frontend application, I would use static type to define the API schema. For example, a user api would look like this:"),sc=m(),tc=k("pre"),ec=m(),oc=k("p"),pc=d("However while waiting for the backend developer to develop the API, I would have to use mock data for development:"),cc=m(),rc=k("pre"),ic=m(),lc=k("p"),uc=d("And along the way, due to unforeseen circumstances and lack of foresight, the response schema of the API was changed multiple times:"),hc=m(),kc=k("pre"),fc=m(),dc=k("p"),mc=d("Here you see I need to update both the type definition as well as the mock data. This reminds me of "),gc=k("a"),yc=d("the double declaration problem"),bc=d(" coined by "),vc=k("a"),wc=d("@swyx"),Ec=m(),xc=k("a"),Ic=d("in his talk"),Ac=d(". Which means that this could potentially be solved with Babel macros."),Tc=m(),Pc=k("p"),Sc=d("So in my head, I imagined with Babel macros, I could write:"),Cc=m(),Oc=k("pre"),jc=m(),Mc=k("p"),$c=d("and when I call the function "),Lc=k("code"),Rc=d("fetchUser"),Dc=d(", I would get my mock response in return."),Bc=m(),Hc=k("p"),Nc=k("strong"),Fc=d("Implementing mock.macro"),Uc=m(),_c=k("p"),qc=d("Implementing mock.macro requires some basic knowledge about Abstract Syntax Tree (AST) and writing babel transformation, you can check out "),Gc=k("a"),Wc=d("the step-by-step guide I've written previously"),Kc=d("."),Yc=m(),zc=k("p"),Jc=d("Implementing Babel macros is quite easy, the api from the "),Xc=k("code"),Vc=d("babel-plugin-macros"),Qc=d(" is pretty straightforward, all you need is to provide a default export to your macro file:"),Zc=m(),nr=k("pre"),ar=m(),sr=k("p"),tr=k("code"),er=d("createMacro"),or=d(" takes in a callback function, which is executed when someone imports this macro file. It provides:"),pr=m(),cr=k("ul"),rr=k("li"),ir=k("strong"),lr=d("references"),ur=m(),hr=k("p"),kr=d("All the reference that was imported from the macro file."),fr=m(),dr=k("p"),mr=d("For example:"),gr=m(),yr=k("pre"),br=m(),vr=k("p"),wr=d("will give you an object, with the import name as the "),Er=k("code"),xr=d("key"),Ir=d(", and array of paths as the "),Ar=k("code"),Tr=d("value"),Pr=d(":"),Sr=m(),Cr=k("pre"),Or=m(),jr=k("p"),Mr=d("Inside the array, you can get all paths where the imported names are referenced. For example:"),$r=m(),Lr=k("pre"),Rr=m(),Dr=k("ul"),Br=k("li"),Hr=k("strong"),Nr=d("state"),Fr=m(),Ur=k("p"),_r=d("It gives you the current state of the file being traversed."),qr=m(),Gr=k("p"),Wr=d("So, in this example, I need to transform all the references of "),Kr=k("code"),Yr=d("MockResponse"),zr=d(":"),Jr=m(),Xr=k("pre"),Vr=m(),Qr=k("p"),Zr=d("Next, I need to figure out how the transformed code would look like:"),ni=m(),ai=k("pre"),si=m(),ti=k("p"),ei=d("I decided to use "),oi=k("a"),pi=d("faker.js"),ci=d(" as the random data generator."),ri=m(),ii=k("p"),li=d("So I have to import "),ui=k("code"),hi=d("faker"),ki=d(" at the top of the file:"),fi=m(),di=k("pre"),mi=m(),gi=k("p"),yi=d("Next, for each references of "),bi=k("code"),vi=d("MockRespone"),wi=d(", I need to find the "),Ei=k("code"),xi=d("FunctionDeclaration"),Ii=d(" that it belongs to, and insert a "),Ai=k("code"),Ti=d("ReturnStatement"),Pi=d(" into the top of the function body:"),Si=m(),Ci=k("pre"),Oi=m(),ji=k("p"),Mi=d("In the "),$i=k("code"),Li=d("generateFakerCode"),Ri=d(", I'll generate a AST node based on the node type of the "),Di=k("code"),Bi=d("typeDef"),Hi=d(":"),Ni=m(),Fi=k("pre"),Ui=m(),_i=k("p"),qi=d("That's it! A generated mock function via type definition using Babel macros."),Gi=m(),Wi=k("p"),Ki=d("One last thing, what happens when the API is ready, and you want to disable the mocking behavior?"),Yi=m(),zi=k("p"),Ji=d("We can read the 2nd parameter of the "),Xi=k("code"),Vi=d("MockResponse"),Qi=d(":"),Zi=m(),nl=k("pre"),al=m(),sl=k("p"),tl=d("If the 2nd parameter is "),el=k("code"),ol=d("false"),pl=d(", we disable the mocking behavior:"),cl=m(),rl=k("pre"),il=m(),ll=k("blockquote"),ul=k("p"),hl=d("You can find the full code from "),kl=k("a"),fl=d("Github"),dl=d("."),ml=m(),gl=k("section"),yl=k("h2"),bl=k("a"),vl=d("Summary"),wl=m(),El=k("p"),xl=d("Sometimes, it is more efficient to move runtime abstraction and complexity to compile time. However, developing and maintaining a babel plugin for each of them may be difficult to maintain and debug, as there's a gap between the code written and build time plugin, eg: "),Il=k("code"),Al=d("idx"),Tl=d(" and "),Pl=k("code"),Sl=d("babel-plugin-idx"),Cl=d("."),Ol=m(),jl=k("p"),Ml=k("code"),$l=d("babel-plugin-macros"),Ll=d(" solves this by allow users to import "),Rl=k("code"),Dl=d(".macro"),Bl=d(" files directly into the codebase. The explicit import bridges the gap between build-time and runtime and allows the user to develop and debug their macro easily."),Hl=m(),Nl=k("section"),Fl=k("h2"),Ul=k("a"),_l=d("Further Reading"),ql=m(),Gl=k("ul"),Wl=k("li"),Kl=k("a"),Yl=d("babel-plugin-macros"),zl=d(" by "),Jl=k("a"),Xl=d("Kent C. Dodds"),Vl=m(),Ql=k("li"),Zl=k("a"),nu=d("I Can Babel Macros (and So Can You!)"),au=d(" by "),su=k("a"),tu=d("Shawn Wang"),eu=m(),ou=k("li"),pu=k("a"),cu=k("code"),ru=d("babel-plugin-macros"),iu=d(" Usage for macros authors"),lu=m(),uu=k("li"),hu=k("a"),ku=d("Zero-config code transformation with babel-plugin-macros"),fu=d(" by "),du=k("a"),mu=d("Kent C. Dodds"),gu=m(),yu=k("li"),bu=k("a"),vu=d("Awesome list for Babel macros"),wu=m(),Eu=k("li"),xu=d("The idea of converting type definition to mock generator comes from "),Iu=k("a"),Au=d("Manta Style, the futuristic API Mock Server for Frontend"),this.h()},l(n){s=v(n,"SECTION",{});var a=b(s);t=v(a,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var i=b(t);e=v(i,"LI",{});var l=b(e);o=v(l,"A",{href:!0});var k=b(o);p=w(k,"Motivation"),k.forEach(u),l.forEach(u),c=v(i,"UL",{});var d=b(c);r=v(d,"LI",{});var m=b(r);h=v(m,"A",{href:!0});var y=b(h);f=w(y,"Documentation and community support"),y.forEach(u),m.forEach(u),g=v(d,"LI",{});var Tu=b(g);x=v(Tu,"A",{href:!0});var Pu=b(x);I=w(Pu,"Tooling"),Pu.forEach(u),Tu.forEach(u),A=v(d,"LI",{});var Su=b(A);T=v(Su,"A",{href:!0});var Cu=b(T);P=w(Cu,"Maintainability"),Cu.forEach(u),Su.forEach(u),S=v(d,"LI",{});var Ou=b(S);C=v(Ou,"A",{href:!0});var ju=b(C);O=w(ju,"Consistency of the syntax"),ju.forEach(u),Ou.forEach(u),d.forEach(u),j=v(i,"LI",{});var Mu=b(j);M=v(Mu,"A",{href:!0});var $u=b(M);$=w($u,"Compile-time vs Runtime"),$u.forEach(u),Mu.forEach(u),L=v(i,"LI",{});var Lu=b(L);R=v(Lu,"A",{href:!0});var Ru=b(R);D=w(Ru,"Babel macros"),Ru.forEach(u),Lu.forEach(u),B=v(i,"UL",{});var Du=b(B);H=v(Du,"LI",{});var Bu=b(H);N=v(Bu,"A",{href:!0});var Hu=b(N);F=w(Hu,"So what is Babel macros again?"),Hu.forEach(u),Bu.forEach(u),Du.forEach(u),U=v(i,"LI",{});var Nu=b(U);_=v(Nu,"A",{href:!0});var Fu=b(_);q=w(Fu,"How to write Babel macros"),Fu.forEach(u),Nu.forEach(u),G=v(i,"UL",{});var Uu=b(G);W=v(Uu,"LI",{});var _u=b(W);K=v(_u,"A",{href:!0});var qu=b(K);Y=w(qu,"mock.macro"),qu.forEach(u),_u.forEach(u),Uu.forEach(u),z=v(i,"LI",{});var Gu=b(z);J=v(Gu,"A",{href:!0});var Wu=b(J);X=w(Wu,"Summary"),Wu.forEach(u),Gu.forEach(u),V=v(i,"LI",{});var Ku=b(V);Q=v(Ku,"A",{href:!0});var Yu=b(Q);Z=w(Yu,"Further Reading"),Yu.forEach(u),Ku.forEach(u),i.forEach(u),a.forEach(u),nn=E(n),an=v(n,"P",{});var zu=b(an);sn=w(zu,"In this article, I am going to talk about Babel macros."),zu.forEach(u),tn=E(n),en=v(n,"SECTION",{});var Ju=b(en);on=v(Ju,"H2",{});var Xu=b(on);pn=v(Xu,"A",{href:!0,id:!0});var Vu=b(pn);cn=w(Vu,"Motivation"),Vu.forEach(u),Xu.forEach(u),rn=E(Ju),ln=v(Ju,"P",{});var Qu=b(ln);un=w(Qu,"In my previous post, "),hn=v(Qu,"A",{href:!0});var Zu=b(hn);kn=w(Zu,'"Creating custom JavaScript syntax with Babel"'),Zu.forEach(u),fn=w(Qu,", I've shown you detailed steps on how you can create a custom syntax and write transform plugin or polyfills so that the syntax can be run in browsers today."),Qu.forEach(u),dn=E(Ju),mn=v(Ju,"P",{});var nh=b(mn);gn=w(nh,"However, it is purely educational, and I am not recommending you to create your custom JavaScript syntax for production projects for several reasons:"),nh.forEach(u),Ju.forEach(u),yn=E(n),bn=v(n,"SECTION",{});var ah=b(bn);vn=v(ah,"H3",{});var sh=b(vn);wn=v(sh,"A",{href:!0,id:!0});var th=b(wn);En=w(th,"Documentation and community support"),th.forEach(u),sh.forEach(u),xn=E(ah),In=v(ah,"P",{});var eh=b(In);An=w(eh,"If anything goes wrong, the great JavaScript community out there has no idea what is the "),Tn=v(eh,"CODE",{});var oh=b(Tn);Pn=w(oh,"@@"),oh.forEach(u),Sn=w(eh," ("),Cn=v(eh,"A",{href:!0});var ph=b(Cn);On=w(ph,"the curry function syntax we created previously"),ph.forEach(u),jn=w(eh,") means. Meaning the support that a new developer to the team can get is only as good as your documentation."),eh.forEach(u),ah.forEach(u),Mn=E(n),$n=v(n,"SECTION",{});var ch=b($n);Ln=v(ch,"H3",{});var rh=b(Ln);Rn=v(rh,"A",{href:!0,id:!0});var ih=b(Rn);Dn=w(ih,"Tooling"),ih.forEach(u),rh.forEach(u),Bn=E(ch),Hn=v(ch,"P",{});var lh=b(Hn);Nn=w(lh,"You need to make all the tooling you use to work. I mean eslint, prettier, Flowtype/TypeScript, your editor..."),lh.forEach(u),ch.forEach(u),Fn=E(n),Un=v(n,"SECTION",{});var uh=b(Un);_n=v(uh,"H3",{});var hh=b(_n);qn=v(hh,"A",{href:!0,id:!0});var kh=b(qn);Gn=w(kh,"Maintainability"),kh.forEach(u),hh.forEach(u),Wn=E(uh),Kn=v(uh,"P",{});var fh=b(Kn);Yn=w(fh,"If the forked version has a bug, do you have enough support to fix it?\nIf the babel upstream fixed a bug or added a feature, how often do you merge the upstream into your fork?"),fh.forEach(u),uh.forEach(u),zn=E(n),Jn=v(n,"SECTION",{});var dh=b(Jn);Xn=v(dh,"H3",{});var mh=b(Xn);Vn=v(mh,"A",{href:!0,id:!0});var gh=b(Vn);Qn=w(gh,"Consistency of the syntax"),gh.forEach(u),mh.forEach(u),Zn=E(dh),na=v(dh,"P",{});var yh=b(na);aa=w(yh,"This is the hardest part of creating a new syntax. An added syntax is an added mental concept for the language users, so the new mental model should be transferable to every scenario of the language."),yh.forEach(u),sa=E(dh),ta=v(dh,"P",{});var bh=b(ta);ea=w(bh,"Take our "),oa=v(bh,"CODE",{});var vh=b(oa);pa=w(vh,"@@"),vh.forEach(u),ca=w(bh," syntax, for example, if it works for a normal function declaration, it's expected to work for anonymous functions, arrow functions, class methods. Have you thought about how it would work with generator functions and async functions? If a curried function returns another function, does that make the returned function curried as well?"),bh.forEach(u),dh.forEach(u),ra=E(n),ia=v(n,"SECTION",{});var wh=b(ia);la=v(wh,"H2",{});var Eh=b(la);ua=v(Eh,"A",{href:!0,id:!0});var xh=b(ua);ha=w(xh,"Compile-time vs Runtime"),xh.forEach(u),Eh.forEach(u),ka=E(wh),fa=v(wh,"P",{});var Ih=b(fa);da=w(Ih,"I think you get my point. But the idea of having a magical syntax that keeps the code elegant and short is enticing."),Ih.forEach(u),ma=E(wh),ga=v(wh,"P",{});var Ah=b(ga);ya=w(Ah,"Take "),ba=v(Ah,"A",{href:!0,rel:!0});var Th=b(ba);va=w(Th,"optional chaining"),Th.forEach(u),wa=w(Ah," for example, before having the optional chaining operator "),Ea=v(Ah,"CODE",{});var Ph=b(Ea);xa=w(Ph,"?."),Ph.forEach(u),Ia=w(Ah,", we had a few ways to write "),Aa=v(Ah,"CODE",{});var Sh=b(Aa);Ta=w(Sh,"props?.user?.friends?.[0]?.friend"),Sh.forEach(u),Pa=w(Ah,", which is:"),Ah.forEach(u),Sa=E(wh),Ca=v(wh,"P",{});var Ch=b(Ca);Oa=v(Ch,"STRONG",{});var Oh=b(Oa);ja=w(Oh,"a mundane to write, not easy to read (less intentional), but most efficient possible:"),Oh.forEach(u),Ch.forEach(u),Ma=E(wh),$a=v(wh,"PRE",{class:!0}),b($a).forEach(u),La=E(wh),Ra=v(wh,"P",{});var jh=b(Ra);Da=v(jh,"STRONG",{});var Mh=b(Da);Ba=w(Mh,"easy to write, easy to read, but with slightly more runtime overhead:"),Mh.forEach(u),jh.forEach(u),Ha=E(wh),Na=v(wh,"PRE",{class:!0}),b(Na).forEach(u),Fa=E(wh),Ua=v(wh,"BLOCKQUOTE",{});var $h=b(Ua);_a=v($h,"B",{});var Lh=b(_a);qa=w(Lh,"Note:"),Lh.forEach(u),Ga=w($h," I've tried to search online whether a `try-catch` is more expensive, however the "),Wa=v($h,"A",{href:!0});var Rh=b(Wa);Ka=w(Rh,"search result"),Rh.forEach(u),Ya=E($h),za=v($h,"A",{href:!0});var Dh=b(za);Ja=w(Dh,"is not"),Dh.forEach(u),Xa=E($h),Va=v($h,"A",{href:!0});var Bh=b(Va);Qa=w(Bh,"conclusive"),Bh.forEach(u),Za=w($h,". "),ns=v($h,"A",{href:!0});var Hh=b(ns);as=w(Hh,"Let me know"),Hh.forEach(u),ss=w($h," if you have a conclusive research on this."),$h.forEach(u),ts=E(wh),es=v(wh,"P",{});var Nh=b(es);os=w(Nh,"Is there a third option that is "),ps=v(Nh,"STRONG",{});var Fh=b(ps);cs=w(Fh,"easy to read and write, yet without the try-catch runtime overhead?"),Fh.forEach(u),Nh.forEach(u),rs=E(wh),is=v(wh,"P",{});var Uh=b(is);ls=w(Uh,"Well, if you look at the "),us=v(Uh,"A",{href:!0,rel:!0});var _h=b(us);hs=v(_h,"CODE",{});var qh=b(hs);ks=w(qh,"facebookincubator/idx"),qh.forEach(u),_h.forEach(u),fs=w(Uh," library, it uses a "),ds=v(Uh,"A",{href:!0,rel:!0});var Gh=b(ds);ms=w(Gh,"Babel plugin"),Gh.forEach(u),gs=w(Uh," to search through require or imports of "),ys=v(Uh,"CODE",{});var Wh=b(ys);bs=w(Wh,"idx"),Wh.forEach(u),vs=w(Uh," and replaces all its usages, for example when you write:"),Uh.forEach(u),ws=E(wh),Es=v(wh,"PRE",{class:!0}),b(Es).forEach(u),xs=E(wh),Is=v(wh,"P",{});var Kh=b(Is);As=w(Kh,"it gets transformed into:"),Kh.forEach(u),Ts=E(wh),Ps=v(wh,"PRE",{class:!0}),b(Ps).forEach(u),Ss=E(wh),Cs=v(wh,"P",{});var Yh=b(Cs);Os=w(Yh,"So your code is easy to read, and no runtime overhead. You get the best of both worlds!"),Yh.forEach(u),js=E(wh),Ms=v(wh,"P",{});var zh=b(Ms);$s=w(zh,"Though nothing is perfect. Here, I wanted to point out some of my personal opinions about this approach:"),zh.forEach(u),Ls=E(wh),Rs=v(wh,"BLOCKQUOTE",{});var Jh=b(Rs);Ds=v(Jh,"P",{});var Xh=b(Ds);Bs=w(Xh,"While maintaining a good developer experience (DX), we've shifted the runtime overhead to compile time."),Xh.forEach(u),Jh.forEach(u),Hs=E(wh),Ns=v(wh,"P",{});var Vh=b(Ns);Fs=w(Vh,"You can keep the way you wanted to write the code while having the compiler to transform the code to something you are "),Us=v(Vh,"EM",{});var Qh=b(Us);_s=w(Qh,'"supposed"'),Qh.forEach(u),qs=w(Vh," to write."),Vh.forEach(u),Gs=E(wh),Ws=v(wh,"P",{});var Zh=b(Ws);Ks=w(Zh,"A win-win solution."),Zh.forEach(u),Ys=E(wh),zs=v(wh,"P",{});var nk=b(zs);Js=v(nk,"STRONG",{});var ak=b(Js);Xs=w(ak,"How do we apply this technique to other similar situations?"),ak.forEach(u),nk.forEach(u),Vs=E(wh),Qs=v(wh,"P",{});var sk=b(Qs);Zs=w(sk,"First, you need to "),nt=v(sk,"A",{href:!0});var tk=b(nt);at=w(tk,"write a Babel plugin"),tk.forEach(u),st=w(sk,"."),sk.forEach(u),tt=E(wh),et=v(wh,"P",{});var ek=b(et);ot=w(ek,"Secondly, you need a "),pt=v(ek,"STRONG",{});var ok=b(pt);ct=w(ok,"marker"),ok.forEach(u),rt=w(ek," to target the transformation."),ek.forEach(u),it=E(wh),lt=v(wh,"P",{});var pk=b(lt);ut=w(pk,"In this example, the default import from the "),ht=v(pk,"CODE",{});var ck=b(ht);kt=w(ck,'"idx"'),ck.forEach(u),ft=w(pk," module is the "),dt=v(pk,"STRONG",{});var rk=b(dt);mt=w(rk,"marker"),rk.forEach(u),gt=w(pk,", all the usage of the default import would be transformed by the Babel plugin."),pk.forEach(u),yt=E(wh),bt=v(wh,"P",{});var ik=b(bt);vt=w(ik,"Thirdly, you need to update your babel configuration. For every new plugin, "),wt=v(ik,"STRONG",{});var lk=b(wt);Et=w(lk,"you need to add them in"),lk.forEach(u),xt=w(ik,"; "),It=v(ik,"STRONG",{});var uk=b(It);At=w(uk,"you need to make sure the order of plugin is correct"),uk.forEach(u),Tt=w(ik,"."),ik.forEach(u),Pt=E(wh),St=v(wh,"P",{});var hk=b(St);Ct=v(hk,"STRONG",{});var kk=b(Ct);Ot=w(kk,"What if there's a bug in the Babel plugin?"),kk.forEach(u),hk.forEach(u),jt=E(wh),Mt=v(wh,"P",{});var fk=b(Mt);$t=w(fk,"This would be the most confusing part for the new developers on the codebase."),fk.forEach(u),Lt=E(wh),Rt=v(wh,"P",{});var dk=b(Rt);Dt=w(dk,"In this example, if the "),Bt=v(dk,"CODE",{});var mk=b(Bt);Ht=w(mk,"idx"),mk.forEach(u),Nt=w(dk," function has a bug, it is natural for developers to dig into the source code of "),Ft=v(dk,"CODE",{});var gk=b(Ft);Ut=w(gk,"idx"),gk.forEach(u),_t=w(dk,". However, "),qt=v(dk,"CODE",{});var yk=b(qt);Gt=w(yk,'"idx"'),yk.forEach(u),Wt=w(dk," is nothing but a "),Kt=v(dk,"STRONG",{});var bk=b(Kt);Yt=w(bk,"marker"),bk.forEach(u),zt=w(dk," for the "),Jt=v(dk,"CODE",{});var vk=b(Jt);Xt=w(vk,"babel-plugin-idx"),vk.forEach(u),Vt=w(dk," to transform away. So if there's any bug, it should be inside "),Qt=v(dk,"CODE",{});var wk=b(Qt);Zt=w(wk,"babel-plugin-idx"),wk.forEach(u),ne=w(dk," instead of "),ae=v(dk,"CODE",{});var Ek=b(ae);se=w(Ek,"idx"),Ek.forEach(u),te=w(dk,"."),dk.forEach(u),ee=E(wh),oe=v(wh,"P",{});var xk=b(oe);pe=w(xk,"Besides, the bug may be due to the configuration of the Babel plugin instead of the code logic itself. However if you change the configuration, it could affect all the usages of the "),ce=v(xk,"CODE",{});var Ik=b(ce);re=w(Ik,"idx"),Ik.forEach(u),ie=w(xk," function, because "),le=v(xk,"STRONG",{});var Ak=b(le);ue=w(Ak,"babel configuration is global"),Ak.forEach(u),he=w(xk,"."),xk.forEach(u),ke=E(wh),fe=v(wh,"HR",{}),de=E(wh),me=v(wh,"P",{});var Tk=b(me);ge=w(Tk,"To summarise, I think that this solution is a win-win for DX vs User Experience (UX), however, if we can make the transform plugin more accessible to all developers, eg: without having to update babel configuration for every new transform plugin, easier to debug, and a localized configuration."),Tk.forEach(u),ye=E(wh),be=v(wh,"P",{});var Pk=b(be);ve=w(Pk,"Well, you are looking at "),we=v(Pk,"A",{href:!0,rel:!0});var Sk=b(we);Ee=w(Sk,"babel macros"),Sk.forEach(u),xe=w(Pk,". ðŸ‘€"),Pk.forEach(u),wh.forEach(u),Ie=E(n),Ae=v(n,"SECTION",{});var Ck=b(Ae);Te=v(Ck,"H2",{});var Ok=b(Te);Pe=v(Ok,"A",{href:!0,id:!0});var jk=b(Pe);Se=w(jk,"Babel macros"),jk.forEach(u),Ok.forEach(u),Ce=E(Ck),Oe=v(Ck,"P",{});var Mk=b(Oe);je=w(Mk,"So, here's how it would look like with babel macro:"),Mk.forEach(u),Me=E(Ck),$e=v(Ck,"P",{});var $k=b($e);Le=v($k,"STRONG",{});var Lk=b(Le);Re=w(Lk,"You add "),De=v(Lk,"CODE",{});var Rk=b(De);Be=w(Rk,"babel-plugin-macro"),Rk.forEach(u),He=w(Lk," to babel config"),Lk.forEach(u),$k.forEach(u),Ne=E(Ck),Fe=v(Ck,"P",{});var Dk=b(Fe);Ue=w(Dk,"And that's all the change you need for babel configuration."),Dk.forEach(u),_e=E(Ck),qe=v(Ck,"PRE",{class:!0}),b(qe).forEach(u),Ge=E(Ck),We=v(Ck,"P",{});var Bk=b(We);Ke=v(Bk,"STRONG",{});var Hk=b(Ke);Ye=w(Hk,"You write your own macro"),Hk.forEach(u),Bk.forEach(u),ze=E(Ck),Je=v(Ck,"PRE",{class:!0}),b(Je).forEach(u),Xe=E(Ck),Ve=v(Ck,"P",{});var Nk=b(Ve);Qe=w(Nk,"We'll talk about the code later, one thing to take away here is that your filename has to end with "),Ze=v(Nk,"CODE",{});var Fk=b(Ze);no=w(Fk,".macro"),Fk.forEach(u),ao=w(Nk," or "),so=v(Nk,"CODE",{});var Uk=b(so);to=w(Uk,".macro.js"),Uk.forEach(u),eo=w(Nk,"."),Nk.forEach(u),oo=E(Ck),po=v(Ck,"P",{});var _k=b(po);co=v(_k,"STRONG",{});var qk=b(co);ro=w(qk,"Use it"),qk.forEach(u),_k.forEach(u),io=E(Ck),lo=v(Ck,"PRE",{class:!0}),b(lo).forEach(u),uo=E(Ck),ho=v(Ck,"P",{});var Gk=b(ho);ko=w(Gk,"As you can see here, if there's something wrong about "),fo=v(Gk,"CODE",{});var Wk=b(fo);mo=w(Wk,"idx"),Wk.forEach(u),go=w(Gk,", the user would know which file exactly to look at."),Gk.forEach(u),yo=E(Ck),bo=v(Ck,"P",{});var Kk=b(bo);vo=w(Kk,"You don't get the disconnection between the module "),wo=v(Kk,"CODE",{});var Yk=b(wo);Eo=w(Yk,"idx"),Yk.forEach(u),xo=w(Kk," and the plugin "),Io=v(Kk,"CODE",{});var zk=b(Io);Ao=w(zk,"babel-plugin-idx"),zk.forEach(u),To=w(Kk,"."),Kk.forEach(u),Po=E(Ck),So=v(Ck,"P",{});var Jk=b(So);Co=w(Jk,"Besides, if you want to modify configuration, say for this usage, you can do it easily:"),Jk.forEach(u),Oo=E(Ck),jo=v(Ck,"PRE",{class:!0}),b(jo).forEach(u),Mo=E(Ck),$o=v(Ck,"P",{});var Xk=b($o);Lo=w(Xk,"Simple and explicit. Isn't that great?"),Xk.forEach(u),Ck.forEach(u),Ro=E(n),Do=v(n,"SECTION",{});var Vk=b(Do);Bo=v(Vk,"H3",{});var Qk=b(Bo);Ho=v(Qk,"A",{href:!0,id:!0});var Zk=b(Ho);No=w(Zk,"So what is Babel macros again?"),Zk.forEach(u),Qk.forEach(u),Fo=E(Vk),Uo=v(Vk,"P",{});var nf=b(Uo);_o=v(nf,"STRONG",{});var af=b(_o);qo=w(af,"Babel macros"),af.forEach(u),Go=w(nf," is a concept from the "),Wo=v(nf,"A",{href:!0,rel:!0});var sf=b(Wo);Ko=v(sf,"CODE",{});var tf=b(Ko);Yo=w(tf,"babel-plugin-macros"),tf.forEach(u),sf.forEach(u),zo=w(nf,", which defines the standard interface between compile-time code transformation and your runtime code."),nf.forEach(u),Jo=E(Vk),Xo=v(Vk,"P",{});var ef=b(Xo);Vo=w(ef,"In compile-time, "),Qo=v(ef,"CODE",{});var of=b(Qo);Zo=w(of,"babel-plugin-macros"),of.forEach(u),np=w(ef," will look for all "),ap=v(ef,"CODE",{});var pf=b(ap);sp=w(pf,"import"),pf.forEach(u),tp=w(ef," or "),ep=v(ef,"CODE",{});var cf=b(ep);op=w(cf,"require"),cf.forEach(u),pp=w(ef," from modules ends with "),cp=v(ef,"CODE",{});var rf=b(cp);rp=w(rf,".macro"),rf.forEach(u),ip=w(ef,", finds all references of the imported variables, and passes them to the "),lp=v(ef,"CODE",{});var lf=b(lp);up=w(lf,".macro"),lf.forEach(u),hp=w(ef," file to transform them."),ef.forEach(u),kp=E(Vk),fp=v(Vk,"P",{});var uf=b(fp);dp=w(uf,"The imported variables are not restricted to be a function, it can be a variable, a type from type system (Flow / TypeScript)."),uf.forEach(u),mp=E(Vk),gp=v(Vk,"P",{});var hf=b(gp);yp=w(hf,"If it is a default export, you can name it any way you like, if it is a named export, you can reassign to another variable name too."),hf.forEach(u),bp=E(Vk),vp=v(Vk,"P",{});var kf=b(vp);wp=w(kf,"Cool, so how can I write my Babel macros?"),kf.forEach(u),Vk.forEach(u),Ep=E(n),xp=v(n,"SECTION",{});var ff=b(xp);Ip=v(ff,"H2",{});var df=b(Ip);Ap=v(df,"A",{href:!0,id:!0});var mf=b(Ap);Tp=w(mf,"How to write Babel macros"),mf.forEach(u),df.forEach(u),Pp=E(ff),Sp=v(ff,"P",{});var gf=b(Sp);Cp=v(gf,"A",{href:!0,rel:!0});var yf=b(Cp);Op=w(yf,"Kent C Dodds"),yf.forEach(u),jp=w(gf," has written "),Mp=v(gf,"A",{href:!0,rel:!0});var bf=b(Mp);$p=w(bf,"a fantastic guide for macro authors"),bf.forEach(u),Lp=w(gf,"."),gf.forEach(u),Rp=E(ff),Dp=v(ff,"P",{});var vf=b(Dp);Bp=w(vf,"Please go read it."),vf.forEach(u),Hp=E(ff),Np=v(ff,"P",{});var wf=b(Np);Fp=w(wf,"If you insist to stay, I am going to show you how I wrote my Babel macros, in particular, the "),Up=v(wf,"A",{href:!0,rel:!0});var Ef=b(Up);_p=w(Ef,"mock.macro"),Ef.forEach(u),qp=w(wf,". And hopefully, along the way, you learned how to write your Babel macros as well."),wf.forEach(u),ff.forEach(u),Gp=E(n),Wp=v(n,"SECTION",{});var xf=b(Wp);Kp=v(xf,"H3",{});var If=b(Kp);Yp=v(If,"A",{href:!0,id:!0});var Af=b(Yp);zp=w(Af,"mock.macro"),Af.forEach(u),If.forEach(u),Jp=E(xf),Xp=v(xf,"P",{});var Tf=b(Xp);Vp=v(Tf,"STRONG",{});var Pf=b(Vp);Qp=w(Pf,"Motivation"),Pf.forEach(u),Tf.forEach(u),Zp=E(xf),nc=v(xf,"P",{});var Sf=b(nc);ac=w(Sf,"Usually, when working with a backend developer on a frontend application, I would use static type to define the API schema. For example, a user api would look like this:"),Sf.forEach(u),sc=E(xf),tc=v(xf,"PRE",{class:!0}),b(tc).forEach(u),ec=E(xf),oc=v(xf,"P",{});var Cf=b(oc);pc=w(Cf,"However while waiting for the backend developer to develop the API, I would have to use mock data for development:"),Cf.forEach(u),cc=E(xf),rc=v(xf,"PRE",{class:!0}),b(rc).forEach(u),ic=E(xf),lc=v(xf,"P",{});var Of=b(lc);uc=w(Of,"And along the way, due to unforeseen circumstances and lack of foresight, the response schema of the API was changed multiple times:"),Of.forEach(u),hc=E(xf),kc=v(xf,"PRE",{class:!0}),b(kc).forEach(u),fc=E(xf),dc=v(xf,"P",{});var jf=b(dc);mc=w(jf,"Here you see I need to update both the type definition as well as the mock data. This reminds me of "),gc=v(jf,"A",{href:!0,rel:!0});var Mf=b(gc);yc=w(Mf,"the double declaration problem"),Mf.forEach(u),bc=w(jf," coined by "),vc=v(jf,"A",{href:!0,rel:!0});var $f=b(vc);wc=w($f,"@swyx"),$f.forEach(u),Ec=E(jf),xc=v(jf,"A",{href:!0,rel:!0});var Lf=b(xc);Ic=w(Lf,"in his talk"),Lf.forEach(u),Ac=w(jf,". Which means that this could potentially be solved with Babel macros."),jf.forEach(u),Tc=E(xf),Pc=v(xf,"P",{});var Rf=b(Pc);Sc=w(Rf,"So in my head, I imagined with Babel macros, I could write:"),Rf.forEach(u),Cc=E(xf),Oc=v(xf,"PRE",{class:!0}),b(Oc).forEach(u),jc=E(xf),Mc=v(xf,"P",{});var Df=b(Mc);$c=w(Df,"and when I call the function "),Lc=v(Df,"CODE",{});var Bf=b(Lc);Rc=w(Bf,"fetchUser"),Bf.forEach(u),Dc=w(Df,", I would get my mock response in return."),Df.forEach(u),Bc=E(xf),Hc=v(xf,"P",{});var Hf=b(Hc);Nc=v(Hf,"STRONG",{});var Nf=b(Nc);Fc=w(Nf,"Implementing mock.macro"),Nf.forEach(u),Hf.forEach(u),Uc=E(xf),_c=v(xf,"P",{});var Ff=b(_c);qc=w(Ff,"Implementing mock.macro requires some basic knowledge about Abstract Syntax Tree (AST) and writing babel transformation, you can check out "),Gc=v(Ff,"A",{href:!0});var Uf=b(Gc);Wc=w(Uf,"the step-by-step guide I've written previously"),Uf.forEach(u),Kc=w(Ff,"."),Ff.forEach(u),Yc=E(xf),zc=v(xf,"P",{});var _f=b(zc);Jc=w(_f,"Implementing Babel macros is quite easy, the api from the "),Xc=v(_f,"CODE",{});var qf=b(Xc);Vc=w(qf,"babel-plugin-macros"),qf.forEach(u),Qc=w(_f," is pretty straightforward, all you need is to provide a default export to your macro file:"),_f.forEach(u),Zc=E(xf),nr=v(xf,"PRE",{class:!0}),b(nr).forEach(u),ar=E(xf),sr=v(xf,"P",{});var Gf=b(sr);tr=v(Gf,"CODE",{});var Wf=b(tr);er=w(Wf,"createMacro"),Wf.forEach(u),or=w(Gf," takes in a callback function, which is executed when someone imports this macro file. It provides:"),Gf.forEach(u),pr=E(xf),cr=v(xf,"UL",{});var Kf=b(cr);rr=v(Kf,"LI",{});var Yf=b(rr);ir=v(Yf,"STRONG",{});var zf=b(ir);lr=w(zf,"references"),zf.forEach(u),Yf.forEach(u),Kf.forEach(u),ur=E(xf),hr=v(xf,"P",{});var Jf=b(hr);kr=w(Jf,"All the reference that was imported from the macro file."),Jf.forEach(u),fr=E(xf),dr=v(xf,"P",{});var Xf=b(dr);mr=w(Xf,"For example:"),Xf.forEach(u),gr=E(xf),yr=v(xf,"PRE",{class:!0}),b(yr).forEach(u),br=E(xf),vr=v(xf,"P",{});var Vf=b(vr);wr=w(Vf,"will give you an object, with the import name as the "),Er=v(Vf,"CODE",{});var Qf=b(Er);xr=w(Qf,"key"),Qf.forEach(u),Ir=w(Vf,", and array of paths as the "),Ar=v(Vf,"CODE",{});var Zf=b(Ar);Tr=w(Zf,"value"),Zf.forEach(u),Pr=w(Vf,":"),Vf.forEach(u),Sr=E(xf),Cr=v(xf,"PRE",{class:!0}),b(Cr).forEach(u),Or=E(xf),jr=v(xf,"P",{});var nd=b(jr);Mr=w(nd,"Inside the array, you can get all paths where the imported names are referenced. For example:"),nd.forEach(u),$r=E(xf),Lr=v(xf,"PRE",{class:!0}),b(Lr).forEach(u),Rr=E(xf),Dr=v(xf,"UL",{});var ad=b(Dr);Br=v(ad,"LI",{});var sd=b(Br);Hr=v(sd,"STRONG",{});var td=b(Hr);Nr=w(td,"state"),td.forEach(u),sd.forEach(u),ad.forEach(u),Fr=E(xf),Ur=v(xf,"P",{});var ed=b(Ur);_r=w(ed,"It gives you the current state of the file being traversed."),ed.forEach(u),qr=E(xf),Gr=v(xf,"P",{});var od=b(Gr);Wr=w(od,"So, in this example, I need to transform all the references of "),Kr=v(od,"CODE",{});var pd=b(Kr);Yr=w(pd,"MockResponse"),pd.forEach(u),zr=w(od,":"),od.forEach(u),Jr=E(xf),Xr=v(xf,"PRE",{class:!0}),b(Xr).forEach(u),Vr=E(xf),Qr=v(xf,"P",{});var cd=b(Qr);Zr=w(cd,"Next, I need to figure out how the transformed code would look like:"),cd.forEach(u),ni=E(xf),ai=v(xf,"PRE",{class:!0}),b(ai).forEach(u),si=E(xf),ti=v(xf,"P",{});var rd=b(ti);ei=w(rd,"I decided to use "),oi=v(rd,"A",{href:!0,rel:!0});var id=b(oi);pi=w(id,"faker.js"),id.forEach(u),ci=w(rd," as the random data generator."),rd.forEach(u),ri=E(xf),ii=v(xf,"P",{});var ld=b(ii);li=w(ld,"So I have to import "),ui=v(ld,"CODE",{});var ud=b(ui);hi=w(ud,"faker"),ud.forEach(u),ki=w(ld," at the top of the file:"),ld.forEach(u),fi=E(xf),di=v(xf,"PRE",{class:!0}),b(di).forEach(u),mi=E(xf),gi=v(xf,"P",{});var hd=b(gi);yi=w(hd,"Next, for each references of "),bi=v(hd,"CODE",{});var kd=b(bi);vi=w(kd,"MockRespone"),kd.forEach(u),wi=w(hd,", I need to find the "),Ei=v(hd,"CODE",{});var fd=b(Ei);xi=w(fd,"FunctionDeclaration"),fd.forEach(u),Ii=w(hd," that it belongs to, and insert a "),Ai=v(hd,"CODE",{});var dd=b(Ai);Ti=w(dd,"ReturnStatement"),dd.forEach(u),Pi=w(hd," into the top of the function body:"),hd.forEach(u),Si=E(xf),Ci=v(xf,"PRE",{class:!0}),b(Ci).forEach(u),Oi=E(xf),ji=v(xf,"P",{});var md=b(ji);Mi=w(md,"In the "),$i=v(md,"CODE",{});var gd=b($i);Li=w(gd,"generateFakerCode"),gd.forEach(u),Ri=w(md,", I'll generate a AST node based on the node type of the "),Di=v(md,"CODE",{});var yd=b(Di);Bi=w(yd,"typeDef"),yd.forEach(u),Hi=w(md,":"),md.forEach(u),Ni=E(xf),Fi=v(xf,"PRE",{class:!0}),b(Fi).forEach(u),Ui=E(xf),_i=v(xf,"P",{});var bd=b(_i);qi=w(bd,"That's it! A generated mock function via type definition using Babel macros."),bd.forEach(u),Gi=E(xf),Wi=v(xf,"P",{});var vd=b(Wi);Ki=w(vd,"One last thing, what happens when the API is ready, and you want to disable the mocking behavior?"),vd.forEach(u),Yi=E(xf),zi=v(xf,"P",{});var wd=b(zi);Ji=w(wd,"We can read the 2nd parameter of the "),Xi=v(wd,"CODE",{});var Ed=b(Xi);Vi=w(Ed,"MockResponse"),Ed.forEach(u),Qi=w(wd,":"),wd.forEach(u),Zi=E(xf),nl=v(xf,"PRE",{class:!0}),b(nl).forEach(u),al=E(xf),sl=v(xf,"P",{});var xd=b(sl);tl=w(xd,"If the 2nd parameter is "),el=v(xd,"CODE",{});var Id=b(el);ol=w(Id,"false"),Id.forEach(u),pl=w(xd,", we disable the mocking behavior:"),xd.forEach(u),cl=E(xf),rl=v(xf,"PRE",{class:!0}),b(rl).forEach(u),il=E(xf),ll=v(xf,"BLOCKQUOTE",{});var Ad=b(ll);ul=v(Ad,"P",{});var Td=b(ul);hl=w(Td,"You can find the full code from "),kl=v(Td,"A",{href:!0,rel:!0});var Pd=b(kl);fl=w(Pd,"Github"),Pd.forEach(u),dl=w(Td,"."),Td.forEach(u),Ad.forEach(u),xf.forEach(u),ml=E(n),gl=v(n,"SECTION",{});var Sd=b(gl);yl=v(Sd,"H2",{});var Cd=b(yl);bl=v(Cd,"A",{href:!0,id:!0});var Od=b(bl);vl=w(Od,"Summary"),Od.forEach(u),Cd.forEach(u),wl=E(Sd),El=v(Sd,"P",{});var jd=b(El);xl=w(jd,"Sometimes, it is more efficient to move runtime abstraction and complexity to compile time. However, developing and maintaining a babel plugin for each of them may be difficult to maintain and debug, as there's a gap between the code written and build time plugin, eg: "),Il=v(jd,"CODE",{});var Md=b(Il);Al=w(Md,"idx"),Md.forEach(u),Tl=w(jd," and "),Pl=v(jd,"CODE",{});var $d=b(Pl);Sl=w($d,"babel-plugin-idx"),$d.forEach(u),Cl=w(jd,"."),jd.forEach(u),Ol=E(Sd),jl=v(Sd,"P",{});var Ld=b(jl);Ml=v(Ld,"CODE",{});var Rd=b(Ml);$l=w(Rd,"babel-plugin-macros"),Rd.forEach(u),Ll=w(Ld," solves this by allow users to import "),Rl=v(Ld,"CODE",{});var Dd=b(Rl);Dl=w(Dd,".macro"),Dd.forEach(u),Bl=w(Ld," files directly into the codebase. The explicit import bridges the gap between build-time and runtime and allows the user to develop and debug their macro easily."),Ld.forEach(u),Sd.forEach(u),Hl=E(n),Nl=v(n,"SECTION",{});var Bd=b(Nl);Fl=v(Bd,"H2",{});var Hd=b(Fl);Ul=v(Hd,"A",{href:!0,id:!0});var Nd=b(Ul);_l=w(Nd,"Further Reading"),Nd.forEach(u),Hd.forEach(u),ql=E(Bd),Gl=v(Bd,"UL",{});var Fd=b(Gl);Wl=v(Fd,"LI",{});var Ud=b(Wl);Kl=v(Ud,"A",{href:!0,rel:!0});var _d=b(Kl);Yl=w(_d,"babel-plugin-macros"),_d.forEach(u),zl=w(Ud," by "),Jl=v(Ud,"A",{href:!0,rel:!0});var qd=b(Jl);Xl=w(qd,"Kent C. Dodds"),qd.forEach(u),Ud.forEach(u),Vl=E(Fd),Ql=v(Fd,"LI",{});var Gd=b(Ql);Zl=v(Gd,"A",{href:!0,rel:!0});var Wd=b(Zl);nu=w(Wd,"I Can Babel Macros (and So Can You!)"),Wd.forEach(u),au=w(Gd," by "),su=v(Gd,"A",{href:!0,rel:!0});var Kd=b(su);tu=w(Kd,"Shawn Wang"),Kd.forEach(u),Gd.forEach(u),eu=E(Fd),ou=v(Fd,"LI",{});var Yd=b(ou);pu=v(Yd,"A",{href:!0,rel:!0});var zd=b(pu);cu=v(zd,"CODE",{});var Jd=b(cu);ru=w(Jd,"babel-plugin-macros"),Jd.forEach(u),iu=w(zd," Usage for macros authors"),zd.forEach(u),Yd.forEach(u),lu=E(Fd),uu=v(Fd,"LI",{});var Xd=b(uu);hu=v(Xd,"A",{href:!0,rel:!0});var Vd=b(hu);ku=w(Vd,"Zero-config code transformation with babel-plugin-macros"),Vd.forEach(u),fu=w(Xd," by "),du=v(Xd,"A",{href:!0,rel:!0});var Qd=b(du);mu=w(Qd,"Kent C. Dodds"),Qd.forEach(u),Xd.forEach(u),gu=E(Fd),yu=v(Fd,"LI",{});var Zd=b(yu);bu=v(Zd,"A",{href:!0,rel:!0});var nm=b(bu);vu=w(nm,"Awesome list for Babel macros"),nm.forEach(u),Zd.forEach(u),wu=E(Fd),Eu=v(Fd,"LI",{});var am=b(Eu);xu=w(am,"The idea of converting type definition to mock generator comes from "),Iu=v(am,"A",{href:!0,rel:!0});var sm=b(Iu);Au=w(sm,"Manta Style, the futuristic API Mock Server for Frontend"),sm.forEach(u),am.forEach(u),Fd.forEach(u),Bd.forEach(u),this.h()},h(){y(o,"href","#motivation"),y(h,"href","#documentation-and-community-support"),y(x,"href","#tooling"),y(T,"href","#maintainability"),y(C,"href","#consistency-of-the-syntax"),y(M,"href","#compile-time-vs-runtime"),y(R,"href","#babel-macros"),y(N,"href","#so-what-is-babel-macros-again"),y(_,"href","#how-to-write-babel-macros"),y(K,"href","#mock-macro"),y(J,"href","#summary"),y(Q,"href","#further-reading"),y(t,"class","sitemap"),y(t,"id","sitemap"),y(t,"role","navigation"),y(t,"aria-label","Table of Contents"),y(pn,"href","#motivation"),y(pn,"id","motivation"),y(hn,"href","/creating-custom-javascript-syntax-with-babel"),y(wn,"href","#documentation-and-community-support"),y(wn,"id","documentation-and-community-support"),y(Cn,"href","/creating-custom-javascript-syntax-with-babel#overview"),y(Rn,"href","#tooling"),y(Rn,"id","tooling"),y(qn,"href","#maintainability"),y(qn,"id","maintainability"),y(Vn,"href","#consistency-of-the-syntax"),y(Vn,"id","consistency-of-the-syntax"),y(ua,"href","#compile-time-vs-runtime"),y(ua,"id","compile-time-vs-runtime"),y(ba,"href","https://v8.dev/features/optional-chaining"),y(ba,"rel","nofollow"),y($a,"class","language-js"),y(Na,"class","language-js"),y(Wa,"href","https://stackoverflow.com/questions/19727905/in-javascript-is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-n"),y(za,"href","https://news.ycombinator.com/item?id=3922963"),y(Va,"href","https://stackoverflow.com/questions/3217294/javascript-try-catch-performance-vs-error-checking-code"),y(ns,"href","https://twitter.com/lihautan"),y(us,"href","https://github.com/facebookincubator/idx"),y(us,"rel","nofollow"),y(ds,"href","https://github.com/facebookincubator/idx#babel-plugin"),y(ds,"rel","nofollow"),y(Es,"class","language-js"),y(Ps,"class","language-js"),y(nt,"href","/step-by-step-guide-for-writing-a-babel-transformation"),y(we,"href","https://github.com/kentcdodds/babel-plugin-macros"),y(we,"rel","nofollow"),y(Pe,"href","#babel-macros"),y(Pe,"id","babel-macros"),y(qe,"class","language-js"),y(Je,"class","language-js"),y(lo,"class","language-js"),y(jo,"class","language-js"),y(Ho,"href","#so-what-is-babel-macros-again"),y(Ho,"id","so-what-is-babel-macros-again"),y(Wo,"href","https://github.com/kentcdodds/babel-plugin-macros"),y(Wo,"rel","nofollow"),y(Ap,"href","#how-to-write-babel-macros"),y(Ap,"id","how-to-write-babel-macros"),y(Cp,"href","http://kentcdodds.com"),y(Cp,"rel","nofollow"),y(Mp,"href","https://github.com/kentcdodds/babel-plugin-macros/blob/master/other/docs/author.md"),y(Mp,"rel","nofollow"),y(Up,"href","https://www.npmjs.com/package/mock.macro"),y(Up,"rel","nofollow"),y(Yp,"href","#mock-macro"),y(Yp,"id","mock-macro"),y(tc,"class","language-js"),y(rc,"class","language-js"),y(kc,"class","language-js"),y(gc,"href","https://babel-blade.netlify.com/docs/declarationdeclaration"),y(gc,"rel","nofollow"),y(vc,"href","https://twitter.com/swyx"),y(vc,"rel","nofollow"),y(xc,"href","https://www.youtube.com/watch?v=1WNT5RCENfo"),y(xc,"rel","nofollow"),y(Oc,"class","language-js"),y(Gc,"href","/step-by-step-guide-for-writing-a-babel-transformation"),y(nr,"class","language-js"),y(yr,"class","language-js"),y(Cr,"class","language-js"),y(Lr,"class","language-js"),y(Xr,"class","language-js"),y(ai,"class","language-js"),y(oi,"href","https://github.com/marak/Faker.js/"),y(oi,"rel","nofollow"),y(di,"class","language-js"),y(Ci,"class","language-js"),y(Fi,"class","language-js"),y(nl,"class","language-js"),y(rl,"class","language-js"),y(kl,"href","https://github.com/tanhauhau/mock.macro"),y(kl,"rel","nofollow"),y(bl,"href","#summary"),y(bl,"id","summary"),y(Ul,"href","#further-reading"),y(Ul,"id","further-reading"),y(Kl,"href","https://github.com/kentcdodds/babel-plugin-macros"),y(Kl,"rel","nofollow"),y(Jl,"href","https://twitter.com/kentcdodds/"),y(Jl,"rel","nofollow"),y(Zl,"href","https://www.youtube.com/watch?v=1WNT5RCENfo"),y(Zl,"rel","nofollow"),y(su,"href","https://twitter.com/swyx"),y(su,"rel","nofollow"),y(pu,"href","https://github.com/kentcdodds/babel-plugin-macros/blob/master/other/docs/author.md"),y(pu,"rel","nofollow"),y(hu,"href","https://babeljs.io/blog/2017/09/11/zero-config-with-babel-macros"),y(hu,"rel","nofollow"),y(du,"href","https://twitter.com/kentcdodds/"),y(du,"rel","nofollow"),y(bu,"href","https://github.com/jgierer12/awesome-babel-macros"),y(bu,"rel","nofollow"),y(Iu,"href","https://github.com/Cryrivers/manta-style"),y(Iu,"rel","nofollow")},m(n,a){l(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(t,c),i(c,r),i(r,h),i(h,f),i(c,g),i(g,x),i(x,I),i(c,A),i(A,T),i(T,P),i(c,S),i(S,C),i(C,O),i(t,j),i(j,M),i(M,$),i(t,L),i(L,R),i(R,D),i(t,B),i(B,H),i(H,N),i(N,F),i(t,U),i(U,_),i(_,q),i(t,G),i(G,W),i(W,K),i(K,Y),i(t,z),i(z,J),i(J,X),i(t,V),i(V,Q),i(Q,Z),l(n,nn,a),l(n,an,a),i(an,sn),l(n,tn,a),l(n,en,a),i(en,on),i(on,pn),i(pn,cn),i(en,rn),i(en,ln),i(ln,un),i(ln,hn),i(hn,kn),i(ln,fn),i(en,dn),i(en,mn),i(mn,gn),l(n,yn,a),l(n,bn,a),i(bn,vn),i(vn,wn),i(wn,En),i(bn,xn),i(bn,In),i(In,An),i(In,Tn),i(Tn,Pn),i(In,Sn),i(In,Cn),i(Cn,On),i(In,jn),l(n,Mn,a),l(n,$n,a),i($n,Ln),i(Ln,Rn),i(Rn,Dn),i($n,Bn),i($n,Hn),i(Hn,Nn),l(n,Fn,a),l(n,Un,a),i(Un,_n),i(_n,qn),i(qn,Gn),i(Un,Wn),i(Un,Kn),i(Kn,Yn),l(n,zn,a),l(n,Jn,a),i(Jn,Xn),i(Xn,Vn),i(Vn,Qn),i(Jn,Zn),i(Jn,na),i(na,aa),i(Jn,sa),i(Jn,ta),i(ta,ea),i(ta,oa),i(oa,pa),i(ta,ca),l(n,ra,a),l(n,ia,a),i(ia,la),i(la,ua),i(ua,ha),i(ia,ka),i(ia,fa),i(fa,da),i(ia,ma),i(ia,ga),i(ga,ya),i(ga,ba),i(ba,va),i(ga,wa),i(ga,Ea),i(Ea,xa),i(ga,Ia),i(ga,Aa),i(Aa,Ta),i(ga,Pa),i(ia,Sa),i(ia,Ca),i(Ca,Oa),i(Oa,ja),i(ia,Ma),i(ia,$a),$a.innerHTML='<code class="language-js"><span class="token keyword">const</span> firstFriend <span class="token operator">=</span>\n  props<span class="token punctuation">.</span><span class="token property-access">user</span> <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span> <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n    <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friend</span>\n    <span class="token punctuation">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>\n\n<span class="token comment">// or with ternary</span>\n<span class="token keyword">const</span> firstFriend <span class="token operator">=</span> props\n  <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span>\n    <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span>\n      <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span>\n        <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n          <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friend</span>\n          <span class="token punctuation">:</span> <span class="token keyword null nil">null</span>\n        <span class="token punctuation">:</span> <span class="token keyword null nil">null</span>\n      <span class="token punctuation">:</span> <span class="token keyword null nil">null</span>\n    <span class="token punctuation">:</span> <span class="token keyword null nil">null</span>\n  <span class="token punctuation">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></code>',i(ia,La),i(ia,Ra),i(Ra,Da),i(Da,Ba),i(ia,Ha),i(ia,Na),Na.innerHTML='<code class="language-js"><span class="token keyword">const</span> firstFriend <span class="token operator">=</span> <span class="token function">idx</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token arrow operator">=></span> _<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friend</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">idx</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> accessor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> <span class="token function">accessor</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(ia,Fa),i(ia,Ua),i(Ua,_a),i(_a,qa),i(Ua,Ga),i(Ua,Wa),i(Wa,Ka),i(Ua,Ya),i(Ua,za),i(za,Ja),i(Ua,Xa),i(Ua,Va),i(Va,Qa),i(Ua,Za),i(Ua,ns),i(ns,as),i(Ua,ss),i(ia,ts),i(ia,es),i(es,os),i(es,ps),i(ps,cs),i(ia,rs),i(ia,is),i(is,ls),i(is,us),i(us,hs),i(hs,ks),i(is,fs),i(is,ds),i(ds,ms),i(is,gs),i(is,ys),i(ys,bs),i(is,vs),i(ia,ws),i(ia,Es),Es.innerHTML='<code class="language-js"><span class="token keyword module">import</span> idx <span class="token keyword module">from</span> <span class="token string">\'idx\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token function">idx</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token arrow operator">=></span> _<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(ia,xs),i(ia,Is),i(Is,As),i(ia,Ts),i(ia,Ps),Ps.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> props<span class="token punctuation">.</span><span class="token property-access">user</span> <span class="token operator">==</span> <span class="token keyword null nil">null</span>\n    <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span>\n    <span class="token punctuation">:</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span> <span class="token operator">==</span> <span class="token keyword null nil">null</span>\n    <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span>\n    <span class="token punctuation">:</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword null nil">null</span>\n    <span class="token operator">?</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n    <span class="token punctuation">:</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(ia,Ss),i(ia,Cs),i(Cs,Os),i(ia,js),i(ia,Ms),i(Ms,$s),i(ia,Ls),i(ia,Rs),i(Rs,Ds),i(Ds,Bs),i(ia,Hs),i(ia,Ns),i(Ns,Fs),i(Ns,Us),i(Us,_s),i(Ns,qs),i(ia,Gs),i(ia,Ws),i(Ws,Ks),i(ia,Ys),i(ia,zs),i(zs,Js),i(Js,Xs),i(ia,Vs),i(ia,Qs),i(Qs,Zs),i(Qs,nt),i(nt,at),i(Qs,st),i(ia,tt),i(ia,et),i(et,ot),i(et,pt),i(pt,ct),i(et,rt),i(ia,it),i(ia,lt),i(lt,ut),i(lt,ht),i(ht,kt),i(lt,ft),i(lt,dt),i(dt,mt),i(lt,gt),i(ia,yt),i(ia,bt),i(bt,vt),i(bt,wt),i(wt,Et),i(bt,xt),i(bt,It),i(It,At),i(bt,Tt),i(ia,Pt),i(ia,St),i(St,Ct),i(Ct,Ot),i(ia,jt),i(ia,Mt),i(Mt,$t),i(ia,Lt),i(ia,Rt),i(Rt,Dt),i(Rt,Bt),i(Bt,Ht),i(Rt,Nt),i(Rt,Ft),i(Ft,Ut),i(Rt,_t),i(Rt,qt),i(qt,Gt),i(Rt,Wt),i(Rt,Kt),i(Kt,Yt),i(Rt,zt),i(Rt,Jt),i(Jt,Xt),i(Rt,Vt),i(Rt,Qt),i(Qt,Zt),i(Rt,ne),i(Rt,ae),i(ae,se),i(Rt,te),i(ia,ee),i(ia,oe),i(oe,pe),i(oe,ce),i(ce,re),i(oe,ie),i(oe,le),i(le,ue),i(oe,he),i(ia,ke),i(ia,fe),i(ia,de),i(ia,me),i(me,ge),i(ia,ye),i(ia,be),i(be,ve),i(be,we),i(we,Ee),i(be,xe),l(n,Ie,a),l(n,Ae,a),i(Ae,Te),i(Te,Pe),i(Pe,Se),i(Ae,Ce),i(Ae,Oe),i(Oe,je),i(Ae,Me),i(Ae,$e),i($e,Le),i(Le,Re),i(Le,De),i(De,Be),i(Le,He),i(Ae,Ne),i(Ae,Fe),i(Fe,Ue),i(Ae,_e),i(Ae,qe),qe.innerHTML='<code class="language-js"><span class="token comment">// filename: babel.config.js</span>\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-next-line</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'babel-plugin-macros\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(Ae,Ge),i(Ae,We),i(We,Ke),i(Ke,Ye),i(Ae,ze),i(Ae,Je),Je.innerHTML='<code class="language-js"><span class="token comment">// filename: src/utils/idx.macro.js</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> createMacro <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'babel-plugin-macros\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> state<span class="token punctuation">,</span> references <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n  references<span class="token punctuation">.</span><span class="token keyword module">default</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">referencePath</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n    <span class="token function">idx_transform</span><span class="token punctuation">(</span>referencePath<span class="token punctuation">.</span><span class="token property-access">parentPath</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Ae,Xe),i(Ae,Ve),i(Ve,Qe),i(Ve,Ze),i(Ze,no),i(Ve,ao),i(Ve,so),i(so,to),i(Ve,eo),i(Ae,oo),i(Ae,po),i(po,co),i(co,ro),i(Ae,io),i(Ae,lo),lo.innerHTML='<code class="language-js"><span class="token comment">// filename: src/index.js</span>\n<span class="token keyword module">import</span> idx <span class="token keyword module">from</span> <span class="token string">\'./utils/idx.macro\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token function">idx</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token arrow operator">=></span> _<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(Ae,uo),i(Ae,ho),i(ho,ko),i(ho,fo),i(fo,mo),i(ho,go),i(Ae,yo),i(Ae,bo),i(bo,vo),i(bo,wo),i(wo,Eo),i(bo,xo),i(bo,Io),i(Io,Ao),i(bo,To),i(Ae,Po),i(Ae,So),i(So,Co),i(Ae,Oo),i(Ae,jo),jo.innerHTML='<code class="language-js"><span class="token comment">// filename: src/index.js</span>\n<span class="token keyword module">import</span> idx <span class="token keyword module">from</span> <span class="token string">\'./utils/idx.macro\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-next-line</span>\n  <span class="token keyword">return</span> <span class="token function">idx</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token arrow operator">=></span> _<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">friends</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> strict<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(Ae,Mo),i(Ae,$o),i($o,Lo),l(n,Ro,a),l(n,Do,a),i(Do,Bo),i(Bo,Ho),i(Ho,No),i(Do,Fo),i(Do,Uo),i(Uo,_o),i(_o,qo),i(Uo,Go),i(Uo,Wo),i(Wo,Ko),i(Ko,Yo),i(Uo,zo),i(Do,Jo),i(Do,Xo),i(Xo,Vo),i(Xo,Qo),i(Qo,Zo),i(Xo,np),i(Xo,ap),i(ap,sp),i(Xo,tp),i(Xo,ep),i(ep,op),i(Xo,pp),i(Xo,cp),i(cp,rp),i(Xo,ip),i(Xo,lp),i(lp,up),i(Xo,hp),i(Do,kp),i(Do,fp),i(fp,dp),i(Do,mp),i(Do,gp),i(gp,yp),i(Do,bp),i(Do,vp),i(vp,wp),l(n,Ep,a),l(n,xp,a),i(xp,Ip),i(Ip,Ap),i(Ap,Tp),i(xp,Pp),i(xp,Sp),i(Sp,Cp),i(Cp,Op),i(Sp,jp),i(Sp,Mp),i(Mp,$p),i(Sp,Lp),i(xp,Rp),i(xp,Dp),i(Dp,Bp),i(xp,Hp),i(xp,Np),i(Np,Fp),i(Np,Up),i(Up,_p),i(Np,qp),l(n,Gp,a),l(n,Wp,a),i(Wp,Kp),i(Kp,Yp),i(Yp,zp),i(Wp,Jp),i(Wp,Xp),i(Xp,Vp),i(Vp,Qp),i(Wp,Zp),i(Wp,nc),i(nc,ac),i(Wp,sc),i(Wp,tc),tc.innerHTML='<code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>\n  <span class="token parameter">userId<span class="token punctuation">:</span> number</span>\n<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token maybe-class-name">Response</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span>\n  id<span class="token punctuation">:</span> number<span class="token punctuation">,</span>\n  username<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  email<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  address<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code>',i(Wp,ec),i(Wp,oc),i(oc,pc),i(Wp,cc),i(Wp,rc),rc.innerHTML='<code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">:</span> number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token maybe-class-name">Response</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> <span class="token spread operator">...</span> <span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-start</span>\n  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>\n    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    username<span class="token punctuation">:</span> <span class="token string">\'tanhauhau\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'tanhauhau@foo.bar\'</span><span class="token punctuation">,</span>\n    address<span class="token punctuation">:</span> <span class="token string">\'123 Bar Street, Foo\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n  <span class="token comment">// highlight-end</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,ic),i(Wp,lc),i(lc,uc),i(Wp,hc),i(Wp,kc),kc.innerHTML='<code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>\n  <span class="token parameter">userId<span class="token punctuation">:</span> number</span>\n<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token maybe-class-name">Response</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span>\n  id<span class="token punctuation">:</span> number<span class="token punctuation">,</span>\n  username<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  email<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  address<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  <span class="token comment">// highlight-next-line</span>\n  contact<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>\n    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    username<span class="token punctuation">:</span> <span class="token string">\'tanhauhau\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'tanhauhau@foo.bar\'</span><span class="token punctuation">,</span>\n    address<span class="token punctuation">:</span> <span class="token string">\'123 Bar Street, Foo\'</span><span class="token punctuation">,</span>\n    <span class="token comment">// highlight-next-line</span>\n    contact<span class="token punctuation">:</span> <span class="token string">\'0123456789\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,fc),i(Wp,dc),i(dc,mc),i(dc,gc),i(gc,yc),i(dc,bc),i(dc,vc),i(vc,wc),i(dc,Ec),i(dc,xc),i(xc,Ic),i(dc,Ac),i(Wp,Tc),i(Wp,Pc),i(Pc,Sc),i(Wp,Cc),i(Wp,Oc),Oc.innerHTML='<code class="language-js"><span class="token keyword module">import</span> type <span class="token punctuation">&#123;</span> <span class="token maybe-class-name">MockResponse</span> <span class="token punctuation">&#125;</span> <span class="token keyword module">from</span> <span class="token string">\'./mock.macro\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>\n  <span class="token parameter">userId<span class="token punctuation">:</span> number</span>\n<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token maybe-class-name">MockResponse</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span>\n  id<span class="token punctuation">:</span> number<span class="token punctuation">,</span>\n  username<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  email<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  address<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n  contact<span class="token punctuation">:</span> string<span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// TODO:</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,jc),i(Wp,Mc),i(Mc,$c),i(Mc,Lc),i(Lc,Rc),i(Mc,Dc),i(Wp,Bc),i(Wp,Hc),i(Hc,Nc),i(Nc,Fc),i(Wp,Uc),i(Wp,_c),i(_c,qc),i(_c,Gc),i(Gc,Wc),i(_c,Kc),i(Wp,Yc),i(Wp,zc),i(zc,Jc),i(zc,Xc),i(Xc,Vc),i(zc,Qc),i(Wp,Zc),i(Wp,nr),nr.innerHTML='<code class="language-js"><span class="token comment">// filename: mock.macro.js</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> createMacro <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'babel-plugin-macros\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> references<span class="token punctuation">,</span> state<span class="token punctuation">,</span> babel <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// TODO:</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Wp,ar),i(Wp,sr),i(sr,tr),i(tr,er),i(sr,or),i(Wp,pr),i(Wp,cr),i(cr,rr),i(rr,ir),i(ir,lr),i(Wp,ur),i(Wp,hr),i(hr,kr),i(Wp,fr),i(Wp,dr),i(dr,mr),i(Wp,gr),i(Wp,yr),yr.innerHTML='<code class="language-js"><span class="token keyword module">import</span> foo<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> bar <span class="token punctuation">&#125;</span> <span class="token keyword module">from</span> <span class="token string">\'./foobar.macro\'</span><span class="token punctuation">;</span></code>',i(Wp,br),i(Wp,vr),i(vr,wr),i(vr,Er),i(Er,xr),i(vr,Ir),i(vr,Ar),i(Ar,Tr),i(vr,Pr),i(Wp,Sr),i(Wp,Cr),Cr.innerHTML='<code class="language-js"><span class="token punctuation">&#123;</span>\n  <span class="token string">"default"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token string">"bar"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,Or),i(Wp,jr),i(jr,Mr),i(Wp,$r),i(Wp,Lr),Lr.innerHTML='<code class="language-js"><span class="token keyword module">import</span> foo <span class="token keyword module">from</span> <span class="token string">\'./foobar.macro.js\'</span><span class="token punctuation">;</span>\n\n<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">\'a\'</span><span class="token punctuation">)</span> <span class="token comment">// &lt;-- referenced &#96;foo&#96;</span>\n\n<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> foo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- referenced &#96;foo&#96;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> foo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- not referencing &#96;foo&#96;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// &#96;references&#96;:</span>\n<span class="token punctuation">&#123;</span>\n  <span class="token string">"default"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token maybe-class-name">Path</span><span class="token punctuation">,</span> <span class="token comment">// foo in foo(\'a\')</span>\n    <span class="token maybe-class-name">Path</span><span class="token punctuation">,</span> <span class="token comment">// foo in foo + 1</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,Rr),i(Wp,Dr),i(Dr,Br),i(Br,Hr),i(Hr,Nr),i(Wp,Fr),i(Wp,Ur),i(Ur,_r),i(Wp,qr),i(Wp,Gr),i(Gr,Wr),i(Gr,Kr),i(Kr,Yr),i(Gr,zr),i(Wp,Jr),i(Wp,Xr),Xr.innerHTML='<code class="language-js"><span class="token comment">// filename: mock.macro.js</span>\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> references<span class="token punctuation">,</span> state<span class="token punctuation">,</span> babel <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-start</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>references<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockResponse</span></span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// TODO:</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token comment">// highlight-end</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Wp,Vr),i(Wp,Qr),i(Qr,Zr),i(Wp,ni),i(Wp,ai),ai.innerHTML='<code class="language-js"><span class="token keyword module">import</span> faker <span class="token keyword module">from</span> <span class="token string">\'faker\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token parameter">userId</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>\n    id<span class="token punctuation">:</span> faker<span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    username<span class="token punctuation">:</span> faker<span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">.</span><span class="token method function property-access">word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> faker<span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">.</span><span class="token method function property-access">word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    address<span class="token punctuation">:</span> faker<span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">.</span><span class="token method function property-access">word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    contact<span class="token punctuation">:</span> faker<span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">.</span><span class="token method function property-access">word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,si),i(Wp,ti),i(ti,ei),i(ti,oi),i(oi,pi),i(ti,ci),i(Wp,ri),i(Wp,ii),i(ii,li),i(ii,ui),i(ui,hi),i(ii,ki),i(Wp,fi),i(Wp,di),di.innerHTML='<code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> references<span class="token punctuation">,</span> state<span class="token punctuation">,</span> babel <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>references<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockResponse</span></span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// highlight-start</span>\n    <span class="token keyword">const</span> fakerIdentifier <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">.</span><span class="token property-access">scope</span><span class="token punctuation">.</span><span class="token method function property-access">generateUidIdentifier</span><span class="token punctuation">(</span>\n      <span class="token string">\'faker\'</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> importStatement <span class="token operator">=</span> babel<span class="token punctuation">.</span><span class="token method function property-access">template</span><span class="token punctuation">(</span><span class="token string">"import %%FAKER%% from \'faker\'"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>\n      <span class="token constant">FAKER</span><span class="token punctuation">:</span> fakerIdentifier<span class="token punctuation">,</span>\n    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    state<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">.</span><span class="token method function property-access">unshiftContainer</span><span class="token punctuation">(</span><span class="token string">\'body\'</span><span class="token punctuation">,</span> importStatement<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Wp,mi),i(Wp,gi),i(gi,yi),i(gi,bi),i(bi,vi),i(gi,wi),i(gi,Ei),i(Ei,xi),i(gi,Ii),i(gi,Ai),i(Ai,Ti),i(gi,Pi),i(Wp,Si),i(Wp,Ci),Ci.innerHTML='<code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> references<span class="token punctuation">,</span> state<span class="token punctuation">,</span> babel <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>references<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockResponse</span></span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// ... inserting &#96;import faker from \'faker\'&#96;</span>\n\n    <span class="token comment">// highlight-start</span>\n    references<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockResponse</span></span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">reference</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">const</span> functionDeclaration <span class="token operator">=</span> reference<span class="token punctuation">.</span><span class="token method function property-access">getFunctionParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> typeDef <span class="token operator">=</span> reference<span class="token punctuation">.</span><span class="token property-access">parentPath</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">\'typeParameters.params.0\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">;</span>\n      functionDeclaration\n        <span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">\'body\'</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token method function property-access">unshiftContainer</span><span class="token punctuation">(</span>\n          <span class="token string">\'body\'</span><span class="token punctuation">,</span>\n          babel<span class="token punctuation">.</span><span class="token property-access">types</span><span class="token punctuation">.</span><span class="token method function property-access">returnStatement</span><span class="token punctuation">(</span>\n            <span class="token function">generateFakerCode</span><span class="token punctuation">(</span>fakerIdentifier<span class="token punctuation">,</span> typeDef<span class="token punctuation">)</span>\n          <span class="token punctuation">)</span>\n        <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Wp,Oi),i(Wp,ji),i(ji,Mi),i(ji,$i),i($i,Li),i(ji,Ri),i(ji,Di),i(Di,Bi),i(ji,Hi),i(Wp,Ni),i(Wp,Fi),Fi.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">generateFakerCode</span><span class="token punctuation">(</span><span class="token parameter">fakerIdentifier<span class="token punctuation">,</span> typeDef</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">switch</span> <span class="token punctuation">(</span>typeDef<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">case</span> <span class="token string">\'ObjectTypeAnnotation\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> babel<span class="token punctuation">.</span><span class="token property-access">types</span><span class="token punctuation">.</span><span class="token method function property-access">objectExpression</span><span class="token punctuation">(</span>\n        typeDef<span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">property</span> <span class="token arrow operator">=></span>\n          babel<span class="token punctuation">.</span><span class="token property-access">types</span><span class="token punctuation">.</span><span class="token method function property-access">objectProperty</span><span class="token punctuation">(</span>\n            babel<span class="token punctuation">.</span><span class="token property-access">types</span><span class="token punctuation">.</span><span class="token method function property-access">identifier</span><span class="token punctuation">(</span>property<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token function">generateFakerCode</span><span class="token punctuation">(</span>fakerIdentifier<span class="token punctuation">,</span> property<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span>\n          <span class="token punctuation">)</span>\n        <span class="token punctuation">)</span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">case</span> <span class="token string">\'NumberTypeAnnotation\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> babel<span class="token punctuation">.</span><span class="token method function property-access">expression</span><span class="token punctuation">(</span><span class="token string">\'%%FAKER%%.random.number()\'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>\n        <span class="token constant">FAKER</span><span class="token punctuation">:</span> fakerIdentifier<span class="token punctuation">,</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">case</span> <span class="token string">\'StringTypeAnnotation\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> babel<span class="token punctuation">.</span><span class="token method function property-access">expression</span><span class="token punctuation">(</span><span class="token string">\'%%FAKER%%.random.word()\'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>\n        <span class="token constant">FAKER</span><span class="token punctuation">:</span> fakerIdentifier<span class="token punctuation">,</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">case</span> <span class="token string">\'BooleanTypeAnnotation\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> babel<span class="token punctuation">.</span><span class="token method function property-access">expression</span><span class="token punctuation">(</span><span class="token string">\'%%FAKER%%.random.boolean()\'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>\n        <span class="token constant">FAKER</span><span class="token punctuation">:</span> fakerIdentifier<span class="token punctuation">,</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword module">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MacroError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Unknown type definition: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>typeDef<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(Wp,Ui),i(Wp,_i),i(_i,qi),i(Wp,Gi),i(Wp,Wi),i(Wi,Ki),i(Wp,Yi),i(Wp,zi),i(zi,Ji),i(zi,Xi),i(Xi,Vi),i(zi,Qi),i(Wp,Zi),i(Wp,nl),nl.innerHTML='<code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token parameter"><span class="token spread operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token maybe-class-name">MockResponse</span><span class="token operator">&lt;</span><span class="token comment">/*...*/</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code>',i(Wp,al),i(Wp,sl),i(sl,tl),i(sl,el),i(el,ol),i(sl,pl),i(Wp,cl),i(Wp,rl),rl.innerHTML='<code class="language-js"><span class="token comment">// filename: mock.macro.js</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> createMacro <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'babel-plugin-macros\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token function">createMacro</span><span class="token punctuation">(</span>\n  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> references<span class="token punctuation">,</span> state<span class="token punctuation">,</span> babel<span class="token punctuation">,</span> config <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    references<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockResponse</span></span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">reference</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">const</span> functionDeclaration <span class="token operator">=</span> reference<span class="token punctuation">.</span><span class="token method function property-access">getFunctionParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> typeDef <span class="token operator">=</span> reference<span class="token punctuation">.</span><span class="token property-access">parentPath</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">\'typeParameters.params.0\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">;</span>\n\n      <span class="token comment">// highlight-start</span>\n      <span class="token comment">// if the 2nd argument present and it is \'false\', disable mocking</span>\n      <span class="token keyword">const</span> secondParam <span class="token operator">=</span> reference<span class="token punctuation">.</span><span class="token property-access">parentPath</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">\'typeParameters.params.1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>secondParam <span class="token operator">&amp;&amp;</span> secondParam<span class="token punctuation">.</span><span class="token method function property-access">isBooleanLiteralTypeAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> value<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">&#125;</span>\n      <span class="token comment">// highlight-end</span>\n      <span class="token comment">// ...insert return statement</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Wp,il),i(Wp,ll),i(ll,ul),i(ul,hl),i(ul,kl),i(kl,fl),i(ul,dl),l(n,ml,a),l(n,gl,a),i(gl,yl),i(yl,bl),i(bl,vl),i(gl,wl),i(gl,El),i(El,xl),i(El,Il),i(Il,Al),i(El,Tl),i(El,Pl),i(Pl,Sl),i(El,Cl),i(gl,Ol),i(gl,jl),i(jl,Ml),i(Ml,$l),i(jl,Ll),i(jl,Rl),i(Rl,Dl),i(jl,Bl),l(n,Hl,a),l(n,Nl,a),i(Nl,Fl),i(Fl,Ul),i(Ul,_l),i(Nl,ql),i(Nl,Gl),i(Gl,Wl),i(Wl,Kl),i(Kl,Yl),i(Wl,zl),i(Wl,Jl),i(Jl,Xl),i(Gl,Vl),i(Gl,Ql),i(Ql,Zl),i(Zl,nu),i(Ql,au),i(Ql,su),i(su,tu),i(Gl,eu),i(Gl,ou),i(ou,pu),i(pu,cu),i(cu,ru),i(pu,iu),i(Gl,lu),i(Gl,uu),i(uu,hu),i(hu,ku),i(uu,fu),i(uu,du),i(du,mu),i(Gl,gu),i(Gl,yu),i(yu,bu),i(bu,vu),i(Gl,wu),i(Gl,Eu),i(Eu,xu),i(Eu,Iu),i(Iu,Au)},p:n,d(n){n&&u(s),n&&u(nn),n&&u(an),n&&u(tn),n&&u(en),n&&u(yn),n&&u(bn),n&&u(Mn),n&&u($n),n&&u(Fn),n&&u(Un),n&&u(zn),n&&u(Jn),n&&u(ra),n&&u(ia),n&&u(Ie),n&&u(Ae),n&&u(Ro),n&&u(Do),n&&u(Ep),n&&u(xp),n&&u(Gp),n&&u(Wp),n&&u(ml),n&&u(gl),n&&u(Hl),n&&u(Nl)}}}function kn(n){let s,t;const e=[fn];let o={$$slots:{default:[hn]},$$scope:{ctx:n}};for(let n=0;n<e.length;n+=1)o=a(o,e[n]);return s=new un({props:o}),{c(){q(s.$$.fragment)},l(n){G(s.$$.fragment,n)},m(n,a){W(s,n,a),t=!0},p(n,[a]){const t=0&a?function(n,a){const s={},t={},e={$$scope:1};let o=n.length;for(;o--;){const p=n[o],c=a[o];if(c){for(const n in p)n in c||(t[n]=1);for(const n in c)e[n]||(s[n]=c[n],e[n]=1);n[o]=c}else for(const n in p)e[n]=1}for(const n in t)n in s||(s[n]=void 0);return s}(e,[(o=fn,"object"==typeof o&&null!==o?o:{})]):{};var o;1&a&&(t.$$scope={dirty:a,ctx:n}),s.$set(t)},i(n){t||(U(s.$$.fragment,n),t=!0)},o(n){_(s.$$.fragment,n),t=!1},d(n){K(s,n)}}}const fn={title:"Babel macros",date:"2019-10-08T08:00:00Z",series:"Intermediate Babel",tags:["JavaScript","babel","ast","transform"],description:"Custom JavaScript syntax is hard to maintain, custom babel transform plugin is no better. That's why we need Babel macros.",slug:"babel-macros",type:"blog"};class dn extends J{constructor(n){super(),z(this,n,null,kn,p,{})}}setTimeout(()=>{new dn({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const n=document.createElement("script");n.async=!0,n.src="https://platform.twitter.com/widgets.js",n.charset="utf-8",document.body.appendChild(n)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(n=>{n.src=n.dataset.src})}else{const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(n)}},3e3);
