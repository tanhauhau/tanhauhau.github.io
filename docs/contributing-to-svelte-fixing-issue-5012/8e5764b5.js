function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function a(){return Object.create(null)}function s(t){t.forEach(n)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,n,a,s){return t[1]&&s?e(a.ctx.slice(),t[1](s(n))):a.ctx}function l(t,e,n,a,s,o,c){const l=function(t,e,n,a){if(t[2]&&a){const s=t[2](a(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let a=0;a<n;a+=1)t[a]=e.dirty[a]|s[a];return t}return e.dirty|s}return e.dirty}(e,a,s,o);if(l){const s=r(e,n,a,c);t.p(s,l)}}function i(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function v(){return m("")}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return Array.from(t.childNodes)}function b(t,e,n,a){for(let a=0;a<t.length;a+=1){const s=t[a];if(s.nodeName===e){let e=0;const o=[];for(;e<s.attributes.length;){const t=s.attributes[e++];n[t.name]||o.push(t.name)}for(let t=0;t<o.length;t++)s.removeAttribute(o[t]);return t.splice(a,1)[0]}}return a?f(e):d(e)}function w(t,e){for(let n=0;n<t.length;n+=1){const a=t[n];if(3===a.nodeType)return a.data=""+e,t.splice(n,1)[0]}return m(e)}function y(t){return w(t," ")}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}class L{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=d(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)p(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(h)}}let P;function A(t){P=t}function H(t){(function(){if(!P)throw new Error("Function called outside component initialization");return P})().$$.on_mount.push(t)}const S=[],I=[],$=[],C=[],O=Promise.resolve();let M=!1;function R(t){$.push(t)}let D=!1;const j=new Set;function _(){if(!D){D=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];A(e),N(e.$$)}for(S.length=0;I.length;)I.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];j.has(e)||(j.add(e),e())}$.length=0}while(S.length);for(;C.length;)C.pop()();M=!1,D=!1,j.clear()}}function N(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const F=new Set;function B(t,e){t&&t.i&&(F.delete(t),t.i(e))}function G(t,e,n,a){if(t&&t.o){if(F.has(t))return;F.add(t),(void 0).c.push(()=>{F.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}}function U(t){t&&t.c()}function z(t,e){t&&t.l(e)}function q(t,e,a){const{fragment:c,on_mount:r,on_destroy:l,after_update:i}=t.$$;c&&c.m(e,a),R(()=>{const e=r.map(n).filter(o);l?l.push(...e):s(e),t.$$.on_mount=[]}),i.forEach(R)}function W(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(S.push(t),M||(M=!0,O.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,n,o,c,r,l,i=[-1]){const p=P;A(e);const u=n.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:r,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:a(),dirty:i};let f=!1;if(d.ctx=o?o(e,u,(t,n,...a)=>{const s=a.length?a[0]:n;return d.ctx&&r(d.ctx[t],d.ctx[t]=s)&&(d.bound[t]&&d.bound[t](s),f&&V(e,t)),n}):[],d.update(),f=!0,s(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){const t=E(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&B(e.$$.fragment),q(e,n.target,n.anchor),_()}A(p)}class J{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function K(e){let n,a,s,o,c,r,l,u,v,T,x,L,P,A,H,S,I,$,C,O,M,R,D,j,_,N,F,B,G,U,z,q,W,V,Y;return{c(){n=d("header"),a=d("nav"),s=d("ul"),o=d("li"),c=d("a"),r=m("Tan Li Hau"),l=g(),u=d("li"),v=d("a"),T=m("About"),x=g(),L=d("li"),P=d("a"),A=m("Writings"),H=g(),S=d("li"),I=d("a"),$=m("Talks"),C=g(),O=d("li"),M=d("a"),R=m("Notes"),D=g(),j=d("li"),_=d("a"),N=m("Newsletter"),F=g(),B=d("li"),G=d("a"),U=f("svg"),z=f("path"),q=g(),W=d("a"),V=f("svg"),Y=f("path"),this.h()},l(t){n=b(t,"HEADER",{class:!0});var e=E(n);a=b(e,"NAV",{});var i=E(a);s=b(i,"UL",{class:!0});var p=E(s);o=b(p,"LI",{class:!0});var d=E(o);c=b(d,"A",{href:!0,class:!0});var f=E(c);r=w(f,"Tan Li Hau"),f.forEach(h),d.forEach(h),l=y(p),u=b(p,"LI",{class:!0});var m=E(u);v=b(m,"A",{href:!0,class:!0});var g=E(v);T=w(g,"About"),g.forEach(h),m.forEach(h),x=y(p),L=b(p,"LI",{class:!0});var k=E(L);P=b(k,"A",{href:!0,class:!0});var J=E(P);A=w(J,"Writings"),J.forEach(h),k.forEach(h),H=y(p),S=b(p,"LI",{class:!0});var K=E(S);I=b(K,"A",{href:!0,class:!0});var Z=E(I);$=w(Z,"Talks"),Z.forEach(h),K.forEach(h),C=y(p),O=b(p,"LI",{class:!0});var Q=E(O);M=b(Q,"A",{href:!0,class:!0});var X=E(M);R=w(X,"Notes"),X.forEach(h),Q.forEach(h),D=y(p),j=b(p,"LI",{class:!0});var tt=E(j);_=b(tt,"A",{href:!0,class:!0});var et=E(_);N=w(et,"Newsletter"),et.forEach(h),tt.forEach(h),F=y(p),B=b(p,"LI",{class:!0});var nt=E(B);G=b(nt,"A",{"aria-label":!0,href:!0,class:!0});var at=E(G);U=b(at,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var st=E(U);z=b(st,"path",{d:!0},1),E(z).forEach(h),st.forEach(h),at.forEach(h),q=y(nt),W=b(nt,"A",{"aria-label":!0,href:!0,class:!0});var ot=E(W);V=b(ot,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var ct=E(V);Y=b(ct,"path",{d:!0},1),E(Y).forEach(h),ct.forEach(h),ot.forEach(h),nt.forEach(h),p.forEach(h),i.forEach(h),e.forEach(h),this.h()},h(){k(c,"href","/"),k(c,"class","svelte-f3e4uo"),k(o,"class","svelte-f3e4uo"),k(v,"href","/about"),k(v,"class","svelte-f3e4uo"),k(u,"class","svelte-f3e4uo"),k(P,"href","/blogs"),k(P,"class","svelte-f3e4uo"),k(L,"class","svelte-f3e4uo"),k(I,"href","/talks"),k(I,"class","svelte-f3e4uo"),k(S,"class","svelte-f3e4uo"),k(M,"href","/notes"),k(M,"class","svelte-f3e4uo"),k(O,"class","svelte-f3e4uo"),k(_,"href","/newsletter"),k(_,"class","svelte-f3e4uo"),k(j,"class","svelte-f3e4uo"),k(z,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),k(U,"viewBox","0 0 24 24"),k(U,"width","1em"),k(U,"height","1em"),k(U,"class","svelte-f3e4uo"),k(G,"aria-label","Twitter account"),k(G,"href","https://twitter.com/lihautan"),k(G,"class","svelte-f3e4uo"),k(Y,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),k(V,"viewBox","0 0 24 24"),k(V,"width","1em"),k(V,"height","1em"),k(V,"class","svelte-f3e4uo"),k(W,"aria-label","Github account"),k(W,"href","https://github.com/tanhauhau"),k(W,"class","svelte-f3e4uo"),k(B,"class","social svelte-f3e4uo"),k(s,"class","svelte-f3e4uo"),k(n,"class","svelte-f3e4uo")},m(t,e){p(t,n,e),i(n,a),i(a,s),i(s,o),i(o,c),i(c,r),i(s,l),i(s,u),i(u,v),i(v,T),i(s,x),i(s,L),i(L,P),i(P,A),i(s,H),i(s,S),i(S,I),i(I,$),i(s,C),i(s,O),i(O,M),i(M,R),i(s,D),i(s,j),i(j,_),i(_,N),i(s,F),i(s,B),i(B,G),i(G,U),i(U,z),i(B,q),i(B,W),i(W,V),i(V,Y)},p:t,i:t,o:t,d(t){t&&h(n)}}}class Z extends J{constructor(t){super(),Y(this,t,null,K,c,{})}}function Q(e){let n,a,s,o,c,r,l,u,f,v,T,L,P,A,H,S,I,$,C,O;return{c(){n=d("div"),a=d("h1"),s=m("Subscribe to my newsletter"),o=g(),c=d("h2"),r=m("Get the latest blog posts and project updates delivered right to your inbox"),l=g(),u=d("form"),f=d("div"),v=d("input"),T=g(),L=d("input"),A=g(),H=d("input"),S=g(),I=d("p"),$=m("Powered by Buttondown."),this.h()},l(t){n=b(t,"DIV",{class:!0});var e=E(n);a=b(e,"H1",{});var i=E(a);s=w(i,"Subscribe to my newsletter"),i.forEach(h),o=y(e),c=b(e,"H2",{class:!0});var p=E(c);r=w(p,"Get the latest blog posts and project updates delivered right to your inbox"),p.forEach(h),l=y(e),u=b(e,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var d=E(u);f=b(d,"DIV",{class:!0});var m=E(f);v=b(m,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),T=y(m),L=b(m,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),m.forEach(h),A=y(d),H=b(d,"INPUT",{type:!0,value:!0,name:!0,class:!0}),S=y(d),I=b(d,"P",{class:!0});var g=E(I);$=w(g,"Powered by Buttondown."),g.forEach(h),d.forEach(h),e.forEach(h),this.h()},h(){k(c,"class","svelte-1k1s1co"),k(v,"type","email"),k(v,"name","email"),k(v,"id","bd-email"),k(v,"aria-label","email address"),k(v,"placeholder","youremail@example.com"),k(v,"class","svelte-1k1s1co"),k(L,"type","submit"),L.value="Subscribe",L.disabled=P=!e[0],k(L,"class","svelte-1k1s1co"),k(f,"class","form-item svelte-1k1s1co"),k(H,"type","hidden"),H.value="1",k(H,"name","embed"),k(H,"class","svelte-1k1s1co"),k(I,"class","svelte-1k1s1co"),k(u,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),k(u,"method","post"),k(u,"target","popupwindow"),k(u,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),k(u,"class","embeddable-buttondown-form"),k(n,"class","form svelte-1k1s1co")},m(t,h){var d,m,g,k;p(t,n,h),i(n,a),i(a,s),i(n,o),i(n,c),i(c,r),i(n,l),i(n,u),i(u,f),i(f,v),x(v,e[0]),i(f,T),i(f,L),i(u,A),i(u,H),i(u,S),i(u,I),i(I,$),C||(d=v,m="input",g=e[1],d.addEventListener(m,g,k),O=()=>d.removeEventListener(m,g,k),C=!0)},p(t,[e]){1&e&&v.value!==t[0]&&x(v,t[0]),1&e&&P!==(P=!t[0])&&(L.disabled=P)},i:t,o:t,d(t){t&&h(n),C=!1,O()}}}function X(t,e,n){let a;return[a,function(){a=this.value,n(0,a)}]}class tt extends J{constructor(t){super(),Y(this,t,X,Q,c,{})}}function et(t){return H(()=>(setTimeout(()=>{if(window.innerWidth>1080){const t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",t.id="_carbonads_js",document.body.appendChild(t)}},5e3),()=>{try{const t=document.getElementById("carbonads");t.parentNode.removeChild(t)}catch(t){}})),[]}class nt extends J{constructor(t){super(),Y(this,t,et,null,c,{})}}var at="https://lihautan.com/contributing-to-svelte-fixing-issue-5012/assets/hero-twitter-14595226.jpg";function st(t,e,n){const a=t.slice();return a[6]=e[n],a}function ot(t,e,n){const a=t.slice();return a[6]=e[n],a}function ct(t){let e,n;return{c(){e=d("meta"),this.h()},l(t){e=b(t,"META",{name:!0,content:!0}),this.h()},h(){k(e,"name","keywords"),k(e,"content",n=t[6])},m(t,n){p(t,e,n)},p(t,a){4&a&&n!==(n=t[6])&&k(e,"content",n)},d(t){t&&h(e)}}}function rt(t){let e,n,a=t[6]+"";return{c(){e=d("span"),n=m(a),this.h()},l(t){e=b(t,"SPAN",{class:!0});var s=E(e);n=w(s,a),s.forEach(h),this.h()},h(){k(e,"class","svelte-9tqnza")},m(t,a){p(t,e,a),i(e,n)},p(t,e){4&e&&a!==(a=t[6]+"")&&T(n,a)},d(t){t&&h(e)}}}function lt(t){let e,n,a,s,o,c,f,x,P,A,H,S,I,$,C,O,M,R,D,j,_,N,F,V,Y,J,K,Q,X,et,lt,it,pt,ht,ut,dt,ft,mt,gt,vt=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:t[3],copyrightHolder:t[3],copyrightYear:"2020",creator:t[3],publisher:t[3],description:t[1],headline:t[0],name:t[0],inLanguage:"en"})}<\/script>`,kt=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-5012",name:t[0]},position:2}]})}<\/script>`;document.title=e=t[0]+" | Tan Li Hau";let Et=t[2],bt=[];for(let e=0;e<Et.length;e+=1)bt[e]=ct(ot(t,Et,e));F=new Z({});let wt=t[2],yt=[];for(let e=0;e<wt.length;e+=1)yt[e]=rt(st(t,wt,e));const Tt=t[5].default,xt=function(t,e,n,a){if(t){const s=r(t,e,n,a);return t[0](s)}}(Tt,t,t[4],null);return pt=new tt({}),ut=new nt({}),{c(){n=d("meta"),a=d("meta"),s=d("meta"),o=d("meta"),c=d("meta"),f=d("meta"),x=d("meta"),P=d("meta"),A=d("meta"),H=d("meta"),S=d("meta");for(let t=0;t<bt.length;t+=1)bt[t].c();I=d("meta"),$=d("meta"),O=v(),R=v(),D=g(),j=d("a"),_=m("Skip to content"),N=g(),U(F.$$.fragment),V=g(),Y=d("main"),J=d("h1"),K=m(t[0]),Q=g();for(let t=0;t<yt.length;t+=1)yt[t].c();X=g(),et=d("article"),xt&&xt.c(),lt=g(),it=d("footer"),U(pt.$$.fragment),ht=g(),U(ut.$$.fragment),dt=g(),mt=v(),this.h()},l(e){const r=function(t,e=document.body){return Array.from(e.querySelectorAll(t))}('[data-svelte="svelte-n0q11s"]',document.head);n=b(r,"META",{name:!0,content:!0}),a=b(r,"META",{name:!0,content:!0}),s=b(r,"META",{name:!0,content:!0}),o=b(r,"META",{name:!0,content:!0}),c=b(r,"META",{name:!0,content:!0}),f=b(r,"META",{name:!0,content:!0}),x=b(r,"META",{name:!0,content:!0}),P=b(r,"META",{name:!0,content:!0}),A=b(r,"META",{name:!0,content:!0}),H=b(r,"META",{name:!0,content:!0}),S=b(r,"META",{name:!0,content:!0});for(let t=0;t<bt.length;t+=1)bt[t].l(r);I=b(r,"META",{itemprop:!0,content:!0}),$=b(r,"META",{itemprop:!0,content:!0}),O=v(),R=v(),r.forEach(h),D=y(e),j=b(e,"A",{href:!0,class:!0});var l=E(j);_=w(l,"Skip to content"),l.forEach(h),N=y(e),z(F.$$.fragment,e),V=y(e),Y=b(e,"MAIN",{id:!0,class:!0});var i=E(Y);J=b(i,"H1",{});var p=E(J);K=w(p,t[0]),p.forEach(h),Q=y(i);for(let t=0;t<yt.length;t+=1)yt[t].l(i);X=y(i),et=b(i,"ARTICLE",{});var u=E(et);xt&&xt.l(u),u.forEach(h),i.forEach(h),lt=y(e),it=b(e,"FOOTER",{class:!0});var d=E(it);z(pt.$$.fragment,d),ht=y(d),z(ut.$$.fragment,d),d.forEach(h),dt=y(e),mt=v(),this.h()},h(){k(n,"name","description"),k(n,"content",t[1]),k(a,"name","image"),k(a,"content",at),k(s,"name","og:image"),k(s,"content",at),k(o,"name","og:title"),k(o,"content",t[0]),k(c,"name","og:description"),k(c,"content",t[1]),k(f,"name","og:type"),k(f,"content","website"),k(x,"name","twitter:card"),k(x,"content","summary_large_image"),k(P,"name","twitter:creator"),k(P,"content","@lihautan"),k(A,"name","twitter:title"),k(A,"content",t[0]),k(H,"name","twitter:description"),k(H,"content",t[1]),k(S,"name","twitter:image"),k(S,"content",at),k(I,"itemprop","url"),k(I,"content","https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-5012"),k($,"itemprop","image"),k($,"content",at),C=new L(O),M=new L(R),k(j,"href","#content"),k(j,"class","skip svelte-9tqnza"),k(Y,"id","content"),k(Y,"class","blog svelte-9tqnza"),k(it,"class","svelte-9tqnza"),ft=new L(mt)},m(t,e){i(document.head,n),i(document.head,a),i(document.head,s),i(document.head,o),i(document.head,c),i(document.head,f),i(document.head,x),i(document.head,P),i(document.head,A),i(document.head,H),i(document.head,S);for(let t=0;t<bt.length;t+=1)bt[t].m(document.head,null);i(document.head,I),i(document.head,$),C.m(vt,document.head),i(document.head,O),M.m(kt,document.head),i(document.head,R),p(t,D,e),p(t,j,e),i(j,_),p(t,N,e),q(F,t,e),p(t,V,e),p(t,Y,e),i(Y,J),i(J,K),i(Y,Q);for(let t=0;t<yt.length;t+=1)yt[t].m(Y,null);i(Y,X),i(Y,et),xt&&xt.m(et,null),p(t,lt,e),p(t,it,e),q(pt,it,null),i(it,ht),q(ut,it,null),p(t,dt,e),ft.m('<script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>',t,e),p(t,mt,e),gt=!0},p(t,[a]){if((!gt||1&a)&&e!==(e=t[0]+" | Tan Li Hau")&&(document.title=e),(!gt||2&a)&&k(n,"content",t[1]),(!gt||1&a)&&k(o,"content",t[0]),(!gt||2&a)&&k(c,"content",t[1]),(!gt||1&a)&&k(A,"content",t[0]),(!gt||2&a)&&k(H,"content",t[1]),4&a){let e;for(Et=t[2],e=0;e<Et.length;e+=1){const n=ot(t,Et,e);bt[e]?bt[e].p(n,a):(bt[e]=ct(n),bt[e].c(),bt[e].m(I.parentNode,I))}for(;e<bt.length;e+=1)bt[e].d(1);bt.length=Et.length}if((!gt||3&a)&&vt!==(vt=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:t[3],copyrightHolder:t[3],copyrightYear:"2020",creator:t[3],publisher:t[3],description:t[1],headline:t[0],name:t[0],inLanguage:"en"})}<\/script>`)&&C.p(vt),(!gt||1&a)&&kt!==(kt=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-5012",name:t[0]},position:2}]})}<\/script>`)&&M.p(kt),(!gt||1&a)&&T(K,t[0]),4&a){let e;for(wt=t[2],e=0;e<wt.length;e+=1){const n=st(t,wt,e);yt[e]?yt[e].p(n,a):(yt[e]=rt(n),yt[e].c(),yt[e].m(Y,X))}for(;e<yt.length;e+=1)yt[e].d(1);yt.length=wt.length}xt&&xt.p&&16&a&&l(xt,Tt,t,t[4],a,null,null)},i(t){gt||(B(F.$$.fragment,t),B(xt,t),B(pt.$$.fragment,t),B(ut.$$.fragment,t),gt=!0)},o(t){G(F.$$.fragment,t),G(xt,t),G(pt.$$.fragment,t),G(ut.$$.fragment,t),gt=!1},d(t){h(n),h(a),h(s),h(o),h(c),h(f),h(x),h(P),h(A),h(H),h(S),u(bt,t),h(I),h($),h(O),t&&C.d(),h(R),t&&M.d(),t&&h(D),t&&h(j),t&&h(N),W(F,t),t&&h(V),t&&h(Y),u(yt,t),xt&&xt.d(t),t&&h(lt),t&&h(it),W(pt),W(ut),t&&h(dt),t&&h(mt),t&&ft.d()}}}function it(t,e,n){let{title:a=""}=e,{description:s=""}=e,{tags:o=[]}=e;const c={"@type":"Person",name:"Tan Li Hau"};let{$$slots:r={},$$scope:l}=e;return t.$set=t=>{"title"in t&&n(0,a=t.title),"description"in t&&n(1,s=t.description),"tags"in t&&n(2,o=t.tags),"$$scope"in t&&n(4,l=t.$$scope)},[a,s,o,c,l,r]}class pt extends J{constructor(t){super(),Y(this,t,it,lt,c,{title:0,description:1,tags:2})}}function ht(e){let n,a,s,o,c,r,l,u,f,v,T,x,P,A,H,S,I,$,C,O,M,R,D,j,_,N,F,B,G,U,z,q,W,V,Y,J,K,Z,Q,X,tt,et,nt,at,st,ot,ct,rt,lt,it,pt,ht,ut,dt,ft,mt,gt,vt,kt,Et,bt,wt,yt,Tt,xt,Lt,Pt,At,Ht,St,It,$t,Ct,Ot,Mt,Rt,Dt,jt,_t,Nt,Ft,Bt,Gt,Ut,zt,qt,Wt,Vt,Yt,Jt,Kt,Zt,Qt,Xt,te,ee,ne,ae,se,oe,ce,re,le,ie,pe,he,ue,de,fe,me,ge,ve,ke,Ee,be,we,ye,Te,xe,Le,Pe,Ae,He,Se,Ie,$e,Ce,Oe,Me,Re,De,je,_e,Ne,Fe,Be,Ge,Ue,ze,qe,We,Ve,Ye,Je,Ke,Ze,Qe,Xe,tn,en,nn,an,sn,on,cn,rn,ln,pn,hn,un,dn,fn,mn,gn,vn,kn,En,bn,wn,yn,Tn,xn,Ln,Pn,An,Hn,Sn,In,$n,Cn,On,Mn,Rn,Dn,jn,_n,Nn,Fn,Bn,Gn,Un,zn,qn,Wn,Vn,Yn,Jn,Kn,Zn,Qn,Xn,ta,ea,na,aa,sa,oa,ca,ra,la,ia,pa,ha,ua,da,fa,ma,ga,va,ka,Ea,ba,wa,ya,Ta,xa,La,Pa,Aa,Ha,Sa,Ia,$a,Ca,Oa,Ma,Ra,Da,ja,_a,Na,Fa,Ba,Ga,Ua,za,qa,Wa,Va,Ya,Ja,Ka,Za,Qa,Xa,ts,es,ns,as,ss,os,cs,rs,ls,is,ps,hs,us,ds,fs,ms,gs,vs,ks,Es,bs,ws,ys,Ts,xs,Ls,Ps,As,Hs,Ss,Is,$s,Cs,Os,Ms,Rs,Ds,js,_s,Ns,Fs,Bs,Gs,Us,zs,qs,Ws,Vs,Ys,Js,Ks,Zs,Qs,Xs,to,eo,no,ao,so,oo,co,ro,lo,io,po,ho,uo,fo,mo,go,vo,ko,Eo,bo,wo,yo,To,xo,Lo,Po,Ao,Ho,So,Io,$o,Co,Oo,Mo,Ro,Do,jo,_o,No,Fo,Bo,Go,Uo,zo,qo,Wo,Vo,Yo,Jo,Ko,Zo,Qo,Xo,tc,ec,nc,ac,sc,oc,cc,rc,lc,ic,pc,hc,uc,dc,fc,mc,gc,vc,kc,Ec,bc,wc,yc,Tc,xc,Lc,Pc,Ac,Hc,Sc,Ic,$c,Cc,Oc,Mc,Rc,Dc,jc,_c,Nc,Fc,Bc,Gc,Uc,zc,qc,Wc,Vc,Yc,Jc,Kc,Zc,Qc,Xc,tr,er,nr,ar,sr,or,cr,rr,lr,ir,pr,hr,ur,dr,fr,mr,gr,vr,kr,Er,br,wr,yr,Tr,xr,Lr,Pr,Ar,Hr,Sr,Ir,$r,Cr,Or,Mr,Rr,Dr,jr,_r,Nr,Fr,Br,Gr,Ur,zr,qr,Wr,Vr,Yr,Jr,Kr,Zr,Qr,Xr,tl,el,nl,al,sl,ol,cl,rl,ll,il,pl,hl;return{c(){n=d("section"),a=d("ul"),s=d("li"),o=d("a"),c=m("Background"),r=d("li"),l=d("a"),u=m("The bug"),f=d("li"),v=d("a"),T=m("Verifying the bug"),x=d("li"),P=d("a"),A=m("Investigating the bug"),H=d("ul"),S=d("li"),I=d("a"),$=m("HtmlTag"),C=d("li"),O=d("a"),M=m("Fixing the bug"),R=g(),D=d("section"),j=d("h2"),_=d("a"),N=m("Background"),F=g(),B=d("p"),G=m("Following "),U=d("a"),z=m("Contributing to Svelte - Fixing issue #4392"),q=m(", I find it interesting to write my thought process down on fixing a Svelte issue."),W=g(),V=d("p"),Y=m("So today, I'm going to walk through a new issue, "),J=d("a"),K=m("#5012"),Z=m("."),Q=g(),X=d("section"),tt=d("h2"),et=d("a"),nt=m("The bug"),at=g(),st=d("div"),ot=d("p"),ct=d("strong"),rt=m("Slot containing only "),it=m(" renders in wrong place on update "),pt=d("a"),ht=m("#5012"),ut=g(),dt=d("p"),ft=m("When a slotted component is instantiated and the only contents of the slot is "),gt=m(", changing value will cause the HTML-ized value to render at the end of the slot's parent element (i.e. after all sibling elements) instead of in the correct place."),vt=g(),kt=d("p"),Et=d("strong"),bt=m("To Reproduce"),wt=g(),yt=d("p"),Tt=d("a"),xt=m("https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),Lt=g(),Pt=d("p"),At=m("Click the Switch button and see that the contents of the slot moves to the end."),Ht=g(),St=d("p"),It=d("strong"),$t=m("Expected behavior"),Ct=g(),Ot=d("p"),Mt=m("Slot continues to render in the correct place."),Rt=g(),Dt=d("p"),jt=d("strong"),_t=m("Information about your Svelte project:"),Nt=g(),Ft=d("p"),Bt=m("Looks like this appeared in version 3.7 and is still present in 3.23.2. If I run the REPL on 3.6.11 it behaves properly."),Gt=g(),Ut=d("p"),zt=d("strong"),qt=m("Severity"),Wt=g(),Vt=d("p"),Yt=m("Potentially serious, but not serious for me."),Jt=g(),Kt=d("p"),Zt=m("Can be worked around by changing the slot contents to "),Qt=d("code"),Xt=m("<div>{@html value}</div>"),te=m(" or changing the child component to use "),ee=d("code"),ne=m("<div><slot /><div>"),ae=m(", which works fine for me."),se=g(),oe=d("section"),ce=d("h2"),re=d("a"),le=m("Verifying the bug"),ie=g(),pe=d("p"),he=m("I clicked into the REPL and tried to understand about the bug."),ue=g(),de=d("p"),fe=m('Initially, you see 2 lines of text, "Another first line", "This line should be last.".'),me=g(),ge=d("p"),ve=m("But as soon as I updated the "),ke=d("code"),Ee=m("{@html content}"),be=m(", the "),we=d("code"),ye=m("{@html content}"),Te=m(' moved to be after the "This line should be last." and stayed there.'),xe=g(),Le=d("p"),Pe=d("img"),Ae=g(),He=d("p"),Se=m("Yup. This is indeed a bug! üêõ"),Ie=g(),$e=d("section"),Ce=d("h2"),Oe=d("a"),Me=m("Investigating the bug"),Re=g(),De=d("p"),je=m("It's amazing that the issue author tracked down the regression behavior of this issue, stating that it started happening since 3.7. Probably because the author just upgraded Svelte from "),Ne=m(" 3.7, or maybe he tried every versions to figure out whether it is regression bug or a undiscovered bug. Anyway, kudos to the issue author! üí™ üí™"),Fe=g(),Be=d("p"),Ge=m("Most open source projects maintain a change log file, usually named "),Ue=d("code"),ze=m("CHANGELOG.md"),qe=m(" located at the root of the project folder, so that you can figured out what's added / removed / updated in each version."),We=g(),Ve=d("p"),Ye=m("You can find Svelte's "),Je=d("a"),Ke=d("code"),Ze=m("CHANGELOG.md"),Qe=m(" here"),Xe=m("."),tn=g(),en=d("p"),nn=d("picture"),an=d("source"),sn=d("source"),on=d("img"),cn=g(),rn=d("p"),ln=m("From the changelog, the most relevant commits seemed to be "),pn=d("strong"),hn=m('"Remount HTML tags correctly ('),un=d("a"),dn=m("#3329"),fn=m(')"'),mn=g(),gn=d("p"),vn=m("Reading through the PR, it seemed that "),kn=d("a"),En=m("#3329"),bn=m(" was when "),wn=d("code"),yn=m("HtmlTag"),Tn=m(" is first introduced!"),xn=g(),Ln=d("section"),Pn=d("h3"),An=d("a"),Hn=m("HtmlTag"),Sn=g(),In=d("p"),$n=d("a"),Cn=d("code"),On=m("HtmlTag"),Mn=m(" is a helper class that helps Svelte manage raw "),Rn=d("a"),Dn=d("code"),jn=m("{@html ...}"),_n=m(" tag"),Nn=m("."),Fn=g(),Bn=d("pre"),Gn=g(),Un=d("p"),zn=m("The HtmlTag instance provides the "),qn=d("code"),Wn=m("m"),Vn=m(", "),Yn=d("code"),Jn=m("p"),Kn=m(", "),Zn=d("code"),Qn=m("d"),Xn=m(" method, and it will maintain the HTML elements created through the HTML string."),ta=g(),ea=d("p"),na=m("So, before v3.7, "),aa=d("code"),sa=m("{@html ...}"),oa=m(" was handled differently, and from the PR, I assume it was more buggy than the current implementation, albeit getting the case reported by this issue #5012 right. So, there's no reverting back, nor taking the implementation pre-v3.7 as a reference to figure this bug out."),ca=g(),ra=d("p"),la=m("Reading through the implementation of the "),ia=d("code"),pa=m("HtmlTag"),ha=m(", it seemed that the "),ua=d("code"),da=m("anchor"),fa=m(" is a key to this issue."),ma=g(),ga=d("p"),va=d("code"),ka=m("HtmlTag"),Ea=m(" uses "),ba=d("a"),wa=d("code"),ya=m("insertBefore"),Ta=m(" to insert HTML elements into the DOM. There's a nullable 2nd argument for "),xa=d("code"),La=m("insertBefore"),Pa=m(", if it is "),Aa=d("code"),Ha=m("null"),Sa=m(", the element will be inserted at the end of the parent."),Ia=g(),$a=d("p"),Ca=m("In this case, the "),Oa=d("code"),Ma=m("anchor"),Ra=m(" is indeed "),Da=d("code"),ja=m("null"),_a=m(", so when there's a change in the HTML content, the previous HTML elements were removed and the new HTML elements were inserted at the end of the parent."),Na=g(),Fa=d("pre"),Ba=g(),Ga=d("p"),Ua=d("strong"),za=m("Why doesn't the "),qa=d("code"),Wa=m("{@html content}"),Va=m(" added at the end of the parent in the initial render?"),Ya=m(" Well, the elements are added in order during mounting. The HTML elements from "),Ja=d("code"),Ka=m("HtmlTag"),Za=m(" was added at the end of the parent, followed by the "),Qa=d("code"),Xa=m("<p>This line should be last</p>"),ts=m("."),es=g(),ns=d("p"),as=m("The "),ss=d("code"),os=m("anchor"),cs=m(" is an argument to the "),rs=d("code"),ls=m("HtmlTag"),is=m(" constructor, so one can safely assume that it is not always "),ps=d("code"),hs=m("null"),us=m("."),ds=g(),fs=d("p"),ms=m("So, I tried out using "),gs=d("code"),vs=m("{@html content}"),ks=m(" in various ways, to figure out what may be an anchor for the "),Es=d("code"),bs=m("HtmlTag"),ws=g(),ys=d("p"),Ts=d("strong"),xs=m("Repro #1"),Ls=m(" ("),Ps=d("a"),As=m("REPL"),Hs=m(")"),Ss=g(),Is=d("pre"),$s=g(),Cs=d("pre"),Os=g(),Ms=d("p"),Rs=m("In this case, the "),Ds=d("code"),js=m("<button />"),_s=m(" element turns out to be the anchor, which totally make sense, as the html content should be inserted before "),Ns=d("code"),Fs=m("<button />"),Bs=m("."),Gs=g(),Us=d("p"),zs=m("So, it seemed like the anchor is the next element right after "),qs=d("code"),Ws=m("{@html ...}"),Vs=m(". ü§î"),Ys=g(),Js=d("p"),Ks=d("strong"),Zs=m("Repro #2"),Qs=m(" ("),Xs=d("a"),to=m("REPL"),eo=m(")"),no=g(),ao=d("pre"),so=g(),oo=d("pre"),co=g(),ro=d("p"),lo=m("If the next element right after "),io=d("code"),po=m("{@html ...}"),ho=m(" is a component, then Svelte will insert a empty "),uo=d("a"),fo=m("Text"),mo=m(" node in between "),go=d("code"),vo=m("{@html ...}"),ko=m(" and the component, and the anchor is the empty Text node."),Eo=g(),bo=d("p"),wo=m("Well, that make sense too, because we can't see what's inside the component, we can't get the first element rendered in the component as the anchor. So, an extra empty Text node is used for anchoring."),yo=g(),To=d("p"),xo=m("So, it seemed like the anchor for the "),Lo=d("code"),Po=m("HtmlTag"),Ao=m(" depends on the next element, and the "),Ho=d("code"),So=m("HtmlTag"),Io=m(" itself is the last element, then the anchor would be "),$o=d("code"),Co=m("null"),Oo=m("."),Mo=g(),Ro=d("p"),Do=m("This seemed fine in most cases, as in if the "),jo=d("code"),_o=m("HtmlTag"),No=m(" is indeed the last element of its parent, then, we don't need an anchor. Adding and updating "),Fo=d("code"),Bo=m("HtmlTag"),Go=m(" will always add HTML elements at the end of its parent."),Uo=g(),zo=d("p"),qo=m("However, I figured there are 2 edge cases that this assumption may not be true."),Wo=g(),Vo=d("p"),Yo=m("The 1st edge case is the one reported in the issue #5012, if the "),Jo=d("code"),Ko=m("{@html ...}"),Zo=m(" is the last element within a slot. As we can't tell how the slot would be used in the component, it may not be the last element of it's parent."),Qo=g(),Xo=d("pre"),tc=g(),ec=d("p"),nc=m("The 2nd edge case is that "),ac=d("code"),sc=m("{@html ...}"),oc=m(" is the last element, but it is a the root of the Component."),cc=g(),rc=d("pre"),lc=g(),ic=d("p"),pc=d("a"),hc=m("REPL"),uc=g(),dc=d("p"),fc=m("As you can see in this contrived example, we can't assume where the component is being used by its parent, so, even it seemed to be the last element in the component, it may not be the case in the parent component."),mc=g(),gc=d("section"),vc=d("h2"),kc=d("a"),Ec=m("Fixing the bug"),bc=g(),wc=d("p"),yc=m("Once we figured out the cause of the bug, the fix is much simpler."),Tc=g(),xc=d("p"),Lc=m("Just as how Svelte will add a empty Text node as an anchor if the next element is a component, we are going to add the same anchor if"),Pc=g(),Ac=d("ul"),Hc=d("li"),Sc=m("the "),Ic=d("code"),$c=m("{@html ...}"),Cc=m(" has no next element, and"),Oc=g(),Mc=d("li"),Rc=m("either"),Dc=d("ul"),jc=d("li"),_c=d("code"),Nc=m("{@html ...}"),Fc=m(" is at the root of a slot, or"),Bc=g(),Gc=d("li"),Uc=d("code"),zc=m("{@html ...}"),qc=m(" is at the root of a component."),Wc=g(),Vc=d("p"),Yc=m("I know my way in the Svelte repo, good enough to know where to add this extra condition."),Jc=g(),Kc=d("p"),Zc=m("But if you are new, you can try global search the keyword "),Qc=d("code"),Xc=m("html_anchor"),tr=m(", the variable name of the anchor added by Svelte, it should lead you to it."),er=g(),nr=d("pre"),ar=g(),sr=d("p"),or=d("a"),cr=m("Link to Github"),rr=g(),lr=d("p"),ir=m("Here we see that the condition of adding an anchor is that if"),pr=g(),hr=d("ul"),ur=d("li"),dr=m("it is in the "),fr=d("code"),mr=m("<svelte:head>"),gr=m(", or"),vr=g(),kr=d("li"),Er=m("the next element is not a dom element, (which could be a component, or logic blocks "),br=d("em"),wr=m("(oh why didn't I think about this case too?)"),yr=m(")"),Tr=g(),xr=d("pre"),Lr=g(),Pr=d("p"),Ar=m("So, we check if"),Hr=g(),Sr=d("ul"),Ir=d("li"),$r=m("it has a parent (if it is at the root of component), or"),Cr=g(),Or=d("li"),Mr=m("if the parent is not an element (it could be within a slot, or a logic block "),Rr=d("code"),Dr=m("{#if}"),jr=m(")"),_r=g(),Nr=d("p"),Fr=m("For the test case, I used to 2 edge case examples, try to simulate some clicks, and make sure that the "),Br=d("code"),Gr=m("{@html ...}"),Ur=m(" stay in place even after the HTML content changes."),zr=g(),qr=d("pre"),Wr=g(),Vr=d("p"),Yr=m("You can read the "),Jr=d("a"),Kr=m("Pull Request #5061"),Zr=m(" to see all the test cases written up."),Qr=g(),Xr=d("hr"),tl=g(),el=d("p"),nl=m("If you wish to learn more about Svelte, "),al=d("a"),sl=m("follow me on Twitter"),ol=m("."),cl=g(),rl=d("p"),ll=m("If you have anything unclear about this article, find me on "),il=d("a"),pl=m("Twitter"),hl=m(" too!"),this.h()},l(t){n=b(t,"SECTION",{});var e=E(n);a=b(e,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var i=E(a);s=b(i,"LI",{});var p=E(s);o=b(p,"A",{href:!0});var d=E(o);c=w(d,"Background"),d.forEach(h),p.forEach(h),r=b(i,"LI",{});var m=E(r);l=b(m,"A",{href:!0});var g=E(l);u=w(g,"The bug"),g.forEach(h),m.forEach(h),f=b(i,"LI",{});var k=E(f);v=b(k,"A",{href:!0});var L=E(v);T=w(L,"Verifying the bug"),L.forEach(h),k.forEach(h),x=b(i,"LI",{});var lt=E(x);P=b(lt,"A",{href:!0});var mt=E(P);A=w(mt,"Investigating the bug"),mt.forEach(h),lt.forEach(h),H=b(i,"UL",{});var _e=E(H);S=b(_e,"LI",{});var ul=E(S);I=b(ul,"A",{href:!0});var dl=E(I);$=w(dl,"HtmlTag"),dl.forEach(h),ul.forEach(h),_e.forEach(h),C=b(i,"LI",{});var fl=E(C);O=b(fl,"A",{href:!0});var ml=E(O);M=w(ml,"Fixing the bug"),ml.forEach(h),fl.forEach(h),i.forEach(h),e.forEach(h),R=y(t),D=b(t,"SECTION",{});var gl=E(D);j=b(gl,"H2",{});var vl=E(j);_=b(vl,"A",{href:!0,id:!0});var kl=E(_);N=w(kl,"Background"),kl.forEach(h),vl.forEach(h),F=y(gl),B=b(gl,"P",{});var El=E(B);G=w(El,"Following "),U=b(El,"A",{href:!0});var bl=E(U);z=w(bl,"Contributing to Svelte - Fixing issue #4392"),bl.forEach(h),q=w(El,", I find it interesting to write my thought process down on fixing a Svelte issue."),El.forEach(h),W=y(gl),V=b(gl,"P",{});var wl=E(V);Y=w(wl,"So today, I'm going to walk through a new issue, "),J=b(wl,"A",{href:!0,rel:!0});var yl=E(J);K=w(yl,"#5012"),yl.forEach(h),Z=w(wl,"."),wl.forEach(h),gl.forEach(h),Q=y(t),X=b(t,"SECTION",{});var Tl=E(X);tt=b(Tl,"H2",{});var xl=E(tt);et=b(xl,"A",{href:!0,id:!0});var Ll=E(et);nt=w(Ll,"The bug"),Ll.forEach(h),xl.forEach(h),at=y(Tl),st=b(Tl,"DIV",{class:!0});var Pl=E(st);ot=b(Pl,"P",{class:!0});var Al=E(ot);ct=b(Al,"STRONG",{});var Hl=E(ct);rt=w(Hl,"Slot containing only "),it=w(Hl," renders in wrong place on update "),pt=b(Hl,"A",{href:!0,rel:!0});var Sl=E(pt);ht=w(Sl,"#5012"),Sl.forEach(h),Hl.forEach(h),Al.forEach(h),ut=y(Pl),dt=b(Pl,"P",{class:!0});var Il=E(dt);ft=w(Il,"When a slotted component is instantiated and the only contents of the slot is "),gt=w(Il,", changing value will cause the HTML-ized value to render at the end of the slot's parent element (i.e. after all sibling elements) instead of in the correct place."),Il.forEach(h),vt=y(Pl),kt=b(Pl,"P",{class:!0});var $l=E(kt);Et=b($l,"STRONG",{});var Cl=E(Et);bt=w(Cl,"To Reproduce"),Cl.forEach(h),$l.forEach(h),wt=y(Pl),yt=b(Pl,"P",{class:!0});var Ol=E(yt);Tt=b(Ol,"A",{href:!0,rel:!0});var Ml=E(Tt);xt=w(Ml,"https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),Ml.forEach(h),Ol.forEach(h),Lt=y(Pl),Pt=b(Pl,"P",{class:!0});var Rl=E(Pt);At=w(Rl,"Click the Switch button and see that the contents of the slot moves to the end."),Rl.forEach(h),Ht=y(Pl),St=b(Pl,"P",{class:!0});var Dl=E(St);It=b(Dl,"STRONG",{});var jl=E(It);$t=w(jl,"Expected behavior"),jl.forEach(h),Dl.forEach(h),Ct=y(Pl),Ot=b(Pl,"P",{class:!0});var _l=E(Ot);Mt=w(_l,"Slot continues to render in the correct place."),_l.forEach(h),Rt=y(Pl),Dt=b(Pl,"P",{class:!0});var Nl=E(Dt);jt=b(Nl,"STRONG",{});var Fl=E(jt);_t=w(Fl,"Information about your Svelte project:"),Fl.forEach(h),Nl.forEach(h),Nt=y(Pl),Ft=b(Pl,"P",{class:!0});var Bl=E(Ft);Bt=w(Bl,"Looks like this appeared in version 3.7 and is still present in 3.23.2. If I run the REPL on 3.6.11 it behaves properly."),Bl.forEach(h),Gt=y(Pl),Ut=b(Pl,"P",{class:!0});var Gl=E(Ut);zt=b(Gl,"STRONG",{});var Ul=E(zt);qt=w(Ul,"Severity"),Ul.forEach(h),Gl.forEach(h),Wt=y(Pl),Vt=b(Pl,"P",{class:!0});var zl=E(Vt);Yt=w(zl,"Potentially serious, but not serious for me."),zl.forEach(h),Jt=y(Pl),Kt=b(Pl,"P",{class:!0});var ql=E(Kt);Zt=w(ql,"Can be worked around by changing the slot contents to "),Qt=b(ql,"CODE",{});var Wl=E(Qt);Xt=w(Wl,"<div>{@html value}</div>"),Wl.forEach(h),te=w(ql," or changing the child component to use "),ee=b(ql,"CODE",{});var Vl=E(ee);ne=w(Vl,"<div><slot /><div>"),Vl.forEach(h),ae=w(ql,", which works fine for me."),ql.forEach(h),Pl.forEach(h),Tl.forEach(h),se=y(t),oe=b(t,"SECTION",{});var Yl=E(oe);ce=b(Yl,"H2",{});var Jl=E(ce);re=b(Jl,"A",{href:!0,id:!0});var Kl=E(re);le=w(Kl,"Verifying the bug"),Kl.forEach(h),Jl.forEach(h),ie=y(Yl),pe=b(Yl,"P",{});var Zl=E(pe);he=w(Zl,"I clicked into the REPL and tried to understand about the bug."),Zl.forEach(h),ue=y(Yl),de=b(Yl,"P",{});var Ql=E(de);fe=w(Ql,'Initially, you see 2 lines of text, "Another first line", "This line should be last.".'),Ql.forEach(h),me=y(Yl),ge=b(Yl,"P",{});var Xl=E(ge);ve=w(Xl,"But as soon as I updated the "),ke=b(Xl,"CODE",{});var ti=E(ke);Ee=w(ti,"{@html content}"),ti.forEach(h),be=w(Xl,", the "),we=b(Xl,"CODE",{});var ei=E(we);ye=w(ei,"{@html content}"),ei.forEach(h),Te=w(Xl,' moved to be after the "This line should be last." and stayed there.'),Xl.forEach(h),xe=y(Yl),Le=b(Yl,"P",{});var ni=E(Le);Pe=b(ni,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),ni.forEach(h),Ae=y(Yl),He=b(Yl,"P",{});var ai=E(He);Se=w(ai,"Yup. This is indeed a bug! üêõ"),ai.forEach(h),Yl.forEach(h),Ie=y(t),$e=b(t,"SECTION",{});var si=E($e);Ce=b(si,"H2",{});var oi=E(Ce);Oe=b(oi,"A",{href:!0,id:!0});var ci=E(Oe);Me=w(ci,"Investigating the bug"),ci.forEach(h),oi.forEach(h),Re=y(si),De=b(si,"P",{});var ri=E(De);je=w(ri,"It's amazing that the issue author tracked down the regression behavior of this issue, stating that it started happening since 3.7. Probably because the author just upgraded Svelte from "),Ne=w(ri," 3.7, or maybe he tried every versions to figure out whether it is regression bug or a undiscovered bug. Anyway, kudos to the issue author! üí™ üí™"),ri.forEach(h),Fe=y(si),Be=b(si,"P",{});var li=E(Be);Ge=w(li,"Most open source projects maintain a change log file, usually named "),Ue=b(li,"CODE",{});var ii=E(Ue);ze=w(ii,"CHANGELOG.md"),ii.forEach(h),qe=w(li," located at the root of the project folder, so that you can figured out what's added / removed / updated in each version."),li.forEach(h),We=y(si),Ve=b(si,"P",{});var pi=E(Ve);Ye=w(pi,"You can find Svelte's "),Je=b(pi,"A",{href:!0,rel:!0});var hi=E(Je);Ke=b(hi,"CODE",{});var ui=E(Ke);Ze=w(ui,"CHANGELOG.md"),ui.forEach(h),Qe=w(hi," here"),hi.forEach(h),Xe=w(pi,"."),pi.forEach(h),tn=y(si),en=b(si,"P",{});var di=E(en);nn=b(di,"PICTURE",{});var fi=E(nn);an=b(fi,"SOURCE",{type:!0,srcset:!0}),sn=b(fi,"SOURCE",{type:!0,srcset:!0}),on=b(fi,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),fi.forEach(h),di.forEach(h),cn=y(si),rn=b(si,"P",{});var mi=E(rn);ln=w(mi,"From the changelog, the most relevant commits seemed to be "),pn=b(mi,"STRONG",{});var gi=E(pn);hn=w(gi,'"Remount HTML tags correctly ('),un=b(gi,"A",{href:!0,rel:!0});var vi=E(un);dn=w(vi,"#3329"),vi.forEach(h),fn=w(gi,')"'),gi.forEach(h),mi.forEach(h),mn=y(si),gn=b(si,"P",{});var ki=E(gn);vn=w(ki,"Reading through the PR, it seemed that "),kn=b(ki,"A",{href:!0,rel:!0});var Ei=E(kn);En=w(Ei,"#3329"),Ei.forEach(h),bn=w(ki," was when "),wn=b(ki,"CODE",{});var bi=E(wn);yn=w(bi,"HtmlTag"),bi.forEach(h),Tn=w(ki," is first introduced!"),ki.forEach(h),si.forEach(h),xn=y(t),Ln=b(t,"SECTION",{});var wi=E(Ln);Pn=b(wi,"H3",{});var yi=E(Pn);An=b(yi,"A",{href:!0,id:!0});var Ti=E(An);Hn=w(Ti,"HtmlTag"),Ti.forEach(h),yi.forEach(h),Sn=y(wi),In=b(wi,"P",{});var xi=E(In);$n=b(xi,"A",{href:!0,rel:!0});var Li=E($n);Cn=b(Li,"CODE",{});var Pi=E(Cn);On=w(Pi,"HtmlTag"),Pi.forEach(h),Li.forEach(h),Mn=w(xi," is a helper class that helps Svelte manage raw "),Rn=b(xi,"A",{href:!0,rel:!0});var Ai=E(Rn);Dn=b(Ai,"CODE",{});var Hi=E(Dn);jn=w(Hi,"{@html ...}"),Hi.forEach(h),_n=w(Ai," tag"),Ai.forEach(h),Nn=w(xi,"."),xi.forEach(h),Fn=y(wi),Bn=b(wi,"PRE",{class:!0}),E(Bn).forEach(h),Gn=y(wi),Un=b(wi,"P",{});var Si=E(Un);zn=w(Si,"The HtmlTag instance provides the "),qn=b(Si,"CODE",{});var Ii=E(qn);Wn=w(Ii,"m"),Ii.forEach(h),Vn=w(Si,", "),Yn=b(Si,"CODE",{});var $i=E(Yn);Jn=w($i,"p"),$i.forEach(h),Kn=w(Si,", "),Zn=b(Si,"CODE",{});var Ci=E(Zn);Qn=w(Ci,"d"),Ci.forEach(h),Xn=w(Si," method, and it will maintain the HTML elements created through the HTML string."),Si.forEach(h),ta=y(wi),ea=b(wi,"P",{});var Oi=E(ea);na=w(Oi,"So, before v3.7, "),aa=b(Oi,"CODE",{});var Mi=E(aa);sa=w(Mi,"{@html ...}"),Mi.forEach(h),oa=w(Oi," was handled differently, and from the PR, I assume it was more buggy than the current implementation, albeit getting the case reported by this issue #5012 right. So, there's no reverting back, nor taking the implementation pre-v3.7 as a reference to figure this bug out."),Oi.forEach(h),ca=y(wi),ra=b(wi,"P",{});var Ri=E(ra);la=w(Ri,"Reading through the implementation of the "),ia=b(Ri,"CODE",{});var Di=E(ia);pa=w(Di,"HtmlTag"),Di.forEach(h),ha=w(Ri,", it seemed that the "),ua=b(Ri,"CODE",{});var ji=E(ua);da=w(ji,"anchor"),ji.forEach(h),fa=w(Ri," is a key to this issue."),Ri.forEach(h),ma=y(wi),ga=b(wi,"P",{});var _i=E(ga);va=b(_i,"CODE",{});var Ni=E(va);ka=w(Ni,"HtmlTag"),Ni.forEach(h),Ea=w(_i," uses "),ba=b(_i,"A",{href:!0,rel:!0});var Fi=E(ba);wa=b(Fi,"CODE",{});var Bi=E(wa);ya=w(Bi,"insertBefore"),Bi.forEach(h),Fi.forEach(h),Ta=w(_i," to insert HTML elements into the DOM. There's a nullable 2nd argument for "),xa=b(_i,"CODE",{});var Gi=E(xa);La=w(Gi,"insertBefore"),Gi.forEach(h),Pa=w(_i,", if it is "),Aa=b(_i,"CODE",{});var Ui=E(Aa);Ha=w(Ui,"null"),Ui.forEach(h),Sa=w(_i,", the element will be inserted at the end of the parent."),_i.forEach(h),Ia=y(wi),$a=b(wi,"P",{});var zi=E($a);Ca=w(zi,"In this case, the "),Oa=b(zi,"CODE",{});var qi=E(Oa);Ma=w(qi,"anchor"),qi.forEach(h),Ra=w(zi," is indeed "),Da=b(zi,"CODE",{});var Wi=E(Da);ja=w(Wi,"null"),Wi.forEach(h),_a=w(zi,", so when there's a change in the HTML content, the previous HTML elements were removed and the new HTML elements were inserted at the end of the parent."),zi.forEach(h),Na=y(wi),Fa=b(wi,"PRE",{class:!0}),E(Fa).forEach(h),Ba=y(wi),Ga=b(wi,"P",{});var Vi=E(Ga);Ua=b(Vi,"STRONG",{});var Yi=E(Ua);za=w(Yi,"Why doesn't the "),qa=b(Yi,"CODE",{});var Ji=E(qa);Wa=w(Ji,"{@html content}"),Ji.forEach(h),Va=w(Yi," added at the end of the parent in the initial render?"),Yi.forEach(h),Ya=w(Vi," Well, the elements are added in order during mounting. The HTML elements from "),Ja=b(Vi,"CODE",{});var Ki=E(Ja);Ka=w(Ki,"HtmlTag"),Ki.forEach(h),Za=w(Vi," was added at the end of the parent, followed by the "),Qa=b(Vi,"CODE",{});var Zi=E(Qa);Xa=w(Zi,"<p>This line should be last</p>"),Zi.forEach(h),ts=w(Vi,"."),Vi.forEach(h),es=y(wi),ns=b(wi,"P",{});var Qi=E(ns);as=w(Qi,"The "),ss=b(Qi,"CODE",{});var Xi=E(ss);os=w(Xi,"anchor"),Xi.forEach(h),cs=w(Qi," is an argument to the "),rs=b(Qi,"CODE",{});var tp=E(rs);ls=w(tp,"HtmlTag"),tp.forEach(h),is=w(Qi," constructor, so one can safely assume that it is not always "),ps=b(Qi,"CODE",{});var ep=E(ps);hs=w(ep,"null"),ep.forEach(h),us=w(Qi,"."),Qi.forEach(h),ds=y(wi),fs=b(wi,"P",{});var np=E(fs);ms=w(np,"So, I tried out using "),gs=b(np,"CODE",{});var ap=E(gs);vs=w(ap,"{@html content}"),ap.forEach(h),ks=w(np," in various ways, to figure out what may be an anchor for the "),Es=b(np,"CODE",{});var sp=E(Es);bs=w(sp,"HtmlTag"),sp.forEach(h),np.forEach(h),ws=y(wi),ys=b(wi,"P",{});var op=E(ys);Ts=b(op,"STRONG",{});var cp=E(Ts);xs=w(cp,"Repro #1"),cp.forEach(h),Ls=w(op," ("),Ps=b(op,"A",{href:!0,rel:!0});var rp=E(Ps);As=w(rp,"REPL"),rp.forEach(h),Hs=w(op,")"),op.forEach(h),Ss=y(wi),Is=b(wi,"PRE",{class:!0}),E(Is).forEach(h),$s=y(wi),Cs=b(wi,"PRE",{class:!0}),E(Cs).forEach(h),Os=y(wi),Ms=b(wi,"P",{});var lp=E(Ms);Rs=w(lp,"In this case, the "),Ds=b(lp,"CODE",{});var ip=E(Ds);js=w(ip,"<button />"),ip.forEach(h),_s=w(lp," element turns out to be the anchor, which totally make sense, as the html content should be inserted before "),Ns=b(lp,"CODE",{});var pp=E(Ns);Fs=w(pp,"<button />"),pp.forEach(h),Bs=w(lp,"."),lp.forEach(h),Gs=y(wi),Us=b(wi,"P",{});var hp=E(Us);zs=w(hp,"So, it seemed like the anchor is the next element right after "),qs=b(hp,"CODE",{});var up=E(qs);Ws=w(up,"{@html ...}"),up.forEach(h),Vs=w(hp,". ü§î"),hp.forEach(h),Ys=y(wi),Js=b(wi,"P",{});var dp=E(Js);Ks=b(dp,"STRONG",{});var fp=E(Ks);Zs=w(fp,"Repro #2"),fp.forEach(h),Qs=w(dp," ("),Xs=b(dp,"A",{href:!0,rel:!0});var mp=E(Xs);to=w(mp,"REPL"),mp.forEach(h),eo=w(dp,")"),dp.forEach(h),no=y(wi),ao=b(wi,"PRE",{class:!0}),E(ao).forEach(h),so=y(wi),oo=b(wi,"PRE",{class:!0}),E(oo).forEach(h),co=y(wi),ro=b(wi,"P",{});var gp=E(ro);lo=w(gp,"If the next element right after "),io=b(gp,"CODE",{});var vp=E(io);po=w(vp,"{@html ...}"),vp.forEach(h),ho=w(gp," is a component, then Svelte will insert a empty "),uo=b(gp,"A",{href:!0,rel:!0});var kp=E(uo);fo=w(kp,"Text"),kp.forEach(h),mo=w(gp," node in between "),go=b(gp,"CODE",{});var Ep=E(go);vo=w(Ep,"{@html ...}"),Ep.forEach(h),ko=w(gp," and the component, and the anchor is the empty Text node."),gp.forEach(h),Eo=y(wi),bo=b(wi,"P",{});var bp=E(bo);wo=w(bp,"Well, that make sense too, because we can't see what's inside the component, we can't get the first element rendered in the component as the anchor. So, an extra empty Text node is used for anchoring."),bp.forEach(h),yo=y(wi),To=b(wi,"P",{});var wp=E(To);xo=w(wp,"So, it seemed like the anchor for the "),Lo=b(wp,"CODE",{});var yp=E(Lo);Po=w(yp,"HtmlTag"),yp.forEach(h),Ao=w(wp," depends on the next element, and the "),Ho=b(wp,"CODE",{});var Tp=E(Ho);So=w(Tp,"HtmlTag"),Tp.forEach(h),Io=w(wp," itself is the last element, then the anchor would be "),$o=b(wp,"CODE",{});var xp=E($o);Co=w(xp,"null"),xp.forEach(h),Oo=w(wp,"."),wp.forEach(h),Mo=y(wi),Ro=b(wi,"P",{});var Lp=E(Ro);Do=w(Lp,"This seemed fine in most cases, as in if the "),jo=b(Lp,"CODE",{});var Pp=E(jo);_o=w(Pp,"HtmlTag"),Pp.forEach(h),No=w(Lp," is indeed the last element of its parent, then, we don't need an anchor. Adding and updating "),Fo=b(Lp,"CODE",{});var Ap=E(Fo);Bo=w(Ap,"HtmlTag"),Ap.forEach(h),Go=w(Lp," will always add HTML elements at the end of its parent."),Lp.forEach(h),Uo=y(wi),zo=b(wi,"P",{});var Hp=E(zo);qo=w(Hp,"However, I figured there are 2 edge cases that this assumption may not be true."),Hp.forEach(h),Wo=y(wi),Vo=b(wi,"P",{});var Sp=E(Vo);Yo=w(Sp,"The 1st edge case is the one reported in the issue #5012, if the "),Jo=b(Sp,"CODE",{});var Ip=E(Jo);Ko=w(Ip,"{@html ...}"),Ip.forEach(h),Zo=w(Sp," is the last element within a slot. As we can't tell how the slot would be used in the component, it may not be the last element of it's parent."),Sp.forEach(h),Qo=y(wi),Xo=b(wi,"PRE",{class:!0}),E(Xo).forEach(h),tc=y(wi),ec=b(wi,"P",{});var $p=E(ec);nc=w($p,"The 2nd edge case is that "),ac=b($p,"CODE",{});var Cp=E(ac);sc=w(Cp,"{@html ...}"),Cp.forEach(h),oc=w($p," is the last element, but it is a the root of the Component."),$p.forEach(h),cc=y(wi),rc=b(wi,"PRE",{class:!0}),E(rc).forEach(h),lc=y(wi),ic=b(wi,"P",{});var Op=E(ic);pc=b(Op,"A",{href:!0,rel:!0});var Mp=E(pc);hc=w(Mp,"REPL"),Mp.forEach(h),Op.forEach(h),uc=y(wi),dc=b(wi,"P",{});var Rp=E(dc);fc=w(Rp,"As you can see in this contrived example, we can't assume where the component is being used by its parent, so, even it seemed to be the last element in the component, it may not be the case in the parent component."),Rp.forEach(h),wi.forEach(h),mc=y(t),gc=b(t,"SECTION",{});var Dp=E(gc);vc=b(Dp,"H2",{});var jp=E(vc);kc=b(jp,"A",{href:!0,id:!0});var _p=E(kc);Ec=w(_p,"Fixing the bug"),_p.forEach(h),jp.forEach(h),bc=y(Dp),wc=b(Dp,"P",{});var Np=E(wc);yc=w(Np,"Once we figured out the cause of the bug, the fix is much simpler."),Np.forEach(h),Tc=y(Dp),xc=b(Dp,"P",{});var Fp=E(xc);Lc=w(Fp,"Just as how Svelte will add a empty Text node as an anchor if the next element is a component, we are going to add the same anchor if"),Fp.forEach(h),Pc=y(Dp),Ac=b(Dp,"UL",{});var Bp=E(Ac);Hc=b(Bp,"LI",{});var Gp=E(Hc);Sc=w(Gp,"the "),Ic=b(Gp,"CODE",{});var Up=E(Ic);$c=w(Up,"{@html ...}"),Up.forEach(h),Cc=w(Gp," has no next element, and"),Gp.forEach(h),Oc=y(Bp),Mc=b(Bp,"LI",{});var zp=E(Mc);Rc=w(zp,"either"),Dc=b(zp,"UL",{});var qp=E(Dc);jc=b(qp,"LI",{});var Wp=E(jc);_c=b(Wp,"CODE",{});var Vp=E(_c);Nc=w(Vp,"{@html ...}"),Vp.forEach(h),Fc=w(Wp," is at the root of a slot, or"),Wp.forEach(h),Bc=y(qp),Gc=b(qp,"LI",{});var Yp=E(Gc);Uc=b(Yp,"CODE",{});var Jp=E(Uc);zc=w(Jp,"{@html ...}"),Jp.forEach(h),qc=w(Yp," is at the root of a component."),Yp.forEach(h),qp.forEach(h),zp.forEach(h),Bp.forEach(h),Wc=y(Dp),Vc=b(Dp,"P",{});var Kp=E(Vc);Yc=w(Kp,"I know my way in the Svelte repo, good enough to know where to add this extra condition."),Kp.forEach(h),Jc=y(Dp),Kc=b(Dp,"P",{});var Zp=E(Kc);Zc=w(Zp,"But if you are new, you can try global search the keyword "),Qc=b(Zp,"CODE",{});var Qp=E(Qc);Xc=w(Qp,"html_anchor"),Qp.forEach(h),tr=w(Zp,", the variable name of the anchor added by Svelte, it should lead you to it."),Zp.forEach(h),er=y(Dp),nr=b(Dp,"PRE",{class:!0}),E(nr).forEach(h),ar=y(Dp),sr=b(Dp,"P",{});var Xp=E(sr);or=b(Xp,"A",{href:!0,rel:!0});var th=E(or);cr=w(th,"Link to Github"),th.forEach(h),Xp.forEach(h),rr=y(Dp),lr=b(Dp,"P",{});var eh=E(lr);ir=w(eh,"Here we see that the condition of adding an anchor is that if"),eh.forEach(h),pr=y(Dp),hr=b(Dp,"UL",{});var nh=E(hr);ur=b(nh,"LI",{});var ah=E(ur);dr=w(ah,"it is in the "),fr=b(ah,"CODE",{});var sh=E(fr);mr=w(sh,"<svelte:head>"),sh.forEach(h),gr=w(ah,", or"),ah.forEach(h),vr=y(nh),kr=b(nh,"LI",{});var oh=E(kr);Er=w(oh,"the next element is not a dom element, (which could be a component, or logic blocks "),br=b(oh,"EM",{});var ch=E(br);wr=w(ch,"(oh why didn't I think about this case too?)"),ch.forEach(h),yr=w(oh,")"),oh.forEach(h),nh.forEach(h),Tr=y(Dp),xr=b(Dp,"PRE",{class:!0}),E(xr).forEach(h),Lr=y(Dp),Pr=b(Dp,"P",{});var rh=E(Pr);Ar=w(rh,"So, we check if"),rh.forEach(h),Hr=y(Dp),Sr=b(Dp,"UL",{});var lh=E(Sr);Ir=b(lh,"LI",{});var ih=E(Ir);$r=w(ih,"it has a parent (if it is at the root of component), or"),ih.forEach(h),Cr=y(lh),Or=b(lh,"LI",{});var ph=E(Or);Mr=w(ph,"if the parent is not an element (it could be within a slot, or a logic block "),Rr=b(ph,"CODE",{});var hh=E(Rr);Dr=w(hh,"{#if}"),hh.forEach(h),jr=w(ph,")"),ph.forEach(h),lh.forEach(h),_r=y(Dp),Nr=b(Dp,"P",{});var uh=E(Nr);Fr=w(uh,"For the test case, I used to 2 edge case examples, try to simulate some clicks, and make sure that the "),Br=b(uh,"CODE",{});var dh=E(Br);Gr=w(dh,"{@html ...}"),dh.forEach(h),Ur=w(uh," stay in place even after the HTML content changes."),uh.forEach(h),zr=y(Dp),qr=b(Dp,"PRE",{class:!0}),E(qr).forEach(h),Wr=y(Dp),Vr=b(Dp,"P",{});var fh=E(Vr);Yr=w(fh,"You can read the "),Jr=b(fh,"A",{href:!0,rel:!0});var mh=E(Jr);Kr=w(mh,"Pull Request #5061"),mh.forEach(h),Zr=w(fh," to see all the test cases written up."),fh.forEach(h),Qr=y(Dp),Xr=b(Dp,"HR",{}),tl=y(Dp),el=b(Dp,"P",{});var gh=E(el);nl=w(gh,"If you wish to learn more about Svelte, "),al=b(gh,"A",{href:!0,rel:!0});var vh=E(al);sl=w(vh,"follow me on Twitter"),vh.forEach(h),ol=w(gh,"."),gh.forEach(h),cl=y(Dp),rl=b(Dp,"P",{});var kh=E(rl);ll=w(kh,"If you have anything unclear about this article, find me on "),il=b(kh,"A",{href:!0,rel:!0});var Eh=E(il);pl=w(Eh,"Twitter"),Eh.forEach(h),hl=w(kh," too!"),kh.forEach(h),Dp.forEach(h),this.h()},h(){k(o,"href","#background"),k(l,"href","#the-bug"),k(v,"href","#verifying-the-bug"),k(P,"href","#investigating-the-bug"),k(I,"href","#htmltag"),k(O,"href","#fixing-the-bug"),k(a,"class","sitemap"),k(a,"id","sitemap"),k(a,"role","navigation"),k(a,"aria-label","Table of Contents"),k(_,"href","#background"),k(_,"id","background"),k(U,"href","/contributing-to-svelte-fixing-issue-4392"),k(J,"href","https://github.com/sveltejs/svelte/issues/5012"),k(J,"rel","nofollow"),k(et,"href","#the-bug"),k(et,"id","the-bug"),lt=new L(it),k(pt,"href","https://github.com/sveltejs/svelte/issues/5012"),k(pt,"rel","nofollow"),k(ot,"class","svelte-t9d7ix"),mt=new L(gt),k(dt,"class","svelte-t9d7ix"),k(kt,"class","svelte-t9d7ix"),k(Tt,"href","https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),k(Tt,"rel","nofollow"),k(yt,"class","svelte-t9d7ix"),k(Pt,"class","svelte-t9d7ix"),k(St,"class","svelte-t9d7ix"),k(Ot,"class","svelte-t9d7ix"),k(Dt,"class","svelte-t9d7ix"),k(Ft,"class","svelte-t9d7ix"),k(Ut,"class","svelte-t9d7ix"),k(Vt,"class","svelte-t9d7ix"),k(Kt,"class","svelte-t9d7ix"),k(st,"class","issue svelte-t9d7ix"),k(re,"href","#verifying-the-bug"),k(re,"id","verifying-the-bug"),k(Pe,"title","null"),k(Pe,"alt","screen recording of the bug behavior"),k(Pe,"data-src","3a649d18b90fca49.gif"),k(Pe,"loading","lazy"),k(Oe,"href","#investigating-the-bug"),k(Oe,"id","investigating-the-bug"),_e=new L(Ne),k(Je,"href","https://github.com/sveltejs/svelte/blob/master/CHANGELOG.md"),k(Je,"rel","nofollow"),k(an,"type","image/webp"),k(an,"srcset","9d8e49d4d12888bc.webp"),k(sn,"type","image/jpeg"),k(sn,"srcset","9d8e49d4d12888bc.png"),k(on,"title","null"),k(on,"alt","changelog"),k(on,"data-src","9d8e49d4d12888bc.png"),k(on,"loading","lazy"),k(un,"href","https://github.com/sveltejs/svelte/pull/3329"),k(un,"rel","nofollow"),k(kn,"href","https://github.com/sveltejs/svelte/pull/3329"),k(kn,"rel","nofollow"),k(An,"href","#htmltag"),k(An,"id","htmltag"),k($n,"href","https://github.com/sveltejs/svelte/blob/1c39f6079f630ea549984b8e9eda1853cd5fa883/src/runtime/internal/dom.ts#L321-L362"),k($n,"rel","nofollow"),k(Rn,"href","https://svelte.dev/tutorial/html-tags"),k(Rn,"rel","nofollow"),k(Bn,"class","language-js"),k(ba,"href","https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore"),k(ba,"rel","nofollow"),k(Fa,"class","language-html"),k(Ps,"href","https://svelte.dev/repl/f31104585d974a54a76808aa5d0820a8?version=3.23.2"),k(Ps,"rel","nofollow"),k(Is,"class","language-svelte"),k(Cs,"class","language-js"),k(Xs,"href","https://svelte.dev/repl/d469d63a77c94998839603738ea97451?version=3.23.2"),k(Xs,"rel","nofollow"),k(ao,"class","language-svelte"),k(oo,"class","language-js"),k(uo,"href","https://developer.mozilla.org/en-US/docs/Web/API/Text"),k(uo,"rel","nofollow"),k(Xo,"class","language-svelte"),k(rc,"class","language-svelte"),k(pc,"href","https://svelte.dev/repl/9d19540d1eb249c3af519894e42f0f75?version=3.23.2"),k(pc,"rel","nofollow"),k(kc,"href","#fixing-the-bug"),k(kc,"id","fixing-the-bug"),k(nr,"class","language-js"),k(or,"href","https://github.com/sveltejs/svelte/blob/1c39f6079f630ea549984b8e9eda1853cd5fa883/src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts#L42"),k(or,"rel","nofollow"),k(xr,"class","language-js"),k(qr,"class","language-js"),k(Jr,"href","https://github.com/sveltejs/svelte/pull/5061"),k(Jr,"rel","nofollow"),k(al,"href","https://twitter.com/lihautan"),k(al,"rel","nofollow"),k(il,"href","https://twitter.com/lihautan"),k(il,"rel","nofollow")},m(t,e){p(t,n,e),i(n,a),i(a,s),i(s,o),i(o,c),i(a,r),i(r,l),i(l,u),i(a,f),i(f,v),i(v,T),i(a,x),i(x,P),i(P,A),i(a,H),i(H,S),i(S,I),i(I,$),i(a,C),i(C,O),i(O,M),p(t,R,e),p(t,D,e),i(D,j),i(j,_),i(_,N),i(D,F),i(D,B),i(B,G),i(B,U),i(U,z),i(B,q),i(D,W),i(D,V),i(V,Y),i(V,J),i(J,K),i(V,Z),p(t,Q,e),p(t,X,e),i(X,tt),i(tt,et),i(et,nt),i(X,at),i(X,st),i(st,ot),i(ot,ct),i(ct,rt),lt.m("{@html value}",ct),i(ct,it),i(ct,pt),i(pt,ht),i(st,ut),i(st,dt),i(dt,ft),mt.m("{@html value}",dt),i(dt,gt),i(st,vt),i(st,kt),i(kt,Et),i(Et,bt),i(st,wt),i(st,yt),i(yt,Tt),i(Tt,xt),i(st,Lt),i(st,Pt),i(Pt,At),i(st,Ht),i(st,St),i(St,It),i(It,$t),i(st,Ct),i(st,Ot),i(Ot,Mt),i(st,Rt),i(st,Dt),i(Dt,jt),i(jt,_t),i(st,Nt),i(st,Ft),i(Ft,Bt),i(st,Gt),i(st,Ut),i(Ut,zt),i(zt,qt),i(st,Wt),i(st,Vt),i(Vt,Yt),i(st,Jt),i(st,Kt),i(Kt,Zt),i(Kt,Qt),i(Qt,Xt),i(Kt,te),i(Kt,ee),i(ee,ne),i(Kt,ae),p(t,se,e),p(t,oe,e),i(oe,ce),i(ce,re),i(re,le),i(oe,ie),i(oe,pe),i(pe,he),i(oe,ue),i(oe,de),i(de,fe),i(oe,me),i(oe,ge),i(ge,ve),i(ge,ke),i(ke,Ee),i(ge,be),i(ge,we),i(we,ye),i(ge,Te),i(oe,xe),i(oe,Le),i(Le,Pe),i(oe,Ae),i(oe,He),i(He,Se),p(t,Ie,e),p(t,$e,e),i($e,Ce),i(Ce,Oe),i(Oe,Me),i($e,Re),i($e,De),i(De,je),_e.m("<",De),i(De,Ne),i($e,Fe),i($e,Be),i(Be,Ge),i(Be,Ue),i(Ue,ze),i(Be,qe),i($e,We),i($e,Ve),i(Ve,Ye),i(Ve,Je),i(Je,Ke),i(Ke,Ze),i(Je,Qe),i(Ve,Xe),i($e,tn),i($e,en),i(en,nn),i(nn,an),i(nn,sn),i(nn,on),i($e,cn),i($e,rn),i(rn,ln),i(rn,pn),i(pn,hn),i(pn,un),i(un,dn),i(pn,fn),i($e,mn),i($e,gn),i(gn,vn),i(gn,kn),i(kn,En),i(gn,bn),i(gn,wn),i(wn,yn),i(gn,Tn),p(t,xn,e),p(t,Ln,e),i(Ln,Pn),i(Pn,An),i(An,Hn),i(Ln,Sn),i(Ln,In),i(In,$n),i($n,Cn),i(Cn,On),i(In,Mn),i(In,Rn),i(Rn,Dn),i(Dn,jn),i(Rn,_n),i(In,Nn),i(Ln,Fn),i(Ln,Bn),Bn.innerHTML='<code class="language-js"><span class="token comment">// in the compiled Svelte code,</span>\n<span class="token comment">// you would see the use of &#96;HtmlTag&#96;</span>\n<span class="token comment">// when you use &#96;&#123;@html ...&#125;&#96;</span>\n<span class="token keyword">const</span> html_tag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HtmlTag</span><span class="token punctuation">(</span>anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// mounting raw html string, call the &#96;m&#96;ount method</span>\nhtml_tag<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token string">\'&lt;div>content&lt;/div>\'</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// when the html string content change, call the u&#96;p&#96;date method</span>\nhtml_tag<span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span><span class="token string">\'&lt;b>new&lt;/b>html&lt;br />\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// when unmount, call the &#96;d&#96;etach method</span>\nhtml_tag<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(Ln,Gn),i(Ln,Un),i(Un,zn),i(Un,qn),i(qn,Wn),i(Un,Vn),i(Un,Yn),i(Yn,Jn),i(Un,Kn),i(Un,Zn),i(Zn,Qn),i(Un,Xn),i(Ln,ta),i(Ln,ea),i(ea,na),i(ea,aa),i(aa,sa),i(ea,oa),i(Ln,ca),i(Ln,ra),i(ra,la),i(ra,ia),i(ia,pa),i(ra,ha),i(ra,ua),i(ua,da),i(ra,fa),i(Ln,ma),i(Ln,ga),i(ga,va),i(va,ka),i(ga,Ea),i(ga,ba),i(ba,wa),i(wa,ya),i(ga,Ta),i(ga,xa),i(xa,La),i(ga,Pa),i(ga,Aa),i(Aa,Ha),i(ga,Sa),i(Ln,Ia),i(Ln,$a),i($a,Ca),i($a,Oa),i(Oa,Ma),i($a,Ra),i($a,Da),i(Da,ja),i($a,_a),i(Ln,Na),i(Ln,Fa),Fa.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- Initially --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span>\n  <span class="token comment">&lt;!-- slot --\x3e</span>\n  &#123;@html content&#125;\n  <span class="token comment">&lt;!-- slot --\x3e</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n    This line should be last.\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span>\n\n<span class="token comment">&lt;!-- when the html content changed --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span>\n  <span class="token comment">&lt;!-- slot --\x3e</span>\n  <span class="token comment">&lt;!-- &#123;@html content&#125; removed --\x3e</span>\n  <span class="token comment">&lt;!-- slot --\x3e</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n    This line should be last.\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n  &#123;@html content&#125;\n  <span class="token comment">&lt;!-- inserted at the end of the parent --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></code>',i(Ln,Ba),i(Ln,Ga),i(Ga,Ua),i(Ua,za),i(Ua,qa),i(qa,Wa),i(Ua,Va),i(Ga,Ya),i(Ga,Ja),i(Ja,Ka),i(Ga,Za),i(Ga,Qa),i(Qa,Xa),i(Ga,ts),i(Ln,es),i(Ln,ns),i(ns,as),i(ns,ss),i(ss,os),i(ns,cs),i(ns,rs),i(rs,ls),i(ns,is),i(ns,ps),i(ps,hs),i(ns,us),i(Ln,ds),i(Ln,fs),i(fs,ms),i(fs,gs),i(gs,vs),i(fs,ks),i(fs,Es),i(Es,bs),i(Ln,ws),i(Ln,ys),i(ys,Ts),i(Ts,xs),i(ys,Ls),i(ys,Ps),i(Ps,As),i(ys,Hs),i(Ln,Ss),i(Ln,Is),Is.innerHTML='<code class="language-svelte">&lt;script&gt;\n  let content = &#39;first line&#39;;\n&lt;/script&gt;\n\n&#123;@html content&#125;&lt;button on:click=&#123;() =&gt; &#123;content = &#39;line first&#39;;&#125;&#125; /&gt;</code>',i(Ln,$s),i(Ln,Cs),Cs.innerHTML='<code class="language-js"><span class="token comment">// compiled js</span>\n<span class="token comment">// ...</span>\n  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    button <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    html_tag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HtmlTag</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token comment">// ...</span></code>',i(Ln,Os),i(Ln,Ms),i(Ms,Rs),i(Ms,Ds),i(Ds,js),i(Ms,_s),i(Ms,Ns),i(Ns,Fs),i(Ms,Bs),i(Ln,Gs),i(Ln,Us),i(Us,zs),i(Us,qs),i(qs,Ws),i(Us,Vs),i(Ln,Ys),i(Ln,Js),i(Js,Ks),i(Ks,Zs),i(Js,Qs),i(Js,Xs),i(Xs,to),i(Js,eo),i(Ln,no),i(Ln,ao),ao.innerHTML='<code class="language-svelte">&lt;script&gt;\n\timport Foo from &#39;./Foo.svelte&#39;;\n  let content = &#39;first line&#39;;\n&lt;/script&gt;\n\n&lt;button on:click=&#123;() =&gt; &#123;content = &#39;line first&#39;;&#125;&#125; /&gt;\n&#123;@html content&#125;&lt;Foo /&gt;</code>',i(Ln,so),i(Ln,oo),oo.innerHTML='<code class="language-js"><span class="token comment">// compiled js</span>\n<span class="token comment">// ...</span>\n  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    button <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    t <span class="token operator">=</span> <span class="token function">space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    html_anchor <span class="token operator">=</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">create_component</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    html_tag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HtmlTag</span><span class="token punctuation">(</span>html_anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token comment">// ...</span></code>',i(Ln,co),i(Ln,ro),i(ro,lo),i(ro,io),i(io,po),i(ro,ho),i(ro,uo),i(uo,fo),i(ro,mo),i(ro,go),i(go,vo),i(ro,ko),i(Ln,Eo),i(Ln,bo),i(bo,wo),i(Ln,yo),i(Ln,To),i(To,xo),i(To,Lo),i(Lo,Po),i(To,Ao),i(To,Ho),i(Ho,So),i(To,Io),i(To,$o),i($o,Co),i(To,Oo),i(Ln,Mo),i(Ln,Ro),i(Ro,Do),i(Ro,jo),i(jo,_o),i(Ro,No),i(Ro,Fo),i(Fo,Bo),i(Ro,Go),i(Ln,Uo),i(Ln,zo),i(zo,qo),i(Ln,Wo),i(Ln,Vo),i(Vo,Yo),i(Vo,Jo),i(Jo,Ko),i(Vo,Zo),i(Ln,Qo),i(Ln,Xo),Xo.innerHTML='<code class="language-svelte">&lt;div&gt;\n  &lt;slot /&gt;\n  &lt;div&gt;This is the last child&lt;/div&gt;\n&lt;/div&gt;</code>',i(Ln,tc),i(Ln,ec),i(ec,nc),i(ec,ac),i(ac,sc),i(ec,oc),i(Ln,cc),i(Ln,rc),rc.innerHTML='<code class="language-svelte">&lt;!-- Component.svelte --&gt;\n&lt;script&gt;\n  export let content;\n&lt;/script&gt;\n\n&#123;@html content&#125;\n\n&lt;!-- App.svelte --&gt;\n&lt;script&gt;\n  import Component from &#39;./Component.svelte&#39;;\n&lt;/script&gt;\n&lt;div&gt;\n  &lt;Component content=&#123;&#39;&lt;div&gt;html string&lt;/div&gt;&#39;&#125;/&gt;\n  &lt;div&gt;This is the last child&lt;/div&gt;\n&lt;/div&gt;</code>',i(Ln,lc),i(Ln,ic),i(ic,pc),i(pc,hc),i(Ln,uc),i(Ln,dc),i(dc,fc),p(t,mc,e),p(t,gc,e),i(gc,vc),i(vc,kc),i(kc,Ec),i(gc,bc),i(gc,wc),i(wc,yc),i(gc,Tc),i(gc,xc),i(xc,Lc),i(gc,Pc),i(gc,Ac),i(Ac,Hc),i(Hc,Sc),i(Hc,Ic),i(Ic,$c),i(Hc,Cc),i(Ac,Oc),i(Ac,Mc),i(Mc,Rc),i(Mc,Dc),i(Dc,jc),i(jc,_c),i(_c,Nc),i(jc,Fc),i(Dc,Bc),i(Dc,Gc),i(Gc,Uc),i(Uc,zc),i(Gc,qc),i(gc,Wc),i(gc,Vc),i(Vc,Yc),i(gc,Jc),i(gc,Kc),i(Kc,Zc),i(Kc,Qc),i(Qc,Xc),i(Kc,tr),i(gc,er),i(gc,nr),nr.innerHTML='<code class="language-js"><span class="token comment">// src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts#L42</span>\n\n<span class="token keyword">const</span> needs_anchor <span class="token operator">=</span> in_head <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>next<span class="token punctuation">.</span><span class="token function">is_dom_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>needs_anchor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  block<span class="token punctuation">.</span><span class="token function">add_element</span><span class="token punctuation">(</span>html_anchor<span class="token punctuation">,</span> x<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@empty()</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> x<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@empty()</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> parent_node<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(gc,ar),i(gc,sr),i(sr,or),i(or,cr),i(gc,rr),i(gc,lr),i(lr,ir),i(gc,pr),i(gc,hr),i(hr,ur),i(ur,dr),i(ur,fr),i(fr,mr),i(ur,gr),i(hr,vr),i(hr,kr),i(kr,Er),i(kr,br),i(br,wr),i(kr,yr),i(gc,Tr),i(gc,xr),xr.innerHTML='<code class="language-js"><span class="token keyword">const</span> needs_anchor <span class="token operator">=</span>\n  in_head <span class="token operator">||</span>\n  <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>next\n    <span class="token operator">?</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>next<span class="token punctuation">.</span><span class="token function">is_dom_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">is_dom_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(gc,Lr),i(gc,Pr),i(Pr,Ar),i(gc,Hr),i(gc,Sr),i(Sr,Ir),i(Ir,$r),i(Sr,Cr),i(Sr,Or),i(Or,Mr),i(Or,Rr),i(Rr,Dr),i(Or,jr),i(gc,_r),i(gc,Nr),i(Nr,Fr),i(Nr,Br),i(Br,Gr),i(Nr,Ur),i(gc,zr),i(gc,qr),qr.innerHTML='<code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>\n  html<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n    &lt;button>Switch&lt;/button>\n    &lt;p>Another first line&lt;/p>\n    &lt;p>This line should be last.&lt;/p>\n  </span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span>\n  <span class="token keyword">async</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> assert<span class="token punctuation">,</span> target<span class="token punctuation">,</span> window <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">const</span> btn <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">\'button\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> clickEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>MouseEvent</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// simulate clicks</span>\n    <span class="token keyword">await</span> btn<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>clickEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    assert<span class="token punctuation">.</span><span class="token function">htmlEqual</span><span class="token punctuation">(</span>\n      target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span>\n      <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n        &lt;button>Switch&lt;/button>\n        &lt;p>First line&lt;/p>\n        &lt;p>This line should be last.&lt;/p>\n      </span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// simulate clicks</span>\n    <span class="token keyword">await</span> btn<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>clickEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    assert<span class="token punctuation">.</span><span class="token function">htmlEqual</span><span class="token punctuation">(</span>\n      target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span>\n      <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n        &lt;button>Switch&lt;/button>\n        &lt;p>Another first line&lt;/p>\n        &lt;p>This line should be last.&lt;/p>\n      </span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(gc,Wr),i(gc,Vr),i(Vr,Yr),i(Vr,Jr),i(Jr,Kr),i(Vr,Zr),i(gc,Qr),i(gc,Xr),i(gc,tl),i(gc,el),i(el,nl),i(el,al),i(al,sl),i(el,ol),i(gc,cl),i(gc,rl),i(rl,ll),i(rl,il),i(il,pl),i(rl,hl)},p:t,d(t){t&&h(n),t&&h(R),t&&h(D),t&&h(Q),t&&h(X),t&&h(se),t&&h(oe),t&&h(Ie),t&&h($e),t&&h(xn),t&&h(Ln),t&&h(mc),t&&h(gc)}}}function ut(t){let n,a;const s=[dt];let o={$$slots:{default:[ht]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)o=e(o,s[t]);return n=new pt({props:o}),{c(){U(n.$$.fragment)},l(t){z(n.$$.fragment,t)},m(t,e){q(n,t,e),a=!0},p(t,[e]){const a=0&e?function(t,e){const n={},a={},s={$$scope:1};let o=t.length;for(;o--;){const c=t[o],r=e[o];if(r){for(const t in c)t in r||(a[t]=1);for(const t in r)s[t]||(n[t]=r[t],s[t]=1);t[o]=r}else for(const t in c)s[t]=1}for(const t in a)t in n||(n[t]=void 0);return n}(s,[(o=dt,"object"==typeof o&&null!==o?o:{})]):{};var o;1&e&&(a.$$scope={dirty:e,ctx:t}),n.$set(a)},i(t){a||(B(n.$$.fragment,t),a=!0)},o(t){G(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}const dt={title:"Contributing to Svelte - Fixing issue #5012",date:"2020-06-25T08:00:00Z",tags:["Svelte","JavaScript","Open Source"],series:"Contributing to Svelte",description:"Svelte issue #5012 - Slot containing only {@html value} renders in wrong place on update",slug:"contributing-to-svelte-fixing-issue-5012",type:"blog"};class ft extends J{constructor(t){super(),Y(this,t,null,ut,c,{})}}setTimeout(()=>{new ft({target:document.querySelector("#app"),hydrate:!0})},3e3);
