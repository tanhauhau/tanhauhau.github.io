function a(){}function n(a,n){for(const s in n)a[s]=n[s];return a}function s(a){return a()}function t(){return Object.create(null)}function e(a){a.forEach(s)}function o(a){return"function"==typeof a}function p(a,n){return a!=a?n==n:a!==n||a&&"object"==typeof a||"function"==typeof a}function c(a,s,t,e){return a[1]&&e?n(t.ctx.slice(),a[1](e(s))):t.ctx}function r(a,n,s,t,e,o,p){const r=function(a,n,s,t){if(a[2]&&t){const e=a[2](t(s));if(void 0===n.dirty)return e;if("object"==typeof e){const a=[],s=Math.max(n.dirty.length,e.length);for(let t=0;t<s;t+=1)a[t]=n.dirty[t]|e[t];return a}return n.dirty|e}return n.dirty}(n,t,e,o);if(r){const e=c(n,s,t,p);a.p(e,r)}}function l(a,n){a.appendChild(n)}function i(a,n,s){a.insertBefore(n,s||null)}function u(a){a.parentNode.removeChild(a)}function h(a,n){for(let s=0;s<a.length;s+=1)a[s]&&a[s].d(n)}function k(a){return document.createElement(a)}function d(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function f(a){return document.createTextNode(a)}function m(){return f(" ")}function v(){return f("")}function g(a,n,s){null==s?a.removeAttribute(n):a.getAttribute(n)!==s&&a.setAttribute(n,s)}function E(a){return Array.from(a.childNodes)}function b(a,n,s,t){for(let t=0;t<a.length;t+=1){const e=a[t];if(e.nodeName===n){let n=0;const o=[];for(;n<e.attributes.length;){const a=e.attributes[n++];s[a.name]||o.push(a.name)}for(let a=0;a<o.length;a++)e.removeAttribute(o[a]);return a.splice(t,1)[0]}}return t?d(n):k(n)}function $(a,n){for(let s=0;s<a.length;s+=1){const t=a[s];if(3===t.nodeType)return t.data=""+n,a.splice(s,1)[0]}return f(n)}function y(a){return $(a," ")}function w(a,n){n=""+n,a.wholeText!==n&&(a.data=n)}function O(a,n){a.value=null==n?"":n}class S{constructor(a=null){this.a=a,this.e=this.n=null}m(a,n,s=null){this.e||(this.e=k(n.nodeName),this.t=n,this.h(a)),this.i(s)}h(a){this.e.innerHTML=a,this.n=Array.from(this.e.childNodes)}i(a){for(let n=0;n<this.n.length;n+=1)i(this.t,this.n[n],a)}p(a){this.d(),this.h(a),this.i(this.a)}d(){this.n.forEach(u)}}let T;function L(a){T=a}function N(a){(function(){if(!T)throw new Error("Function called outside component initialization");return T})().$$.on_mount.push(a)}const P=[],x=[],C=[],D=[],A=Promise.resolve();let I=!1;function j(a){C.push(a)}let R=!1;const M=new Set;function H(){if(!R){R=!0;do{for(let a=0;a<P.length;a+=1){const n=P[a];L(n),_(n.$$)}for(P.length=0;x.length;)x.pop()();for(let a=0;a<C.length;a+=1){const n=C[a];M.has(n)||(M.add(n),n())}C.length=0}while(P.length);for(;D.length;)D.pop()();I=!1,R=!1,M.clear()}}function _(a){if(null!==a.fragment){a.update(),e(a.before_update);const n=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,n),a.after_update.forEach(j)}}const U=new Set;function G(a,n){a&&a.i&&(U.delete(a),a.i(n))}function q(a,n,s,t){if(a&&a.o){if(U.has(a))return;U.add(a),(void 0).c.push(()=>{U.delete(a),t&&(s&&a.d(1),t())}),a.o(n)}}function B(a){a&&a.c()}function z(a,n){a&&a.l(n)}function F(a,n,t){const{fragment:p,on_mount:c,on_destroy:r,after_update:l}=a.$$;p&&p.m(n,t),j(()=>{const n=c.map(s).filter(o);r?r.push(...n):e(n),a.$$.on_mount=[]}),l.forEach(j)}function J(a,n){const s=a.$$;null!==s.fragment&&(e(s.on_destroy),s.fragment&&s.fragment.d(n),s.on_destroy=s.fragment=null,s.ctx=[])}function W(a,n){-1===a.$$.dirty[0]&&(P.push(a),I||(I=!0,A.then(H)),a.$$.dirty.fill(0)),a.$$.dirty[n/31|0]|=1<<n%31}function Y(n,s,o,p,c,r,l=[-1]){const i=T;L(n);const h=s.props||{},k=n.$$={fragment:null,ctx:null,props:r,update:a,not_equal:c,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:t(),dirty:l};let d=!1;if(k.ctx=o?o(n,h,(a,s,...t)=>{const e=t.length?t[0]:s;return k.ctx&&c(k.ctx[a],k.ctx[a]=e)&&(k.bound[a]&&k.bound[a](e),d&&W(n,a)),s}):[],k.update(),d=!0,e(k.before_update),k.fragment=!!p&&p(k.ctx),s.target){if(s.hydrate){const a=E(s.target);k.fragment&&k.fragment.l(a),a.forEach(u)}else k.fragment&&k.fragment.c();s.intro&&G(n.$$.fragment),F(n,s.target,s.anchor),H()}L(i)}class V{$destroy(){J(this,1),this.$destroy=a}$on(a,n){const s=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return s.push(n),()=>{const a=s.indexOf(n);-1!==a&&s.splice(a,1)}}$set(){}}function K(n){let s,t,e,o,p,c,r,h,v,w,O,S,T,L,N,P,x,C,D,A,I,j,R,M,H,_,U,G,q,B,z,F,J,W,Y;return{c(){s=k("header"),t=k("nav"),e=k("ul"),o=k("li"),p=k("a"),c=f("Tan Li Hau"),r=m(),h=k("li"),v=k("a"),w=f("About"),O=m(),S=k("li"),T=k("a"),L=f("Writings"),N=m(),P=k("li"),x=k("a"),C=f("Talks"),D=m(),A=k("li"),I=k("a"),j=f("Notes"),R=m(),M=k("li"),H=k("a"),_=f("Newsletter"),U=m(),G=k("li"),q=k("a"),B=d("svg"),z=d("path"),F=m(),J=k("a"),W=d("svg"),Y=d("path"),this.h()},l(a){s=b(a,"HEADER",{class:!0});var n=E(s);t=b(n,"NAV",{});var l=E(t);e=b(l,"UL",{class:!0});var i=E(e);o=b(i,"LI",{class:!0});var k=E(o);p=b(k,"A",{href:!0,class:!0});var d=E(p);c=$(d,"Tan Li Hau"),d.forEach(u),k.forEach(u),r=y(i),h=b(i,"LI",{class:!0});var f=E(h);v=b(f,"A",{href:!0,class:!0});var m=E(v);w=$(m,"About"),m.forEach(u),f.forEach(u),O=y(i),S=b(i,"LI",{class:!0});var g=E(S);T=b(g,"A",{href:!0,class:!0});var V=E(T);L=$(V,"Writings"),V.forEach(u),g.forEach(u),N=y(i),P=b(i,"LI",{class:!0});var K=E(P);x=b(K,"A",{href:!0,class:!0});var Z=E(x);C=$(Z,"Talks"),Z.forEach(u),K.forEach(u),D=y(i),A=b(i,"LI",{class:!0});var Q=E(A);I=b(Q,"A",{href:!0,class:!0});var X=E(I);j=$(X,"Notes"),X.forEach(u),Q.forEach(u),R=y(i),M=b(i,"LI",{class:!0});var aa=E(M);H=b(aa,"A",{href:!0,class:!0});var na=E(H);_=$(na,"Newsletter"),na.forEach(u),aa.forEach(u),U=y(i),G=b(i,"LI",{class:!0});var sa=E(G);q=b(sa,"A",{"aria-label":!0,href:!0,class:!0});var ta=E(q);B=b(ta,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var ea=E(B);z=b(ea,"path",{d:!0},1),E(z).forEach(u),ea.forEach(u),ta.forEach(u),F=y(sa),J=b(sa,"A",{"aria-label":!0,href:!0,class:!0});var oa=E(J);W=b(oa,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var pa=E(W);Y=b(pa,"path",{d:!0},1),E(Y).forEach(u),pa.forEach(u),oa.forEach(u),sa.forEach(u),i.forEach(u),l.forEach(u),n.forEach(u),this.h()},h(){g(p,"href","/"),g(p,"class","svelte-f3e4uo"),g(o,"class","svelte-f3e4uo"),g(v,"href","/about"),g(v,"class","svelte-f3e4uo"),g(h,"class","svelte-f3e4uo"),g(T,"href","/blogs"),g(T,"class","svelte-f3e4uo"),g(S,"class","svelte-f3e4uo"),g(x,"href","/talks"),g(x,"class","svelte-f3e4uo"),g(P,"class","svelte-f3e4uo"),g(I,"href","/notes"),g(I,"class","svelte-f3e4uo"),g(A,"class","svelte-f3e4uo"),g(H,"href","/newsletter"),g(H,"class","svelte-f3e4uo"),g(M,"class","svelte-f3e4uo"),g(z,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),g(B,"viewBox","0 0 24 24"),g(B,"width","1em"),g(B,"height","1em"),g(B,"class","svelte-f3e4uo"),g(q,"aria-label","Twitter account"),g(q,"href","https://twitter.com/lihautan"),g(q,"class","svelte-f3e4uo"),g(Y,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),g(W,"viewBox","0 0 24 24"),g(W,"width","1em"),g(W,"height","1em"),g(W,"class","svelte-f3e4uo"),g(J,"aria-label","Github account"),g(J,"href","https://github.com/tanhauhau"),g(J,"class","svelte-f3e4uo"),g(G,"class","social svelte-f3e4uo"),g(e,"class","svelte-f3e4uo"),g(s,"class","svelte-f3e4uo")},m(a,n){i(a,s,n),l(s,t),l(t,e),l(e,o),l(o,p),l(p,c),l(e,r),l(e,h),l(h,v),l(v,w),l(e,O),l(e,S),l(S,T),l(T,L),l(e,N),l(e,P),l(P,x),l(x,C),l(e,D),l(e,A),l(A,I),l(I,j),l(e,R),l(e,M),l(M,H),l(H,_),l(e,U),l(e,G),l(G,q),l(q,B),l(B,z),l(G,F),l(G,J),l(J,W),l(W,Y)},p:a,i:a,o:a,d(a){a&&u(s)}}}class Z extends V{constructor(a){super(),Y(this,a,null,K,p,{})}}function Q(n){let s,t,e,o,p,c,r,h,d,v,w,S,T,L,N,P,x,C,D,A;return{c(){s=k("div"),t=k("h1"),e=f("Subscribe to my newsletter"),o=m(),p=k("h2"),c=f("Get the latest blog posts and project updates delivered right to your inbox"),r=m(),h=k("form"),d=k("div"),v=k("input"),w=m(),S=k("input"),L=m(),N=k("input"),P=m(),x=k("p"),C=f("Powered by Buttondown."),this.h()},l(a){s=b(a,"DIV",{class:!0});var n=E(s);t=b(n,"H1",{});var l=E(t);e=$(l,"Subscribe to my newsletter"),l.forEach(u),o=y(n),p=b(n,"H2",{class:!0});var i=E(p);c=$(i,"Get the latest blog posts and project updates delivered right to your inbox"),i.forEach(u),r=y(n),h=b(n,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var k=E(h);d=b(k,"DIV",{class:!0});var f=E(d);v=b(f,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),w=y(f),S=b(f,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),f.forEach(u),L=y(k),N=b(k,"INPUT",{type:!0,value:!0,name:!0,class:!0}),P=y(k),x=b(k,"P",{class:!0});var m=E(x);C=$(m,"Powered by Buttondown."),m.forEach(u),k.forEach(u),n.forEach(u),this.h()},h(){g(p,"class","svelte-1k1s1co"),g(v,"type","email"),g(v,"name","email"),g(v,"id","bd-email"),g(v,"aria-label","email address"),g(v,"placeholder","youremail@example.com"),g(v,"class","svelte-1k1s1co"),g(S,"type","submit"),S.value="Subscribe",S.disabled=T=!n[0],g(S,"class","svelte-1k1s1co"),g(d,"class","form-item svelte-1k1s1co"),g(N,"type","hidden"),N.value="1",g(N,"name","embed"),g(N,"class","svelte-1k1s1co"),g(x,"class","svelte-1k1s1co"),g(h,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),g(h,"method","post"),g(h,"target","popupwindow"),g(h,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),g(h,"class","embeddable-buttondown-form"),g(s,"class","form svelte-1k1s1co")},m(a,u){var k,f,m,g;i(a,s,u),l(s,t),l(t,e),l(s,o),l(s,p),l(p,c),l(s,r),l(s,h),l(h,d),l(d,v),O(v,n[0]),l(d,w),l(d,S),l(h,L),l(h,N),l(h,P),l(h,x),l(x,C),D||(k=v,f="input",m=n[1],k.addEventListener(f,m,g),A=()=>k.removeEventListener(f,m,g),D=!0)},p(a,[n]){1&n&&v.value!==a[0]&&O(v,a[0]),1&n&&T!==(T=!a[0])&&(S.disabled=T)},i:a,o:a,d(a){a&&u(s),D=!1,A()}}}function X(a,n,s){let t;return[t,function(){t=this.value,s(0,t)}]}class aa extends V{constructor(a){super(),Y(this,a,X,Q,p,{})}}function na(a){return N(()=>(setTimeout(()=>{if(window.innerWidth>1080){const a=document.createElement("script");a.async=!0,a.type="text/javascript",a.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",a.id="_carbonads_js",document.body.appendChild(a)}},5e3),()=>{try{const a=document.getElementById("carbonads");a.parentNode.removeChild(a)}catch(a){}})),[]}class sa extends V{constructor(a){super(),Y(this,a,na,null,p,{})}}var ta="https://lihautan.com/compile-svelte-in-your-head-part-2/assets/hero-twitter-2914f5b9.jpg";function ea(a,n,s){const t=a.slice();return t[6]=n[s],t}function oa(a,n,s){const t=a.slice();return t[6]=n[s],t}function pa(a){let n,s;return{c(){n=k("meta"),this.h()},l(a){n=b(a,"META",{name:!0,content:!0}),this.h()},h(){g(n,"name","keywords"),g(n,"content",s=a[6])},m(a,s){i(a,n,s)},p(a,t){4&t&&s!==(s=a[6])&&g(n,"content",s)},d(a){a&&u(n)}}}function ca(a){let n,s,t=a[6]+"";return{c(){n=k("span"),s=f(t),this.h()},l(a){n=b(a,"SPAN",{class:!0});var e=E(n);s=$(e,t),e.forEach(u),this.h()},h(){g(n,"class","svelte-9tqnza")},m(a,t){i(a,n,t),l(n,s)},p(a,n){4&n&&t!==(t=a[6]+"")&&w(s,t)},d(a){a&&u(n)}}}function ra(a){let n,s,t,e,o,p,d,O,T,L,N,P,x,C,D,A,I,j,R,M,H,_,U,W,Y,V,K,Q,X,na,ra,la,ia,ua,ha,ka,da=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:a[3],copyrightHolder:a[3],copyrightYear:"2020",creator:a[3],publisher:a[3],description:a[1],headline:a[0],name:a[0],inLanguage:"en"})}<\/script>`,fa=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcompile-svelte-in-your-head-part-2",name:a[0]},name:a[0],position:2}]})}<\/script>`;document.title=n=a[0]+" | Tan Li Hau";let ma=a[2],va=[];for(let n=0;n<ma.length;n+=1)va[n]=pa(oa(a,ma,n));U=new Z({});let ga=a[2],Ea=[];for(let n=0;n<ga.length;n+=1)Ea[n]=ca(ea(a,ga,n));const ba=a[5].default,$a=function(a,n,s,t){if(a){const e=c(a,n,s,t);return a[0](e)}}(ba,a,a[4],null);return ia=new aa({}),ha=new sa({}),{c(){s=k("meta"),t=k("meta"),e=k("meta"),o=k("meta"),p=k("meta"),d=k("meta"),O=k("meta"),T=k("meta"),L=k("meta"),N=k("meta"),P=k("meta");for(let a=0;a<va.length;a+=1)va[a].c();x=k("meta"),C=k("meta"),A=v(),j=v(),R=m(),M=k("a"),H=f("Skip to content"),_=m(),B(U.$$.fragment),W=m(),Y=k("main"),V=k("h1"),K=f(a[0]),Q=m();for(let a=0;a<Ea.length;a+=1)Ea[a].c();X=m(),na=k("article"),$a&&$a.c(),ra=m(),la=k("footer"),B(ia.$$.fragment),ua=m(),B(ha.$$.fragment),this.h()},l(n){const c=function(a,n=document.body){return Array.from(n.querySelectorAll(a))}('[data-svelte="svelte-15e3uyc"]',document.head);s=b(c,"META",{name:!0,content:!0}),t=b(c,"META",{name:!0,content:!0}),e=b(c,"META",{name:!0,content:!0}),o=b(c,"META",{name:!0,content:!0}),p=b(c,"META",{name:!0,content:!0}),d=b(c,"META",{name:!0,content:!0}),O=b(c,"META",{name:!0,content:!0}),T=b(c,"META",{name:!0,content:!0}),L=b(c,"META",{name:!0,content:!0}),N=b(c,"META",{name:!0,content:!0}),P=b(c,"META",{name:!0,content:!0});for(let a=0;a<va.length;a+=1)va[a].l(c);x=b(c,"META",{itemprop:!0,content:!0}),C=b(c,"META",{itemprop:!0,content:!0}),A=v(),j=v(),c.forEach(u),R=y(n),M=b(n,"A",{href:!0,class:!0});var r=E(M);H=$(r,"Skip to content"),r.forEach(u),_=y(n),z(U.$$.fragment,n),W=y(n),Y=b(n,"MAIN",{id:!0,class:!0});var l=E(Y);V=b(l,"H1",{});var i=E(V);K=$(i,a[0]),i.forEach(u),Q=y(l);for(let a=0;a<Ea.length;a+=1)Ea[a].l(l);X=y(l),na=b(l,"ARTICLE",{});var h=E(na);$a&&$a.l(h),h.forEach(u),l.forEach(u),ra=y(n),la=b(n,"FOOTER",{class:!0});var k=E(la);z(ia.$$.fragment,k),ua=y(k),z(ha.$$.fragment,k),k.forEach(u),this.h()},h(){g(s,"name","description"),g(s,"content",a[1]),g(t,"name","image"),g(t,"content",ta),g(e,"name","og:image"),g(e,"content",ta),g(o,"name","og:title"),g(o,"content",a[0]),g(p,"name","og:description"),g(p,"content",a[1]),g(d,"name","og:type"),g(d,"content","website"),g(O,"name","twitter:card"),g(O,"content","summary_large_image"),g(T,"name","twitter:creator"),g(T,"content","@lihautan"),g(L,"name","twitter:title"),g(L,"content",a[0]),g(N,"name","twitter:description"),g(N,"content",a[1]),g(P,"name","twitter:image"),g(P,"content",ta),g(x,"itemprop","url"),g(x,"content","https%3A%2F%2Flihautan.com%2Fcompile-svelte-in-your-head-part-2"),g(C,"itemprop","image"),g(C,"content",ta),D=new S(A),I=new S(j),g(M,"href","#content"),g(M,"class","skip svelte-9tqnza"),g(Y,"id","content"),g(Y,"class","blog svelte-9tqnza"),g(la,"class","svelte-9tqnza")},m(a,n){l(document.head,s),l(document.head,t),l(document.head,e),l(document.head,o),l(document.head,p),l(document.head,d),l(document.head,O),l(document.head,T),l(document.head,L),l(document.head,N),l(document.head,P);for(let a=0;a<va.length;a+=1)va[a].m(document.head,null);l(document.head,x),l(document.head,C),D.m(da,document.head),l(document.head,A),I.m(fa,document.head),l(document.head,j),i(a,R,n),i(a,M,n),l(M,H),i(a,_,n),F(U,a,n),i(a,W,n),i(a,Y,n),l(Y,V),l(V,K),l(Y,Q);for(let a=0;a<Ea.length;a+=1)Ea[a].m(Y,null);l(Y,X),l(Y,na),$a&&$a.m(na,null),i(a,ra,n),i(a,la,n),F(ia,la,null),l(la,ua),F(ha,la,null),ka=!0},p(a,[t]){if((!ka||1&t)&&n!==(n=a[0]+" | Tan Li Hau")&&(document.title=n),(!ka||2&t)&&g(s,"content",a[1]),(!ka||1&t)&&g(o,"content",a[0]),(!ka||2&t)&&g(p,"content",a[1]),(!ka||1&t)&&g(L,"content",a[0]),(!ka||2&t)&&g(N,"content",a[1]),4&t){let n;for(ma=a[2],n=0;n<ma.length;n+=1){const s=oa(a,ma,n);va[n]?va[n].p(s,t):(va[n]=pa(s),va[n].c(),va[n].m(x.parentNode,x))}for(;n<va.length;n+=1)va[n].d(1);va.length=ma.length}if((!ka||3&t)&&da!==(da=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:a[3],copyrightHolder:a[3],copyrightYear:"2020",creator:a[3],publisher:a[3],description:a[1],headline:a[0],name:a[0],inLanguage:"en"})}<\/script>`)&&D.p(da),(!ka||1&t)&&fa!==(fa=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcompile-svelte-in-your-head-part-2",name:a[0]},name:a[0],position:2}]})}<\/script>`)&&I.p(fa),(!ka||1&t)&&w(K,a[0]),4&t){let n;for(ga=a[2],n=0;n<ga.length;n+=1){const s=ea(a,ga,n);Ea[n]?Ea[n].p(s,t):(Ea[n]=ca(s),Ea[n].c(),Ea[n].m(Y,X))}for(;n<Ea.length;n+=1)Ea[n].d(1);Ea.length=ga.length}$a&&$a.p&&16&t&&r($a,ba,a,a[4],t,null,null)},i(a){ka||(G(U.$$.fragment,a),G($a,a),G(ia.$$.fragment,a),G(ha.$$.fragment,a),ka=!0)},o(a){q(U.$$.fragment,a),q($a,a),q(ia.$$.fragment,a),q(ha.$$.fragment,a),ka=!1},d(a){u(s),u(t),u(e),u(o),u(p),u(d),u(O),u(T),u(L),u(N),u(P),h(va,a),u(x),u(C),u(A),a&&D.d(),u(j),a&&I.d(),a&&u(R),a&&u(M),a&&u(_),J(U,a),a&&u(W),a&&u(Y),h(Ea,a),$a&&$a.d(a),a&&u(ra),a&&u(la),J(ia),J(ha)}}}function la(a,n,s){let{title:t=""}=n,{description:e=""}=n,{tags:o=[]}=n;const p={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:r}=n;return a.$set=a=>{"title"in a&&s(0,t=a.title),"description"in a&&s(1,e=a.description),"tags"in a&&s(2,o=a.tags),"$$scope"in a&&s(4,r=a.$$scope)},[t,e,o,p,r,c]}class ia extends V{constructor(a){super(),Y(this,a,la,ra,p,{title:0,description:1,tags:2})}}function ua(n){let s,t,e,o,p,c,r,h,d,v,w,O,S,T,L,N,P,x,C,D,A,I,j,R,M,H,_,U,G,q,B,z,F,J,W,Y,V,K,Z,Q,X,aa,na,sa,ta,ea,oa,pa,ca,ra,la,ia,ua,ha,ka,da,fa,ma,va,ga,Ea,ba,$a,ya,wa,Oa,Sa,Ta,La,Na,Pa,xa,Ca,Da,Aa,Ia,ja,Ra,Ma,Ha,_a,Ua,Ga,qa,Ba,za,Fa,Ja,Wa,Ya,Va,Ka,Za,Qa,Xa,an,nn,sn,tn,en,on,pn,cn,rn,ln,un,hn,kn,dn,fn,mn,vn,gn,En,bn,$n,yn,wn,On,Sn,Tn,Ln,Nn,Pn,xn,Cn,Dn,An,In,jn,Rn,Mn,Hn,_n,Un,Gn,qn,Bn,zn,Fn,Jn,Wn,Yn,Vn,Kn,Zn,Qn,Xn,as,ns,ss,ts,es,os,ps,cs,rs,ls,is,us,hs,ks,ds,fs,ms,vs,gs,Es,bs,$s,ys,ws,Os,Ss,Ts,Ls,Ns,Ps,xs,Cs,Ds,As,Is,js,Rs,Ms,Hs,_s,Us,Gs,qs,Bs,zs,Fs,Js,Ws,Ys,Vs,Ks,Zs,Qs,Xs,at,nt,st,tt,et,ot,pt,ct,rt,lt,it,ut,ht,kt,dt,ft,mt,vt,gt,Et,bt,$t,yt,wt,Ot,St,Tt,Lt,Nt,Pt,xt,Ct,Dt,At,It,jt,Rt,Mt,Ht,_t,Ut,Gt,qt,Bt,zt,Ft,Jt,Wt,Yt,Vt,Kt,Zt,Qt,Xt,ae,ne,se,te,ee,oe,pe,ce,re,le,ie,ue,he,ke,de,fe,me,ve,ge,Ee,be,$e,ye,we,Oe,Se,Te,Le,Ne,Pe,xe,Ce,De,Ae,Ie,je,Re,Me,He,_e,Ue,Ge,qe,Be,ze,Fe,Je,We,Ye,Ve,Ke,Ze,Qe,Xe,ao,no,so,to,eo,oo,po,co,ro,lo,io,uo,ho,ko,fo,mo,vo,go,Eo,bo,$o,yo,wo,Oo,So,To,Lo,No,Po,xo,Co,Do,Ao,Io,jo,Ro,Mo,Ho,_o,Uo,Go,qo,Bo,zo,Fo,Jo,Wo,Yo,Vo,Ko,Zo,Qo,Xo,ap,np,sp,tp,ep,op,pp,cp,rp,lp,ip,up,hp,kp,dp,fp,mp,vp,gp,Ep,bp,$p,yp,wp,Op,Sp,Tp,Lp,Np,Pp,xp,Cp,Dp,Ap,Ip,jp,Rp,Mp,Hp,_p,Up,Gp,qp,Bp,zp,Fp,Jp,Wp,Yp,Vp,Kp,Zp,Qp,Xp,ac,nc,sc,tc,ec,oc,pc,cc,rc,lc,ic,uc,hc,kc,dc,fc,mc,vc,gc,Ec,bc,$c,yc,wc,Oc,Sc,Tc,Lc,Nc,Pc,xc,Cc,Dc,Ac,Ic,jc,Rc,Mc,Hc,_c,Uc,Gc,qc,Bc,zc,Fc,Jc,Wc,Yc,Vc,Kc,Zc,Qc,Xc,ar,nr,sr,tr,er,or,pr,cr,rr,lr,ir,ur,hr,kr,dr,fr,mr,vr,gr,Er,br,$r,yr,wr,Or,Sr,Tr,Lr,Nr,Pr,xr,Cr,Dr,Ar,Ir,jr,Rr,Mr,Hr,_r,Ur,Gr,qr,Br,zr,Fr,Jr,Wr,Yr,Vr,Kr,Zr,Qr,Xr,al,nl,sl,tl,el,ol,pl,cl,rl,ll,il,ul,hl,kl,dl,fl,ml,vl,gl,El,bl,$l,yl,wl,Ol,Sl,Tl,Ll,Nl,Pl,xl,Cl,Dl,Al,Il,jl,Rl,Ml,Hl,_l,Ul,Gl,ql,Bl,zl,Fl,Jl,Wl,Yl,Vl,Kl,Zl,Ql,Xl,ai,ni,si,ti,ei,oi,pi,ci,ri,li,ii,ui,hi,ki,di,fi,mi,vi,gi,Ei,bi,$i,yi,wi,Oi,Si,Ti,Li,Ni,Pi,xi,Ci,Di,Ai,Ii,ji,Ri,Mi,Hi,_i,Ui,Gi,qi,Bi,zi,Fi,Ji,Wi,Yi,Vi,Ki,Zi,Qi,Xi,au,nu,su,tu,eu,ou,pu,cu,ru,lu,iu,uu,hu,ku,du,fu,mu,vu,gu,Eu,bu,$u,yu,wu,Ou,Su,Tu,Lu,Nu,Pu,xu,Cu,Du,Au,Iu,ju,Ru,Mu,Hu,_u,Uu,Gu,qu,Bu,zu,Fu,Ju,Wu,Yu,Vu,Ku,Zu,Qu,Xu,ah,nh,sh,th,eh,oh,ph,ch,rh,lh,ih,uh,hh,kh,dh,fh,mh,vh,gh,Eh,bh,$h,yh,wh,Oh,Sh,Th,Lh,Nh,Ph,xh,Ch,Dh,Ah,Ih,jh,Rh,Mh,Hh,_h,Uh,Gh,qh,Bh,zh,Fh,Jh,Wh,Yh,Vh,Kh,Zh,Qh,Xh,ak,nk,sk,tk,ek,ok,pk,ck,rk,lk,ik,uk,hk,kk,dk,fk,mk,vk,gk,Ek,bk,$k,yk,wk,Ok,Sk,Tk,Lk,Nk,Pk,xk,Ck,Dk,Ak,Ik,jk,Rk,Mk,Hk,_k,Uk,Gk,qk,Bk,zk,Fk,Jk,Wk,Yk,Vk,Kk,Zk,Qk,Xk,ad,nd,sd,td,ed,od,pd,cd,rd,ld,id,ud,hd,kd,dd,fd,md,vd,gd,Ed,bd,$d,yd,wd,Od,Sd,Td,Ld,Nd,Pd,xd,Cd,Dd,Ad,Id,jd,Rd,Md,Hd,_d,Ud,Gd,qd,Bd,zd,Fd,Jd,Wd,Yd,Vd,Kd,Zd,Qd,Xd,af,nf,sf,tf,ef,of,pf,cf,rf,lf,uf,hf,kf,df,ff,mf,vf,gf,Ef,bf,$f,yf,wf,Of,Sf,Tf,Lf,Nf,Pf,xf,Cf,Df,Af,If,jf,Rf,Mf,Hf,_f,Uf,Gf,qf,Bf,zf,Ff,Jf,Wf,Yf,Vf,Kf,Zf,Qf,Xf,am,nm,sm,tm,em,om,pm,cm,rm,lm,im,um,hm,km,dm,fm,mm,vm,gm,Em,bm,$m,ym,wm,Om,Sm,Tm,Lm,Nm,Pm,xm,Cm,Dm,Am,Im,jm,Rm,Mm,Hm,_m,Um,Gm,qm,Bm,zm,Fm,Jm,Wm,Ym,Vm,Km,Zm,Qm,Xm,av,nv,sv,tv,ev,ov,pv,cv,rv,lv,iv,uv,hv,kv,dv,fv,mv,vv,gv,Ev,bv,$v,yv,wv,Ov,Sv,Tv,Lv,Nv,Pv,xv,Cv,Dv,Av,Iv,jv,Rv,Mv,Hv,_v,Uv,Gv,qv,Bv,zv,Fv,Jv,Wv,Yv,Vv,Kv,Zv,Qv,Xv,ag,ng,sg,tg,eg,og,pg,cg,rg,lg,ig,ug,hg,kg,dg,fg,mg,vg,gg,Eg,bg,$g,yg,wg,Og,Sg,Tg,Lg,Ng,Pg,xg,Cg,Dg,Ag,Ig,jg,Rg,Mg,Hg,_g,Ug,Gg,qg,Bg,zg,Fg,Jg,Wg,Yg,Vg,Kg,Zg,Qg,Xg,aE,nE,sE,tE,eE,oE,pE,cE,rE,lE,iE,uE,hE,kE,dE,fE,mE,vE,gE,EE,bE,$E,yE,wE,OE,SE,TE,LE,NE,PE,xE,CE,DE,AE,IE,jE,RE,ME,HE,_E,UE,GE,qE,BE,zE,FE,JE,WE,YE,VE,KE,ZE,QE,XE,ab,nb,sb,tb,eb,ob,pb,cb,rb,lb,ib,ub,hb,kb,db,fb,mb,vb,gb,Eb,bb,$b,yb,wb,Ob,Sb,Tb,Lb,Nb,Pb,xb,Cb,Db,Ab,Ib,jb,Rb,Mb,Hb,_b,Ub,Gb,qb,Bb,zb,Fb,Jb,Wb,Yb,Vb,Kb,Zb,Qb,Xb,a$,n$,s$,t$,e$,o$,p$,c$,r$,l$,i$,u$,h$,k$,d$,f$,m$,v$,g$,E$,b$,$$,y$,w$,O$,S$,T$,L$,N$,P$,x$,C$,D$,A$,I$,j$,R$,M$,H$,_$,U$,G$,q$,B$,z$,F$,J$,W$,Y$,V$,K$,Z$,Q$,X$,ay,ny,sy,ty,ey,oy,py,cy,ry,ly,iy,uy,hy,ky,dy,fy,my,vy,gy,Ey,by,$y,yy,wy,Oy,Sy,Ty,Ly,Ny,Py,xy,Cy,Dy,Ay,Iy,jy,Ry,My,Hy,_y,Uy,Gy,qy,By,zy,Fy,Jy,Wy,Yy,Vy,Ky,Zy,Qy,Xy,aw,nw,sw,tw,ew,ow;return{c(){s=k("section"),t=k("ul"),e=k("li"),o=k("a"),p=f("Pre v3.16.0"),c=k("ul"),r=k("li"),h=k("a"),d=f("$$.ctx"),v=k("li"),w=k("a"),O=f("$$.dirty"),S=k("li"),T=k("a"),L=f("$$invalidate"),N=k("li"),P=k("a"),x=f("schedule_update"),C=k("ul"),D=k("li"),A=k("a"),I=f("tl/dr:"),j=k("li"),R=k("a"),M=f("v3.16.0"),H=k("ul"),_=k("li"),U=k("a"),G=f("Bitmask"),q=k("li"),B=k("a"),z=f("Bitmask in Svelte"),F=k("ul"),J=k("li"),W=k("a"),Y=f("Destructuring  "),V=k("li"),K=k("a"),Z=f("tl/dr:"),Q=k("li"),X=k("a"),aa=f("Reactive Declaration"),na=k("ul"),sa=k("ul"),ta=k("li"),ea=k("a"),oa=f("1. Execution of all reactive declarations and statements are batched"),pa=k("li"),ca=k("a"),ra=f("2. The value of reactive variable outside of reactive declarations and statements may not be up to date"),la=k("li"),ia=k("a"),ua=f("Sorting of reactive declarations and statements"),ha=k("li"),ka=k("a"),da=f("Reactive variable that is not reactive"),fa=k("li"),ma=k("a"),va=f("Summary"),ga=k("ul"),Ea=k("ul"),ba=k("li"),$a=k("a"),ya=f("1. Svelte keeps track of which variables are dirty and batched the DOM updates."),wa=k("li"),Oa=k("a"),Sa=f("2. Using bitmask, Svelte able to generate a more compact compiled code."),Ta=k("li"),La=k("a"),Na=f("3. Reactive declarations and statements are executed in batch, just like DOM updates"),Pa=k("li"),xa=k("a"),Ca=f("Closing Note"),Da=k("li"),Aa=k("a"),Ia=f("Further Resources"),ja=m(),Ra=k("p"),Ma=k("strong"),Ha=f("â¬… â¬…  Previously in "),_a=k("a"),Ua=f("Part 1"),Ga=f("."),qa=m(),Ba=k("p"),za=k("a"),Fa=f("Previously"),Ja=f(", when I mentioned the "),Wa=k("code"),Ya=f("$$invalidate"),Va=f(" function, I explained that the "),Ka=k("code"),Za=f("$$invalidate"),Qa=f(" function works conceptually like the following:"),Xa=m(),an=k("pre"),nn=m(),sn=k("p"),tn=f("but that's not the exact implementation of the "),en=k("code"),on=f("$$invaldiate"),pn=f(" function. So in this article, we are going to look at how "),cn=k("code"),rn=f("$$invalidate"),ln=f(" is implemented in Svelte."),un=m(),hn=k("p"),kn=f("At the point of writing, Svelte is at "),dn=k("a"),fn=f("v3.20.1"),mn=f("."),vn=m(),gn=k("section"),En=k("h2"),bn=k("a"),$n=f("Pre v3.16.0"),yn=m(),wn=k("p"),On=f("There's a big optimisation that changes the underlying implementation of the "),Sn=k("code"),Tn=f("$$invalidate"),Ln=f(" function in "),Nn=k("a"),Pn=f("v3.16.0"),xn=f(", namely in "),Cn=k("a"),Dn=f("#3945"),An=f(". The underlying concept doesn't change, but it'll be much easier to understand about "),In=k("code"),jn=f("$$invalidate"),Rn=f(" prior the change and learn about the optimisation change separately."),Mn=m(),Hn=k("p"),_n=f("Let's explain some of the variables that you are going to see, some of which was introduced in "),Un=k("a"),Gn=f("Part 1"),qn=f(":"),Bn=m(),zn=k("section"),Fn=k("h3"),Jn=k("a"),Wn=f("$$.ctx"),Yn=m(),Vn=k("p"),Kn=f("There's no official name for it. You can call it "),Zn=k("strong"),Qn=f("context"),Xn=f(" as it is the context which the template is based on to render onto the DOM."),as=m(),ns=k("p"),ss=f("I called it "),ts=k("a"),es=f("instance variables"),os=f(". As it is a JavaScript Object that contains all the variables that you:"),ps=m(),cs=k("ul"),rs=k("li"),ls=f("declared in the "),is=k("code"),us=f("<script>"),hs=f(" tag"),ks=m(),ds=k("li"),fs=f("mutated or reassigned"),ms=m(),vs=k("li"),gs=f("referenced in the template"),Es=m(),bs=k("p"),$s=f("that belongs to a component instance."),ys=m(),ws=k("p"),Os=f("The instance variables themselves can be of a primitive value, object, array or function."),Ss=m(),Ts=k("p"),Ls=f("The "),Ns=k("code"),Ps=f("instance"),xs=f(" function creates and returns the "),Cs=k("code"),Ds=f("ctx"),As=f(" object."),Is=m(),js=k("p"),Rs=f("Functions declared in the "),Ms=k("code"),Hs=f("<script>"),_s=f(" tag will refer to the instance variable that is scoped withn the "),Us=k("code"),Gs=f("instance"),qs=f(" function closure:"),Bs=m(),zs=k("pre"),Fs=m(),Js=k("p"),Ws=k("a"),Ys=f("Svelte REPL"),Vs=m(),Ks=k("pre"),Zs=m(),Qs=k("p"),Xs=f("Whenever a new instance of a component is created, the "),at=k("code"),nt=f("instance"),st=f(" function is called and the "),tt=k("code"),et=f("ctx"),ot=f(" object is created and captured within a new closure scope."),pt=m(),ct=k("section"),rt=k("h3"),lt=k("a"),it=f("$$.dirty"),ut=m(),ht=k("p"),kt=k("code"),dt=f("$$.dirty"),ft=f(" is a object that is used to track which instance variable had just changed and needs to be updated onto the DOM."),mt=m(),vt=k("p"),gt=f("For example, in the following Svelte component:"),Et=m(),bt=k("pre"),$t=m(),yt=k("p"),wt=k("a"),Ot=f("Svelte REPL"),St=m(),Tt=k("p"),Lt=f("The initial "),Nt=k("code"),Pt=f("$$.dirty"),xt=f(" is "),Ct=k("code"),Dt=f("null"),At=f(" ("),It=k("a"),jt=f("source code"),Rt=f(")."),Mt=m(),Ht=k("p"),_t=f("If you clicked on the "),Ut=k("strong"),Gt=f('"+ Agility"'),qt=f(" button, "),Bt=k("code"),zt=f("$$.dirty"),Ft=f(" will turn into:"),Jt=m(),Wt=k("pre"),Yt=m(),Vt=k("p"),Kt=f("If you clicked on the "),Zt=k("strong"),Qt=f('"Level Up"'),Xt=f(" button, "),ae=k("code"),ne=f("$$.dirty"),se=f(" will turn into:"),te=m(),ee=k("pre"),oe=m(),pe=k("p"),ce=k("code"),re=f("$$.dirty"),le=f(" is useful for Svelte, so that it doesn't update the DOM unnecessarily."),ie=m(),ue=k("p"),he=f("If you looked at the "),ke=k("strong"),de=f("p (u_p_date)"),fe=f(" function of the compiled code, you will see Svelte checks whether a variable is marked in "),me=k("code"),ve=f("$$.dirty"),ge=f(", before updating the DOM."),Ee=m(),be=k("pre"),$e=m(),ye=k("p"),we=f("After Svelte updates the DOM, the "),Oe=k("code"),Se=f("$$.dirty"),Te=f(" is set back to "),Le=k("code"),Ne=f("null"),Pe=f(" to indicate all changes has been applied onto the DOM."),xe=m(),Ce=k("section"),De=k("h3"),Ae=k("a"),Ie=f("$$invalidate"),je=m(),Re=k("p"),Me=k("code"),He=f("$$invalidate"),_e=f(" is the secret behind reactivity in Svelte."),Ue=m(),Ge=k("p"),qe=f("Whenever a variable is"),Be=m(),ze=k("ul"),Fe=k("li"),Je=f("reassigned "),We=k("code"),Ye=f("(foo = 1)"),Ve=m(),Ke=k("li"),Ze=f("mutated "),Qe=k("code"),Xe=f("(foo.bar = 1)"),ao=m(),no=k("p"),so=f("Svelte will wrap the assignment or update around with the "),to=k("code"),eo=f("$$invalidate"),oo=f(" function:"),po=m(),co=k("pre"),ro=m(),lo=k("p"),io=f("the "),uo=k("code"),ho=f("$$invalidate"),ko=f(" function will:"),fo=m(),mo=k("ol"),vo=k("li"),go=f("update the variable in "),Eo=k("code"),bo=f("$$.ctx"),$o=m(),yo=k("li"),wo=f("mark the variable in "),Oo=k("code"),So=f("$$.dirty"),To=m(),Lo=k("li"),No=f("schedule an update"),Po=m(),xo=k("li"),Co=f("return the value of the assignment or update expression"),Do=m(),Ao=k("pre"),Io=m(),jo=k("p"),Ro=k("a"),Mo=f("Source code"),Ho=m(),_o=k("p"),Uo=f("One interesting note about the function "),Go=k("code"),qo=f("$$invalidate"),Bo=f(" is that, it wraps around the assignment or update expression and returns what the expression evaluates to."),zo=m(),Fo=k("p"),Jo=f("This makes "),Wo=k("code"),Yo=f("$$invalidate"),Vo=f(" chainable:"),Ko=m(),Zo=k("pre"),Qo=m(),Xo=k("p"),ap=f("It seemed complex when there's a lot of assignment or update expressions in 1 statement! ðŸ™ˆ"),np=m(),sp=k("p"),tp=f("The 2nd argument of "),ep=k("code"),op=f("$$invalidate"),pp=f(" is the assignment or update expressions verbatim. But if it contains any assignment or update sub-expressions, we recursively wrap it with "),cp=k("code"),rp=f("$$invalidate"),lp=f("."),ip=m(),up=k("p"),hp=f("In case where the assignment expression changes a property of an object, we pass the object in as a 3rd argument of the "),kp=k("code"),dp=f("$$invalidate"),fp=f(" function, eg:"),mp=m(),vp=k("pre"),gp=m(),Ep=k("p"),bp=f("So that, we update the "),$p=k("code"),yp=f('"obj"'),wp=f(" variable to "),Op=k("code"),Sp=f("obj"),Tp=f(" instead of the value of the 2nd argument, "),Lp=k("code"),Np=f('"hello"'),Pp=f("."),xp=m(),Cp=k("section"),Dp=k("h3"),Ap=k("a"),Ip=f("schedule_update"),jp=m(),Rp=k("p"),Mp=k("code"),Hp=f("schedule_update"),_p=f(" schedules Svelte to update the DOM with the changes made thus far."),Up=m(),Gp=k("p"),qp=f("Svelte, at the point of writing ("),Bp=k("a"),zp=f("v3.20.1"),Fp=f("), uses "),Jp=k("a"),Wp=f("microtask queue"),Yp=f(" to batch change updates. The actual DOM update happens in the next microtask, so that any synchronous "),Vp=k("code"),Kp=f("$$invalidate"),Zp=f(" operations that happen within the same task get batched into the next DOM update."),Qp=m(),Xp=k("p"),ac=f("To schedule a next microtask, Svelte uses the Promise callback."),nc=m(),sc=k("pre"),tc=m(),ec=k("p"),oc=f("In "),pc=k("code"),cc=f("flush"),rc=f(", we call update for each component marked dirty:"),lc=m(),ic=k("pre"),uc=m(),hc=k("p"),kc=k("a"),dc=f("Source code"),fc=m(),mc=k("p"),vc=f("So, if you write a Svelte component like this:"),gc=m(),Ec=k("pre"),bc=m(),$c=k("p"),yc=k("a"),wc=f("Svelte REPL"),Oc=m(),Sc=k("p"),Tc=f("The DOM update for the "),Lc=k("code"),Nc=f("givenName"),Pc=f(" and "),xc=k("code"),Cc=f("familyName"),Dc=f(" happens in the same microtask:"),Ac=m(),Ic=k("ol"),jc=k("li"),Rc=f("Click on the "),Mc=k("strong"),Hc=f('"Update"'),_c=f(" to call the "),Uc=k("code"),Gc=f("update"),qc=f(" function"),Bc=m(),zc=k("li"),Fc=k("code"),Jc=f("$$invalidate('givenName', givenName = 'Li Hau')"),Wc=m(),Yc=k("li"),Vc=f("Mark the variable "),Kc=k("code"),Zc=f("givenName"),Qc=f(" dirty, "),Xc=k("code"),ar=f("$$.dirty['givenName'] = true"),nr=m(),sr=k("li"),tr=f("Schedule an update, "),er=k("code"),or=f("schedule_update()"),pr=m(),cr=k("li"),rr=f("Since it's the first update in the call stack, push the "),lr=k("code"),ir=f("flush"),ur=f(" function into the microtask queue"),hr=m(),kr=k("li"),dr=k("code"),fr=f("$$invalidate('familyName', familyName = 'Tan')"),mr=m(),vr=k("li"),gr=f("Mark the variable "),Er=k("code"),br=f("familyName"),$r=f(" dirty, "),yr=k("code"),wr=f("$$.dirty['familyName'] = true"),Or=m(),Sr=k("li"),Tr=f("Schedule an update, "),Lr=k("code"),Nr=f("schedule_update()"),Pr=m(),xr=k("li"),Cr=f("Since "),Dr=k("code"),Ar=f("update_scheduled = true"),Ir=f(", do nothing."),jr=m(),Rr=k("li"),Mr=k("strong"),Hr=f("-- End of task --"),_r=m(),Ur=k("li"),Gr=k("strong"),qr=f("-- Start of microtask--"),Br=m(),zr=k("li"),Fr=k("code"),Jr=f("flush()"),Wr=f(" calls "),Yr=k("code"),Vr=f("update()"),Kr=f(" for each component marked dirty"),Zr=m(),Qr=k("li"),Xr=f("Calls "),al=k("code"),nl=f("$$.fragment.p($$.dirty, $$.ctx)"),sl=f("."),tl=k("ul"),el=k("li"),ol=k("code"),pl=f("$$.dirty"),cl=f(" is now "),rl=k("code"),ll=f("{ givenName: true, familyName: true }"),il=m(),ul=k("li"),hl=k("code"),kl=f("$$.ctx"),dl=f(" is now "),fl=k("code"),ml=f("{ givenName: 'Li Hau', familyName: 'Tan' }"),vl=m(),gl=k("li"),El=f("In "),bl=k("code"),$l=f("function p(dirty, ctx)"),yl=f(","),wl=k("ul"),Ol=k("li"),Sl=f("Update the 1st text node to "),Tl=k("code"),Ll=f("$$.ctx['givenName']"),Nl=f(" if "),Pl=k("code"),xl=f("$$.dirty['givenName'] === true"),Cl=m(),Dl=k("li"),Al=f("Update the 2nd text node to "),Il=k("code"),jl=f("$$.ctx['familyName']"),Rl=f(" if "),Ml=k("code"),Hl=f("$$.dirty['familyName'] === true"),_l=m(),Ul=k("li"),Gl=f("Resets the "),ql=k("code"),Bl=f("$$.dirty"),zl=f(" to "),Fl=k("code"),Jl=f("null"),Wl=m(),Yl=k("li"),Vl=f("..."),Kl=m(),Zl=k("li"),Ql=k("strong"),Xl=f("-- End of microtask--"),ai=m(),ni=k("section"),si=k("h4"),ti=k("a"),ei=f("tl/dr:"),oi=m(),pi=k("ul"),ci=k("li"),ri=f("For each assignment or update, Svelte calls "),li=k("code"),ii=f("$$invalidate"),ui=f(" to update the variable in "),hi=k("code"),ki=f("$$.ctx"),di=f(" and mark the variable dirty in "),fi=k("code"),mi=f("$$.dirty"),vi=f("."),gi=m(),Ei=k("li"),bi=f("The acutal DOM update is batched into the next microtask queue."),$i=m(),yi=k("li"),wi=f("To update the DOM for each component, the component "),Oi=k("code"),Si=f("$$.fragment.p($$.diry, $$.ctx)"),Ti=f(" is called."),Li=m(),Ni=k("li"),Pi=f("After the DOM update, the "),xi=k("code"),Ci=f("$$.dirty"),Di=f(" is reset to "),Ai=k("code"),Ii=f("null"),ji=f("."),Ri=m(),Mi=k("section"),Hi=k("h2"),_i=k("a"),Ui=f("v3.16.0"),Gi=m(),qi=k("p"),Bi=f("One big change in v3.16.0 is the PR "),zi=k("a"),Fi=f("#3945"),Ji=f(", namely "),Wi=k("strong"),Yi=f("bitmask-based change tracking"),Vi=f("."),Ki=m(),Zi=k("p"),Qi=f("Instead of marking the variable dirty using an object:"),Xi=m(),au=k("pre"),nu=m(),su=k("p"),tu=f("Svelte assign each variable an index:"),eu=m(),ou=k("pre"),pu=m(),cu=k("p"),ru=f("and uses "),lu=k("a"),iu=f("bitmask"),uu=f(" to store the dirty information:"),hu=m(),ku=k("pre"),du=m(),fu=k("p"),mu=f("which is far more compact than the previous compiled code."),vu=m(),gu=k("section"),Eu=k("h3"),bu=k("a"),$u=f("Bitmask"),yu=m(),wu=k("p"),Ou=f("For those who don't understand, allow me to quickly explain what it is."),Su=m(),Tu=k("p"),Lu=f("Of course, if you want to learn more about it, feel free to read a more detailed explanation, like "),Nu=k("a"),Pu=f("this"),xu=f(" and "),Cu=k("a"),Du=f("this"),Au=f("."),Iu=m(),ju=k("p"),Ru=f("The most compact way of representing a group of "),Mu=k("code"),Hu=f("true"),_u=f(" or "),Uu=k("code"),Gu=f("false"),qu=f(" is to use bits. If the bit is "),Bu=k("code"),zu=f("1"),Fu=f(" it is "),Ju=k("code"),Wu=f("true"),Yu=f(" and if it is "),Vu=k("code"),Ku=f("0"),Zu=f(" it is "),Qu=k("code"),Xu=f("false"),ah=f("."),nh=m(),sh=k("p"),th=f("A number can be represented in binary, "),eh=k("strong"),oh=f("5"),ph=f(" is "),ch=k("code"),rh=f("0b0101"),lh=f(" in binary."),ih=m(),uh=k("p"),hh=f("If "),kh=k("strong"),dh=f("5"),fh=f(" is represented in a 4-bit binary, then it can store 4 boolean values, with the 0th and 2nd bit as "),mh=k("code"),vh=f("true"),gh=f(" and 1st and 3rd bit as "),Eh=k("code"),bh=f("false"),$h=f(", (reading from the right to left, from "),yh=k("a"),wh=f("least significant bit"),Oh=f(" to the "),Sh=k("a"),Th=f("most significant bit"),Lh=f(")."),Nh=m(),Ph=k("p"),xh=k("strong"),Ch=f("How many boolean values can a number store?"),Dh=m(),Ah=k("p"),Ih=f("That depends on the language, a 16-bit integer in Java can store 16 boolean values."),jh=m(),Rh=k("p"),Mh=f("In JavaScript, numbers can are "),Hh=k("a"),_h=f("represented in 64 bits"),Uh=f(". However, when using "),Gh=k("a"),qh=f("bitwise operations"),Bh=f(" on the number, JavaScript will treat the number as 32 bits."),zh=m(),Fh=k("p"),Jh=f("To inspect or modify the boolean value stored in a number, we use "),Wh=k("a"),Yh=f("bitwise operations"),Vh=f("."),Kh=m(),Zh=k("pre"),Qh=m(),Xh=k("p"),ak=f("The 2nd operand we use in the bitwise operation, is like a "),nk=k("a"),sk=f("mask"),tk=f(" that allow us to target a specific bit in the 1st number, that stores our boolean values."),ek=m(),ok=k("p"),pk=f("We call the mask, "),ck=k("strong"),rk=f("bitmask"),lk=f("."),ik=m(),uk=k("section"),hk=k("h3"),kk=k("a"),dk=f("Bitmask in Svelte"),fk=m(),mk=k("p"),vk=f("As mentioned earlier, we assign each variable an index:"),gk=m(),Ek=k("pre"),bk=m(),$k=k("p"),yk=f("So instead of returning the instance variable as an JavaScript Object, we now return it as an JavaScript Array:"),wk=m(),Ok=k("pre"),Sk=m(),Tk=k("p"),Lk=f("The variable is accessed via "),Nk=k("strong"),Pk=f("index"),xk=f(", "),Ck=k("code"),Dk=f("$$.ctx[index]"),Ak=f(", instead of "),Ik=k("strong"),jk=f("variable name"),Rk=f(":"),Mk=m(),Hk=k("pre"),_k=m(),Uk=k("p"),Gk=f("The "),qk=k("code"),Bk=f("$$invalidate"),zk=f(" function works the same, except it takes in "),Fk=k("strong"),Jk=f("index"),Wk=f(" instead of "),Yk=k("strong"),Vk=f("variable name"),Kk=f(":"),Zk=m(),Qk=k("pre"),Xk=m(),ad=k("p"),nd=k("code"),sd=f("$$.dirty"),td=f(" now stores a list of numbers. Each number carries 31 boolean values, each boolean value indicates whether the variable of that index is dirty or not."),ed=m();od=k("p"),pd=f("To set a variable as dirty, we use bitwise operation:"),cd=m(),rd=k("pre"),ld=m(),id=k("p"),ud=f("And to verify whether a variable is dirty, we use bitwise operation too!"),hd=m(),kd=k("pre"),dd=m(),fd=k("p"),md=f("With using bitmask, "),vd=k("code"),gd=f("$$.dirty"),Ed=f(" is now reset to "),bd=k("code"),$d=f("[-1]"),yd=f(" instead of "),wd=k("code"),Od=f("null"),Sd=f("."),Td=m(),Ld=k("p"),Nd=k("strong"),Pd=f("Trivia:"),xd=m(),Cd=k("code"),Dd=f("-1"),Ad=f(" is "),Id=k("code"),jd=f("0b1111_1111"),Rd=f(" in binary, where all the bits are "),Md=k("code"),Hd=f("1"),_d=f("."),Ud=m(),Gd=k("section"),qd=k("h4"),Bd=k("a"),zd=f("Destructuring "),Fd=k("strong"),Jd=f("$$.dirty"),Wd=m(),Yd=k("p"),Vd=f("One code-size optimisation that Svelte does is to always destructure the "),Kd=k("code"),Zd=f("dirty"),Qd=f(" array in the "),Xd=k("strong"),af=f("u_p_date function"),nf=f(" if there's less than 32 variables, since we will always access "),sf=k("code"),tf=f("dirty[0]"),ef=f(" anyway:"),of=m(),pf=k("pre"),cf=m(),rf=k("section"),lf=k("h4"),uf=k("a"),hf=f("tl/dr:"),kf=m(),df=k("ul"),ff=k("li"),mf=f("The underlying mechanism for "),vf=k("code"),gf=f("$$invalidate"),Ef=f(" and "),bf=k("code"),$f=f("schedule_update"),yf=f(" does not change"),wf=m(),Of=k("li"),Sf=f("Using bitmask, the compiled code is much compact"),Tf=m(),Lf=k("section"),Nf=k("h2"),Pf=k("a"),xf=f("Reactive Declaration"),Cf=m(),Df=k("p"),Af=f("Svelte allow us to declare reactive values via the "),If=k("a"),jf=f("labeled statement"),Rf=f(", "),Mf=k("code"),Hf=f("$:"),_f=m(),Uf=k("pre"),Gf=m(),qf=k("p"),Bf=k("a"),zf=f("Svelte REPL"),Ff=m(),Jf=k("p"),Wf=f("If you look at the compiled output, you would find out that the declarative statements appeared in the "),Yf=k("a"),Vf=k("code"),Kf=f("instance"),Zf=f(" function"),Qf=f(":"),Xf=m(),am=k("pre"),nm=m(),sm=k("p"),tm=f("Try reorder the reactive declarations and observe the change in the compiled output:"),em=m(),om=k("pre"),pm=m(),cm=k("p"),rm=k("a"),lm=f("Svelte REPL"),im=m(),um=k("pre"),hm=m(),km=k("p"),dm=f("Some observations:"),fm=m(),mm=k("ul"),vm=k("li"),gm=f("When there are reactive declarations, Svelte defines a custom "),Em=k("code"),bm=f("$$.update"),$m=f(" method."),ym=k("ul"),wm=k("li"),Om=k("code"),Sm=f("$$.update"),Tm=f(" is a "),Lm=k("a"),Nm=f("no-op function"),Pm=f(" by default. (See "),xm=k("a"),Cm=f("src/runtime/internal/Component.ts"),Dm=f(")"),Am=m(),Im=k("li"),jm=f("Svelte uses "),Rm=k("code"),Mm=f("$$invalidate"),Hm=f(" to update the value of a reactive variable too."),_m=m(),Um=k("li"),Gm=f("Svelte sorts the reactive declarations and statements, based on the dependency relationship between the declarations and statements"),qm=k("ul"),Bm=k("li"),zm=k("code"),Fm=f("quadrupled"),Jm=f(" depends on "),Wm=k("code"),Ym=f("doubled"),Vm=f(", so "),Km=k("code"),Zm=f("quadrupled"),Qm=f(" is evaluated and "),Xm=k("code"),av=f("$$invalidate"),nv=f("d after "),sv=k("code"),tv=f("doubled"),ev=f("."),ov=m(),pv=k("p"),cv=f("Since all reactive declarations and statements are grouped into the "),rv=k("code"),lv=f("$$.update"),iv=f(" method, and also the fact that Svelte will sort the declarations and statements according to their dependency relationship, it is irrelevant of the location or the order you declared them."),uv=m(),hv=k("p"),kv=f("The following component still works:"),dv=m(),fv=k("pre"),mv=m(),vv=k("p"),gv=k("a"),Ev=f("Svelte REPL"),bv=m(),$v=k("p"),yv=k("strong"),wv=f("The next thing you may ask, when is "),Ov=k("code"),Sv=f("$$.update"),Tv=f(" being called?"),Lv=m(),Nv=k("p"),Pv=f("Remember the "),xv=k("code"),Cv=f("update"),Dv=f(" function that gets called in the "),Av=k("code"),Iv=f("flush"),jv=f(" function?"),Rv=m(),Mv=k("p"),Hv=f("I put a "),_v=k("code"),Uv=f("NOTE:"),Gv=f(" comment saying that it will be important later. Well, it is important now."),qv=m(),Bv=k("pre"),zv=m(),Fv=k("p"),Jv=f("The "),Wv=k("code"),Yv=f("$$.update"),Vv=f(" function gets called "),Kv=k("strong"),Zv=f("in the same microtask"),Qv=f(" with the DOM update, right before we called the "),Xv=k("code"),ag=f("$$.fragment.p()"),ng=f(" to update the DOM."),sg=m(),tg=k("p"),eg=f("The implication of the above fact is"),og=m(),pg=k("section"),cg=k("h4"),rg=k("a"),lg=f("1. Execution of all reactive declarations and statements are batched"),ig=m(),ug=k("p"),hg=f("Just as how DOM updates are batched, reactive declarations and statements are batched too!"),kg=m(),dg=k("pre"),fg=m(),mg=k("p"),vg=k("a"),gg=f("Svelte REPL"),Eg=m(),bg=k("p"),$g=f("When "),yg=k("code"),wg=f("update()"),Og=f(" get called,"),Sg=m(),Tg=k("ol"),Lg=k("li"),Ng=f("Similar to the "),Pg=k("a"),xg=f("flow described above"),Cg=f(", "),Dg=k("code"),Ag=f("$$invalidate"),Ig=f(" both "),jg=k("strong"),Rg=f('"givenName"'),Mg=f(" and "),Hg=k("strong"),_g=f('"familyName"'),Ug=f(", and schedules an update"),Gg=m(),qg=k("li"),Bg=k("strong"),zg=f("-- End of task --"),Fg=m(),Jg=k("li"),Wg=k("strong"),Yg=f("-- Start of microtask--"),Vg=m(),Kg=k("li"),Zg=k("code"),Qg=f("flush()"),Xg=f(" calls "),aE=k("code"),nE=f("update()"),sE=f(" for each component marked dirty"),tE=m(),eE=k("li"),oE=f("Runs "),pE=k("code"),cE=f("$$.update()"),rE=k("ul"),lE=k("li"),iE=f("As "),uE=k("strong"),hE=f('"givenName"'),kE=f(" and "),dE=k("strong"),fE=f('"familyName"'),mE=f(" has changed, evaluates and "),vE=k("code"),gE=f("$$invalidate"),EE=m(),bE=k("strong"),$E=f('"name"'),yE=m(),wE=k("li"),OE=f("As "),SE=k("strong"),TE=f('"name"'),LE=f(" has changed, executes "),NE=k("code"),PE=f("console.log('name', name);"),xE=m(),CE=k("li"),DE=f("Calls "),AE=k("code"),IE=f("$$.fragment.p(...)"),jE=f(" to update the DOM."),RE=m(),ME=k("p"),HE=f("As you can see, even though we've updated "),_E=k("code"),UE=f("givenName"),GE=f(" and "),qE=k("code"),BE=f("familyName"),zE=f(", we only evaluate "),FE=k("code"),JE=f("name"),WE=f(" and executes "),YE=k("code"),VE=f("console.log('name', name)"),KE=m(),ZE=k("strong"),QE=f("once"),XE=f(" instead of twice:"),ab=m(),nb=k("pre"),sb=m(),tb=k("section"),eb=k("h4"),ob=k("a"),pb=f("2. The value of reactive variable outside of reactive declarations and statements may not be up to date"),cb=m(),rb=k("p"),lb=f("Because the reactive declarations and statements are batched and executed in the next microtask, you can't expect the value to be updated synchronously."),ib=m(),ub=k("pre"),hb=m(),kb=k("p"),db=k("a"),fb=f("Svelte REPL"),mb=m(),vb=k("p"),gb=f("Instead, you "),Eb=k("strong"),bb=f("have to"),$b=f(" refer the reactive variable in another reactive declaration or statement:"),yb=m(),wb=k("pre"),Ob=m(),Sb=k("section"),Tb=k("h3"),Lb=k("a"),Nb=f("Sorting of reactive declarations and statements"),Pb=m(),xb=k("p"),Cb=f("Svelte tries to preserve the order of reactive declarations and statements as they are declared as much as possible."),Db=m(),Ab=k("p"),Ib=f("However, if one reactive declaration or statement refers to a variable that was defined by another reactive declaration, then, "),jb=k("strong"),Rb=f("it will be inserted after the latter reactive declaration"),Mb=f(":"),Hb=m(),_b=k("pre"),Ub=m(),Gb=k("section"),qb=k("h3"),Bb=k("a"),zb=f("Reactive variable that is not reactive"),Fb=m(),Jb=k("p"),Wb=f("The Svelte compiler tracks all the variables declared in the "),Yb=k("code"),Vb=f("<script>"),Kb=f(" tag."),Zb=m(),Qb=k("p"),Xb=f("If all the variables of a reactive declaration or statement refers to, never gets mutated or reassigned, then the reactive declaration or statement will not be added into "),a$=k("code"),n$=f("$$.update"),s$=f("."),t$=m(),e$=k("p"),o$=f("For example:"),p$=m(),c$=k("pre"),r$=m(),l$=k("p"),i$=k("a"),u$=f("Svelte REPL"),h$=m(),k$=k("p"),d$=f("Since, "),f$=k("code"),m$=f("count"),v$=f(" never gets mutated or reassigned, Svelte optimises the compiled output by not defining "),g$=k("code"),E$=f("$$self.$$.update"),b$=f("."),$$=m(),y$=k("pre"),w$=m(),O$=k("section"),S$=k("h2"),T$=k("a"),L$=f("Summary"),N$=m(),P$=k("section"),x$=k("h4"),C$=k("a"),D$=f("1. Svelte keeps track of which variables are dirty and batched the DOM updates."),A$=m(),I$=k("section"),j$=k("h4"),R$=k("a"),M$=f("2. Using bitmask, Svelte able to generate a more compact compiled code."),H$=m(),_$=k("section"),U$=k("h4"),G$=k("a"),q$=f("3. Reactive declarations and statements are executed in batch, just like DOM updates"),B$=m(),z$=k("section"),F$=k("h2"),J$=k("a"),W$=f("Closing Note"),Y$=m(),V$=k("p"),K$=f("If you wish to know more, "),Z$=k("a"),Q$=f("follow me on Twitter"),X$=f("."),ay=m(),ny=k("p"),sy=f("I'll post it on Twitter when the next part is ready, where I'll be covering "),ty=k("a"),ey=f("logic blocks"),oy=f(", "),py=k("a"),cy=f("slots"),ry=f(", "),ly=k("a"),iy=f("context"),uy=f(", and many others."),hy=m(),ky=k("p"),dy=k("strong"),fy=f("â¬… â¬…  Previously in "),my=k("a"),vy=f("Part 1"),gy=f("."),Ey=m(),by=k("p"),$y=k("strong"),yy=f("âž¡ âž¡  Continue reading on "),wy=k("a"),Oy=f("Part 3"),Sy=f("."),Ty=m(),Ly=k("section"),Ny=k("h2"),Py=k("a"),xy=f("Further Resources"),Cy=m(),Dy=k("ul"),Ay=k("li"),Iy=f("Rich Harris shares about "),jy=k("a"),Ry=f("Bitmask Tracking at Svelte Society NYC"),My=f("."),Hy=m(),_y=k("li"),Uy=f("Svelte Tutorial - "),Gy=k("a"),qy=f("Reactivity"),By=m(),zy=k("a"),Fy=f("https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/"),Jy=m(),Wy=k("li"),Yy=k("a"),Vy=f("The Art of Bitmasking"),Ky=f(" by Shakib Ahmed"),Zy=m(),Qy=k("li"),Xy=k("a"),aw=f("Bitmasks: A very esoteric (and impractical) way of managing booleans"),nw=f(" by Basti Ortiz"),sw=m(),tw=k("li"),ew=k("a"),ow=f("MDN: Bitwise Operators"),this.h()},l(a){s=b(a,"SECTION",{});var n=E(s);t=b(n,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var l=E(t);e=b(l,"LI",{});var i=E(e);o=b(i,"A",{href:!0});var k=E(o);p=$(k,"Pre v3.16.0"),k.forEach(u),i.forEach(u),c=b(l,"UL",{});var f=E(c);r=b(f,"LI",{});var m=E(r);h=b(m,"A",{href:!0});var g=E(h);d=$(g,"$$.ctx"),g.forEach(u),m.forEach(u),v=b(f,"LI",{});var pw=E(v);w=b(pw,"A",{href:!0});var cw=E(w);O=$(cw,"$$.dirty"),cw.forEach(u),pw.forEach(u),S=b(f,"LI",{});var rw=E(S);T=b(rw,"A",{href:!0});var lw=E(T);L=$(lw,"$$invalidate"),lw.forEach(u),rw.forEach(u),N=b(f,"LI",{});var iw=E(N);P=b(iw,"A",{href:!0});var uw=E(P);x=$(uw,"schedule_update"),uw.forEach(u),iw.forEach(u),C=b(f,"UL",{});var hw=E(C);D=b(hw,"LI",{});var kw=E(D);A=b(kw,"A",{href:!0});var dw=E(A);I=$(dw,"tl/dr:"),dw.forEach(u),kw.forEach(u),hw.forEach(u),f.forEach(u),j=b(l,"LI",{});var fw=E(j);R=b(fw,"A",{href:!0});var mw=E(R);M=$(mw,"v3.16.0"),mw.forEach(u),fw.forEach(u),H=b(l,"UL",{});var vw=E(H);_=b(vw,"LI",{});var gw=E(_);U=b(gw,"A",{href:!0});var Ew=E(U);G=$(Ew,"Bitmask"),Ew.forEach(u),gw.forEach(u),q=b(vw,"LI",{});var bw=E(q);B=b(bw,"A",{href:!0});var $w=E(B);z=$($w,"Bitmask in Svelte"),$w.forEach(u),bw.forEach(u),F=b(vw,"UL",{});var yw=E(F);J=b(yw,"LI",{});var ww=E(J);W=b(ww,"A",{href:!0});var Ow=E(W);Y=$(Ow,"Destructuring  "),Ow.forEach(u),ww.forEach(u),V=b(yw,"LI",{});var Sw=E(V);K=b(Sw,"A",{href:!0});var Tw=E(K);Z=$(Tw,"tl/dr:"),Tw.forEach(u),Sw.forEach(u),yw.forEach(u),vw.forEach(u),Q=b(l,"LI",{});var Lw=E(Q);X=b(Lw,"A",{href:!0});var Nw=E(X);aa=$(Nw,"Reactive Declaration"),Nw.forEach(u),Lw.forEach(u),na=b(l,"UL",{});var Pw=E(na);sa=b(Pw,"UL",{});var xw=E(sa);ta=b(xw,"LI",{});var Cw=E(ta);ea=b(Cw,"A",{href:!0});var Dw=E(ea);oa=$(Dw,"1. Execution of all reactive declarations and statements are batched"),Dw.forEach(u),Cw.forEach(u),pa=b(xw,"LI",{});var Aw=E(pa);ca=b(Aw,"A",{href:!0});var Iw=E(ca);ra=$(Iw,"2. The value of reactive variable outside of reactive declarations and statements may not be up to date"),Iw.forEach(u),Aw.forEach(u),xw.forEach(u),la=b(Pw,"LI",{});var jw=E(la);ia=b(jw,"A",{href:!0});var Rw=E(ia);ua=$(Rw,"Sorting of reactive declarations and statements"),Rw.forEach(u),jw.forEach(u),ha=b(Pw,"LI",{});var Mw=E(ha);ka=b(Mw,"A",{href:!0});var Hw=E(ka);da=$(Hw,"Reactive variable that is not reactive"),Hw.forEach(u),Mw.forEach(u),Pw.forEach(u),fa=b(l,"LI",{});var _w=E(fa);ma=b(_w,"A",{href:!0});var Uw=E(ma);va=$(Uw,"Summary"),Uw.forEach(u),_w.forEach(u),ga=b(l,"UL",{});var Gw=E(ga);Ea=b(Gw,"UL",{});var qw=E(Ea);ba=b(qw,"LI",{});var Bw=E(ba);$a=b(Bw,"A",{href:!0});var zw=E($a);ya=$(zw,"1. Svelte keeps track of which variables are dirty and batched the DOM updates."),zw.forEach(u),Bw.forEach(u),wa=b(qw,"LI",{});var Fw=E(wa);Oa=b(Fw,"A",{href:!0});var Jw=E(Oa);Sa=$(Jw,"2. Using bitmask, Svelte able to generate a more compact compiled code."),Jw.forEach(u),Fw.forEach(u),Ta=b(qw,"LI",{});var Ww=E(Ta);La=b(Ww,"A",{href:!0});var Yw=E(La);Na=$(Yw,"3. Reactive declarations and statements are executed in batch, just like DOM updates"),Yw.forEach(u),Ww.forEach(u),qw.forEach(u),Gw.forEach(u),Pa=b(l,"LI",{});var Vw=E(Pa);xa=b(Vw,"A",{href:!0});var Kw=E(xa);Ca=$(Kw,"Closing Note"),Kw.forEach(u),Vw.forEach(u),Da=b(l,"LI",{});var Zw=E(Da);Aa=b(Zw,"A",{href:!0});var Qw=E(Aa);Ia=$(Qw,"Further Resources"),Qw.forEach(u),Zw.forEach(u),l.forEach(u),n.forEach(u),ja=y(a),Ra=b(a,"P",{});var Xw=E(Ra);Ma=b(Xw,"STRONG",{});var aO=E(Ma);Ha=$(aO,"â¬… â¬…  Previously in "),_a=b(aO,"A",{href:!0});var nO=E(_a);Ua=$(nO,"Part 1"),nO.forEach(u),Ga=$(aO,"."),aO.forEach(u),Xw.forEach(u),qa=y(a),Ba=b(a,"P",{});var sO=E(Ba);za=b(sO,"A",{href:!0});var tO=E(za);Fa=$(tO,"Previously"),tO.forEach(u),Ja=$(sO,", when I mentioned the "),Wa=b(sO,"CODE",{});var eO=E(Wa);Ya=$(eO,"$$invalidate"),eO.forEach(u),Va=$(sO," function, I explained that the "),Ka=b(sO,"CODE",{});var oO=E(Ka);Za=$(oO,"$$invalidate"),oO.forEach(u),Qa=$(sO," function works conceptually like the following:"),sO.forEach(u),Xa=y(a),an=b(a,"PRE",{class:!0}),E(an).forEach(u),nn=y(a),sn=b(a,"P",{});var pO=E(sn);tn=$(pO,"but that's not the exact implementation of the "),en=b(pO,"CODE",{});var cO=E(en);on=$(cO,"$$invaldiate"),cO.forEach(u),pn=$(pO," function. So in this article, we are going to look at how "),cn=b(pO,"CODE",{});var rO=E(cn);rn=$(rO,"$$invalidate"),rO.forEach(u),ln=$(pO," is implemented in Svelte."),pO.forEach(u),un=y(a),hn=b(a,"P",{});var lO=E(hn);kn=$(lO,"At the point of writing, Svelte is at "),dn=b(lO,"A",{href:!0,rel:!0});var iO=E(dn);fn=$(iO,"v3.20.1"),iO.forEach(u),mn=$(lO,"."),lO.forEach(u),vn=y(a),gn=b(a,"SECTION",{});var uO=E(gn);En=b(uO,"H2",{});var hO=E(En);bn=b(hO,"A",{href:!0,id:!0});var kO=E(bn);$n=$(kO,"Pre v3.16.0"),kO.forEach(u),hO.forEach(u),yn=y(uO),wn=b(uO,"P",{});var dO=E(wn);On=$(dO,"There's a big optimisation that changes the underlying implementation of the "),Sn=b(dO,"CODE",{});var fO=E(Sn);Tn=$(fO,"$$invalidate"),fO.forEach(u),Ln=$(dO," function in "),Nn=b(dO,"A",{href:!0,rel:!0});var mO=E(Nn);Pn=$(mO,"v3.16.0"),mO.forEach(u),xn=$(dO,", namely in "),Cn=b(dO,"A",{href:!0,rel:!0});var vO=E(Cn);Dn=$(vO,"#3945"),vO.forEach(u),An=$(dO,". The underlying concept doesn't change, but it'll be much easier to understand about "),In=b(dO,"CODE",{});var gO=E(In);jn=$(gO,"$$invalidate"),gO.forEach(u),Rn=$(dO," prior the change and learn about the optimisation change separately."),dO.forEach(u),Mn=y(uO),Hn=b(uO,"P",{});var EO=E(Hn);_n=$(EO,"Let's explain some of the variables that you are going to see, some of which was introduced in "),Un=b(EO,"A",{href:!0});var bO=E(Un);Gn=$(bO,"Part 1"),bO.forEach(u),qn=$(EO,":"),EO.forEach(u),uO.forEach(u),Bn=y(a),zn=b(a,"SECTION",{});var $O=E(zn);Fn=b($O,"H3",{});var yO=E(Fn);Jn=b(yO,"A",{href:!0,id:!0});var wO=E(Jn);Wn=$(wO,"$$.ctx"),wO.forEach(u),yO.forEach(u),Yn=y($O),Vn=b($O,"P",{});var OO=E(Vn);Kn=$(OO,"There's no official name for it. You can call it "),Zn=b(OO,"STRONG",{});var SO=E(Zn);Qn=$(SO,"context"),SO.forEach(u),Xn=$(OO," as it is the context which the template is based on to render onto the DOM."),OO.forEach(u),as=y($O),ns=b($O,"P",{});var TO=E(ns);ss=$(TO,"I called it "),ts=b(TO,"A",{href:!0});var LO=E(ts);es=$(LO,"instance variables"),LO.forEach(u),os=$(TO,". As it is a JavaScript Object that contains all the variables that you:"),TO.forEach(u),ps=y($O),cs=b($O,"UL",{});var NO=E(cs);rs=b(NO,"LI",{});var PO=E(rs);ls=$(PO,"declared in the "),is=b(PO,"CODE",{});var xO=E(is);us=$(xO,"<script>"),xO.forEach(u),hs=$(PO," tag"),PO.forEach(u),ks=y(NO),ds=b(NO,"LI",{});var CO=E(ds);fs=$(CO,"mutated or reassigned"),CO.forEach(u),ms=y(NO),vs=b(NO,"LI",{});var DO=E(vs);gs=$(DO,"referenced in the template"),DO.forEach(u),NO.forEach(u),Es=y($O),bs=b($O,"P",{});var AO=E(bs);$s=$(AO,"that belongs to a component instance."),AO.forEach(u),ys=y($O),ws=b($O,"P",{});var IO=E(ws);Os=$(IO,"The instance variables themselves can be of a primitive value, object, array or function."),IO.forEach(u),Ss=y($O),Ts=b($O,"P",{});var jO=E(Ts);Ls=$(jO,"The "),Ns=b(jO,"CODE",{});var RO=E(Ns);Ps=$(RO,"instance"),RO.forEach(u),xs=$(jO," function creates and returns the "),Cs=b(jO,"CODE",{});var MO=E(Cs);Ds=$(MO,"ctx"),MO.forEach(u),As=$(jO," object."),jO.forEach(u),Is=y($O),js=b($O,"P",{});var HO=E(js);Rs=$(HO,"Functions declared in the "),Ms=b(HO,"CODE",{});var _O=E(Ms);Hs=$(_O,"<script>"),_O.forEach(u),_s=$(HO," tag will refer to the instance variable that is scoped withn the "),Us=b(HO,"CODE",{});var UO=E(Us);Gs=$(UO,"instance"),UO.forEach(u),qs=$(HO," function closure:"),HO.forEach(u),Bs=y($O),zs=b($O,"PRE",{class:!0}),E(zs).forEach(u),Fs=y($O),Js=b($O,"P",{});var GO=E(Js);Ws=b(GO,"A",{href:!0,rel:!0});var qO=E(Ws);Ys=$(qO,"Svelte REPL"),qO.forEach(u),GO.forEach(u),Vs=y($O),Ks=b($O,"PRE",{class:!0}),E(Ks).forEach(u),Zs=y($O),Qs=b($O,"P",{});var BO=E(Qs);Xs=$(BO,"Whenever a new instance of a component is created, the "),at=b(BO,"CODE",{});var zO=E(at);nt=$(zO,"instance"),zO.forEach(u),st=$(BO," function is called and the "),tt=b(BO,"CODE",{});var FO=E(tt);et=$(FO,"ctx"),FO.forEach(u),ot=$(BO," object is created and captured within a new closure scope."),BO.forEach(u),$O.forEach(u),pt=y(a),ct=b(a,"SECTION",{});var JO=E(ct);rt=b(JO,"H3",{});var WO=E(rt);lt=b(WO,"A",{href:!0,id:!0});var YO=E(lt);it=$(YO,"$$.dirty"),YO.forEach(u),WO.forEach(u),ut=y(JO),ht=b(JO,"P",{});var VO=E(ht);kt=b(VO,"CODE",{});var KO=E(kt);dt=$(KO,"$$.dirty"),KO.forEach(u),ft=$(VO," is a object that is used to track which instance variable had just changed and needs to be updated onto the DOM."),VO.forEach(u),mt=y(JO),vt=b(JO,"P",{});var ZO=E(vt);gt=$(ZO,"For example, in the following Svelte component:"),ZO.forEach(u),Et=y(JO),bt=b(JO,"PRE",{class:!0}),E(bt).forEach(u),$t=y(JO),yt=b(JO,"P",{});var QO=E(yt);wt=b(QO,"A",{href:!0,rel:!0});var XO=E(wt);Ot=$(XO,"Svelte REPL"),XO.forEach(u),QO.forEach(u),St=y(JO),Tt=b(JO,"P",{});var aS=E(Tt);Lt=$(aS,"The initial "),Nt=b(aS,"CODE",{});var nS=E(Nt);Pt=$(nS,"$$.dirty"),nS.forEach(u),xt=$(aS," is "),Ct=b(aS,"CODE",{});var sS=E(Ct);Dt=$(sS,"null"),sS.forEach(u),At=$(aS," ("),It=b(aS,"A",{href:!0,rel:!0});var tS=E(It);jt=$(tS,"source code"),tS.forEach(u),Rt=$(aS,")."),aS.forEach(u),Mt=y(JO),Ht=b(JO,"P",{});var eS=E(Ht);_t=$(eS,"If you clicked on the "),Ut=b(eS,"STRONG",{});var oS=E(Ut);Gt=$(oS,'"+ Agility"'),oS.forEach(u),qt=$(eS," button, "),Bt=b(eS,"CODE",{});var pS=E(Bt);zt=$(pS,"$$.dirty"),pS.forEach(u),Ft=$(eS," will turn into:"),eS.forEach(u),Jt=y(JO),Wt=b(JO,"PRE",{class:!0}),E(Wt).forEach(u),Yt=y(JO),Vt=b(JO,"P",{});var cS=E(Vt);Kt=$(cS,"If you clicked on the "),Zt=b(cS,"STRONG",{});var rS=E(Zt);Qt=$(rS,'"Level Up"'),rS.forEach(u),Xt=$(cS," button, "),ae=b(cS,"CODE",{});var lS=E(ae);ne=$(lS,"$$.dirty"),lS.forEach(u),se=$(cS," will turn into:"),cS.forEach(u),te=y(JO),ee=b(JO,"PRE",{class:!0}),E(ee).forEach(u),oe=y(JO),pe=b(JO,"P",{});var iS=E(pe);ce=b(iS,"CODE",{});var uS=E(ce);re=$(uS,"$$.dirty"),uS.forEach(u),le=$(iS," is useful for Svelte, so that it doesn't update the DOM unnecessarily."),iS.forEach(u),ie=y(JO),ue=b(JO,"P",{});var hS=E(ue);he=$(hS,"If you looked at the "),ke=b(hS,"STRONG",{});var kS=E(ke);de=$(kS,"p (u_p_date)"),kS.forEach(u),fe=$(hS," function of the compiled code, you will see Svelte checks whether a variable is marked in "),me=b(hS,"CODE",{});var dS=E(me);ve=$(dS,"$$.dirty"),dS.forEach(u),ge=$(hS,", before updating the DOM."),hS.forEach(u),Ee=y(JO),be=b(JO,"PRE",{class:!0}),E(be).forEach(u),$e=y(JO),ye=b(JO,"P",{});var fS=E(ye);we=$(fS,"After Svelte updates the DOM, the "),Oe=b(fS,"CODE",{});var mS=E(Oe);Se=$(mS,"$$.dirty"),mS.forEach(u),Te=$(fS," is set back to "),Le=b(fS,"CODE",{});var vS=E(Le);Ne=$(vS,"null"),vS.forEach(u),Pe=$(fS," to indicate all changes has been applied onto the DOM."),fS.forEach(u),JO.forEach(u),xe=y(a),Ce=b(a,"SECTION",{});var gS=E(Ce);De=b(gS,"H3",{});var ES=E(De);Ae=b(ES,"A",{href:!0,id:!0});var bS=E(Ae);Ie=$(bS,"$$invalidate"),bS.forEach(u),ES.forEach(u),je=y(gS),Re=b(gS,"P",{});var $S=E(Re);Me=b($S,"CODE",{});var yS=E(Me);He=$(yS,"$$invalidate"),yS.forEach(u),_e=$($S," is the secret behind reactivity in Svelte."),$S.forEach(u),Ue=y(gS),Ge=b(gS,"P",{});var wS=E(Ge);qe=$(wS,"Whenever a variable is"),wS.forEach(u),Be=y(gS),ze=b(gS,"UL",{});var OS=E(ze);Fe=b(OS,"LI",{});var SS=E(Fe);Je=$(SS,"reassigned "),We=b(SS,"CODE",{});var TS=E(We);Ye=$(TS,"(foo = 1)"),TS.forEach(u),SS.forEach(u),Ve=y(OS),Ke=b(OS,"LI",{});var LS=E(Ke);Ze=$(LS,"mutated "),Qe=b(LS,"CODE",{});var NS=E(Qe);Xe=$(NS,"(foo.bar = 1)"),NS.forEach(u),LS.forEach(u),OS.forEach(u),ao=y(gS),no=b(gS,"P",{});var PS=E(no);so=$(PS,"Svelte will wrap the assignment or update around with the "),to=b(PS,"CODE",{});var xS=E(to);eo=$(xS,"$$invalidate"),xS.forEach(u),oo=$(PS," function:"),PS.forEach(u),po=y(gS),co=b(gS,"PRE",{class:!0}),E(co).forEach(u),ro=y(gS),lo=b(gS,"P",{});var CS=E(lo);io=$(CS,"the "),uo=b(CS,"CODE",{});var DS=E(uo);ho=$(DS,"$$invalidate"),DS.forEach(u),ko=$(CS," function will:"),CS.forEach(u),fo=y(gS),mo=b(gS,"OL",{});var AS=E(mo);vo=b(AS,"LI",{});var IS=E(vo);go=$(IS,"update the variable in "),Eo=b(IS,"CODE",{});var jS=E(Eo);bo=$(jS,"$$.ctx"),jS.forEach(u),IS.forEach(u),$o=y(AS),yo=b(AS,"LI",{});var RS=E(yo);wo=$(RS,"mark the variable in "),Oo=b(RS,"CODE",{});var MS=E(Oo);So=$(MS,"$$.dirty"),MS.forEach(u),RS.forEach(u),To=y(AS),Lo=b(AS,"LI",{});var HS=E(Lo);No=$(HS,"schedule an update"),HS.forEach(u),Po=y(AS),xo=b(AS,"LI",{});var _S=E(xo);Co=$(_S,"return the value of the assignment or update expression"),_S.forEach(u),AS.forEach(u),Do=y(gS),Ao=b(gS,"PRE",{class:!0}),E(Ao).forEach(u),Io=y(gS),jo=b(gS,"P",{});var US=E(jo);Ro=b(US,"A",{href:!0,rel:!0});var GS=E(Ro);Mo=$(GS,"Source code"),GS.forEach(u),US.forEach(u),Ho=y(gS),_o=b(gS,"P",{});var qS=E(_o);Uo=$(qS,"One interesting note about the function "),Go=b(qS,"CODE",{});var BS=E(Go);qo=$(BS,"$$invalidate"),BS.forEach(u),Bo=$(qS," is that, it wraps around the assignment or update expression and returns what the expression evaluates to."),qS.forEach(u),zo=y(gS),Fo=b(gS,"P",{});var zS=E(Fo);Jo=$(zS,"This makes "),Wo=b(zS,"CODE",{});var FS=E(Wo);Yo=$(FS,"$$invalidate"),FS.forEach(u),Vo=$(zS," chainable:"),zS.forEach(u),Ko=y(gS),Zo=b(gS,"PRE",{class:!0}),E(Zo).forEach(u),Qo=y(gS),Xo=b(gS,"P",{});var JS=E(Xo);ap=$(JS,"It seemed complex when there's a lot of assignment or update expressions in 1 statement! ðŸ™ˆ"),JS.forEach(u),np=y(gS),sp=b(gS,"P",{});var WS=E(sp);tp=$(WS,"The 2nd argument of "),ep=b(WS,"CODE",{});var YS=E(ep);op=$(YS,"$$invalidate"),YS.forEach(u),pp=$(WS," is the assignment or update expressions verbatim. But if it contains any assignment or update sub-expressions, we recursively wrap it with "),cp=b(WS,"CODE",{});var VS=E(cp);rp=$(VS,"$$invalidate"),VS.forEach(u),lp=$(WS,"."),WS.forEach(u),ip=y(gS),up=b(gS,"P",{});var KS=E(up);hp=$(KS,"In case where the assignment expression changes a property of an object, we pass the object in as a 3rd argument of the "),kp=b(KS,"CODE",{});var ZS=E(kp);dp=$(ZS,"$$invalidate"),ZS.forEach(u),fp=$(KS," function, eg:"),KS.forEach(u),mp=y(gS),vp=b(gS,"PRE",{class:!0}),E(vp).forEach(u),gp=y(gS),Ep=b(gS,"P",{});var QS=E(Ep);bp=$(QS,"So that, we update the "),$p=b(QS,"CODE",{});var XS=E($p);yp=$(XS,'"obj"'),XS.forEach(u),wp=$(QS," variable to "),Op=b(QS,"CODE",{});var aT=E(Op);Sp=$(aT,"obj"),aT.forEach(u),Tp=$(QS," instead of the value of the 2nd argument, "),Lp=b(QS,"CODE",{});var nT=E(Lp);Np=$(nT,'"hello"'),nT.forEach(u),Pp=$(QS,"."),QS.forEach(u),gS.forEach(u),xp=y(a),Cp=b(a,"SECTION",{});var sT=E(Cp);Dp=b(sT,"H3",{});var tT=E(Dp);Ap=b(tT,"A",{href:!0,id:!0});var eT=E(Ap);Ip=$(eT,"schedule_update"),eT.forEach(u),tT.forEach(u),jp=y(sT),Rp=b(sT,"P",{});var oT=E(Rp);Mp=b(oT,"CODE",{});var pT=E(Mp);Hp=$(pT,"schedule_update"),pT.forEach(u),_p=$(oT," schedules Svelte to update the DOM with the changes made thus far."),oT.forEach(u),Up=y(sT),Gp=b(sT,"P",{});var cT=E(Gp);qp=$(cT,"Svelte, at the point of writing ("),Bp=b(cT,"A",{href:!0,rel:!0});var rT=E(Bp);zp=$(rT,"v3.20.1"),rT.forEach(u),Fp=$(cT,"), uses "),Jp=b(cT,"A",{href:!0,rel:!0});var lT=E(Jp);Wp=$(lT,"microtask queue"),lT.forEach(u),Yp=$(cT," to batch change updates. The actual DOM update happens in the next microtask, so that any synchronous "),Vp=b(cT,"CODE",{});var iT=E(Vp);Kp=$(iT,"$$invalidate"),iT.forEach(u),Zp=$(cT," operations that happen within the same task get batched into the next DOM update."),cT.forEach(u),Qp=y(sT),Xp=b(sT,"P",{});var uT=E(Xp);ac=$(uT,"To schedule a next microtask, Svelte uses the Promise callback."),uT.forEach(u),nc=y(sT),sc=b(sT,"PRE",{class:!0}),E(sc).forEach(u),tc=y(sT),ec=b(sT,"P",{});var hT=E(ec);oc=$(hT,"In "),pc=b(hT,"CODE",{});var kT=E(pc);cc=$(kT,"flush"),kT.forEach(u),rc=$(hT,", we call update for each component marked dirty:"),hT.forEach(u),lc=y(sT),ic=b(sT,"PRE",{class:!0}),E(ic).forEach(u),uc=y(sT),hc=b(sT,"P",{});var dT=E(hc);kc=b(dT,"A",{href:!0,rel:!0});var fT=E(kc);dc=$(fT,"Source code"),fT.forEach(u),dT.forEach(u),fc=y(sT),mc=b(sT,"P",{});var mT=E(mc);vc=$(mT,"So, if you write a Svelte component like this:"),mT.forEach(u),gc=y(sT),Ec=b(sT,"PRE",{class:!0}),E(Ec).forEach(u),bc=y(sT),$c=b(sT,"P",{});var vT=E($c);yc=b(vT,"A",{href:!0,rel:!0});var gT=E(yc);wc=$(gT,"Svelte REPL"),gT.forEach(u),vT.forEach(u),Oc=y(sT),Sc=b(sT,"P",{});var ET=E(Sc);Tc=$(ET,"The DOM update for the "),Lc=b(ET,"CODE",{});var bT=E(Lc);Nc=$(bT,"givenName"),bT.forEach(u),Pc=$(ET," and "),xc=b(ET,"CODE",{});var $T=E(xc);Cc=$($T,"familyName"),$T.forEach(u),Dc=$(ET," happens in the same microtask:"),ET.forEach(u),Ac=y(sT),Ic=b(sT,"OL",{});var yT=E(Ic);jc=b(yT,"LI",{});var wT=E(jc);Rc=$(wT,"Click on the "),Mc=b(wT,"STRONG",{});var OT=E(Mc);Hc=$(OT,'"Update"'),OT.forEach(u),_c=$(wT," to call the "),Uc=b(wT,"CODE",{});var ST=E(Uc);Gc=$(ST,"update"),ST.forEach(u),qc=$(wT," function"),wT.forEach(u),Bc=y(yT),zc=b(yT,"LI",{});var TT=E(zc);Fc=b(TT,"CODE",{});var LT=E(Fc);Jc=$(LT,"$$invalidate('givenName', givenName = 'Li Hau')"),LT.forEach(u),TT.forEach(u),Wc=y(yT),Yc=b(yT,"LI",{});var NT=E(Yc);Vc=$(NT,"Mark the variable "),Kc=b(NT,"CODE",{});var PT=E(Kc);Zc=$(PT,"givenName"),PT.forEach(u),Qc=$(NT," dirty, "),Xc=b(NT,"CODE",{});var xT=E(Xc);ar=$(xT,"$$.dirty['givenName'] = true"),xT.forEach(u),NT.forEach(u),nr=y(yT),sr=b(yT,"LI",{});var CT=E(sr);tr=$(CT,"Schedule an update, "),er=b(CT,"CODE",{});var DT=E(er);or=$(DT,"schedule_update()"),DT.forEach(u),CT.forEach(u),pr=y(yT),cr=b(yT,"LI",{});var AT=E(cr);rr=$(AT,"Since it's the first update in the call stack, push the "),lr=b(AT,"CODE",{});var IT=E(lr);ir=$(IT,"flush"),IT.forEach(u),ur=$(AT," function into the microtask queue"),AT.forEach(u),hr=y(yT),kr=b(yT,"LI",{});var jT=E(kr);dr=b(jT,"CODE",{});var RT=E(dr);fr=$(RT,"$$invalidate('familyName', familyName = 'Tan')"),RT.forEach(u),jT.forEach(u),mr=y(yT),vr=b(yT,"LI",{});var MT=E(vr);gr=$(MT,"Mark the variable "),Er=b(MT,"CODE",{});var HT=E(Er);br=$(HT,"familyName"),HT.forEach(u),$r=$(MT," dirty, "),yr=b(MT,"CODE",{});var _T=E(yr);wr=$(_T,"$$.dirty['familyName'] = true"),_T.forEach(u),MT.forEach(u),Or=y(yT),Sr=b(yT,"LI",{});var UT=E(Sr);Tr=$(UT,"Schedule an update, "),Lr=b(UT,"CODE",{});var GT=E(Lr);Nr=$(GT,"schedule_update()"),GT.forEach(u),UT.forEach(u),Pr=y(yT),xr=b(yT,"LI",{});var qT=E(xr);Cr=$(qT,"Since "),Dr=b(qT,"CODE",{});var BT=E(Dr);Ar=$(BT,"update_scheduled = true"),BT.forEach(u),Ir=$(qT,", do nothing."),qT.forEach(u),jr=y(yT),Rr=b(yT,"LI",{});var zT=E(Rr);Mr=b(zT,"STRONG",{});var FT=E(Mr);Hr=$(FT,"-- End of task --"),FT.forEach(u),zT.forEach(u),_r=y(yT),Ur=b(yT,"LI",{});var JT=E(Ur);Gr=b(JT,"STRONG",{});var WT=E(Gr);qr=$(WT,"-- Start of microtask--"),WT.forEach(u),JT.forEach(u),Br=y(yT),zr=b(yT,"LI",{});var YT=E(zr);Fr=b(YT,"CODE",{});var VT=E(Fr);Jr=$(VT,"flush()"),VT.forEach(u),Wr=$(YT," calls "),Yr=b(YT,"CODE",{});var KT=E(Yr);Vr=$(KT,"update()"),KT.forEach(u),Kr=$(YT," for each component marked dirty"),YT.forEach(u),Zr=y(yT),Qr=b(yT,"LI",{});var ZT=E(Qr);Xr=$(ZT,"Calls "),al=b(ZT,"CODE",{});var QT=E(al);nl=$(QT,"$$.fragment.p($$.dirty, $$.ctx)"),QT.forEach(u),sl=$(ZT,"."),tl=b(ZT,"UL",{});var XT=E(tl);el=b(XT,"LI",{});var aL=E(el);ol=b(aL,"CODE",{});var nL=E(ol);pl=$(nL,"$$.dirty"),nL.forEach(u),cl=$(aL," is now "),rl=b(aL,"CODE",{});var sL=E(rl);ll=$(sL,"{ givenName: true, familyName: true }"),sL.forEach(u),aL.forEach(u),il=y(XT),ul=b(XT,"LI",{});var tL=E(ul);hl=b(tL,"CODE",{});var eL=E(hl);kl=$(eL,"$$.ctx"),eL.forEach(u),dl=$(tL," is now "),fl=b(tL,"CODE",{});var oL=E(fl);ml=$(oL,"{ givenName: 'Li Hau', familyName: 'Tan' }"),oL.forEach(u),tL.forEach(u),XT.forEach(u),ZT.forEach(u),vl=y(yT),gl=b(yT,"LI",{});var pL=E(gl);El=$(pL,"In "),bl=b(pL,"CODE",{});var cL=E(bl);$l=$(cL,"function p(dirty, ctx)"),cL.forEach(u),yl=$(pL,","),wl=b(pL,"UL",{});var rL=E(wl);Ol=b(rL,"LI",{});var lL=E(Ol);Sl=$(lL,"Update the 1st text node to "),Tl=b(lL,"CODE",{});var iL=E(Tl);Ll=$(iL,"$$.ctx['givenName']"),iL.forEach(u),Nl=$(lL," if "),Pl=b(lL,"CODE",{});var uL=E(Pl);xl=$(uL,"$$.dirty['givenName'] === true"),uL.forEach(u),lL.forEach(u),Cl=y(rL),Dl=b(rL,"LI",{});var hL=E(Dl);Al=$(hL,"Update the 2nd text node to "),Il=b(hL,"CODE",{});var kL=E(Il);jl=$(kL,"$$.ctx['familyName']"),kL.forEach(u),Rl=$(hL," if "),Ml=b(hL,"CODE",{});var dL=E(Ml);Hl=$(dL,"$$.dirty['familyName'] === true"),dL.forEach(u),hL.forEach(u),rL.forEach(u),pL.forEach(u),_l=y(yT),Ul=b(yT,"LI",{});var fL=E(Ul);Gl=$(fL,"Resets the "),ql=b(fL,"CODE",{});var mL=E(ql);Bl=$(mL,"$$.dirty"),mL.forEach(u),zl=$(fL," to "),Fl=b(fL,"CODE",{});var vL=E(Fl);Jl=$(vL,"null"),vL.forEach(u),fL.forEach(u),Wl=y(yT),Yl=b(yT,"LI",{});var gL=E(Yl);Vl=$(gL,"..."),gL.forEach(u),Kl=y(yT),Zl=b(yT,"LI",{});var EL=E(Zl);Ql=b(EL,"STRONG",{});var bL=E(Ql);Xl=$(bL,"-- End of microtask--"),bL.forEach(u),EL.forEach(u),yT.forEach(u),sT.forEach(u),ai=y(a),ni=b(a,"SECTION",{});var $L=E(ni);si=b($L,"H4",{});var yL=E(si);ti=b(yL,"A",{href:!0,id:!0});var wL=E(ti);ei=$(wL,"tl/dr:"),wL.forEach(u),yL.forEach(u),oi=y($L),pi=b($L,"UL",{});var OL=E(pi);ci=b(OL,"LI",{});var SL=E(ci);ri=$(SL,"For each assignment or update, Svelte calls "),li=b(SL,"CODE",{});var TL=E(li);ii=$(TL,"$$invalidate"),TL.forEach(u),ui=$(SL," to update the variable in "),hi=b(SL,"CODE",{});var LL=E(hi);ki=$(LL,"$$.ctx"),LL.forEach(u),di=$(SL," and mark the variable dirty in "),fi=b(SL,"CODE",{});var NL=E(fi);mi=$(NL,"$$.dirty"),NL.forEach(u),vi=$(SL,"."),SL.forEach(u),gi=y(OL),Ei=b(OL,"LI",{});var PL=E(Ei);bi=$(PL,"The acutal DOM update is batched into the next microtask queue."),PL.forEach(u),$i=y(OL),yi=b(OL,"LI",{});var xL=E(yi);wi=$(xL,"To update the DOM for each component, the component "),Oi=b(xL,"CODE",{});var CL=E(Oi);Si=$(CL,"$$.fragment.p($$.diry, $$.ctx)"),CL.forEach(u),Ti=$(xL," is called."),xL.forEach(u),Li=y(OL),Ni=b(OL,"LI",{});var DL=E(Ni);Pi=$(DL,"After the DOM update, the "),xi=b(DL,"CODE",{});var AL=E(xi);Ci=$(AL,"$$.dirty"),AL.forEach(u),Di=$(DL," is reset to "),Ai=b(DL,"CODE",{});var IL=E(Ai);Ii=$(IL,"null"),IL.forEach(u),ji=$(DL,"."),DL.forEach(u),OL.forEach(u),$L.forEach(u),Ri=y(a),Mi=b(a,"SECTION",{});var jL=E(Mi);Hi=b(jL,"H2",{});var RL=E(Hi);_i=b(RL,"A",{href:!0,id:!0});var ML=E(_i);Ui=$(ML,"v3.16.0"),ML.forEach(u),RL.forEach(u),Gi=y(jL),qi=b(jL,"P",{});var HL=E(qi);Bi=$(HL,"One big change in v3.16.0 is the PR "),zi=b(HL,"A",{href:!0,rel:!0});var _L=E(zi);Fi=$(_L,"#3945"),_L.forEach(u),Ji=$(HL,", namely "),Wi=b(HL,"STRONG",{});var UL=E(Wi);Yi=$(UL,"bitmask-based change tracking"),UL.forEach(u),Vi=$(HL,"."),HL.forEach(u),Ki=y(jL),Zi=b(jL,"P",{});var GL=E(Zi);Qi=$(GL,"Instead of marking the variable dirty using an object:"),GL.forEach(u),Xi=y(jL),au=b(jL,"PRE",{class:!0}),E(au).forEach(u),nu=y(jL),su=b(jL,"P",{});var qL=E(su);tu=$(qL,"Svelte assign each variable an index:"),qL.forEach(u),eu=y(jL),ou=b(jL,"PRE",{class:!0}),E(ou).forEach(u),pu=y(jL),cu=b(jL,"P",{});var BL=E(cu);ru=$(BL,"and uses "),lu=b(BL,"A",{href:!0,rel:!0});var zL=E(lu);iu=$(zL,"bitmask"),zL.forEach(u),uu=$(BL," to store the dirty information:"),BL.forEach(u),hu=y(jL),ku=b(jL,"PRE",{class:!0}),E(ku).forEach(u),du=y(jL),fu=b(jL,"P",{});var FL=E(fu);mu=$(FL,"which is far more compact than the previous compiled code."),FL.forEach(u),jL.forEach(u),vu=y(a),gu=b(a,"SECTION",{});var JL=E(gu);Eu=b(JL,"H3",{});var WL=E(Eu);bu=b(WL,"A",{href:!0,id:!0});var YL=E(bu);$u=$(YL,"Bitmask"),YL.forEach(u),WL.forEach(u),yu=y(JL),wu=b(JL,"P",{});var VL=E(wu);Ou=$(VL,"For those who don't understand, allow me to quickly explain what it is."),VL.forEach(u),Su=y(JL),Tu=b(JL,"P",{});var KL=E(Tu);Lu=$(KL,"Of course, if you want to learn more about it, feel free to read a more detailed explanation, like "),Nu=b(KL,"A",{href:!0,rel:!0});var ZL=E(Nu);Pu=$(ZL,"this"),ZL.forEach(u),xu=$(KL," and "),Cu=b(KL,"A",{href:!0,rel:!0});var QL=E(Cu);Du=$(QL,"this"),QL.forEach(u),Au=$(KL,"."),KL.forEach(u),Iu=y(JL),ju=b(JL,"P",{});var XL=E(ju);Ru=$(XL,"The most compact way of representing a group of "),Mu=b(XL,"CODE",{});var aN=E(Mu);Hu=$(aN,"true"),aN.forEach(u),_u=$(XL," or "),Uu=b(XL,"CODE",{});var nN=E(Uu);Gu=$(nN,"false"),nN.forEach(u),qu=$(XL," is to use bits. If the bit is "),Bu=b(XL,"CODE",{});var sN=E(Bu);zu=$(sN,"1"),sN.forEach(u),Fu=$(XL," it is "),Ju=b(XL,"CODE",{});var tN=E(Ju);Wu=$(tN,"true"),tN.forEach(u),Yu=$(XL," and if it is "),Vu=b(XL,"CODE",{});var eN=E(Vu);Ku=$(eN,"0"),eN.forEach(u),Zu=$(XL," it is "),Qu=b(XL,"CODE",{});var oN=E(Qu);Xu=$(oN,"false"),oN.forEach(u),ah=$(XL,"."),XL.forEach(u),nh=y(JL),sh=b(JL,"P",{});var pN=E(sh);th=$(pN,"A number can be represented in binary, "),eh=b(pN,"STRONG",{});var cN=E(eh);oh=$(cN,"5"),cN.forEach(u),ph=$(pN," is "),ch=b(pN,"CODE",{});var rN=E(ch);rh=$(rN,"0b0101"),rN.forEach(u),lh=$(pN," in binary."),pN.forEach(u),ih=y(JL),uh=b(JL,"P",{});var lN=E(uh);hh=$(lN,"If "),kh=b(lN,"STRONG",{});var iN=E(kh);dh=$(iN,"5"),iN.forEach(u),fh=$(lN," is represented in a 4-bit binary, then it can store 4 boolean values, with the 0th and 2nd bit as "),mh=b(lN,"CODE",{});var uN=E(mh);vh=$(uN,"true"),uN.forEach(u),gh=$(lN," and 1st and 3rd bit as "),Eh=b(lN,"CODE",{});var hN=E(Eh);bh=$(hN,"false"),hN.forEach(u),$h=$(lN,", (reading from the right to left, from "),yh=b(lN,"A",{href:!0,rel:!0});var kN=E(yh);wh=$(kN,"least significant bit"),kN.forEach(u),Oh=$(lN," to the "),Sh=b(lN,"A",{href:!0,rel:!0});var dN=E(Sh);Th=$(dN,"most significant bit"),dN.forEach(u),Lh=$(lN,")."),lN.forEach(u),Nh=y(JL),Ph=b(JL,"P",{});var fN=E(Ph);xh=b(fN,"STRONG",{});var mN=E(xh);Ch=$(mN,"How many boolean values can a number store?"),mN.forEach(u),fN.forEach(u),Dh=y(JL),Ah=b(JL,"P",{});var vN=E(Ah);Ih=$(vN,"That depends on the language, a 16-bit integer in Java can store 16 boolean values."),vN.forEach(u),jh=y(JL),Rh=b(JL,"P",{});var gN=E(Rh);Mh=$(gN,"In JavaScript, numbers can are "),Hh=b(gN,"A",{href:!0,rel:!0});var EN=E(Hh);_h=$(EN,"represented in 64 bits"),EN.forEach(u),Uh=$(gN,". However, when using "),Gh=b(gN,"A",{href:!0,rel:!0});var bN=E(Gh);qh=$(bN,"bitwise operations"),bN.forEach(u),Bh=$(gN," on the number, JavaScript will treat the number as 32 bits."),gN.forEach(u),zh=y(JL),Fh=b(JL,"P",{});var $N=E(Fh);Jh=$($N,"To inspect or modify the boolean value stored in a number, we use "),Wh=b($N,"A",{href:!0,rel:!0});var yN=E(Wh);Yh=$(yN,"bitwise operations"),yN.forEach(u),Vh=$($N,"."),$N.forEach(u),Kh=y(JL),Zh=b(JL,"PRE",{class:!0}),E(Zh).forEach(u),Qh=y(JL),Xh=b(JL,"P",{});var wN=E(Xh);ak=$(wN,"The 2nd operand we use in the bitwise operation, is like a "),nk=b(wN,"A",{href:!0,rel:!0});var ON=E(nk);sk=$(ON,"mask"),ON.forEach(u),tk=$(wN," that allow us to target a specific bit in the 1st number, that stores our boolean values."),wN.forEach(u),ek=y(JL),ok=b(JL,"P",{});var SN=E(ok);pk=$(SN,"We call the mask, "),ck=b(SN,"STRONG",{});var TN=E(ck);rk=$(TN,"bitmask"),TN.forEach(u),lk=$(SN,"."),SN.forEach(u),JL.forEach(u),ik=y(a),uk=b(a,"SECTION",{});var LN=E(uk);hk=b(LN,"H3",{});var NN=E(hk);kk=b(NN,"A",{href:!0,id:!0});var PN=E(kk);dk=$(PN,"Bitmask in Svelte"),PN.forEach(u),NN.forEach(u),fk=y(LN),mk=b(LN,"P",{});var xN=E(mk);vk=$(xN,"As mentioned earlier, we assign each variable an index:"),xN.forEach(u),gk=y(LN),Ek=b(LN,"PRE",{class:!0}),E(Ek).forEach(u),bk=y(LN),$k=b(LN,"P",{});var CN=E($k);yk=$(CN,"So instead of returning the instance variable as an JavaScript Object, we now return it as an JavaScript Array:"),CN.forEach(u),wk=y(LN),Ok=b(LN,"PRE",{class:!0}),E(Ok).forEach(u),Sk=y(LN),Tk=b(LN,"P",{});var DN=E(Tk);Lk=$(DN,"The variable is accessed via "),Nk=b(DN,"STRONG",{});var AN=E(Nk);Pk=$(AN,"index"),AN.forEach(u),xk=$(DN,", "),Ck=b(DN,"CODE",{});var IN=E(Ck);Dk=$(IN,"$$.ctx[index]"),IN.forEach(u),Ak=$(DN,", instead of "),Ik=b(DN,"STRONG",{});var jN=E(Ik);jk=$(jN,"variable name"),jN.forEach(u),Rk=$(DN,":"),DN.forEach(u),Mk=y(LN),Hk=b(LN,"PRE",{class:!0}),E(Hk).forEach(u),_k=y(LN),Uk=b(LN,"P",{});var RN=E(Uk);Gk=$(RN,"The "),qk=b(RN,"CODE",{});var MN=E(qk);Bk=$(MN,"$$invalidate"),MN.forEach(u),zk=$(RN," function works the same, except it takes in "),Fk=b(RN,"STRONG",{});var HN=E(Fk);Jk=$(HN,"index"),HN.forEach(u),Wk=$(RN," instead of "),Yk=b(RN,"STRONG",{});var _N=E(Yk);Vk=$(_N,"variable name"),_N.forEach(u),Kk=$(RN,":"),RN.forEach(u),Zk=y(LN),Qk=b(LN,"PRE",{class:!0}),E(Qk).forEach(u),Xk=y(LN),ad=b(LN,"P",{});var UN=E(ad);nd=b(UN,"CODE",{});var GN=E(nd);sd=$(GN,"$$.dirty"),GN.forEach(u),td=$(UN," now stores a list of numbers. Each number carries 31 boolean values, each boolean value indicates whether the variable of that index is dirty or not."),UN.forEach(u),ed=y(LN),od=b(LN,"P",{});var qN=E(od);pd=$(qN,"To set a variable as dirty, we use bitwise operation:"),qN.forEach(u),cd=y(LN),rd=b(LN,"PRE",{class:!0}),E(rd).forEach(u),ld=y(LN),id=b(LN,"P",{});var BN=E(id);ud=$(BN,"And to verify whether a variable is dirty, we use bitwise operation too!"),BN.forEach(u),hd=y(LN),kd=b(LN,"PRE",{class:!0}),E(kd).forEach(u),dd=y(LN),fd=b(LN,"P",{});var zN=E(fd);md=$(zN,"With using bitmask, "),vd=b(zN,"CODE",{});var FN=E(vd);gd=$(FN,"$$.dirty"),FN.forEach(u),Ed=$(zN," is now reset to "),bd=b(zN,"CODE",{});var JN=E(bd);$d=$(JN,"[-1]"),JN.forEach(u),yd=$(zN," instead of "),wd=b(zN,"CODE",{});var WN=E(wd);Od=$(WN,"null"),WN.forEach(u),Sd=$(zN,"."),zN.forEach(u),Td=y(LN),Ld=b(LN,"P",{});var YN=E(Ld);Nd=b(YN,"STRONG",{});var VN=E(Nd);Pd=$(VN,"Trivia:"),VN.forEach(u),xd=y(YN),Cd=b(YN,"CODE",{});var KN=E(Cd);Dd=$(KN,"-1"),KN.forEach(u),Ad=$(YN," is "),Id=b(YN,"CODE",{});var ZN=E(Id);jd=$(ZN,"0b1111_1111"),ZN.forEach(u),Rd=$(YN," in binary, where all the bits are "),Md=b(YN,"CODE",{});var QN=E(Md);Hd=$(QN,"1"),QN.forEach(u),_d=$(YN,"."),YN.forEach(u),LN.forEach(u),Ud=y(a),Gd=b(a,"SECTION",{});var XN=E(Gd);qd=b(XN,"H4",{});var aP=E(qd);Bd=b(aP,"A",{href:!0,id:!0});var nP=E(Bd);zd=$(nP,"Destructuring "),Fd=b(nP,"STRONG",{});var sP=E(Fd);Jd=$(sP,"$$.dirty"),sP.forEach(u),nP.forEach(u),aP.forEach(u),Wd=y(XN),Yd=b(XN,"P",{});var tP=E(Yd);Vd=$(tP,"One code-size optimisation that Svelte does is to always destructure the "),Kd=b(tP,"CODE",{});var eP=E(Kd);Zd=$(eP,"dirty"),eP.forEach(u),Qd=$(tP," array in the "),Xd=b(tP,"STRONG",{});var oP=E(Xd);af=$(oP,"u_p_date function"),oP.forEach(u),nf=$(tP," if there's less than 32 variables, since we will always access "),sf=b(tP,"CODE",{});var pP=E(sf);tf=$(pP,"dirty[0]"),pP.forEach(u),ef=$(tP," anyway:"),tP.forEach(u),of=y(XN),pf=b(XN,"PRE",{class:!0}),E(pf).forEach(u),XN.forEach(u),cf=y(a),rf=b(a,"SECTION",{});var cP=E(rf);lf=b(cP,"H4",{});var rP=E(lf);uf=b(rP,"A",{href:!0,id:!0});var lP=E(uf);hf=$(lP,"tl/dr:"),lP.forEach(u),rP.forEach(u),kf=y(cP),df=b(cP,"UL",{});var iP=E(df);ff=b(iP,"LI",{});var uP=E(ff);mf=$(uP,"The underlying mechanism for "),vf=b(uP,"CODE",{});var hP=E(vf);gf=$(hP,"$$invalidate"),hP.forEach(u),Ef=$(uP," and "),bf=b(uP,"CODE",{});var kP=E(bf);$f=$(kP,"schedule_update"),kP.forEach(u),yf=$(uP," does not change"),uP.forEach(u),wf=y(iP),Of=b(iP,"LI",{});var dP=E(Of);Sf=$(dP,"Using bitmask, the compiled code is much compact"),dP.forEach(u),iP.forEach(u),cP.forEach(u),Tf=y(a),Lf=b(a,"SECTION",{});var fP=E(Lf);Nf=b(fP,"H2",{});var mP=E(Nf);Pf=b(mP,"A",{href:!0,id:!0});var vP=E(Pf);xf=$(vP,"Reactive Declaration"),vP.forEach(u),mP.forEach(u),Cf=y(fP),Df=b(fP,"P",{});var gP=E(Df);Af=$(gP,"Svelte allow us to declare reactive values via the "),If=b(gP,"A",{href:!0,rel:!0});var EP=E(If);jf=$(EP,"labeled statement"),EP.forEach(u),Rf=$(gP,", "),Mf=b(gP,"CODE",{});var bP=E(Mf);Hf=$(bP,"$:"),bP.forEach(u),gP.forEach(u),_f=y(fP),Uf=b(fP,"PRE",{class:!0}),E(Uf).forEach(u),Gf=y(fP),qf=b(fP,"P",{});var $P=E(qf);Bf=b($P,"A",{href:!0,rel:!0});var yP=E(Bf);zf=$(yP,"Svelte REPL"),yP.forEach(u),$P.forEach(u),Ff=y(fP),Jf=b(fP,"P",{});var wP=E(Jf);Wf=$(wP,"If you look at the compiled output, you would find out that the declarative statements appeared in the "),Yf=b(wP,"A",{href:!0});var OP=E(Yf);Vf=b(OP,"CODE",{});var SP=E(Vf);Kf=$(SP,"instance"),SP.forEach(u),Zf=$(OP," function"),OP.forEach(u),Qf=$(wP,":"),wP.forEach(u),Xf=y(fP),am=b(fP,"PRE",{class:!0}),E(am).forEach(u),nm=y(fP),sm=b(fP,"P",{});var TP=E(sm);tm=$(TP,"Try reorder the reactive declarations and observe the change in the compiled output:"),TP.forEach(u),em=y(fP),om=b(fP,"PRE",{class:!0}),E(om).forEach(u),pm=y(fP),cm=b(fP,"P",{});var LP=E(cm);rm=b(LP,"A",{href:!0,rel:!0});var NP=E(rm);lm=$(NP,"Svelte REPL"),NP.forEach(u),LP.forEach(u),im=y(fP),um=b(fP,"PRE",{class:!0}),E(um).forEach(u),hm=y(fP),km=b(fP,"P",{});var PP=E(km);dm=$(PP,"Some observations:"),PP.forEach(u),fm=y(fP),mm=b(fP,"UL",{});var xP=E(mm);vm=b(xP,"LI",{});var CP=E(vm);gm=$(CP,"When there are reactive declarations, Svelte defines a custom "),Em=b(CP,"CODE",{});var DP=E(Em);bm=$(DP,"$$.update"),DP.forEach(u),$m=$(CP," method."),ym=b(CP,"UL",{});var AP=E(ym);wm=b(AP,"LI",{});var IP=E(wm);Om=b(IP,"CODE",{});var jP=E(Om);Sm=$(jP,"$$.update"),jP.forEach(u),Tm=$(IP," is a "),Lm=b(IP,"A",{href:!0,rel:!0});var RP=E(Lm);Nm=$(RP,"no-op function"),RP.forEach(u),Pm=$(IP," by default. (See "),xm=b(IP,"A",{href:!0,rel:!0});var MP=E(xm);Cm=$(MP,"src/runtime/internal/Component.ts"),MP.forEach(u),Dm=$(IP,")"),IP.forEach(u),AP.forEach(u),CP.forEach(u),Am=y(xP),Im=b(xP,"LI",{});var HP=E(Im);jm=$(HP,"Svelte uses "),Rm=b(HP,"CODE",{});var _P=E(Rm);Mm=$(_P,"$$invalidate"),_P.forEach(u),Hm=$(HP," to update the value of a reactive variable too."),HP.forEach(u),_m=y(xP),Um=b(xP,"LI",{});var UP=E(Um);Gm=$(UP,"Svelte sorts the reactive declarations and statements, based on the dependency relationship between the declarations and statements"),qm=b(UP,"UL",{});var GP=E(qm);Bm=b(GP,"LI",{});var qP=E(Bm);zm=b(qP,"CODE",{});var BP=E(zm);Fm=$(BP,"quadrupled"),BP.forEach(u),Jm=$(qP," depends on "),Wm=b(qP,"CODE",{});var zP=E(Wm);Ym=$(zP,"doubled"),zP.forEach(u),Vm=$(qP,", so "),Km=b(qP,"CODE",{});var FP=E(Km);Zm=$(FP,"quadrupled"),FP.forEach(u),Qm=$(qP," is evaluated and "),Xm=b(qP,"CODE",{});var JP=E(Xm);av=$(JP,"$$invalidate"),JP.forEach(u),nv=$(qP,"d after "),sv=b(qP,"CODE",{});var WP=E(sv);tv=$(WP,"doubled"),WP.forEach(u),ev=$(qP,"."),qP.forEach(u),GP.forEach(u),UP.forEach(u),xP.forEach(u),ov=y(fP),pv=b(fP,"P",{});var YP=E(pv);cv=$(YP,"Since all reactive declarations and statements are grouped into the "),rv=b(YP,"CODE",{});var VP=E(rv);lv=$(VP,"$$.update"),VP.forEach(u),iv=$(YP," method, and also the fact that Svelte will sort the declarations and statements according to their dependency relationship, it is irrelevant of the location or the order you declared them."),YP.forEach(u),uv=y(fP),hv=b(fP,"P",{});var KP=E(hv);kv=$(KP,"The following component still works:"),KP.forEach(u),dv=y(fP),fv=b(fP,"PRE",{class:!0}),E(fv).forEach(u),mv=y(fP),vv=b(fP,"P",{});var ZP=E(vv);gv=b(ZP,"A",{href:!0,rel:!0});var QP=E(gv);Ev=$(QP,"Svelte REPL"),QP.forEach(u),ZP.forEach(u),bv=y(fP),$v=b(fP,"P",{});var XP=E($v);yv=b(XP,"STRONG",{});var ax=E(yv);wv=$(ax,"The next thing you may ask, when is "),Ov=b(ax,"CODE",{});var nx=E(Ov);Sv=$(nx,"$$.update"),nx.forEach(u),Tv=$(ax," being called?"),ax.forEach(u),XP.forEach(u),Lv=y(fP),Nv=b(fP,"P",{});var sx=E(Nv);Pv=$(sx,"Remember the "),xv=b(sx,"CODE",{});var tx=E(xv);Cv=$(tx,"update"),tx.forEach(u),Dv=$(sx," function that gets called in the "),Av=b(sx,"CODE",{});var ex=E(Av);Iv=$(ex,"flush"),ex.forEach(u),jv=$(sx," function?"),sx.forEach(u),Rv=y(fP),Mv=b(fP,"P",{});var ox=E(Mv);Hv=$(ox,"I put a "),_v=b(ox,"CODE",{});var px=E(_v);Uv=$(px,"NOTE:"),px.forEach(u),Gv=$(ox," comment saying that it will be important later. Well, it is important now."),ox.forEach(u),qv=y(fP),Bv=b(fP,"PRE",{class:!0}),E(Bv).forEach(u),zv=y(fP),Fv=b(fP,"P",{});var cx=E(Fv);Jv=$(cx,"The "),Wv=b(cx,"CODE",{});var rx=E(Wv);Yv=$(rx,"$$.update"),rx.forEach(u),Vv=$(cx," function gets called "),Kv=b(cx,"STRONG",{});var lx=E(Kv);Zv=$(lx,"in the same microtask"),lx.forEach(u),Qv=$(cx," with the DOM update, right before we called the "),Xv=b(cx,"CODE",{});var ix=E(Xv);ag=$(ix,"$$.fragment.p()"),ix.forEach(u),ng=$(cx," to update the DOM."),cx.forEach(u),sg=y(fP),tg=b(fP,"P",{});var ux=E(tg);eg=$(ux,"The implication of the above fact is"),ux.forEach(u),fP.forEach(u),og=y(a),pg=b(a,"SECTION",{});var hx=E(pg);cg=b(hx,"H4",{});var kx=E(cg);rg=b(kx,"A",{href:!0,id:!0});var dx=E(rg);lg=$(dx,"1. Execution of all reactive declarations and statements are batched"),dx.forEach(u),kx.forEach(u),ig=y(hx),ug=b(hx,"P",{});var fx=E(ug);hg=$(fx,"Just as how DOM updates are batched, reactive declarations and statements are batched too!"),fx.forEach(u),kg=y(hx),dg=b(hx,"PRE",{class:!0}),E(dg).forEach(u),fg=y(hx),mg=b(hx,"P",{});var mx=E(mg);vg=b(mx,"A",{href:!0,rel:!0});var vx=E(vg);gg=$(vx,"Svelte REPL"),vx.forEach(u),mx.forEach(u),Eg=y(hx),bg=b(hx,"P",{});var gx=E(bg);$g=$(gx,"When "),yg=b(gx,"CODE",{});var Ex=E(yg);wg=$(Ex,"update()"),Ex.forEach(u),Og=$(gx," get called,"),gx.forEach(u),Sg=y(hx),Tg=b(hx,"OL",{});var bx=E(Tg);Lg=b(bx,"LI",{});var $x=E(Lg);Ng=$($x,"Similar to the "),Pg=b($x,"A",{href:!0});var yx=E(Pg);xg=$(yx,"flow described above"),yx.forEach(u),Cg=$($x,", "),Dg=b($x,"CODE",{});var wx=E(Dg);Ag=$(wx,"$$invalidate"),wx.forEach(u),Ig=$($x," both "),jg=b($x,"STRONG",{});var Ox=E(jg);Rg=$(Ox,'"givenName"'),Ox.forEach(u),Mg=$($x," and "),Hg=b($x,"STRONG",{});var Sx=E(Hg);_g=$(Sx,'"familyName"'),Sx.forEach(u),Ug=$($x,", and schedules an update"),$x.forEach(u),Gg=y(bx),qg=b(bx,"LI",{});var Tx=E(qg);Bg=b(Tx,"STRONG",{});var Lx=E(Bg);zg=$(Lx,"-- End of task --"),Lx.forEach(u),Tx.forEach(u),Fg=y(bx),Jg=b(bx,"LI",{});var Nx=E(Jg);Wg=b(Nx,"STRONG",{});var Px=E(Wg);Yg=$(Px,"-- Start of microtask--"),Px.forEach(u),Nx.forEach(u),Vg=y(bx),Kg=b(bx,"LI",{});var xx=E(Kg);Zg=b(xx,"CODE",{});var Cx=E(Zg);Qg=$(Cx,"flush()"),Cx.forEach(u),Xg=$(xx," calls "),aE=b(xx,"CODE",{});var Dx=E(aE);nE=$(Dx,"update()"),Dx.forEach(u),sE=$(xx," for each component marked dirty"),xx.forEach(u),tE=y(bx),eE=b(bx,"LI",{});var Ax=E(eE);oE=$(Ax,"Runs "),pE=b(Ax,"CODE",{});var Ix=E(pE);cE=$(Ix,"$$.update()"),Ix.forEach(u),rE=b(Ax,"UL",{});var jx=E(rE);lE=b(jx,"LI",{});var Rx=E(lE);iE=$(Rx,"As "),uE=b(Rx,"STRONG",{});var Mx=E(uE);hE=$(Mx,'"givenName"'),Mx.forEach(u),kE=$(Rx," and "),dE=b(Rx,"STRONG",{});var Hx=E(dE);fE=$(Hx,'"familyName"'),Hx.forEach(u),mE=$(Rx," has changed, evaluates and "),vE=b(Rx,"CODE",{});var _x=E(vE);gE=$(_x,"$$invalidate"),_x.forEach(u),EE=y(Rx),bE=b(Rx,"STRONG",{});var Ux=E(bE);$E=$(Ux,'"name"'),Ux.forEach(u),Rx.forEach(u),yE=y(jx),wE=b(jx,"LI",{});var Gx=E(wE);OE=$(Gx,"As "),SE=b(Gx,"STRONG",{});var qx=E(SE);TE=$(qx,'"name"'),qx.forEach(u),LE=$(Gx," has changed, executes "),NE=b(Gx,"CODE",{});var Bx=E(NE);PE=$(Bx,"console.log('name', name);"),Bx.forEach(u),Gx.forEach(u),jx.forEach(u),Ax.forEach(u),xE=y(bx),CE=b(bx,"LI",{});var zx=E(CE);DE=$(zx,"Calls "),AE=b(zx,"CODE",{});var Fx=E(AE);IE=$(Fx,"$$.fragment.p(...)"),Fx.forEach(u),jE=$(zx," to update the DOM."),zx.forEach(u),bx.forEach(u),RE=y(hx),ME=b(hx,"P",{});var Jx=E(ME);HE=$(Jx,"As you can see, even though we've updated "),_E=b(Jx,"CODE",{});var Wx=E(_E);UE=$(Wx,"givenName"),Wx.forEach(u),GE=$(Jx," and "),qE=b(Jx,"CODE",{});var Yx=E(qE);BE=$(Yx,"familyName"),Yx.forEach(u),zE=$(Jx,", we only evaluate "),FE=b(Jx,"CODE",{});var Vx=E(FE);JE=$(Vx,"name"),Vx.forEach(u),WE=$(Jx," and executes "),YE=b(Jx,"CODE",{});var Kx=E(YE);VE=$(Kx,"console.log('name', name)"),Kx.forEach(u),KE=y(Jx),ZE=b(Jx,"STRONG",{});var Zx=E(ZE);QE=$(Zx,"once"),Zx.forEach(u),XE=$(Jx," instead of twice:"),Jx.forEach(u),ab=y(hx),nb=b(hx,"PRE",{class:!0}),E(nb).forEach(u),hx.forEach(u),sb=y(a),tb=b(a,"SECTION",{});var Qx=E(tb);eb=b(Qx,"H4",{});var Xx=E(eb);ob=b(Xx,"A",{href:!0,id:!0});var aC=E(ob);pb=$(aC,"2. The value of reactive variable outside of reactive declarations and statements may not be up to date"),aC.forEach(u),Xx.forEach(u),cb=y(Qx),rb=b(Qx,"P",{});var nC=E(rb);lb=$(nC,"Because the reactive declarations and statements are batched and executed in the next microtask, you can't expect the value to be updated synchronously."),nC.forEach(u),ib=y(Qx),ub=b(Qx,"PRE",{class:!0}),E(ub).forEach(u),hb=y(Qx),kb=b(Qx,"P",{});var sC=E(kb);db=b(sC,"A",{href:!0,rel:!0});var tC=E(db);fb=$(tC,"Svelte REPL"),tC.forEach(u),sC.forEach(u),mb=y(Qx),vb=b(Qx,"P",{});var eC=E(vb);gb=$(eC,"Instead, you "),Eb=b(eC,"STRONG",{});var oC=E(Eb);bb=$(oC,"have to"),oC.forEach(u),$b=$(eC," refer the reactive variable in another reactive declaration or statement:"),eC.forEach(u),yb=y(Qx),wb=b(Qx,"PRE",{class:!0}),E(wb).forEach(u),Qx.forEach(u),Ob=y(a),Sb=b(a,"SECTION",{});var pC=E(Sb);Tb=b(pC,"H3",{});var cC=E(Tb);Lb=b(cC,"A",{href:!0,id:!0});var rC=E(Lb);Nb=$(rC,"Sorting of reactive declarations and statements"),rC.forEach(u),cC.forEach(u),Pb=y(pC),xb=b(pC,"P",{});var lC=E(xb);Cb=$(lC,"Svelte tries to preserve the order of reactive declarations and statements as they are declared as much as possible."),lC.forEach(u),Db=y(pC),Ab=b(pC,"P",{});var iC=E(Ab);Ib=$(iC,"However, if one reactive declaration or statement refers to a variable that was defined by another reactive declaration, then, "),jb=b(iC,"STRONG",{});var uC=E(jb);Rb=$(uC,"it will be inserted after the latter reactive declaration"),uC.forEach(u),Mb=$(iC,":"),iC.forEach(u),Hb=y(pC),_b=b(pC,"PRE",{class:!0}),E(_b).forEach(u),pC.forEach(u),Ub=y(a),Gb=b(a,"SECTION",{});var hC=E(Gb);qb=b(hC,"H3",{});var kC=E(qb);Bb=b(kC,"A",{href:!0,id:!0});var dC=E(Bb);zb=$(dC,"Reactive variable that is not reactive"),dC.forEach(u),kC.forEach(u),Fb=y(hC),Jb=b(hC,"P",{});var fC=E(Jb);Wb=$(fC,"The Svelte compiler tracks all the variables declared in the "),Yb=b(fC,"CODE",{});var mC=E(Yb);Vb=$(mC,"<script>"),mC.forEach(u),Kb=$(fC," tag."),fC.forEach(u),Zb=y(hC),Qb=b(hC,"P",{});var vC=E(Qb);Xb=$(vC,"If all the variables of a reactive declaration or statement refers to, never gets mutated or reassigned, then the reactive declaration or statement will not be added into "),a$=b(vC,"CODE",{});var gC=E(a$);n$=$(gC,"$$.update"),gC.forEach(u),s$=$(vC,"."),vC.forEach(u),t$=y(hC),e$=b(hC,"P",{});var EC=E(e$);o$=$(EC,"For example:"),EC.forEach(u),p$=y(hC),c$=b(hC,"PRE",{class:!0}),E(c$).forEach(u),r$=y(hC),l$=b(hC,"P",{});var bC=E(l$);i$=b(bC,"A",{href:!0,rel:!0});var $C=E(i$);u$=$($C,"Svelte REPL"),$C.forEach(u),bC.forEach(u),h$=y(hC),k$=b(hC,"P",{});var yC=E(k$);d$=$(yC,"Since, "),f$=b(yC,"CODE",{});var wC=E(f$);m$=$(wC,"count"),wC.forEach(u),v$=$(yC," never gets mutated or reassigned, Svelte optimises the compiled output by not defining "),g$=b(yC,"CODE",{});var OC=E(g$);E$=$(OC,"$$self.$$.update"),OC.forEach(u),b$=$(yC,"."),yC.forEach(u),$$=y(hC),y$=b(hC,"PRE",{class:!0}),E(y$).forEach(u),hC.forEach(u),w$=y(a),O$=b(a,"SECTION",{});var SC=E(O$);S$=b(SC,"H2",{});var TC=E(S$);T$=b(TC,"A",{href:!0,id:!0});var LC=E(T$);L$=$(LC,"Summary"),LC.forEach(u),TC.forEach(u),SC.forEach(u),N$=y(a),P$=b(a,"SECTION",{});var NC=E(P$);x$=b(NC,"H4",{});var PC=E(x$);C$=b(PC,"A",{href:!0,id:!0});var xC=E(C$);D$=$(xC,"1. Svelte keeps track of which variables are dirty and batched the DOM updates."),xC.forEach(u),PC.forEach(u),NC.forEach(u),A$=y(a),I$=b(a,"SECTION",{});var CC=E(I$);j$=b(CC,"H4",{});var DC=E(j$);R$=b(DC,"A",{href:!0,id:!0});var AC=E(R$);M$=$(AC,"2. Using bitmask, Svelte able to generate a more compact compiled code."),AC.forEach(u),DC.forEach(u),CC.forEach(u),H$=y(a),_$=b(a,"SECTION",{});var IC=E(_$);U$=b(IC,"H4",{});var jC=E(U$);G$=b(jC,"A",{href:!0,id:!0});var RC=E(G$);q$=$(RC,"3. Reactive declarations and statements are executed in batch, just like DOM updates"),RC.forEach(u),jC.forEach(u),IC.forEach(u),B$=y(a),z$=b(a,"SECTION",{});var MC=E(z$);F$=b(MC,"H2",{});var HC=E(F$);J$=b(HC,"A",{href:!0,id:!0});var _C=E(J$);W$=$(_C,"Closing Note"),_C.forEach(u),HC.forEach(u),Y$=y(MC),V$=b(MC,"P",{});var UC=E(V$);K$=$(UC,"If you wish to know more, "),Z$=b(UC,"A",{href:!0,rel:!0});var GC=E(Z$);Q$=$(GC,"follow me on Twitter"),GC.forEach(u),X$=$(UC,"."),UC.forEach(u),ay=y(MC),ny=b(MC,"P",{});var qC=E(ny);sy=$(qC,"I'll post it on Twitter when the next part is ready, where I'll be covering "),ty=b(qC,"A",{href:!0,rel:!0});var BC=E(ty);ey=$(BC,"logic blocks"),BC.forEach(u),oy=$(qC,", "),py=b(qC,"A",{href:!0,rel:!0});var zC=E(py);cy=$(zC,"slots"),zC.forEach(u),ry=$(qC,", "),ly=b(qC,"A",{href:!0,rel:!0});var FC=E(ly);iy=$(FC,"context"),FC.forEach(u),uy=$(qC,", and many others."),qC.forEach(u),hy=y(MC),ky=b(MC,"P",{});var JC=E(ky);dy=b(JC,"STRONG",{});var WC=E(dy);fy=$(WC,"â¬… â¬…  Previously in "),my=b(WC,"A",{href:!0});var YC=E(my);vy=$(YC,"Part 1"),YC.forEach(u),gy=$(WC,"."),WC.forEach(u),JC.forEach(u),Ey=y(MC),by=b(MC,"P",{});var VC=E(by);$y=b(VC,"STRONG",{});var KC=E($y);yy=$(KC,"âž¡ âž¡  Continue reading on "),wy=b(KC,"A",{href:!0});var ZC=E(wy);Oy=$(ZC,"Part 3"),ZC.forEach(u),Sy=$(KC,"."),KC.forEach(u),VC.forEach(u),MC.forEach(u),Ty=y(a),Ly=b(a,"SECTION",{});var QC=E(Ly);Ny=b(QC,"H2",{});var XC=E(Ny);Py=b(XC,"A",{href:!0,id:!0});var aD=E(Py);xy=$(aD,"Further Resources"),aD.forEach(u),XC.forEach(u),Cy=y(QC),Dy=b(QC,"UL",{});var nD=E(Dy);Ay=b(nD,"LI",{});var sD=E(Ay);Iy=$(sD,"Rich Harris shares about "),jy=b(sD,"A",{href:!0,rel:!0});var tD=E(jy);Ry=$(tD,"Bitmask Tracking at Svelte Society NYC"),tD.forEach(u),My=$(sD,"."),sD.forEach(u),Hy=y(nD),_y=b(nD,"LI",{});var eD=E(_y);Uy=$(eD,"Svelte Tutorial - "),Gy=b(eD,"A",{href:!0,rel:!0});var oD=E(Gy);qy=$(oD,"Reactivity"),oD.forEach(u),By=y(eD),zy=b(eD,"A",{href:!0,rel:!0});var pD=E(zy);Fy=$(pD,"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/"),pD.forEach(u),eD.forEach(u),Jy=y(nD),Wy=b(nD,"LI",{});var cD=E(Wy);Yy=b(cD,"A",{href:!0,rel:!0});var rD=E(Yy);Vy=$(rD,"The Art of Bitmasking"),rD.forEach(u),Ky=$(cD," by Shakib Ahmed"),cD.forEach(u),Zy=y(nD),Qy=b(nD,"LI",{});var lD=E(Qy);Xy=b(lD,"A",{href:!0,rel:!0});var iD=E(Xy);aw=$(iD,"Bitmasks: A very esoteric (and impractical) way of managing booleans"),iD.forEach(u),nw=$(lD," by Basti Ortiz"),lD.forEach(u),sw=y(nD),tw=b(nD,"LI",{});var uD=E(tw);ew=b(uD,"A",{href:!0,rel:!0});var hD=E(ew);ow=$(hD,"MDN: Bitwise Operators"),hD.forEach(u),uD.forEach(u),nD.forEach(u),QC.forEach(u),this.h()},h(){g(o,"href","#pre-v"),g(h,"href","#ctx"),g(w,"href","#dirty"),g(T,"href","#invalidate"),g(P,"href","#schedule-update"),g(A,"href","#tl-dr"),g(R,"href","#v"),g(U,"href","#bitmask"),g(B,"href","#bitmask-in-svelte"),g(W,"href","#destructuring"),g(K,"href","#tl-dr"),g(X,"href","#reactive-declaration"),g(ea,"href","#execution-of-all-reactive-declarations-and-statements-are-batched"),g(ca,"href","#the-value-of-reactive-variable-outside-of-reactive-declarations-and-statements-may-not-be-up-to-date"),g(ia,"href","#sorting-of-reactive-declarations-and-statements"),g(ka,"href","#reactive-variable-that-is-not-reactive"),g(ma,"href","#summary"),g($a,"href","#svelte-keeps-track-of-which-variables-are-dirty-and-batched-the-dom-updates"),g(Oa,"href","#using-bitmask-svelte-able-to-generate-a-more-compact-compiled-code"),g(La,"href","#reactive-declarations-and-statements-are-executed-in-batch-just-like-dom-updates"),g(xa,"href","#closing-note"),g(Aa,"href","#further-resources"),g(t,"class","sitemap"),g(t,"id","sitemap"),g(t,"role","navigation"),g(t,"aria-label","Table of Contents"),g(_a,"href","/compile-svelte-in-your-head-part-1/"),g(za,"href","/compile-svelte-in-your-head-part-1/"),g(an,"class","language-js"),g(dn,"href","https://github.com/sveltejs/svelte/blob/v3.20.1/CHANGELOG.md#3201"),g(dn,"rel","nofollow"),g(bn,"href","#pre-v"),g(bn,"id","pre-v"),g(Nn,"href","https://github.com/sveltejs/svelte/blob/master/CHANGELOG.md#3160"),g(Nn,"rel","nofollow"),g(Cn,"href","https://github.com/sveltejs/svelte/pull/3945"),g(Cn,"rel","nofollow"),g(Un,"href","/compile-svelte-in-your-head-part-1"),g(Jn,"href","#ctx"),g(Jn,"id","ctx"),g(ts,"href","/compile-svelte-in-your-head-part-1#instance-variable"),g(zs,"class","language-svelte"),g(Ws,"href","https://svelte.dev/repl/5b12ff52c2874f4dbb6405d9133b34da?version=3.20.1"),g(Ws,"rel","nofollow"),g(Ks,"class","language-js"),g(lt,"href","#dirty"),g(lt,"id","dirty"),g(bt,"class","language-svelte"),g(wt,"href","https://svelte.dev/repl/da579d0113b44f01b2b94893dce21487?version=3.20.1"),g(wt,"rel","nofollow"),g(It,"href","https://github.com/sveltejs/svelte/blob/v3.15.0/src/runtime/internal/Component.ts#L124"),g(It,"rel","nofollow"),g(Wt,"class","language-js"),g(ee,"class","language-js"),g(be,"class","language-js"),g(Ae,"href","#invalidate"),g(Ae,"id","invalidate"),g(co,"class","language-js"),g(Ao,"class","language-js"),g(Ro,"href","https://github.com/sveltejs/svelte/blob/v3.15.0/src/runtime/internal/Component.ts#L130-L136"),g(Ro,"rel","nofollow"),g(Zo,"class","language-js"),g(vp,"class","language-js"),g(Ap,"href","#schedule-update"),g(Ap,"id","schedule-update"),g(Bp,"href","https://github.com/sveltejs/svelte/blob/v3.20.1/CHANGELOG.md#3201"),g(Bp,"rel","nofollow"),g(Jp,"href","https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/"),g(Jp,"rel","nofollow"),g(sc,"class","language-js"),g(ic,"class","language-js"),g(kc,"href","https://github.com/sveltejs/svelte/blob/v3.15.0/src/runtime/internal/scheduler.ts#L14"),g(kc,"rel","nofollow"),g(Ec,"class","language-svelte"),g(yc,"href","https://svelte.dev/repl/761a0a6cc2834afb842942e1d23875b1?version=3.20.1"),g(yc,"rel","nofollow"),g(ti,"href","#tl-dr"),g(ti,"id","tl-dr"),g(_i,"href","#v"),g(_i,"id","v"),g(zi,"href","https://github.com/sveltejs/svelte/pull/3945"),g(zi,"rel","nofollow"),g(au,"class","language-js"),g(ou,"class","language-js"),g(lu,"href","https://en.wikipedia.org/wiki/Mask_(computing)"),g(lu,"rel","nofollow"),g(ku,"class","language-js"),g(bu,"href","#bitmask"),g(bu,"id","bitmask"),g(Nu,"href","https://blog.bitsrc.io/the-art-of-bitmasking-ec58ab1b4c03"),g(Nu,"rel","nofollow"),g(Cu,"href","https://dev.to/somedood/bitmasks-a-very-esoteric-and-impractical-way-of-managing-booleans-1hlf"),g(Cu,"rel","nofollow"),g(yh,"href","https://en.wikipedia.org/wiki/Bit_numbering#Least_significant_bit"),g(yh,"rel","nofollow"),g(Sh,"href","https://en.wikipedia.org/wiki/Bit_numbering#Most_significant_bit"),g(Sh,"rel","nofollow"),g(Hh,"href","https://2ality.com/2012/04/number-encoding.html"),g(Hh,"rel","nofollow"),g(Gh,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators"),g(Gh,"rel","nofollow"),g(Wh,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators"),g(Wh,"rel","nofollow"),g(Zh,"class","language-js"),g(nk,"href","https://en.wikipedia.org/wiki/Mask_(computing)"),g(nk,"rel","nofollow"),g(kk,"href","#bitmask-in-svelte"),g(kk,"id","bitmask-in-svelte"),g(Ek,"class","language-js"),g(Ok,"class","language-js"),g(Hk,"class","language-js"),g(Qk,"class","language-js"),g(rd,"class","language-js"),g(kd,"class","language-js"),g(Bd,"href","#destructuring"),g(Bd,"id","destructuring"),g(pf,"class","language-js"),g(uf,"href","#tl-dr"),g(uf,"id","tl-dr"),g(Pf,"href","#reactive-declaration"),g(Pf,"id","reactive-declaration"),g(If,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label"),g(If,"rel","nofollow"),g(Uf,"class","language-svelte"),g(Bf,"href","https://svelte.dev/repl/e37329dd126448b2aa0679c08993f9a8?version=3.20.1"),g(Bf,"rel","nofollow"),g(Yf,"href","/compile-svelte-in-your-head-part-1/#instanceself-props-invalidate"),g(am,"class","language-js"),g(om,"class","language-svelte"),g(rm,"href","https://svelte.dev/repl/fc6995856489402d90291c4c30952939?version=3.20.1"),g(rm,"rel","nofollow"),g(um,"class","language-js"),g(Lm,"href","https://en.wikipedia.org/wiki/NOP_(code)"),g(Lm,"rel","nofollow"),g(xm,"href","https://github.com/sveltejs/svelte/blob/v3.20.1/src/runtime/internal/Component.ts#L111"),g(xm,"rel","nofollow"),g(fv,"class","language-svelte"),g(gv,"href","https://svelte.dev/repl/fc6995856489402d90291c4c30952939?version=3.20.1"),g(gv,"rel","nofollow"),g(Bv,"class","language-js"),g(rg,"href","#execution-of-all-reactive-declarations-and-statements-are-batched"),g(rg,"id","execution-of-all-reactive-declarations-and-statements-are-batched"),g(dg,"class","language-svelte"),g(vg,"href","https://svelte.dev/repl/941195f1cd5248e9bd14613f9513ad1d?version=3.20.1"),g(vg,"rel","nofollow"),g(Pg,"href","#schedule_update"),g(nb,"class","language-js"),g(ob,"href","#the-value-of-reactive-variable-outside-of-reactive-declarations-and-statements-may-not-be-up-to-date"),g(ob,"id","the-value-of-reactive-variable-outside-of-reactive-declarations-and-statements-may-not-be-up-to-date"),g(ub,"class","language-svelte"),g(db,"href","https://svelte.dev/repl/437548d5c7044cb59bfd0c8a0f4c725d?version=3.20.1"),g(db,"rel","nofollow"),g(wb,"class","language-svelte"),g(Lb,"href","#sorting-of-reactive-declarations-and-statements"),g(Lb,"id","sorting-of-reactive-declarations-and-statements"),g(_b,"class","language-js"),g(Bb,"href","#reactive-variable-that-is-not-reactive"),g(Bb,"id","reactive-variable-that-is-not-reactive"),g(c$,"class","language-svelte"),g(i$,"href","https://svelte.dev/repl/af86472e1f494cfea2efa494f63fff08?version=3.20.1"),g(i$,"rel","nofollow"),g(y$,"class","language-js"),g(T$,"href","#summary"),g(T$,"id","summary"),g(C$,"href","#svelte-keeps-track-of-which-variables-are-dirty-and-batched-the-dom-updates"),g(C$,"id","svelte-keeps-track-of-which-variables-are-dirty-and-batched-the-dom-updates"),g(R$,"href","#using-bitmask-svelte-able-to-generate-a-more-compact-compiled-code"),g(R$,"id","using-bitmask-svelte-able-to-generate-a-more-compact-compiled-code"),g(G$,"href","#reactive-declarations-and-statements-are-executed-in-batch-just-like-dom-updates"),g(G$,"id","reactive-declarations-and-statements-are-executed-in-batch-just-like-dom-updates"),g(J$,"href","#closing-note"),g(J$,"id","closing-note"),g(Z$,"href","https://twitter.com/lihautan"),g(Z$,"rel","nofollow"),g(ty,"href","https://svelte.dev/tutorial/if-blocks"),g(ty,"rel","nofollow"),g(py,"href","https://svelte.dev/tutorial/slots"),g(py,"rel","nofollow"),g(ly,"href","https://svelte.dev/tutorial/context-api"),g(ly,"rel","nofollow"),g(my,"href","/compile-svelte-in-your-head-part-1/"),g(wy,"href","/compile-svelte-in-your-head-part-3/"),g(Py,"href","#further-resources"),g(Py,"id","further-resources"),g(jy,"href","https://www.youtube.com/watch?v=zq6PpM5t3z0&t=2530s"),g(jy,"rel","nofollow"),g(Gy,"href","https://svelte.dev/tutorial/reactive-assignments"),g(Gy,"rel","nofollow"),g(zy,"href","https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/"),g(zy,"rel","nofollow"),g(Yy,"href","https://blog.bitsrc.io/the-art-of-bitmasking-ec58ab1b4c03"),g(Yy,"rel","nofollow"),g(Xy,"href","https://dev.to/somedood/bitmasks-a-very-esoteric-and-impractical-way-of-managing-booleans-1hlf"),g(Xy,"rel","nofollow"),g(ew,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators"),g(ew,"rel","nofollow")},m(a,n){i(a,s,n),l(s,t),l(t,e),l(e,o),l(o,p),l(t,c),l(c,r),l(r,h),l(h,d),l(c,v),l(v,w),l(w,O),l(c,S),l(S,T),l(T,L),l(c,N),l(N,P),l(P,x),l(c,C),l(C,D),l(D,A),l(A,I),l(t,j),l(j,R),l(R,M),l(t,H),l(H,_),l(_,U),l(U,G),l(H,q),l(q,B),l(B,z),l(H,F),l(F,J),l(J,W),l(W,Y),l(F,V),l(V,K),l(K,Z),l(t,Q),l(Q,X),l(X,aa),l(t,na),l(na,sa),l(sa,ta),l(ta,ea),l(ea,oa),l(sa,pa),l(pa,ca),l(ca,ra),l(na,la),l(la,ia),l(ia,ua),l(na,ha),l(ha,ka),l(ka,da),l(t,fa),l(fa,ma),l(ma,va),l(t,ga),l(ga,Ea),l(Ea,ba),l(ba,$a),l($a,ya),l(Ea,wa),l(wa,Oa),l(Oa,Sa),l(Ea,Ta),l(Ta,La),l(La,Na),l(t,Pa),l(Pa,xa),l(xa,Ca),l(t,Da),l(Da,Aa),l(Aa,Ia),i(a,ja,n),i(a,Ra,n),l(Ra,Ma),l(Ma,Ha),l(Ma,_a),l(_a,Ua),l(Ma,Ga),i(a,qa,n),i(a,Ba,n),l(Ba,za),l(za,Fa),l(Ba,Ja),l(Ba,Wa),l(Wa,Ya),l(Ba,Va),l(Ba,Ka),l(Ka,Za),l(Ba,Qa),i(a,Xa,n),i(a,an,n),an.innerHTML='<code class="language-js"><span class="token comment">// conceptually...</span>\n<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fragment <span class="token operator">=</span> <span class="token function">create_fragment</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// to track which variable has changed</span>\n<span class="token keyword">const</span> dirty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">$$invalidate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">variable<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// update ctx</span>\n  ctx<span class="token punctuation">[</span>variable<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>\n  <span class="token comment">// mark variable as dirty</span>\n  dirty<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>variable<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// schedules update for the component</span>\n  <span class="token function">scheduleUpdate</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n\n<span class="token comment">// gets called when update is scheduled</span>\n<span class="token keyword">function</span> <span class="token function">flushUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// update the fragment</span>\n  fragment<span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> dirty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// clear the dirty</span>\n  dirty<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(a,nn,n),i(a,sn,n),l(sn,tn),l(sn,en),l(en,on),l(sn,pn),l(sn,cn),l(cn,rn),l(sn,ln),i(a,un,n),i(a,hn,n),l(hn,kn),l(hn,dn),l(dn,fn),l(hn,mn),i(a,vn,n),i(a,gn,n),l(gn,En),l(En,bn),l(bn,$n),l(gn,yn),l(gn,wn),l(wn,On),l(wn,Sn),l(Sn,Tn),l(wn,Ln),l(wn,Nn),l(Nn,Pn),l(wn,xn),l(wn,Cn),l(Cn,Dn),l(wn,An),l(wn,In),l(In,jn),l(wn,Rn),l(gn,Mn),l(gn,Hn),l(Hn,_n),l(Hn,Un),l(Un,Gn),l(Hn,qn),i(a,Bn,n),i(a,zn,n),l(zn,Fn),l(Fn,Jn),l(Jn,Wn),l(zn,Yn),l(zn,Vn),l(Vn,Kn),l(Vn,Zn),l(Zn,Qn),l(Vn,Xn),l(zn,as),l(zn,ns),l(ns,ss),l(ns,ts),l(ts,es),l(ns,os),l(zn,ps),l(zn,cs),l(cs,rs),l(rs,ls),l(rs,is),l(is,us),l(rs,hs),l(cs,ks),l(cs,ds),l(ds,fs),l(cs,ms),l(cs,vs),l(vs,gs),l(zn,Es),l(zn,bs),l(bs,$s),l(zn,ys),l(zn,ws),l(ws,Os),l(zn,Ss),l(zn,Ts),l(Ts,Ls),l(Ts,Ns),l(Ns,Ps),l(Ts,xs),l(Ts,Cs),l(Cs,Ds),l(Ts,As),l(zn,Is),l(zn,js),l(js,Rs),l(js,Ms),l(Ms,Hs),l(js,_s),l(js,Us),l(Us,Gs),l(js,qs),l(zn,Bs),l(zn,zs),zs.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">\'world\'</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    name <span class="token operator">=</span> <span class="token string">\'Svelte\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>update<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token language-javascript"><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code>',l(zn,Fs),l(zn,Js),l(Js,Ws),l(Ws,Ys),l(zn,Vs),l(zn,Ks),Ks.innerHTML='<code class="language-js"><span class="token comment">// ...</span>\n<span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">\'world\'</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'name\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">\'Svelte\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> update <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// ...some where in &#96;create_fragment&#96;</span>\nctx<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &#96;world&#96; scoped in the &#96;instance&#96; closure</span></code>',l(zn,Zs),l(zn,Qs),l(Qs,Xs),l(Qs,at),l(at,nt),l(Qs,st),l(Qs,tt),l(tt,et),l(Qs,ot),i(a,pt,n),i(a,ct,n),l(ct,rt),l(rt,lt),l(lt,it),l(ct,ut),l(ct,ht),l(ht,kt),l(kt,dt),l(ht,ft),l(ct,mt),l(ct,vt),l(vt,gt),l(ct,Et),l(ct,bt),bt.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> agility <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">incrementAgility</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    agility <span class="token operator">++</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">function</span> <span class="token function">incrementPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    power <span class="token operator">++</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">function</span> <span class="token function">levelUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    agility <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    power <span class="token operator">+=</span> <span class="token number">7</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\nAgility: <span class="token language-javascript"><span class="token punctuation">&#123;</span>agility<span class="token punctuation">&#125;</span></span>\nPower: <span class="token language-javascript"><span class="token punctuation">&#123;</span>power<span class="token punctuation">&#125;</span></span>\nStats: <span class="token language-javascript"><span class="token punctuation">&#123;</span>agility <span class="token operator">*</span> power<span class="token punctuation">&#125;</span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>incrementAgility<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>+ Agility<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>incrementPower<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>+ Power<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>levelUp<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>Level Up<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code>',l(ct,$t),l(ct,yt),l(yt,wt),l(wt,Ot),l(ct,St),l(ct,Tt),l(Tt,Lt),l(Tt,Nt),l(Nt,Pt),l(Tt,xt),l(Tt,Ct),l(Ct,Dt),l(Tt,At),l(Tt,It),l(It,jt),l(Tt,Rt),l(ct,Mt),l(ct,Ht),l(Ht,_t),l(Ht,Ut),l(Ut,Gt),l(Ht,qt),l(Ht,Bt),l(Bt,zt),l(Ht,Ft),l(ct,Jt),l(ct,Wt),Wt.innerHTML='<code class="language-js"><span class="token punctuation">&#123;</span> agility<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></code>',l(ct,Yt),l(ct,Vt),l(Vt,Kt),l(Vt,Zt),l(Zt,Qt),l(Vt,Xt),l(Vt,ae),l(ae,ne),l(Vt,se),l(ct,te),l(ct,ee),ee.innerHTML='<code class="language-js"><span class="token punctuation">&#123;</span> agility<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> power<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span></code>',l(ct,oe),l(ct,pe),l(pe,ce),l(ce,re),l(pe,le),l(ct,ie),l(ct,ue),l(ue,he),l(ue,ke),l(ke,de),l(ue,fe),l(ue,me),l(me,ve),l(ue,ge),l(ct,Ee),l(ct,be),be.innerHTML='<code class="language-js"><span class="token comment">// NOTE: $$.dirty is passed into the &#96;p&#96; function as &#96;changed&#96;</span>\n<span class="token function">p</span><span class="token punctuation">(</span><span class="token parameter">changed<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// checked if agility has changed before update the agility text</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>changed<span class="token punctuation">.</span>agility<span class="token punctuation">)</span> <span class="token function">set_data</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>agility<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>changed<span class="token punctuation">.</span>power<span class="token punctuation">)</span> <span class="token function">set_data</span><span class="token punctuation">(</span>t3<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>power<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// if either agility or power has changed, update the stats text</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>changed<span class="token punctuation">.</span>agility <span class="token operator">||</span> changed<span class="token punctuation">.</span>power<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t5_value <span class="token operator">!==</span> <span class="token punctuation">(</span>t5_value <span class="token operator">=</span> ctx<span class="token punctuation">.</span>agility <span class="token operator">*</span> ctx<span class="token punctuation">.</span>power <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">set_data</span><span class="token punctuation">(</span>t5<span class="token punctuation">,</span> t5_value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(ct,$e),l(ct,ye),l(ye,we),l(ye,Oe),l(Oe,Se),l(ye,Te),l(ye,Le),l(Le,Ne),l(ye,Pe),i(a,xe,n),i(a,Ce,n),l(Ce,De),l(De,Ae),l(Ae,Ie),l(Ce,je),l(Ce,Re),l(Re,Me),l(Me,He),l(Re,_e),l(Ce,Ue),l(Ce,Ge),l(Ge,qe),l(Ce,Be),l(Ce,ze),l(ze,Fe),l(Fe,Je),l(Fe,We),l(We,Ye),l(ze,Ve),l(ze,Ke),l(Ke,Ze),l(Ke,Qe),l(Qe,Xe),l(Ce,ao),l(Ce,no),l(no,so),l(no,to),l(to,eo),l(no,oo),l(Ce,po),l(Ce,co),co.innerHTML='<code class="language-js">name <span class="token operator">=</span> <span class="token string">\'Svelte\'</span><span class="token punctuation">;</span>\ncount<span class="token operator">++</span><span class="token punctuation">;</span>\nfoo<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nbar <span class="token operator">=</span> baz <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n<span class="token comment">// compiled into</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'name\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">\'Svelte\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'count\'</span><span class="token punctuation">,</span> count<span class="token operator">++</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'foo\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>foo<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'bar\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>bar <span class="token operator">=</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'baz\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>baz <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',l(Ce,ro),l(Ce,lo),l(lo,io),l(lo,uo),l(uo,ho),l(lo,ko),l(Ce,fo),l(Ce,mo),l(mo,vo),l(vo,go),l(vo,Eo),l(Eo,bo),l(mo,$o),l(mo,yo),l(yo,wo),l(yo,Oo),l(Oo,So),l(mo,To),l(mo,Lo),l(Lo,No),l(mo,Po),l(mo,xo),l(xo,Co),l(Ce,Do),l(Ce,Ao),Ao.innerHTML='<code class="language-js"><span class="token comment">// src/runtime/internal/Component.ts</span>\n<span class="token keyword">const</span> <span class="token function-variable function">$$invalidate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> value <span class="token operator">=</span> ret</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>$$<span class="token punctuation">.</span>ctx <span class="token operator">&amp;&amp;</span> <span class="token function">not_equal</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>ctx<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// 1. update the variable in $$.ctx</span>\n    $$<span class="token punctuation">.</span>ctx<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>\n    <span class="token comment">// ...</span>\n    <span class="token comment">// 2a. mark the variable in $$.dirty</span>\n    <span class="token function">make_dirty</span><span class="token punctuation">(</span>component<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token comment">// 4. return the value of the assignment or update expression</span>\n  <span class="token keyword">return</span> ret<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n\n<span class="token comment">// src/runtime/internal/Component.ts</span>\n<span class="token keyword">function</span> <span class="token function">make_dirty</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>component<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    dirty_components<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 3. schedule an update</span>\n    <span class="token function">schedule_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// initialise $$.dirty</span>\n    component<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">=</span> <span class="token function">blank_object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token comment">// 2b. mark the variable in $$.dirty</span>\n  component<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(Ce,Io),l(Ce,jo),l(jo,Ro),l(Ro,Mo),l(Ce,Ho),l(Ce,_o),l(_o,Uo),l(_o,Go),l(Go,qo),l(_o,Bo),l(Ce,zo),l(Ce,Fo),l(Fo,Jo),l(Fo,Wo),l(Wo,Yo),l(Fo,Vo),l(Ce,Ko),l(Ce,Zo),Zo.innerHTML='<code class="language-js">obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>\n  b<span class="token punctuation">:</span> <span class="token punctuation">(</span>foo <span class="token operator">=</span> bar<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n\nobj<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">\'hello\'</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">(</span><span class="token punctuation">&#123;</span> a<span class="token punctuation">:</span> c <span class="token operator">=</span> d<span class="token operator">++</span><span class="token punctuation">,</span> b <span class="token punctuation">&#125;</span> <span class="token operator">=</span> baz <span class="token operator">=</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// assuming all variables are referenced in the template</span>\n<span class="token comment">// the above compiles into</span>\n\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span>\n  <span class="token string">\'obj\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">(</span>obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>\n    b<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'foo\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>foo <span class="token operator">=</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'bar\'</span><span class="token punctuation">,</span> bar<span class="token operator">++</span><span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'obj\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">\'hello\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span>\n  <span class="token string">\'c\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> a<span class="token punctuation">:</span> c <span class="token operator">=</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'d\'</span><span class="token punctuation">,</span> d<span class="token operator">++</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> b <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'baz\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>baz <span class="token operator">=</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  c<span class="token punctuation">,</span>\n  <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'b\'</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code>',l(Ce,Qo),l(Ce,Xo),l(Xo,ap),l(Ce,np),l(Ce,sp),l(sp,tp),l(sp,ep),l(ep,op),l(sp,pp),l(sp,cp),l(cp,rp),l(sp,lp),l(Ce,ip),l(Ce,up),l(up,hp),l(up,kp),l(kp,dp),l(up,fp),l(Ce,mp),l(Ce,vp),vp.innerHTML='<code class="language-js">obj<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">\'hello\'</span><span class="token punctuation">;</span>\n\n<span class="token comment">// compiles into</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'obj\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">\'hello\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// - it invalidates &#96;obj&#96;</span>\n<span class="token comment">// - it returns the evaluated value of the expression &#96;obj.c = \'hello\'&#96;, which is \'hello\'</span></code>',l(Ce,gp),l(Ce,Ep),l(Ep,bp),l(Ep,$p),l($p,yp),l(Ep,wp),l(Ep,Op),l(Op,Sp),l(Ep,Tp),l(Ep,Lp),l(Lp,Np),l(Ep,Pp),i(a,xp,n),i(a,Cp,n),l(Cp,Dp),l(Dp,Ap),l(Ap,Ip),l(Cp,jp),l(Cp,Rp),l(Rp,Mp),l(Mp,Hp),l(Rp,_p),l(Cp,Up),l(Cp,Gp),l(Gp,qp),l(Gp,Bp),l(Bp,zp),l(Gp,Fp),l(Gp,Jp),l(Jp,Wp),l(Gp,Yp),l(Gp,Vp),l(Vp,Kp),l(Gp,Zp),l(Cp,Qp),l(Cp,Xp),l(Xp,ac),l(Cp,nc),l(Cp,sc),sc.innerHTML='<code class="language-js"><span class="token comment">// src/runtime/internal/scheduler.ts</span>\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">schedule_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>update_scheduled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    update_scheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token comment">// NOTE: &#96;flush&#96; will do the DOM update</span>\n    <span class="token comment">// we push it into the microtask queue</span>\n<span class="prism-highlight-code-line">    resolved_promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flush<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',l(Cp,tc),l(Cp,ec),l(ec,oc),l(ec,pc),l(pc,cc),l(ec,rc),l(Cp,lc),l(Cp,ic),ic.innerHTML='<code class="language-js"><span class="token comment">// src/runtime/internal/scheduler.ts</span>\n<span class="token keyword">function</span> <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token comment">// for each componnet in &#96;dirty_components&#96;</span>\n<span class="prism-highlight-code-line">  <span class="token function">update</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>$$<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// src/runtime/internal/scheduler.ts</span>\n<span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">$$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>$$<span class="token punctuation">.</span>fragment <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// NOTE: this will be important later</span>\n    $$<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">run_all</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>before_update<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// calls the &#96;p&#96; function</span>\n<span class="prism-highlight-code-line">    $$<span class="token punctuation">.</span>fragment <span class="token operator">&amp;&amp;</span> $$<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">,</span> $$<span class="token punctuation">.</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n    <span class="token comment">// resets &#96;$$.dirty&#96;</span>\n    $$<span class="token punctuation">.</span>dirty <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n    $$<span class="token punctuation">.</span>after_update<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>add_render_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',l(Cp,uc),l(Cp,hc),l(hc,kc),l(kc,dc),l(Cp,fc),l(Cp,mc),l(mc,vc),l(Cp,gc),l(Cp,Ec),Ec.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> givenName<span class="token punctuation">,</span> familyName<span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">;</span>\n    familyName <span class="token operator">=</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\nName: <span class="token language-javascript"><span class="token punctuation">&#123;</span>familyName<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>givenName<span class="token punctuation">&#125;</span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>update<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>Update<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code>',l(Cp,bc),l(Cp,$c),l($c,yc),l(yc,wc),l(Cp,Oc),l(Cp,Sc),l(Sc,Tc),l(Sc,Lc),l(Lc,Nc),l(Sc,Pc),l(Sc,xc),l(xc,Cc),l(Sc,Dc),l(Cp,Ac),l(Cp,Ic),l(Ic,jc),l(jc,Rc),l(jc,Mc),l(Mc,Hc),l(jc,_c),l(jc,Uc),l(Uc,Gc),l(jc,qc),l(Ic,Bc),l(Ic,zc),l(zc,Fc),l(Fc,Jc),l(Ic,Wc),l(Ic,Yc),l(Yc,Vc),l(Yc,Kc),l(Kc,Zc),l(Yc,Qc),l(Yc,Xc),l(Xc,ar),l(Ic,nr),l(Ic,sr),l(sr,tr),l(sr,er),l(er,or),l(Ic,pr),l(Ic,cr),l(cr,rr),l(cr,lr),l(lr,ir),l(cr,ur),l(Ic,hr),l(Ic,kr),l(kr,dr),l(dr,fr),l(Ic,mr),l(Ic,vr),l(vr,gr),l(vr,Er),l(Er,br),l(vr,$r),l(vr,yr),l(yr,wr),l(Ic,Or),l(Ic,Sr),l(Sr,Tr),l(Sr,Lr),l(Lr,Nr),l(Ic,Pr),l(Ic,xr),l(xr,Cr),l(xr,Dr),l(Dr,Ar),l(xr,Ir),l(Ic,jr),l(Ic,Rr),l(Rr,Mr),l(Mr,Hr),l(Ic,_r),l(Ic,Ur),l(Ur,Gr),l(Gr,qr),l(Ic,Br),l(Ic,zr),l(zr,Fr),l(Fr,Jr),l(zr,Wr),l(zr,Yr),l(Yr,Vr),l(zr,Kr),l(Ic,Zr),l(Ic,Qr),l(Qr,Xr),l(Qr,al),l(al,nl),l(Qr,sl),l(Qr,tl),l(tl,el),l(el,ol),l(ol,pl),l(el,cl),l(el,rl),l(rl,ll),l(tl,il),l(tl,ul),l(ul,hl),l(hl,kl),l(ul,dl),l(ul,fl),l(fl,ml),l(Ic,vl),l(Ic,gl),l(gl,El),l(gl,bl),l(bl,$l),l(gl,yl),l(gl,wl),l(wl,Ol),l(Ol,Sl),l(Ol,Tl),l(Tl,Ll),l(Ol,Nl),l(Ol,Pl),l(Pl,xl),l(wl,Cl),l(wl,Dl),l(Dl,Al),l(Dl,Il),l(Il,jl),l(Dl,Rl),l(Dl,Ml),l(Ml,Hl),l(Ic,_l),l(Ic,Ul),l(Ul,Gl),l(Ul,ql),l(ql,Bl),l(Ul,zl),l(Ul,Fl),l(Fl,Jl),l(Ic,Wl),l(Ic,Yl),l(Yl,Vl),l(Ic,Kl),l(Ic,Zl),l(Zl,Ql),l(Ql,Xl),i(a,ai,n),i(a,ni,n),l(ni,si),l(si,ti),l(ti,ei),l(ni,oi),l(ni,pi),l(pi,ci),l(ci,ri),l(ci,li),l(li,ii),l(ci,ui),l(ci,hi),l(hi,ki),l(ci,di),l(ci,fi),l(fi,mi),l(ci,vi),l(pi,gi),l(pi,Ei),l(Ei,bi),l(pi,$i),l(pi,yi),l(yi,wi),l(yi,Oi),l(Oi,Si),l(yi,Ti),l(pi,Li),l(pi,Ni),l(Ni,Pi),l(Ni,xi),l(xi,Ci),l(Ni,Di),l(Ni,Ai),l(Ai,Ii),l(Ni,ji),i(a,Ri,n),i(a,Mi,n),l(Mi,Hi),l(Hi,_i),l(_i,Ui),l(Mi,Gi),l(Mi,qi),l(qi,Bi),l(qi,zi),l(zi,Fi),l(qi,Ji),l(qi,Wi),l(Wi,Yi),l(qi,Vi),l(Mi,Ki),l(Mi,Zi),l(Zi,Qi),l(Mi,Xi),l(Mi,au),au.innerHTML='<code class="language-js">$$<span class="token punctuation">.</span>diry <span class="token operator">=</span> <span class="token punctuation">&#123;</span> givenName<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> familyName<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',l(Mi,nu),l(Mi,su),l(su,tu),l(Mi,eu),l(Mi,ou),ou.innerHTML='<code class="language-js">givenName <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>\nfamilyName <span class="token operator">-</span><span class="token operator">></span> <span class="token number">1</span></code>',l(Mi,pu),l(Mi,cu),l(cu,ru),l(cu,lu),l(lu,iu),l(cu,uu),l(Mi,hu),l(Mi,ku),ku.innerHTML='<code class="language-js">$$<span class="token punctuation">.</span>dirty <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0b0000_0011</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token comment">// the 0th and 1st bit marked true</span></code>',l(Mi,du),l(Mi,fu),l(fu,mu),i(a,vu,n),i(a,gu,n),l(gu,Eu),l(Eu,bu),l(bu,$u),l(gu,yu),l(gu,wu),l(wu,Ou),l(gu,Su),l(gu,Tu),l(Tu,Lu),l(Tu,Nu),l(Nu,Pu),l(Tu,xu),l(Tu,Cu),l(Cu,Du),l(Tu,Au),l(gu,Iu),l(gu,ju),l(ju,Ru),l(ju,Mu),l(Mu,Hu),l(ju,_u),l(ju,Uu),l(Uu,Gu),l(ju,qu),l(ju,Bu),l(Bu,zu),l(ju,Fu),l(ju,Ju),l(Ju,Wu),l(ju,Yu),l(ju,Vu),l(Vu,Ku),l(ju,Zu),l(ju,Qu),l(Qu,Xu),l(ju,ah),l(gu,nh),l(gu,sh),l(sh,th),l(sh,eh),l(eh,oh),l(sh,ph),l(sh,ch),l(ch,rh),l(sh,lh),l(gu,ih),l(gu,uh),l(uh,hh),l(uh,kh),l(kh,dh),l(uh,fh),l(uh,mh),l(mh,vh),l(uh,gh),l(uh,Eh),l(Eh,bh),l(uh,$h),l(uh,yh),l(yh,wh),l(uh,Oh),l(uh,Sh),l(Sh,Th),l(uh,Lh),l(gu,Nh),l(gu,Ph),l(Ph,xh),l(xh,Ch),l(gu,Dh),l(gu,Ah),l(Ah,Ih),l(gu,jh),l(gu,Rh),l(Rh,Mh),l(Rh,Hh),l(Hh,_h),l(Rh,Uh),l(Rh,Gh),l(Gh,qh),l(Rh,Bh),l(gu,zh),l(gu,Fh),l(Fh,Jh),l(Fh,Wh),l(Wh,Yh),l(Fh,Vh),l(gu,Kh),l(gu,Zh),Zh.innerHTML='<code class="language-js"><span class="token comment">// set 1st boolean to true</span>\n<span class="token number">0b0101</span> <span class="token operator">|</span> <span class="token number">0b0010</span> <span class="token operator">=</span> <span class="token number">0b0111</span><span class="token punctuation">;</span>\n\n<span class="token comment">// set 2nd boolean to false</span>\n<span class="token number">0b0101</span> <span class="token operator">&amp;</span> <span class="token number">0b1011</span> <span class="token operator">=</span> <span class="token number">0b0001</span><span class="token punctuation">;</span>\n\n<span class="token comment">// is 2nd boolean true?</span>\n<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0b0101</span> <span class="token operator">&amp;</span> <span class="token number">0b0100</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n\n<span class="token comment">// NOTE: You can test multiple boolean values at once</span>\n<span class="token comment">// is 2nd and 3rd boolean true?</span>\n<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0b0101</span> <span class="token operator">&amp;</span> <span class="token number">0b1100</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code>',l(gu,Qh),l(gu,Xh),l(Xh,ak),l(Xh,nk),l(nk,sk),l(Xh,tk),l(gu,ek),l(gu,ok),l(ok,pk),l(ok,ck),l(ck,rk),l(ok,lk),i(a,ik,n),i(a,uk,n),l(uk,hk),l(hk,kk),l(kk,dk),l(uk,fk),l(uk,mk),l(mk,vk),l(uk,gk),l(uk,Ek),Ek.innerHTML='<code class="language-js">givenName <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>\nfirstName <span class="token operator">-</span><span class="token operator">></span> <span class="token number">1</span></code>',l(uk,bk),l(uk,$k),l($k,yk),l(uk,wk),l(uk,Ok),Ok.innerHTML='<code class="language-js"><span class="token comment">// Previous</span>\n<span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n<span class="prism-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> givenName<span class="token punctuation">,</span> familyName <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span>\n<span class="token punctuation">&#125;</span>\n<span class="token comment">// Now</span>\n<span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n<span class="prism-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">[</span>givenName<span class="token punctuation">,</span> familyName<span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="token punctuation">&#125;</span></code>',l(uk,Sk),l(uk,Tk),l(Tk,Lk),l(Tk,Nk),l(Nk,Pk),l(Tk,xk),l(Tk,Ck),l(Ck,Dk),l(Tk,Ak),l(Tk,Ik),l(Ik,jk),l(Tk,Rk),l(uk,Mk),l(uk,Hk);Hk.innerHTML='<code class="language-js"><span class="token comment">// Previous</span>\n$$<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>givenName <span class="token operator">+</span> $$<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>familyName<span class="token punctuation">;</span>\n<span class="token comment">// Now</span>\n$$<span class="token punctuation">.</span>ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> $$<span class="token punctuation">.</span>ctx<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code>',l(uk,_k),l(uk,Uk),l(Uk,Gk),l(Uk,qk),l(qk,Bk),l(Uk,zk),l(Uk,Fk),l(Fk,Jk),l(Uk,Wk),l(Uk,Yk),l(Yk,Vk),l(Uk,Kk),l(uk,Zk),l(uk,Qk),Qk.innerHTML='<code class="language-js"><span class="token comment">// Previous</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token string">\'givenName\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Now</span>\n<span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',l(uk,Xk),l(uk,ad),l(ad,nd),l(nd,sd),l(ad,td),l(uk,ed),l(uk,od),l(od,pd),l(uk,cd),l(uk,rd),rd.innerHTML='<code class="language-js"><span class="token comment">// Previous</span>\n$$<span class="token punctuation">.</span>dirty<span class="token punctuation">[</span><span class="token string">\'givenName\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n<span class="token comment">// Now</span>\n$$<span class="token punctuation">.</span>dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">|=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span></code>',l(uk,ld),l(uk,id),l(id,ud),l(uk,hd),l(uk,kd),kd.innerHTML='<code class="language-js"><span class="token comment">// Previous</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>$dirty<span class="token punctuation">.</span>givenName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>$dirty<span class="token punctuation">.</span>givenName <span class="token operator">&amp;&amp;</span> $dirty<span class="token punctuation">.</span>familyName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n\n<span class="token comment">// Now</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>$dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>$dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span></code>',l(uk,dd),l(uk,fd),l(fd,md),l(fd,vd),l(vd,gd),l(fd,Ed),l(fd,bd),l(bd,$d),l(fd,yd),l(fd,wd),l(wd,Od),l(fd,Sd),l(uk,Td),l(uk,Ld),l(Ld,Nd),l(Nd,Pd),l(Ld,xd),l(Ld,Cd),l(Cd,Dd),l(Ld,Ad),l(Ld,Id),l(Id,jd),l(Ld,Rd),l(Ld,Md),l(Md,Hd),l(Ld,_d),i(a,Ud,n),i(a,Gd,n),l(Gd,qd),l(qd,Bd),l(Bd,zd),l(Bd,Fd),l(Fd,Jd),l(Gd,Wd),l(Gd,Yd),l(Yd,Vd),l(Yd,Kd),l(Kd,Zd),l(Yd,Qd),l(Yd,Xd),l(Xd,af),l(Yd,nf),l(Yd,sf),l(sf,tf),l(Yd,ef),l(Gd,of),l(Gd,pf),pf.innerHTML='<code class="language-js"><span class="token comment">// If less than 32 variables,</span>\n<span class="token comment">// Instead of having &#96;dirty[0]&#96; all the time,</span>\np<span class="token punctuation">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> dirty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span>\n<span class="token comment">// Svelte optimises the compiled code by </span>\n<span class="token comment">// destruct the array in the arguments</span>\np<span class="token punctuation">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token punctuation">[</span>dirty<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// If more than or equal to 32 variables</span>\np<span class="token punctuation">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> dirty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(a,cf,n),i(a,rf,n),l(rf,lf),l(lf,uf),l(uf,hf),l(rf,kf),l(rf,df),l(df,ff),l(ff,mf),l(ff,vf),l(vf,gf),l(ff,Ef),l(ff,bf),l(bf,$f),l(ff,yf),l(df,wf),l(df,Of),l(Of,Sf),i(a,Tf,n),i(a,Lf,n),l(Lf,Nf),l(Nf,Pf),l(Pf,xf),l(Lf,Cf),l(Lf,Df),l(Df,Af),l(Df,If),l(If,jf),l(Df,Rf),l(Df,Mf),l(Mf,Hf),l(Lf,_f),l(Lf,Uf),Uf.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">export</span> <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token comment">// &#96;doubled&#96;, &#96;tripled&#96;, &#96;quadrupled&#96; are reactive</span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> tripled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token language-javascript"><span class="token punctuation">&#123;</span>doubled<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>tripled<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>quadrupled<span class="token punctuation">&#125;</span></span></code>',l(Lf,Gf),l(Lf,qf),l(qf,Bf),l(Bf,zf),l(Lf,Ff),l(Lf,Jf),l(Jf,Wf),l(Jf,Yf),l(Yf,Vf),l(Vf,Kf),l(Yf,Zf),l(Jf,Qf),l(Lf,Xf),l(Lf,am),am.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n\n<span class="prism-highlight-code-line">\t$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*count*/</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line"></span>\n<span class="prism-highlight-code-line">\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*count*/</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> tripled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line"></span>\n<span class="prism-highlight-code-line">\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*doubled*/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span>\n\n\t<span class="token keyword">return</span> <span class="token punctuation">[</span>doubled<span class="token punctuation">,</span> tripled<span class="token punctuation">,</span> quadrupled<span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(Lf,nm),l(Lf,sm),l(sm,tm),l(Lf,em),l(Lf,om),om.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">export</span> <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token comment">// NOTE: move &#96;quadrupled&#96; before &#96;doubled&#96;</span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>\n  $<span class="token punctuation">:</span> tripled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code>',l(Lf,pm),l(Lf,cm),l(cm,rm),l(rm,lm),l(Lf,im),l(Lf,um),um.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n\t<span class="token comment">// ...</span>\n\n\t$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n\t\t<span class="token comment">// NOTE: &#96;quadrupled&#96; invalidates after &#96;doubled&#96;</span>\n<span class="prism-highlight-code-line">\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*count*/</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line"></span>\n<span class="prism-highlight-code-line">\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*doubled*/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">\t\t<span class="token punctuation">&#125;</span></span>\n\n\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*count*/</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n\t\t\t$<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>tripled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token punctuation">&#125;</span>\n\t<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n\n\t<span class="token keyword">return</span> <span class="token punctuation">[</span>doubled<span class="token punctuation">,</span> tripled<span class="token punctuation">,</span> quadrupled<span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(Lf,hm),l(Lf,km),l(km,dm),l(Lf,fm),l(Lf,mm),l(mm,vm),l(vm,gm),l(vm,Em),l(Em,bm),l(vm,$m),l(vm,ym),l(ym,wm),l(wm,Om),l(Om,Sm),l(wm,Tm),l(wm,Lm),l(Lm,Nm),l(wm,Pm),l(wm,xm),l(xm,Cm),l(wm,Dm),l(mm,Am),l(mm,Im),l(Im,jm),l(Im,Rm),l(Rm,Mm),l(Im,Hm),l(mm,_m),l(mm,Um),l(Um,Gm),l(Um,qm),l(qm,Bm),l(Bm,zm),l(zm,Fm),l(Bm,Jm),l(Bm,Wm),l(Wm,Ym),l(Bm,Vm),l(Bm,Km),l(Km,Zm),l(Bm,Qm),l(Bm,Xm),l(Xm,av),l(Bm,nv),l(Bm,sv),l(sv,tv),l(Bm,ev),l(Lf,ov),l(Lf,pv),l(pv,cv),l(pv,rv),l(rv,lv),l(pv,iv),l(Lf,uv),l(Lf,hv),l(hv,kv),l(Lf,dv),l(Lf,fv),fv.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n<span class="token comment">// NOTE: use &#96;count&#96; in a reactive declaration before &#96;count&#96; is declared</span>\n$<span class="token punctuation">:</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token language-javascript"><span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span></span> * 2 = <span class="token language-javascript"><span class="token punctuation">&#123;</span>doubled<span class="token punctuation">&#125;</span></span></code>',l(Lf,mv),l(Lf,vv),l(vv,gv),l(gv,Ev),l(Lf,bv),l(Lf,$v),l($v,yv),l(yv,wv),l(yv,Ov),l(Ov,Sv),l(yv,Tv),l(Lf,Lv),l(Lf,Nv),l(Nv,Pv),l(Nv,xv),l(xv,Cv),l(Nv,Dv),l(Nv,Av),l(Av,Iv),l(Nv,jv),l(Lf,Rv),l(Lf,Mv),l(Mv,Hv),l(Mv,_v),l(_v,Uv),l(Mv,Gv),l(Lf,qv),l(Lf,Bv),Bv.innerHTML='<code class="language-js"><span class="token comment">// src/runtime/internal/scheduler.ts</span>\n<span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">$$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>$$<span class="token punctuation">.</span>fragment <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// NOTE: this is important now!</span>\n<span class="prism-highlight-code-line">    $$<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n    <span class="token function">run_all</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>before_update<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// calls the &#96;p&#96; function</span>\n    $$<span class="token punctuation">.</span>fragment <span class="token operator">&amp;&amp;</span> $$<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>dirty<span class="token punctuation">,</span> $$<span class="token punctuation">.</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// ...</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',l(Lf,zv),l(Lf,Fv),l(Fv,Jv),l(Fv,Wv),l(Wv,Yv),l(Fv,Vv),l(Fv,Kv),l(Kv,Zv),l(Fv,Qv),l(Fv,Xv),l(Xv,ag),l(Fv,ng),l(Lf,sg),l(Lf,tg),l(tg,eg),i(a,og,n),i(a,pg,n),l(pg,cg),l(cg,rg),l(rg,lg),l(pg,ig),l(pg,ug),l(ug,hg),l(pg,kg),l(pg,dg),dg.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> givenName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">,</span> familyName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">;</span>\n    familyName <span class="token operator">=</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  $<span class="token punctuation">:</span> name <span class="token operator">=</span> givenName <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> familyName<span class="token punctuation">;</span>\n  $<span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'name\'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code>',l(pg,fg),l(pg,mg),l(mg,vg),l(vg,gg),l(pg,Eg),l(pg,bg),l(bg,$g),l(bg,yg),l(yg,wg),l(bg,Og),l(pg,Sg),l(pg,Tg),l(Tg,Lg),l(Lg,Ng),l(Lg,Pg),l(Pg,xg),l(Lg,Cg),l(Lg,Dg),l(Dg,Ag),l(Lg,Ig),l(Lg,jg),l(jg,Rg),l(Lg,Mg),l(Lg,Hg),l(Hg,_g),l(Lg,Ug),l(Tg,Gg),l(Tg,qg),l(qg,Bg),l(Bg,zg),l(Tg,Fg),l(Tg,Jg),l(Jg,Wg),l(Wg,Yg),l(Tg,Vg),l(Tg,Kg),l(Kg,Zg),l(Zg,Qg),l(Kg,Xg),l(Kg,aE),l(aE,nE),l(Kg,sE),l(Tg,tE),l(Tg,eE),l(eE,oE),l(eE,pE),l(pE,cE),l(eE,rE),l(rE,lE),l(lE,iE),l(lE,uE),l(uE,hE),l(lE,kE),l(lE,dE),l(dE,fE),l(lE,mE),l(lE,vE),l(vE,gE),l(lE,EE),l(lE,bE),l(bE,$E),l(rE,yE),l(rE,wE),l(wE,OE),l(wE,SE),l(SE,TE),l(wE,LE),l(wE,NE),l(NE,PE),l(Tg,xE),l(Tg,CE),l(CE,DE),l(CE,AE),l(AE,IE),l(CE,jE),l(pg,RE),l(pg,ME),l(ME,HE),l(ME,_E),l(_E,UE),l(ME,GE),l(ME,qE),l(qE,BE),l(ME,zE),l(ME,FE),l(FE,JE),l(ME,WE),l(ME,YE),l(YE,VE),l(ME,KE),l(ME,ZE),l(ZE,QE),l(ME,XE),l(pg,ab),l(pg,nb),nb.innerHTML='<code class="language-js"><span class="token comment">// Instead of</span>\n<span class="token comment">// #1 &#96;givenName = \'Li Hau\'</span>\nname <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span> <span class="token operator">+</span> <span class="token string">\' \'</span> <span class="token operator">+</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Li Hau \'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// #2 &#96;familyName = \'Tan\'</span>\nname <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span> <span class="token operator">+</span> <span class="token string">\' \'</span> <span class="token operator">+</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Li Hau Tan\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Reactive declarations and statements are batched</span>\n<span class="token comment">// #1 &#96;givenName = \'Li Hau\'</span>\n<span class="token comment">// #2 &#96;familyName = \'Tan\'</span>\nname <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span> <span class="token operator">+</span> <span class="token string">\' \'</span> <span class="token operator">+</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Li Hau Tan\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(a,sb,n),i(a,tb,n),l(tb,eb),l(eb,ob),l(ob,pb),l(tb,cb),l(tb,rb),l(rb,lb),l(tb,ib),l(tb,ub),ub.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> givenName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">,</span> familyName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">;</span>\n    familyName <span class="token operator">=</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\n<span class="prism-highlight-code-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'name\'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Logs \'\'</span></span>\n  <span class="token punctuation">&#125;</span>\n  $<span class="token punctuation">:</span> name <span class="token operator">=</span> givenName <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> familyName<span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code>',l(tb,hb),l(tb,kb),l(kb,db),l(db,fb),l(tb,mb),l(tb,vb),l(vb,gb),l(vb,Eb),l(Eb,bb),l(vb,$b),l(tb,yb),l(tb,wb),wb.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> givenName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">,</span> familyName <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    givenName <span class="token operator">=</span> <span class="token string">\'Li Hau\'</span><span class="token punctuation">;</span>\n    familyName <span class="token operator">=</span> <span class="token string">\'Tan\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  $<span class="token punctuation">:</span> name <span class="token operator">=</span> givenName <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> familyName<span class="token punctuation">;</span>\n<span class="prism-highlight-code-line">  $<span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'name\'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Logs \'Li Hau Tan\'</span></span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code>',i(a,Ob,n),i(a,Sb,n),l(Sb,Tb),l(Tb,Lb),l(Lb,Nb),l(Sb,Pb),l(Sb,xb),l(xb,Cb),l(Sb,Db),l(Sb,Ab),l(Ab,Ib),l(Ab,jb),l(jb,Rb),l(Ab,Mb),l(Sb,Hb),l(Sb,_b),_b.innerHTML='<code class="language-js"><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token comment">// NOTE: refers to &#96;doubled&#96;</span>\n$<span class="token punctuation">:</span> quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token comment">// NOTE: defined &#96;doubled&#96;</span>\n$<span class="token punctuation">:</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>\n\n<span class="token comment">// compiles into:</span>\n\n$$self<span class="token punctuation">.</span>$$<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  $<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token comment">/* doubled */</span><span class="token punctuation">,</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  $<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token comment">/* quadrupled */</span><span class="token punctuation">,</span> quadrupled <span class="token operator">=</span> doubled <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span></code>',i(a,Ub,n),i(a,Gb,n),l(Gb,qb),l(qb,Bb),l(Bb,zb),l(Gb,Fb),l(Gb,Jb),l(Jb,Wb),l(Jb,Yb),l(Yb,Vb),l(Jb,Kb),l(Gb,Zb),l(Gb,Qb),l(Qb,Xb),l(Qb,a$),l(a$,n$),l(Qb,s$),l(Gb,t$),l(Gb,e$),l(e$,o$),l(Gb,p$),l(Gb,c$),c$.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  $<span class="token punctuation">:</span> doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token language-javascript"><span class="token punctuation">&#123;</span> count <span class="token punctuation">&#125;</span></span> x 2 = <span class="token language-javascript"><span class="token punctuation">&#123;</span>doubled<span class="token punctuation">&#125;</span></span></code>',l(Gb,r$),l(Gb,l$),l(l$,i$),l(i$,u$),l(Gb,h$),l(Gb,k$),l(k$,d$),l(k$,f$),l(f$,m$),l(k$,v$),l(k$,g$),l(g$,E$),l(k$,b$),l(Gb,$$),l(Gb,y$),y$.innerHTML='<code class="language-js"><span class="token comment">// ...</span>\n<span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">let</span> doubled<span class="token punctuation">;</span>\n  $<span class="token punctuation">:</span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>doubled <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>doubled<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(a,w$,n),i(a,O$,n),l(O$,S$),l(S$,T$),l(T$,L$),i(a,N$,n),i(a,P$,n),l(P$,x$),l(x$,C$),l(C$,D$),i(a,A$,n),i(a,I$,n),l(I$,j$),l(j$,R$),l(R$,M$),i(a,H$,n),i(a,_$,n),l(_$,U$),l(U$,G$),l(G$,q$),i(a,B$,n),i(a,z$,n),l(z$,F$),l(F$,J$),l(J$,W$),l(z$,Y$),l(z$,V$),l(V$,K$),l(V$,Z$),l(Z$,Q$),l(V$,X$),l(z$,ay),l(z$,ny),l(ny,sy),l(ny,ty),l(ty,ey),l(ny,oy),l(ny,py),l(py,cy),l(ny,ry),l(ny,ly),l(ly,iy),l(ny,uy),l(z$,hy),l(z$,ky),l(ky,dy),l(dy,fy),l(dy,my),l(my,vy),l(dy,gy),l(z$,Ey),l(z$,by),l(by,$y),l($y,yy),l($y,wy),l(wy,Oy),l($y,Sy),i(a,Ty,n),i(a,Ly,n),l(Ly,Ny),l(Ny,Py),l(Py,xy),l(Ly,Cy),l(Ly,Dy),l(Dy,Ay),l(Ay,Iy),l(Ay,jy),l(jy,Ry),l(Ay,My),l(Dy,Hy),l(Dy,_y),l(_y,Uy),l(_y,Gy),l(Gy,qy),l(_y,By),l(_y,zy),l(zy,Fy),l(Dy,Jy),l(Dy,Wy),l(Wy,Yy),l(Yy,Vy),l(Wy,Ky),l(Dy,Zy),l(Dy,Qy),l(Qy,Xy),l(Xy,aw),l(Qy,nw),l(Dy,sw),l(Dy,tw),l(tw,ew),l(ew,ow)},p:a,d(a){a&&u(s),a&&u(ja),a&&u(Ra),a&&u(qa),a&&u(Ba),a&&u(Xa),a&&u(an),a&&u(nn),a&&u(sn),a&&u(un),a&&u(hn),a&&u(vn),a&&u(gn),a&&u(Bn),a&&u(zn),a&&u(pt),a&&u(ct),a&&u(xe),a&&u(Ce),a&&u(xp),a&&u(Cp),a&&u(ai),a&&u(ni),a&&u(Ri),a&&u(Mi),a&&u(vu),a&&u(gu),a&&u(ik),a&&u(uk),a&&u(Ud),a&&u(Gd),a&&u(cf),a&&u(rf),a&&u(Tf),a&&u(Lf),a&&u(og),a&&u(pg),a&&u(sb),a&&u(tb),a&&u(Ob),a&&u(Sb),a&&u(Ub),a&&u(Gb),a&&u(w$),a&&u(O$),a&&u(N$),a&&u(P$),a&&u(A$),a&&u(I$),a&&u(H$),a&&u(_$),a&&u(B$),a&&u(z$),a&&u(Ty),a&&u(Ly)}}}function ha(a){let s,t;const e=[ka];let o={$$slots:{default:[ua]},$$scope:{ctx:a}};for(let a=0;a<e.length;a+=1)o=n(o,e[a]);return s=new ia({props:o}),{c(){B(s.$$.fragment)},l(a){z(s.$$.fragment,a)},m(a,n){F(s,a,n),t=!0},p(a,[n]){const t=0&n?function(a,n){const s={},t={},e={$$scope:1};let o=a.length;for(;o--;){const p=a[o],c=n[o];if(c){for(const a in p)a in c||(t[a]=1);for(const a in c)e[a]||(s[a]=c[a],e[a]=1);a[o]=c}else for(const a in p)e[a]=1}for(const a in t)a in s||(s[a]=void 0);return s}(e,[(o=ka,"object"==typeof o&&null!==o?o:{})]):{};var o;1&n&&(t.$$scope={dirty:n,ctx:a}),s.$set(t)},i(a){t||(G(s.$$.fragment,a),t=!0)},o(a){q(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}const ka={title:"Compile Svelte in your head (Part 2)",date:"2020-03-22T08:00:00Z",tags:["Svelte","JavaScript"],series:"Compile Svelte in your head",slug:"compile-svelte-in-your-head-part-2",type:"blog"};class da extends V{constructor(a){super(),Y(this,a,null,ha,p,{})}}setTimeout(()=>{new da({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const a=document.createElement("script");a.async=!0,a.src="https://platform.twitter.com/widgets.js",a.charset="utf-8",document.body.appendChild(a)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(a=>{a.src=a.dataset.src})}else{const a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(a)}},3e3);
