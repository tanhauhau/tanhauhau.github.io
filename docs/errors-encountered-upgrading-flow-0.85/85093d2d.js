function e(){}function t(e,t){for(const o in t)e[o]=t[o];return e}function o(e){return e()}function a(){return Object.create(null)}function r(e){e.forEach(o)}function n(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,o,a,r){return e[1]&&r?t(a.ctx.slice(),e[1](r(o))):a.ctx}function i(e,t,o,a,r,n,s){const i=function(e,t,o,a){if(e[2]&&a){const r=e[2](a(o));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],o=Math.max(t.dirty.length,r.length);for(let a=0;a<o;a+=1)e[a]=t.dirty[a]|r[a];return e}return t.dirty|r}return t.dirty}(t,a,r,n);if(i){const r=l(t,o,a,s);e.p(r,i)}}function c(e,t){e.appendChild(t)}function h(e,t,o){e.insertBefore(t,o||null)}function f(e){e.parentNode.removeChild(e)}function u(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function d(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function g(){return m(" ")}function w(){return m("")}function v(e,t,o){null==o?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function b(e){return Array.from(e.childNodes)}function y(e,t,o,a){for(let a=0;a<e.length;a+=1){const r=e[a];if(r.nodeName===t){let t=0;const n=[];for(;t<r.attributes.length;){const e=r.attributes[t++];o[e.name]||n.push(e.name)}for(let e=0;e<n.length;e++)r.removeAttribute(n[e]);return e.splice(a,1)[0]}}return a?p(t):d(t)}function E(e,t){for(let o=0;o<e.length;o+=1){const a=e[o];if(3===a.nodeType)return a.data=""+t,e.splice(o,1)[0]}return m(t)}function A(e){return E(e," ")}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t){e.value=null==t?"":t}class ${constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,o=null){this.e||(this.e=d(t.nodeName),this.t=t,this.h(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)h(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(f)}}let F;function I(e){F=e}function x(e){(function(){if(!F)throw new Error("Function called outside component initialization");return F})().$$.on_mount.push(e)}const L=[],P=[],C=[],S=[],M=Promise.resolve();let O=!1;function N(e){C.push(e)}let B=!1;const j=new Set;function H(){if(!B){B=!0;do{for(let e=0;e<L.length;e+=1){const t=L[e];I(t),_(t.$$)}for(L.length=0;P.length;)P.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];j.has(t)||(j.add(t),t())}C.length=0}while(L.length);for(;S.length;)S.pop()();O=!1,B=!1,j.clear()}}function _(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const D=new Set;function z(e,t){e&&e.i&&(D.delete(e),e.i(t))}function q(e,t,o,a){if(e&&e.o){if(D.has(e))return;D.add(e),(void 0).c.push(()=>{D.delete(e),a&&(o&&e.d(1),a())}),e.o(t)}}function W(e){e&&e.c()}function R(e,t){e&&e.l(t)}function G(e,t,a){const{fragment:s,on_mount:l,on_destroy:i,after_update:c}=e.$$;s&&s.m(t,a),N(()=>{const t=l.map(o).filter(n);i?i.push(...t):r(t),e.$$.on_mount=[]}),c.forEach(N)}function V(e,t){const o=e.$$;null!==o.fragment&&(r(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(L.push(e),O||(O=!0,M.then(H)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(t,o,n,s,l,i,c=[-1]){const h=F;I(t);const u=o.props||{},d=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:l,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:a(),dirty:c};let p=!1;if(d.ctx=n?n(t,u,(e,o,...a)=>{const r=a.length?a[0]:o;return d.ctx&&l(d.ctx[e],d.ctx[e]=r)&&(d.bound[e]&&d.bound[e](r),p&&U(t,e)),o}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),o.target){if(o.hydrate){const e=b(o.target);d.fragment&&d.fragment.l(e),e.forEach(f)}else d.fragment&&d.fragment.c();o.intro&&z(t.$$.fragment),G(t,o.target,o.anchor),H()}I(h)}class Y{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(t),()=>{const e=o.indexOf(t);-1!==e&&o.splice(e,1)}}$set(){}}function K(t){let o,a,r,n,s,l,i,u,w,k,T,$,F,I,x,L,P,C,S,M,O,N,B,j,H,_,D,z,q,W,R,G,V,U,J;return{c(){o=d("header"),a=d("nav"),r=d("ul"),n=d("li"),s=d("a"),l=m("Tan Li Hau"),i=g(),u=d("li"),w=d("a"),k=m("About"),T=g(),$=d("li"),F=d("a"),I=m("Writings"),x=g(),L=d("li"),P=d("a"),C=m("Talks"),S=g(),M=d("li"),O=d("a"),N=m("Notes"),B=g(),j=d("li"),H=d("a"),_=m("Newsletter"),D=g(),z=d("li"),q=d("a"),W=p("svg"),R=p("path"),G=g(),V=d("a"),U=p("svg"),J=p("path"),this.h()},l(e){o=y(e,"HEADER",{class:!0});var t=b(o);a=y(t,"NAV",{});var c=b(a);r=y(c,"UL",{class:!0});var h=b(r);n=y(h,"LI",{class:!0});var d=b(n);s=y(d,"A",{href:!0,class:!0});var p=b(s);l=E(p,"Tan Li Hau"),p.forEach(f),d.forEach(f),i=A(h),u=y(h,"LI",{class:!0});var m=b(u);w=y(m,"A",{href:!0,class:!0});var g=b(w);k=E(g,"About"),g.forEach(f),m.forEach(f),T=A(h),$=y(h,"LI",{class:!0});var v=b($);F=y(v,"A",{href:!0,class:!0});var Y=b(F);I=E(Y,"Writings"),Y.forEach(f),v.forEach(f),x=A(h),L=y(h,"LI",{class:!0});var K=b(L);P=y(K,"A",{href:!0,class:!0});var Q=b(P);C=E(Q,"Talks"),Q.forEach(f),K.forEach(f),S=A(h),M=y(h,"LI",{class:!0});var Z=b(M);O=y(Z,"A",{href:!0,class:!0});var X=b(O);N=E(X,"Notes"),X.forEach(f),Z.forEach(f),B=A(h),j=y(h,"LI",{class:!0});var ee=b(j);H=y(ee,"A",{href:!0,class:!0});var te=b(H);_=E(te,"Newsletter"),te.forEach(f),ee.forEach(f),D=A(h),z=y(h,"LI",{class:!0});var oe=b(z);q=y(oe,"A",{"aria-label":!0,href:!0,class:!0});var ae=b(q);W=y(ae,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var re=b(W);R=y(re,"path",{d:!0},1),b(R).forEach(f),re.forEach(f),ae.forEach(f),G=A(oe),V=y(oe,"A",{"aria-label":!0,href:!0,class:!0});var ne=b(V);U=y(ne,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var se=b(U);J=y(se,"path",{d:!0},1),b(J).forEach(f),se.forEach(f),ne.forEach(f),oe.forEach(f),h.forEach(f),c.forEach(f),t.forEach(f),this.h()},h(){v(s,"href","/"),v(s,"class","svelte-f3e4uo"),v(n,"class","svelte-f3e4uo"),v(w,"href","/about"),v(w,"class","svelte-f3e4uo"),v(u,"class","svelte-f3e4uo"),v(F,"href","/blogs"),v(F,"class","svelte-f3e4uo"),v($,"class","svelte-f3e4uo"),v(P,"href","/talks"),v(P,"class","svelte-f3e4uo"),v(L,"class","svelte-f3e4uo"),v(O,"href","/notes"),v(O,"class","svelte-f3e4uo"),v(M,"class","svelte-f3e4uo"),v(H,"href","/newsletter"),v(H,"class","svelte-f3e4uo"),v(j,"class","svelte-f3e4uo"),v(R,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),v(W,"viewBox","0 0 24 24"),v(W,"width","1em"),v(W,"height","1em"),v(W,"class","svelte-f3e4uo"),v(q,"aria-label","Twitter account"),v(q,"href","https://twitter.com/lihautan"),v(q,"class","svelte-f3e4uo"),v(J,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),v(U,"viewBox","0 0 24 24"),v(U,"width","1em"),v(U,"height","1em"),v(U,"class","svelte-f3e4uo"),v(V,"aria-label","Github account"),v(V,"href","https://github.com/tanhauhau"),v(V,"class","svelte-f3e4uo"),v(z,"class","social svelte-f3e4uo"),v(r,"class","svelte-f3e4uo"),v(o,"class","svelte-f3e4uo")},m(e,t){h(e,o,t),c(o,a),c(a,r),c(r,n),c(n,s),c(s,l),c(r,i),c(r,u),c(u,w),c(w,k),c(r,T),c(r,$),c($,F),c(F,I),c(r,x),c(r,L),c(L,P),c(P,C),c(r,S),c(r,M),c(M,O),c(O,N),c(r,B),c(r,j),c(j,H),c(H,_),c(r,D),c(r,z),c(z,q),c(q,W),c(W,R),c(z,G),c(z,V),c(V,U),c(U,J)},p:e,i:e,o:e,d(e){e&&f(o)}}}class Q extends Y{constructor(e){super(),J(this,e,null,K,s,{})}}function Z(t){let o,a,r,n,s,l,i,u,p,w,k,$,F,I,x,L,P,C,S,M;return{c(){o=d("div"),a=d("h1"),r=m("Subscribe to my newsletter"),n=g(),s=d("h2"),l=m("Get the latest blog posts and project updates delivered right to your inbox"),i=g(),u=d("form"),p=d("div"),w=d("input"),k=g(),$=d("input"),I=g(),x=d("input"),L=g(),P=d("p"),C=m("Powered by Buttondown."),this.h()},l(e){o=y(e,"DIV",{class:!0});var t=b(o);a=y(t,"H1",{});var c=b(a);r=E(c,"Subscribe to my newsletter"),c.forEach(f),n=A(t),s=y(t,"H2",{class:!0});var h=b(s);l=E(h,"Get the latest blog posts and project updates delivered right to your inbox"),h.forEach(f),i=A(t),u=y(t,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var d=b(u);p=y(d,"DIV",{class:!0});var m=b(p);w=y(m,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),k=A(m),$=y(m,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),m.forEach(f),I=A(d),x=y(d,"INPUT",{type:!0,value:!0,name:!0,class:!0}),L=A(d),P=y(d,"P",{class:!0});var g=b(P);C=E(g,"Powered by Buttondown."),g.forEach(f),d.forEach(f),t.forEach(f),this.h()},h(){v(s,"class","svelte-1k1s1co"),v(w,"type","email"),v(w,"name","email"),v(w,"id","bd-email"),v(w,"aria-label","email address"),v(w,"placeholder","youremail@example.com"),v(w,"class","svelte-1k1s1co"),v($,"type","submit"),$.value="Subscribe",$.disabled=F=!t[0],v($,"class","svelte-1k1s1co"),v(p,"class","form-item svelte-1k1s1co"),v(x,"type","hidden"),x.value="1",v(x,"name","embed"),v(x,"class","svelte-1k1s1co"),v(P,"class","svelte-1k1s1co"),v(u,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),v(u,"method","post"),v(u,"target","popupwindow"),v(u,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),v(u,"class","embeddable-buttondown-form"),v(o,"class","form svelte-1k1s1co")},m(e,f){var d,m,g,v;h(e,o,f),c(o,a),c(a,r),c(o,n),c(o,s),c(s,l),c(o,i),c(o,u),c(u,p),c(p,w),T(w,t[0]),c(p,k),c(p,$),c(u,I),c(u,x),c(u,L),c(u,P),c(P,C),S||(d=w,m="input",g=t[1],d.addEventListener(m,g,v),M=()=>d.removeEventListener(m,g,v),S=!0)},p(e,[t]){1&t&&w.value!==e[0]&&T(w,e[0]),1&t&&F!==(F=!e[0])&&($.disabled=F)},i:e,o:e,d(e){e&&f(o),S=!1,M()}}}function X(e,t,o){let a;return[a,function(){a=this.value,o(0,a)}]}class ee extends Y{constructor(e){super(),J(this,e,X,Z,s,{})}}function te(e){return x(()=>(setTimeout(()=>{if(window.innerWidth>1080){const e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",e.id="_carbonads_js",document.body.appendChild(e)}},5e3),()=>{try{const e=document.getElementById("carbonads");e.parentNode.removeChild(e)}catch(e){}})),[]}class oe extends Y{constructor(e){super(),J(this,e,te,null,s,{})}}function ae(e,t,o){const a=e.slice();return a[6]=t[o],a}function re(e,t,o){const a=e.slice();return a[6]=t[o],a}function ne(e){let t,o;return{c(){t=d("meta"),this.h()},l(e){t=y(e,"META",{name:!0,content:!0}),this.h()},h(){v(t,"name","keywords"),v(t,"content",o=e[6])},m(e,o){h(e,t,o)},p(e,a){4&a&&o!==(o=e[6])&&v(t,"content",o)},d(e){e&&f(t)}}}function se(e){let t,o,a=e[6]+"";return{c(){t=d("span"),o=m(a),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=b(t);o=E(r,a),r.forEach(f),this.h()},h(){v(t,"class","svelte-9tqnza")},m(e,a){h(e,t,a),c(t,o)},p(e,t){4&t&&a!==(a=e[6]+"")&&k(o,a)},d(e){e&&f(t)}}}function le(e){let t,o,a,r,n,s,p,T,F,I,x,L,P,C,S,M,O,N,B,j,H,_,D,U,J,Y,K,Z,X,te,le,ie,ce,he,fe,ue,de=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`,pe=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Ferrors-encountered-upgrading-flow-0.85",name:e[0]},position:2}]})}<\/script>`;document.title=t=e[0]+" | Tan Li Hau";let me=e[2],ge=[];for(let t=0;t<me.length;t+=1)ge[t]=ne(re(e,me,t));D=new Q({});let we=e[2],ve=[];for(let t=0;t<we.length;t+=1)ve[t]=se(ae(e,we,t));const be=e[5].default,ye=function(e,t,o,a){if(e){const r=l(e,t,o,a);return e[0](r)}}(be,e,e[4],null);return ce=new ee({}),fe=new oe({}),{c(){o=d("meta"),a=d("meta"),r=d("meta"),n=d("meta"),s=d("meta"),p=d("meta"),T=d("meta"),F=d("meta"),I=d("meta"),x=d("meta"),L=d("meta");for(let e=0;e<ge.length;e+=1)ge[e].c();P=d("meta"),C=d("meta"),M=w(),N=w(),B=g(),j=d("a"),H=m("Skip to content"),_=g(),W(D.$$.fragment),U=g(),J=d("main"),Y=d("h1"),K=m(e[0]),Z=g();for(let e=0;e<ve.length;e+=1)ve[e].c();X=g(),te=d("article"),ye&&ye.c(),le=g(),ie=d("footer"),W(ce.$$.fragment),he=g(),W(fe.$$.fragment),this.h()},l(t){const l=function(e,t=document.body){return Array.from(t.querySelectorAll(e))}('[data-svelte="svelte-n0q11s"]',document.head);o=y(l,"META",{name:!0,content:!0}),a=y(l,"META",{name:!0,content:!0}),r=y(l,"META",{name:!0,content:!0}),n=y(l,"META",{name:!0,content:!0}),s=y(l,"META",{name:!0,content:!0}),p=y(l,"META",{name:!0,content:!0}),T=y(l,"META",{name:!0,content:!0}),F=y(l,"META",{name:!0,content:!0}),I=y(l,"META",{name:!0,content:!0}),x=y(l,"META",{name:!0,content:!0}),L=y(l,"META",{name:!0,content:!0});for(let e=0;e<ge.length;e+=1)ge[e].l(l);P=y(l,"META",{itemprop:!0,content:!0}),C=y(l,"META",{itemprop:!0,content:!0}),M=w(),N=w(),l.forEach(f),B=A(t),j=y(t,"A",{href:!0,class:!0});var i=b(j);H=E(i,"Skip to content"),i.forEach(f),_=A(t),R(D.$$.fragment,t),U=A(t),J=y(t,"MAIN",{id:!0,class:!0});var c=b(J);Y=y(c,"H1",{});var h=b(Y);K=E(h,e[0]),h.forEach(f),Z=A(c);for(let e=0;e<ve.length;e+=1)ve[e].l(c);X=A(c),te=y(c,"ARTICLE",{});var u=b(te);ye&&ye.l(u),u.forEach(f),c.forEach(f),le=A(t),ie=y(t,"FOOTER",{class:!0});var d=b(ie);R(ce.$$.fragment,d),he=A(d),R(fe.$$.fragment,d),d.forEach(f),this.h()},h(){v(o,"name","description"),v(o,"content",e[1]),v(a,"name","image"),v(a,"content",null),v(r,"name","og:image"),v(r,"content",null),v(n,"name","og:title"),v(n,"content",e[0]),v(s,"name","og:description"),v(s,"content",e[1]),v(p,"name","og:type"),v(p,"content","website"),v(T,"name","twitter:card"),v(T,"content","summary_large_image"),v(F,"name","twitter:creator"),v(F,"content","@lihautan"),v(I,"name","twitter:title"),v(I,"content",e[0]),v(x,"name","twitter:description"),v(x,"content",e[1]),v(L,"name","twitter:image"),v(L,"content",null),v(P,"itemprop","url"),v(P,"content","https%3A%2F%2Flihautan.com%2Ferrors-encountered-upgrading-flow-0.85"),v(C,"itemprop","image"),v(C,"content",null),S=new $(M),O=new $(N),v(j,"href","#content"),v(j,"class","skip svelte-9tqnza"),v(J,"id","content"),v(J,"class","blog svelte-9tqnza"),v(ie,"class","svelte-9tqnza")},m(e,t){c(document.head,o),c(document.head,a),c(document.head,r),c(document.head,n),c(document.head,s),c(document.head,p),c(document.head,T),c(document.head,F),c(document.head,I),c(document.head,x),c(document.head,L);for(let e=0;e<ge.length;e+=1)ge[e].m(document.head,null);c(document.head,P),c(document.head,C),S.m(de,document.head),c(document.head,M),O.m(pe,document.head),c(document.head,N),h(e,B,t),h(e,j,t),c(j,H),h(e,_,t),G(D,e,t),h(e,U,t),h(e,J,t),c(J,Y),c(Y,K),c(J,Z);for(let e=0;e<ve.length;e+=1)ve[e].m(J,null);c(J,X),c(J,te),ye&&ye.m(te,null),h(e,le,t),h(e,ie,t),G(ce,ie,null),c(ie,he),G(fe,ie,null),ue=!0},p(e,[a]){if((!ue||1&a)&&t!==(t=e[0]+" | Tan Li Hau")&&(document.title=t),(!ue||2&a)&&v(o,"content",e[1]),(!ue||1&a)&&v(n,"content",e[0]),(!ue||2&a)&&v(s,"content",e[1]),(!ue||1&a)&&v(I,"content",e[0]),(!ue||2&a)&&v(x,"content",e[1]),4&a){let t;for(me=e[2],t=0;t<me.length;t+=1){const o=re(e,me,t);ge[t]?ge[t].p(o,a):(ge[t]=ne(o),ge[t].c(),ge[t].m(P.parentNode,P))}for(;t<ge.length;t+=1)ge[t].d(1);ge.length=me.length}if((!ue||3&a)&&de!==(de=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`)&&S.p(de),(!ue||1&a)&&pe!==(pe=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Ferrors-encountered-upgrading-flow-0.85",name:e[0]},position:2}]})}<\/script>`)&&O.p(pe),(!ue||1&a)&&k(K,e[0]),4&a){let t;for(we=e[2],t=0;t<we.length;t+=1){const o=ae(e,we,t);ve[t]?ve[t].p(o,a):(ve[t]=se(o),ve[t].c(),ve[t].m(J,X))}for(;t<ve.length;t+=1)ve[t].d(1);ve.length=we.length}ye&&ye.p&&16&a&&i(ye,be,e,e[4],a,null,null)},i(e){ue||(z(D.$$.fragment,e),z(ye,e),z(ce.$$.fragment,e),z(fe.$$.fragment,e),ue=!0)},o(e){q(D.$$.fragment,e),q(ye,e),q(ce.$$.fragment,e),q(fe.$$.fragment,e),ue=!1},d(e){f(o),f(a),f(r),f(n),f(s),f(p),f(T),f(F),f(I),f(x),f(L),u(ge,e),f(P),f(C),f(M),e&&S.d(),f(N),e&&O.d(),e&&f(B),e&&f(j),e&&f(_),V(D,e),e&&f(U),e&&f(J),u(ve,e),ye&&ye.d(e),e&&f(le),e&&f(ie),V(ce),V(fe)}}}function ie(e,t,o){let{title:a=""}=t,{description:r=""}=t,{tags:n=[]}=t;const s={"@type":"Person",name:"Tan Li Hau"};let{$$slots:l={},$$scope:i}=t;return e.$set=e=>{"title"in e&&o(0,a=e.title),"description"in e&&o(1,r=e.description),"tags"in e&&o(2,n=e.tags),"$$scope"in e&&o(4,i=e.$$scope)},[a,r,n,s,i,l]}class ce extends Y{constructor(e){super(),J(this,e,ie,le,s,{title:0,description:1,tags:2})}}function he(t){let o,a,r,n,s,l,i,u,p,w,k,T,F,I,x,L,P,C,S,M,O,N,B,j,H,_,D,z,q,W,R,G,V,U,J,Y,K,Q,Z,X,ee,te,oe,ae,re,ne,se,le,ie,ce,he,fe,ue,de,pe,me,ge,we,ve,be,ye,Ee,Ae,ke,Te,$e,Fe,Ie,xe,Le,Pe,Ce,Se,Me,Oe,Ne,Be,je,He,_e,De,ze,qe,We,Re,Ge,Ve,Ue,Je,Ye,Ke,Qe,Ze,Xe,et,tt,ot,at,rt,nt,st,lt,it,ct,ht,ft,ut,dt,pt,mt,gt,wt,vt,bt,yt,Et,At,kt,Tt,$t,Ft,It,xt,Lt,Pt,Ct,St,Mt,Ot,Nt,Bt,jt,Ht,_t,Dt,zt,qt,Wt,Rt,Gt,Vt,Ut,Jt,Yt,Kt,Qt,Zt,Xt,eo,to,oo,ao,ro,no,so,lo,io,co,ho,fo,uo,po,mo,go,wo,vo,bo,yo,Eo,Ao,ko,To,$o,Fo,Io,xo,Lo,Po,Co,So,Mo,Oo,No,Bo,jo,Ho,_o,Do,zo,qo,Wo,Ro,Go,Vo,Uo,Jo,Yo,Ko,Qo,Zo,Xo,ea,ta,oa,aa,ra,na,sa,la,ia,ca,ha,fa,ua,da,pa,ma,ga,wa,va,ba,ya,Ea,Aa,ka,Ta,$a,Fa,Ia,xa,La,Pa,Ca,Sa,Ma,Oa,Na,Ba,ja,Ha,_a,Da,za,qa,Wa,Ra,Ga,Va,Ua,Ja,Ya,Ka,Qa,Za,Xa,er,tr,or,ar,rr,nr,sr,lr,ir,cr,hr,fr,ur,dr,pr,mr,gr,wr,vr,br,yr,Er,Ar,kr,Tr,$r,Fr,Ir,xr,Lr,Pr,Cr,Sr,Mr,Or,Nr,Br,jr,Hr,_r,Dr,zr,qr,Wr,Rr,Gr,Vr,Ur,Jr,Yr;return{c(){o=d("section"),a=d("ul"),r=d("li"),n=d("a"),s=m("Background"),l=d("li"),i=d("a"),u=m("The Tooling"),p=d("li"),w=d("a"),k=m("Babel & Eslint"),T=d("li"),F=d("a"),I=m("Prettier"),x=d("li"),L=d("a"),P=m("VSCode"),C=d("li"),S=d("a"),M=m("Closing remarks"),O=g(),N=d("section"),B=d("h2"),j=d("a"),H=m("Background"),_=g(),D=d("p"),z=m("Despite seeing the JS community "),q=d("a"),W=m("slowly"),R=g(),G=d("a"),V=m("moving away"),U=m(" from Flow to TypeScript, "),J=d("a"),Y=m("Shopee Web Frontend"),K=m(" codebase is still very much stuck with "),Q=d("a"),Z=m("Flow"),X=m(". üò®"),ee=g(),te=d("p"),oe=m("After some silence, Flow "),ae=d("a"),re=m("has come back and committed to be a more efficient, reliable and friendly tool."),ne=m(" Thus, we decided to give Flow a final chance. However, in order to enjoy the improvements that Flow has made in recent days, we have to upgrade Flow from 0.83 (since our last update) to v0.97 (latest to date), which meant that we need to upgrade past v0.85, "),se=d("a"),le=m("which meant hell"),ie=m(" to "),ce=d("a"),he=m("codebase that uses react-redux extensively"),fe=m("."),ue=g(),de=d("p"),pe=m("One of our "),me=d("a"),ge=m("brave developer, Gao Wei"),we=m(" took up the challenge and decided to bring us to the bright side of Flow. üòÖ. She "),ve=d("a"),be=m("twitted"),ye=m(" and wrote "),Ee=d("a"),Ae=m("an article"),ke=m(" on how she fixed the errors arose in the process."),Te=g(),$e=d("p"),Fe=m("To put the problem in perspective, from Flow 0.85 onwards, Flow is asking for "),Ie=d("a"),xe=m("required annotations for implicit annotations"),Le=m(". Or less technical, if you are trying to "),Pe=d("code"),Ce=m("export"),Se=m(" something that was created from a generic class (eg: "),Me=d("code"),Oe=m("class Foo<T>"),Ne=m(") or functions (eg: "),Be=d("code"),je=m("function foo<T>(){}"),He=m("), without explicit type arguments (eg: "),_e=d("code"),De=m("new Foo<Type>()"),ze=m(" or "),qe=d("code"),We=m("foo<Type>()"),Re=m("), Flow is going to give you an error."),Ge=g(),Ve=d("p"),Ue=m("Or in layman terms, if your repo is full of HOCs or "),Je=d("code"),Ye=m("connect()"),Ke=m(", you are f**ked. So, be sure the check "),Qe=d("a"),Ze=m("Gao Wei's blog"),Xe=m(" if you are one of the brave souls upgrading a Flow project."),et=g(),tt=d("section"),ot=d("h2"),at=d("a"),rt=m("The Tooling"),nt=g(),st=d("p"),lt=m("In this article, I would like to list out some of the  roadblocks we encountered that was less well discussed, the tooling for the latest Flow syntax, which is the "),it=d("code"),ct=m("TypeParameterInstantiation"),ht=m(", eg: calling a function or instantiation a class with a type parameter, "),ft=d("code"),ut=m("new Foo<Type>()"),dt=m(" or "),pt=d("code"),mt=m("foo<Type>()"),gt=m("."),wt=g(),vt=d("section"),bt=d("h2"),yt=d("a"),Et=m("Babel & Eslint"),At=g(),kt=d("p"),Tt=m("We had to upgrade our babel to "),$t=d("a"),Ft=m("babel v7"),It=m(" and babel-eslint (a babel wrapper for eslint) to "),xt=d("a"),Lt=m("babel-eslint v9"),Pt=m(" to support this new syntax."),Ct=g(),St=d("p"),Mt=m("You can read about on how we came to realise the need of this upgrade "),Ot=d("a"),Nt=m("in my previous post"),Bt=m("."),jt=g(),Ht=d("p"),_t=m("There was another interesting bug that we ran into regarding "),Dt=d("a"),zt=m("@babel/plugin-transform-flow-strip-types"),qt=m(", you can read more on how we uncover it in "),Wt=d("a"),Rt=m("my other blog post"),Gt=m("."),Vt=g(),Ut=d("section"),Jt=d("h2"),Yt=d("a"),Kt=m("Prettier"),Qt=g(),Zt=d("p"),Xt=m("We had to upgrade prettier to "),eo=d("a"),to=m("v1.16.0"),oo=m(" and use "),ao=d("code"),ro=m("babel-flow"),no=m(" parser for "),so=d("code"),lo=m("prettier"),io=m(" to resolve the ambiguity in syntax arise in parsing the newer Flow syntax. In simpler terms, to tell Prettier that"),co=g(),ho=d("pre"),fo=g(),uo=d("p"),po=m("is "),mo=d("em"),go=m('calling foobar with argument, 1 and type, "Type"'),wo=m(", instead of:"),vo=g(),bo=d("pre"),yo=g(),Eo=d("p"),Ao=d("em"),ko=m("is the result of foobar "),$o=m(" Type, greater than 1?"),Fo=m(" üòÇ"),Io=g(),xo=d("p"),Lo=m("You can read more about it in "),Po=d("a"),Co=m("Prettier's blog post"),So=m("."),Mo=g(),Oo=d("section"),No=d("h2"),Bo=d("a"),jo=m("VSCode"),Ho=g(),_o=d("p"),Do=m("Flow "),zo=d("a"),qo=m("Lazy Mode"),Wo=m(" has been around since v0.68, but we hadn't enjoy the benefit of lazy mode through VSCode "),Ro=d("a"),Go=m("until recently"),Vo=m("."),Uo=g(),Jo=d("p"),Yo=m("Now we can specify "),Ko=d("code"),Qo=m("lazyMode"),Zo=m(" in our "),Xo=d("code"),ea=m(".vscode/settings.json"),ta=m(":"),oa=g(),aa=d("pre"),ra=g(),na=d("p"),sa=m("Although "),la=d("a"),ia=m("lazy mode"),ca=m(" reduces the scope where Flow does type checking, one of the pain point we had with Flow was to wait for Flow to do recheck, before returning a meaningful Flow status again. Flow team did some optimisation in "),ha=d("a"),fa=m("v92.0"),ua=m(", where it says:"),da=g(),pa=d("blockquote"),ma=d("p"),ga=m("This release culminates months of hard work on quality of life improvements for IDE support.\nExpect your requests to be faster, and your requests to take a bit less time."),wa=g(),va=d("p"),ba=m("According to the release note, Flow is now able to "),ya=d("strong"),Ea=m("provide type definitions while rechecking"),Aa=m(", for further details on how they achieve this, you can read the "),ka=d("a"),Ta=m("Flow blog"),$a=g(),Fa=d("section"),Ia=d("h2"),xa=d("a"),La=m("Closing remarks"),Pa=g(),Ca=d("p"),Sa=m("Finally we managed to get Flow running in v0.97 üéâ. We've been struggling with bad developer experience with v0.83 for the longest time, hopefully v0.97 do not let us down."),Ma=g(),Oa=d("p"),Na=m("Lastly, be sure to check out all the links sprinkled throughout this blog, they link to Github issues, commits, release notes, and who knows it might lead you to some unexpected adventures? ü§∑‚Äç"),Ba=g(),ja=d("p"),Ha=m("But if you are lazy like me, here are the links, they served as my references when writing this blog post:"),_a=g(),Da=d("ul"),za=d("li"),qa=d("a"),Wa=m("Blog: Incremental Migration to TypeScript on a Flowtype codebase"),Ra=g(),Ga=d("li"),Va=d("a"),Ua=m("Blog: Porting 30k lines of code from Flow to TypeScript"),Ja=g(),Ya=d("li"),Ka=d("a"),Qa=m("Issue: What is the official way to type connect ( from flow-typed/react-redux) after 0.85?"),Za=g(),Xa=d("li"),er=d("a"),tr=m("Issue: [react-redux] libdef incompatible with flow v0.85 #2946"),or=g(),ar=d("li"),rr=d("a"),nr=m("Tweet: It's so hard to make flow happily get past 0.85 with our codebase..."),sr=g(),lr=d("li"),ir=d("a"),cr=m("Blog: Making Flow Happy after 0.85"),hr=g(),fr=d("li"),ur=d("a"),dr=m("Blog: Asking for Required Annotations"),pr=g(),mr=d("li"),gr=d("a"),wr=m("Docs: Babel 7 Migration"),vr=g(),br=d("li"),yr=d("a"),Er=m("Release Note: babel-eslint v9.0.0"),Ar=g(),kr=d("li"),Tr=d("a"),$r=m("Docs: @babel/plugin-transform-flow-strip-types"),Fr=g(),Ir=d("li"),xr=d("a"),Lr=m("Release Note: Prettier v1.16.0"),Pr=g(),Cr=d("li"),Sr=d("a"),Mr=m("Commit: Lazy mode message for flow status"),Or=g(),Nr=d("li"),Br=d("a"),jr=m("Commit: feat(lsp): add setting to support flow lazyMode."),Hr=g(),_r=d("li"),Dr=d("a"),zr=m("Docs: Flow Lazy Mode"),qr=g(),Wr=d("li"),Rr=d("a"),Gr=m("Release Note: Flow v0.92.0"),Vr=g(),Ur=d("li"),Jr=d("a"),Yr=m("Blog: A more responsive Flow"),this.h()},l(e){o=y(e,"SECTION",{});var t=b(o);a=y(t,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var c=b(a);r=y(c,"LI",{});var h=b(r);n=y(h,"A",{href:!0});var d=b(n);s=E(d,"Background"),d.forEach(f),h.forEach(f),l=y(c,"LI",{});var m=b(l);i=y(m,"A",{href:!0});var g=b(i);u=E(g,"The Tooling"),g.forEach(f),m.forEach(f),p=y(c,"LI",{});var v=b(p);w=y(v,"A",{href:!0});var $=b(w);k=E($,"Babel & Eslint"),$.forEach(f),v.forEach(f),T=y(c,"LI",{});var To=b(T);F=y(To,"A",{href:!0});var Kr=b(F);I=E(Kr,"Prettier"),Kr.forEach(f),To.forEach(f),x=y(c,"LI",{});var Qr=b(x);L=y(Qr,"A",{href:!0});var Zr=b(L);P=E(Zr,"VSCode"),Zr.forEach(f),Qr.forEach(f),C=y(c,"LI",{});var Xr=b(C);S=y(Xr,"A",{href:!0});var en=b(S);M=E(en,"Closing remarks"),en.forEach(f),Xr.forEach(f),c.forEach(f),t.forEach(f),O=A(e),N=y(e,"SECTION",{});var tn=b(N);B=y(tn,"H2",{});var on=b(B);j=y(on,"A",{href:!0,id:!0});var an=b(j);H=E(an,"Background"),an.forEach(f),on.forEach(f),_=A(tn),D=y(tn,"P",{});var rn=b(D);z=E(rn,"Despite seeing the JS community "),q=y(rn,"A",{href:!0,rel:!0});var nn=b(q);W=E(nn,"slowly"),nn.forEach(f),R=A(rn),G=y(rn,"A",{href:!0,rel:!0});var sn=b(G);V=E(sn,"moving away"),sn.forEach(f),U=E(rn," from Flow to TypeScript, "),J=y(rn,"A",{href:!0,rel:!0});var ln=b(J);Y=E(ln,"Shopee Web Frontend"),ln.forEach(f),K=E(rn," codebase is still very much stuck with "),Q=y(rn,"A",{href:!0,rel:!0});var cn=b(Q);Z=E(cn,"Flow"),cn.forEach(f),X=E(rn,". üò®"),rn.forEach(f),ee=A(tn),te=y(tn,"P",{});var hn=b(te);oe=E(hn,"After some silence, Flow "),ae=y(hn,"A",{href:!0,rel:!0});var fn=b(ae);re=E(fn,"has come back and committed to be a more efficient, reliable and friendly tool."),fn.forEach(f),ne=E(hn," Thus, we decided to give Flow a final chance. However, in order to enjoy the improvements that Flow has made in recent days, we have to upgrade Flow from 0.83 (since our last update) to v0.97 (latest to date), which meant that we need to upgrade past v0.85, "),se=y(hn,"A",{href:!0,rel:!0});var un=b(se);le=E(un,"which meant hell"),un.forEach(f),ie=E(hn," to "),ce=y(hn,"A",{href:!0,rel:!0});var dn=b(ce);he=E(dn,"codebase that uses react-redux extensively"),dn.forEach(f),fe=E(hn,"."),hn.forEach(f),ue=A(tn),de=y(tn,"P",{});var pn=b(de);pe=E(pn,"One of our "),me=y(pn,"A",{href:!0,rel:!0});var mn=b(me);ge=E(mn,"brave developer, Gao Wei"),mn.forEach(f),we=E(pn," took up the challenge and decided to bring us to the bright side of Flow. üòÖ. She "),ve=y(pn,"A",{href:!0,rel:!0});var gn=b(ve);be=E(gn,"twitted"),gn.forEach(f),ye=E(pn," and wrote "),Ee=y(pn,"A",{href:!0,rel:!0});var wn=b(Ee);Ae=E(wn,"an article"),wn.forEach(f),ke=E(pn," on how she fixed the errors arose in the process."),pn.forEach(f),Te=A(tn),$e=y(tn,"P",{});var vn=b($e);Fe=E(vn,"To put the problem in perspective, from Flow 0.85 onwards, Flow is asking for "),Ie=y(vn,"A",{href:!0,rel:!0});var bn=b(Ie);xe=E(bn,"required annotations for implicit annotations"),bn.forEach(f),Le=E(vn,". Or less technical, if you are trying to "),Pe=y(vn,"CODE",{});var yn=b(Pe);Ce=E(yn,"export"),yn.forEach(f),Se=E(vn," something that was created from a generic class (eg: "),Me=y(vn,"CODE",{});var En=b(Me);Oe=E(En,"class Foo<T>"),En.forEach(f),Ne=E(vn,") or functions (eg: "),Be=y(vn,"CODE",{});var An=b(Be);je=E(An,"function foo<T>(){}"),An.forEach(f),He=E(vn,"), without explicit type arguments (eg: "),_e=y(vn,"CODE",{});var kn=b(_e);De=E(kn,"new Foo<Type>()"),kn.forEach(f),ze=E(vn," or "),qe=y(vn,"CODE",{});var Tn=b(qe);We=E(Tn,"foo<Type>()"),Tn.forEach(f),Re=E(vn,"), Flow is going to give you an error."),vn.forEach(f),Ge=A(tn),Ve=y(tn,"P",{});var $n=b(Ve);Ue=E($n,"Or in layman terms, if your repo is full of HOCs or "),Je=y($n,"CODE",{});var Fn=b(Je);Ye=E(Fn,"connect()"),Fn.forEach(f),Ke=E($n,", you are f**ked. So, be sure the check "),Qe=y($n,"A",{href:!0,rel:!0});var In=b(Qe);Ze=E(In,"Gao Wei's blog"),In.forEach(f),Xe=E($n," if you are one of the brave souls upgrading a Flow project."),$n.forEach(f),tn.forEach(f),et=A(e),tt=y(e,"SECTION",{});var xn=b(tt);ot=y(xn,"H2",{});var Ln=b(ot);at=y(Ln,"A",{href:!0,id:!0});var Pn=b(at);rt=E(Pn,"The Tooling"),Pn.forEach(f),Ln.forEach(f),nt=A(xn),st=y(xn,"P",{});var Cn=b(st);lt=E(Cn,"In this article, I would like to list out some of the  roadblocks we encountered that was less well discussed, the tooling for the latest Flow syntax, which is the "),it=y(Cn,"CODE",{});var Sn=b(it);ct=E(Sn,"TypeParameterInstantiation"),Sn.forEach(f),ht=E(Cn,", eg: calling a function or instantiation a class with a type parameter, "),ft=y(Cn,"CODE",{});var Mn=b(ft);ut=E(Mn,"new Foo<Type>()"),Mn.forEach(f),dt=E(Cn," or "),pt=y(Cn,"CODE",{});var On=b(pt);mt=E(On,"foo<Type>()"),On.forEach(f),gt=E(Cn,"."),Cn.forEach(f),xn.forEach(f),wt=A(e),vt=y(e,"SECTION",{});var Nn=b(vt);bt=y(Nn,"H2",{});var Bn=b(bt);yt=y(Bn,"A",{href:!0,id:!0});var jn=b(yt);Et=E(jn,"Babel & Eslint"),jn.forEach(f),Bn.forEach(f),At=A(Nn),kt=y(Nn,"P",{});var Hn=b(kt);Tt=E(Hn,"We had to upgrade our babel to "),$t=y(Hn,"A",{href:!0,rel:!0});var _n=b($t);Ft=E(_n,"babel v7"),_n.forEach(f),It=E(Hn," and babel-eslint (a babel wrapper for eslint) to "),xt=y(Hn,"A",{href:!0,rel:!0});var Dn=b(xt);Lt=E(Dn,"babel-eslint v9"),Dn.forEach(f),Pt=E(Hn," to support this new syntax."),Hn.forEach(f),Ct=A(Nn),St=y(Nn,"P",{});var zn=b(St);Mt=E(zn,"You can read about on how we came to realise the need of this upgrade "),Ot=y(zn,"A",{href:!0,rel:!0});var qn=b(Ot);Nt=E(qn,"in my previous post"),qn.forEach(f),Bt=E(zn,"."),zn.forEach(f),jt=A(Nn),Ht=y(Nn,"P",{});var Wn=b(Ht);_t=E(Wn,"There was another interesting bug that we ran into regarding "),Dt=y(Wn,"A",{href:!0,rel:!0});var Rn=b(Dt);zt=E(Rn,"@babel/plugin-transform-flow-strip-types"),Rn.forEach(f),qt=E(Wn,", you can read more on how we uncover it in "),Wt=y(Wn,"A",{href:!0});var Gn=b(Wt);Rt=E(Gn,"my other blog post"),Gn.forEach(f),Gt=E(Wn,"."),Wn.forEach(f),Nn.forEach(f),Vt=A(e),Ut=y(e,"SECTION",{});var Vn=b(Ut);Jt=y(Vn,"H2",{});var Un=b(Jt);Yt=y(Un,"A",{href:!0,id:!0});var Jn=b(Yt);Kt=E(Jn,"Prettier"),Jn.forEach(f),Un.forEach(f),Qt=A(Vn),Zt=y(Vn,"P",{});var Yn=b(Zt);Xt=E(Yn,"We had to upgrade prettier to "),eo=y(Yn,"A",{href:!0,rel:!0});var Kn=b(eo);to=E(Kn,"v1.16.0"),Kn.forEach(f),oo=E(Yn," and use "),ao=y(Yn,"CODE",{});var Qn=b(ao);ro=E(Qn,"babel-flow"),Qn.forEach(f),no=E(Yn," parser for "),so=y(Yn,"CODE",{});var Zn=b(so);lo=E(Zn,"prettier"),Zn.forEach(f),io=E(Yn," to resolve the ambiguity in syntax arise in parsing the newer Flow syntax. In simpler terms, to tell Prettier that"),Yn.forEach(f),co=A(Vn),ho=y(Vn,"PRE",{class:!0}),b(ho).forEach(f),fo=A(Vn),uo=y(Vn,"P",{});var Xn=b(uo);po=E(Xn,"is "),mo=y(Xn,"EM",{});var es=b(mo);go=E(es,'calling foobar with argument, 1 and type, "Type"'),es.forEach(f),wo=E(Xn,", instead of:"),Xn.forEach(f),vo=A(Vn),bo=y(Vn,"PRE",{class:!0}),b(bo).forEach(f),yo=A(Vn),Eo=y(Vn,"P",{});var ts=b(Eo);Ao=y(ts,"EM",{});var os=b(Ao);ko=E(os,"is the result of foobar "),$o=E(os," Type, greater than 1?"),os.forEach(f),Fo=E(ts," üòÇ"),ts.forEach(f),Io=A(Vn),xo=y(Vn,"P",{});var as=b(xo);Lo=E(as,"You can read more about it in "),Po=y(as,"A",{href:!0,rel:!0});var rs=b(Po);Co=E(rs,"Prettier's blog post"),rs.forEach(f),So=E(as,"."),as.forEach(f),Vn.forEach(f),Mo=A(e),Oo=y(e,"SECTION",{});var ns=b(Oo);No=y(ns,"H2",{});var ss=b(No);Bo=y(ss,"A",{href:!0,id:!0});var ls=b(Bo);jo=E(ls,"VSCode"),ls.forEach(f),ss.forEach(f),Ho=A(ns),_o=y(ns,"P",{});var is=b(_o);Do=E(is,"Flow "),zo=y(is,"A",{href:!0,rel:!0});var cs=b(zo);qo=E(cs,"Lazy Mode"),cs.forEach(f),Wo=E(is," has been around since v0.68, but we hadn't enjoy the benefit of lazy mode through VSCode "),Ro=y(is,"A",{href:!0,rel:!0});var hs=b(Ro);Go=E(hs,"until recently"),hs.forEach(f),Vo=E(is,"."),is.forEach(f),Uo=A(ns),Jo=y(ns,"P",{});var fs=b(Jo);Yo=E(fs,"Now we can specify "),Ko=y(fs,"CODE",{});var us=b(Ko);Qo=E(us,"lazyMode"),us.forEach(f),Zo=E(fs," in our "),Xo=y(fs,"CODE",{});var ds=b(Xo);ea=E(ds,".vscode/settings.json"),ds.forEach(f),ta=E(fs,":"),fs.forEach(f),oa=A(ns),aa=y(ns,"PRE",{class:!0}),b(aa).forEach(f),ra=A(ns),na=y(ns,"P",{});var ps=b(na);sa=E(ps,"Although "),la=y(ps,"A",{href:!0,rel:!0});var ms=b(la);ia=E(ms,"lazy mode"),ms.forEach(f),ca=E(ps," reduces the scope where Flow does type checking, one of the pain point we had with Flow was to wait for Flow to do recheck, before returning a meaningful Flow status again. Flow team did some optimisation in "),ha=y(ps,"A",{href:!0,rel:!0});var gs=b(ha);fa=E(gs,"v92.0"),gs.forEach(f),ua=E(ps,", where it says:"),ps.forEach(f),da=A(ns),pa=y(ns,"BLOCKQUOTE",{});var ws=b(pa);ma=y(ws,"P",{});var vs=b(ma);ga=E(vs,"This release culminates months of hard work on quality of life improvements for IDE support.\nExpect your requests to be faster, and your requests to take a bit less time."),vs.forEach(f),ws.forEach(f),wa=A(ns),va=y(ns,"P",{});var bs=b(va);ba=E(bs,"According to the release note, Flow is now able to "),ya=y(bs,"STRONG",{});var ys=b(ya);Ea=E(ys,"provide type definitions while rechecking"),ys.forEach(f),Aa=E(bs,", for further details on how they achieve this, you can read the "),ka=y(bs,"A",{href:!0,rel:!0});var Es=b(ka);Ta=E(Es,"Flow blog"),Es.forEach(f),bs.forEach(f),ns.forEach(f),$a=A(e),Fa=y(e,"SECTION",{});var As=b(Fa);Ia=y(As,"H2",{});var ks=b(Ia);xa=y(ks,"A",{href:!0,id:!0});var Ts=b(xa);La=E(Ts,"Closing remarks"),Ts.forEach(f),ks.forEach(f),Pa=A(As),Ca=y(As,"P",{});var $s=b(Ca);Sa=E($s,"Finally we managed to get Flow running in v0.97 üéâ. We've been struggling with bad developer experience with v0.83 for the longest time, hopefully v0.97 do not let us down."),$s.forEach(f),Ma=A(As),Oa=y(As,"P",{});var Fs=b(Oa);Na=E(Fs,"Lastly, be sure to check out all the links sprinkled throughout this blog, they link to Github issues, commits, release notes, and who knows it might lead you to some unexpected adventures? ü§∑‚Äç"),Fs.forEach(f),Ba=A(As),ja=y(As,"P",{});var Is=b(ja);Ha=E(Is,"But if you are lazy like me, here are the links, they served as my references when writing this blog post:"),Is.forEach(f),_a=A(As),Da=y(As,"UL",{});var xs=b(Da);za=y(xs,"LI",{});var Ls=b(za);qa=y(Ls,"A",{href:!0,rel:!0});var Ps=b(qa);Wa=E(Ps,"Blog: Incremental Migration to TypeScript on a Flowtype codebase"),Ps.forEach(f),Ls.forEach(f),Ra=A(xs),Ga=y(xs,"LI",{});var Cs=b(Ga);Va=y(Cs,"A",{href:!0,rel:!0});var Ss=b(Va);Ua=E(Ss,"Blog: Porting 30k lines of code from Flow to TypeScript"),Ss.forEach(f),Cs.forEach(f),Ja=A(xs),Ya=y(xs,"LI",{});var Ms=b(Ya);Ka=y(Ms,"A",{href:!0,rel:!0});var Os=b(Ka);Qa=E(Os,"Issue: What is the official way to type connect ( from flow-typed/react-redux) after 0.85?"),Os.forEach(f),Ms.forEach(f),Za=A(xs),Xa=y(xs,"LI",{});var Ns=b(Xa);er=y(Ns,"A",{href:!0,rel:!0});var Bs=b(er);tr=E(Bs,"Issue: [react-redux] libdef incompatible with flow v0.85 #2946"),Bs.forEach(f),Ns.forEach(f),or=A(xs),ar=y(xs,"LI",{});var js=b(ar);rr=y(js,"A",{href:!0,rel:!0});var Hs=b(rr);nr=E(Hs,"Tweet: It's so hard to make flow happily get past 0.85 with our codebase..."),Hs.forEach(f),js.forEach(f),sr=A(xs),lr=y(xs,"LI",{});var _s=b(lr);ir=y(_s,"A",{href:!0,rel:!0});var Ds=b(ir);cr=E(Ds,"Blog: Making Flow Happy after 0.85"),Ds.forEach(f),_s.forEach(f),hr=A(xs),fr=y(xs,"LI",{});var zs=b(fr);ur=y(zs,"A",{href:!0,rel:!0});var qs=b(ur);dr=E(qs,"Blog: Asking for Required Annotations"),qs.forEach(f),zs.forEach(f),pr=A(xs),mr=y(xs,"LI",{});var Ws=b(mr);gr=y(Ws,"A",{href:!0,rel:!0});var Rs=b(gr);wr=E(Rs,"Docs: Babel 7 Migration"),Rs.forEach(f),Ws.forEach(f),vr=A(xs),br=y(xs,"LI",{});var Gs=b(br);yr=y(Gs,"A",{href:!0,rel:!0});var Vs=b(yr);Er=E(Vs,"Release Note: babel-eslint v9.0.0"),Vs.forEach(f),Gs.forEach(f),Ar=A(xs),kr=y(xs,"LI",{});var Us=b(kr);Tr=y(Us,"A",{href:!0,rel:!0});var Js=b(Tr);$r=E(Js,"Docs: @babel/plugin-transform-flow-strip-types"),Js.forEach(f),Us.forEach(f),Fr=A(xs),Ir=y(xs,"LI",{});var Ys=b(Ir);xr=y(Ys,"A",{href:!0,rel:!0});var Ks=b(xr);Lr=E(Ks,"Release Note: Prettier v1.16.0"),Ks.forEach(f),Ys.forEach(f),Pr=A(xs),Cr=y(xs,"LI",{});var Qs=b(Cr);Sr=y(Qs,"A",{href:!0,rel:!0});var Zs=b(Sr);Mr=E(Zs,"Commit: Lazy mode message for flow status"),Zs.forEach(f),Qs.forEach(f),Or=A(xs),Nr=y(xs,"LI",{});var Xs=b(Nr);Br=y(Xs,"A",{href:!0,rel:!0});var el=b(Br);jr=E(el,"Commit: feat(lsp): add setting to support flow lazyMode."),el.forEach(f),Xs.forEach(f),Hr=A(xs),_r=y(xs,"LI",{});var tl=b(_r);Dr=y(tl,"A",{href:!0,rel:!0});var ol=b(Dr);zr=E(ol,"Docs: Flow Lazy Mode"),ol.forEach(f),tl.forEach(f),qr=A(xs),Wr=y(xs,"LI",{});var al=b(Wr);Rr=y(al,"A",{href:!0,rel:!0});var rl=b(Rr);Gr=E(rl,"Release Note: Flow v0.92.0"),rl.forEach(f),al.forEach(f),Vr=A(xs),Ur=y(xs,"LI",{});var nl=b(Ur);Jr=y(nl,"A",{href:!0,rel:!0});var sl=b(Jr);Yr=E(sl,"Blog: A more responsive Flow"),sl.forEach(f),nl.forEach(f),xs.forEach(f),As.forEach(f),this.h()},h(){v(n,"href","#background"),v(i,"href","#the-tooling"),v(w,"href","#babel-eslint"),v(F,"href","#prettier"),v(L,"href","#vscode"),v(S,"href","#closing-remarks"),v(a,"class","sitemap"),v(a,"id","sitemap"),v(a,"role","navigation"),v(a,"aria-label","Table of Contents"),v(j,"href","#background"),v(j,"id","background"),v(q,"href","https://medium.com/entria/incremental-migration-to-typescript-on-a-flowtype-codebase-515f6490d92d"),v(q,"rel","nofollow"),v(G,"href","https://davidgomes.com/porting-30k-lines-of-code-from-flow-to-typescript/"),v(G,"rel","nofollow"),v(J,"href","https://careers.shopee.sg/jobs/?region_id=1&dept_id=109&name=web%20frontend&limit=20&offset=0"),v(J,"rel","nofollow"),v(Q,"href","https://flow.org/"),v(Q,"rel","nofollow"),v(ae,"href","https://medium.com/flow-type/what-the-flow-team-has-been-up-to-54239c62004f"),v(ae,"rel","nofollow"),v(se,"href","https://github.com/facebook/flow/issues/7493"),v(se,"rel","nofollow"),v(ce,"href","https://github.com/flow-typed/flow-typed/issues/2946"),v(ce,"rel","nofollow"),v(me,"href","https://wgao19.cc/"),v(me,"rel","nofollow"),v(ve,"href","https://twitter.com/wgao19/status/1115969686758248448"),v(ve,"rel","nofollow"),v(Ee,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),v(Ee,"rel","nofollow"),v(Ie,"href","https://medium.com/flow-type/asking-for-required-annotations-64d4f9c1edf8"),v(Ie,"rel","nofollow"),v(Qe,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),v(Qe,"rel","nofollow"),v(at,"href","#the-tooling"),v(at,"id","the-tooling"),v(yt,"href","#babel-eslint"),v(yt,"id","babel-eslint"),v($t,"href","https://babeljs.io/docs/en/v7-migration"),v($t,"rel","nofollow"),v(xt,"href","https://github.com/babel/babel-eslint/releases/tag/v9.0.0"),v(xt,"rel","nofollow"),v(Ot,"href","https://lihautan.com/eslint-for-flow-explicit-type-argument-syntax/"),v(Ot,"rel","nofollow"),v(Dt,"href","https://babeljs.io/docs/en/babel-plugin-transform-flow-strip-types"),v(Dt,"rel","nofollow"),v(Wt,"href","/parsing-error-flow-type-parameter-instantiation/"),v(Yt,"href","#prettier"),v(Yt,"id","prettier"),v(eo,"href","https://prettier.io/blog/2019/01/20/1.16.0.html"),v(eo,"rel","nofollow"),v(ho,"class","language-js"),v(bo,"class","language-js"),To=new $($o),v(Po,"href","https://prettier.io/blog/2019/01/20/1.16.0.html#add-babel-flow-parser-5685-by-ikatyang"),v(Po,"rel","nofollow"),v(Bo,"href","#vscode"),v(Bo,"id","vscode"),v(zo,"href","https://github.com/facebook/flow/commit/3c0a2bbd118206a0a73a1a4d18375122c4ae1955"),v(zo,"rel","nofollow"),v(Ro,"href","https://github.com/flowtype/flow-for-vscode/commit/9c1440068f8faee95e487fc9f69b5f5ffed64bf1"),v(Ro,"rel","nofollow"),v(aa,"class","language-json"),v(la,"href","https://flow.org/en/docs/lang/lazy-modes/"),v(la,"rel","nofollow"),v(ha,"href","https://github.com/facebook/flow/releases/tag/v0.92.0"),v(ha,"rel","nofollow"),v(ka,"href","https://medium.com/flow-type/a-more-responsive-flow-1a8cb01aec11"),v(ka,"rel","nofollow"),v(xa,"href","#closing-remarks"),v(xa,"id","closing-remarks"),v(qa,"href","https://medium.com/entria/incremental-migration-to-typescript-on-a-flowtype-codebase-515f6490d92d"),v(qa,"rel","nofollow"),v(Va,"href","https://davidgomes.com/porting-30k-lines-of-code-from-flow-to-typescript"),v(Va,"rel","nofollow"),v(Ka,"href","https://github.com/facebook/flow/issues/7493"),v(Ka,"rel","nofollow"),v(er,"href","https://github.com/flow-typed/flow-typed/issues/2946"),v(er,"rel","nofollow"),v(rr,"href","https://twitter.com/wgao19/status/1115969686758248448"),v(rr,"rel","nofollow"),v(ir,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),v(ir,"rel","nofollow"),v(ur,"href","https://medium.com/flow-type/asking-for-required-annotations-64d4f9c1edf8"),v(ur,"rel","nofollow"),v(gr,"href","https://babeljs.io/docs/en/v7-migration"),v(gr,"rel","nofollow"),v(yr,"href","https://github.com/babel/babel-eslint/releases/tag/v9.0.0"),v(yr,"rel","nofollow"),v(Tr,"href","https://babeljs.io/docs/en/babel-plugin-transform-flow-strip-types"),v(Tr,"rel","nofollow"),v(xr,"href","https://prettier.io/blog/2019/01/20/1.16.0.html"),v(xr,"rel","nofollow"),v(Sr,"href","https://github.com/facebook/flow/commit/3c0a2bbd118206a0a73a1a4d18375122c4ae1955"),v(Sr,"rel","nofollow"),v(Br,"href","https://github.com/flowtype/flow-for-vscode/commit/9c1440068f8faee95e487fc9f69b5f5ffed64bf1"),v(Br,"rel","nofollow"),v(Dr,"href","https://flow.org/en/docs/lang/lazy-modes/"),v(Dr,"rel","nofollow"),v(Rr,"href","https://github.com/facebook/flow/releases/tag/v0.92.0"),v(Rr,"rel","nofollow"),v(Jr,"href","https://medium.com/flow-type/a-more-responsive-flow-1a8cb01aec11"),v(Jr,"rel","nofollow")},m(e,t){h(e,o,t),c(o,a),c(a,r),c(r,n),c(n,s),c(a,l),c(l,i),c(i,u),c(a,p),c(p,w),c(w,k),c(a,T),c(T,F),c(F,I),c(a,x),c(x,L),c(L,P),c(a,C),c(C,S),c(S,M),h(e,O,t),h(e,N,t),c(N,B),c(B,j),c(j,H),c(N,_),c(N,D),c(D,z),c(D,q),c(q,W),c(D,R),c(D,G),c(G,V),c(D,U),c(D,J),c(J,Y),c(D,K),c(D,Q),c(Q,Z),c(D,X),c(N,ee),c(N,te),c(te,oe),c(te,ae),c(ae,re),c(te,ne),c(te,se),c(se,le),c(te,ie),c(te,ce),c(ce,he),c(te,fe),c(N,ue),c(N,de),c(de,pe),c(de,me),c(me,ge),c(de,we),c(de,ve),c(ve,be),c(de,ye),c(de,Ee),c(Ee,Ae),c(de,ke),c(N,Te),c(N,$e),c($e,Fe),c($e,Ie),c(Ie,xe),c($e,Le),c($e,Pe),c(Pe,Ce),c($e,Se),c($e,Me),c(Me,Oe),c($e,Ne),c($e,Be),c(Be,je),c($e,He),c($e,_e),c(_e,De),c($e,ze),c($e,qe),c(qe,We),c($e,Re),c(N,Ge),c(N,Ve),c(Ve,Ue),c(Ve,Je),c(Je,Ye),c(Ve,Ke),c(Ve,Qe),c(Qe,Ze),c(Ve,Xe),h(e,et,t),h(e,tt,t),c(tt,ot),c(ot,at),c(at,rt),c(tt,nt),c(tt,st),c(st,lt),c(st,it),c(it,ct),c(st,ht),c(st,ft),c(ft,ut),c(st,dt),c(st,pt),c(pt,mt),c(st,gt),h(e,wt,t),h(e,vt,t),c(vt,bt),c(bt,yt),c(yt,Et),c(vt,At),c(vt,kt),c(kt,Tt),c(kt,$t),c($t,Ft),c(kt,It),c(kt,xt),c(xt,Lt),c(kt,Pt),c(vt,Ct),c(vt,St),c(St,Mt),c(St,Ot),c(Ot,Nt),c(St,Bt),c(vt,jt),c(vt,Ht),c(Ht,_t),c(Ht,Dt),c(Dt,zt),c(Ht,qt),c(Ht,Wt),c(Wt,Rt),c(Ht,Gt),h(e,Vt,t),h(e,Ut,t),c(Ut,Jt),c(Jt,Yt),c(Yt,Kt),c(Ut,Qt),c(Ut,Zt),c(Zt,Xt),c(Zt,eo),c(eo,to),c(Zt,oo),c(Zt,ao),c(ao,ro),c(Zt,no),c(Zt,so),c(so,lo),c(Zt,io),c(Ut,co),c(Ut,ho),ho.innerHTML='<code class="language-js">foobar<span class="token operator">&lt;</span>Type<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></code>',c(Ut,fo),c(Ut,uo),c(uo,po),c(uo,mo),c(mo,go),c(uo,wo),c(Ut,vo),c(Ut,bo),bo.innerHTML='<code class="language-js">foobar <span class="token operator">&lt;</span> Type <span class="token operator">></span> <span class="token number">1</span></code>',c(Ut,yo),c(Ut,Eo),c(Eo,Ao),c(Ao,ko),To.m("<",Ao),c(Ao,$o),c(Eo,Fo),c(Ut,Io),c(Ut,xo),c(xo,Lo),c(xo,Po),c(Po,Co),c(xo,So),h(e,Mo,t),h(e,Oo,t),c(Oo,No),c(No,Bo),c(Bo,jo),c(Oo,Ho),c(Oo,_o),c(_o,Do),c(_o,zo),c(zo,qo),c(_o,Wo),c(_o,Ro),c(Ro,Go),c(_o,Vo),c(Oo,Uo),c(Oo,Jo),c(Jo,Yo),c(Jo,Ko),c(Ko,Qo),c(Jo,Zo),c(Jo,Xo),c(Xo,ea),c(Jo,ta),c(Oo,oa),c(Oo,aa),aa.innerHTML='<code class="language-json"><span class="token punctuation">&#123;</span>\n  <span class="token property">"flow.useLSP"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token property">"flow.lazyMode"</span><span class="token operator">:</span> <span class="token string">"ide"</span>\n<span class="token punctuation">&#125;</span></code>',c(Oo,ra),c(Oo,na),c(na,sa),c(na,la),c(la,ia),c(na,ca),c(na,ha),c(ha,fa),c(na,ua),c(Oo,da),c(Oo,pa),c(pa,ma),c(ma,ga),c(Oo,wa),c(Oo,va),c(va,ba),c(va,ya),c(ya,Ea),c(va,Aa),c(va,ka),c(ka,Ta),h(e,$a,t),h(e,Fa,t),c(Fa,Ia),c(Ia,xa),c(xa,La),c(Fa,Pa),c(Fa,Ca),c(Ca,Sa),c(Fa,Ma),c(Fa,Oa),c(Oa,Na),c(Fa,Ba),c(Fa,ja),c(ja,Ha),c(Fa,_a),c(Fa,Da),c(Da,za),c(za,qa),c(qa,Wa),c(Da,Ra),c(Da,Ga),c(Ga,Va),c(Va,Ua),c(Da,Ja),c(Da,Ya),c(Ya,Ka),c(Ka,Qa),c(Da,Za),c(Da,Xa),c(Xa,er),c(er,tr),c(Da,or),c(Da,ar),c(ar,rr),c(rr,nr),c(Da,sr),c(Da,lr),c(lr,ir),c(ir,cr),c(Da,hr),c(Da,fr),c(fr,ur),c(ur,dr),c(Da,pr),c(Da,mr),c(mr,gr),c(gr,wr),c(Da,vr),c(Da,br),c(br,yr),c(yr,Er),c(Da,Ar),c(Da,kr),c(kr,Tr),c(Tr,$r),c(Da,Fr),c(Da,Ir),c(Ir,xr),c(xr,Lr),c(Da,Pr),c(Da,Cr),c(Cr,Sr),c(Sr,Mr),c(Da,Or),c(Da,Nr),c(Nr,Br),c(Br,jr),c(Da,Hr),c(Da,_r),c(_r,Dr),c(Dr,zr),c(Da,qr),c(Da,Wr),c(Wr,Rr),c(Rr,Gr),c(Da,Vr),c(Da,Ur),c(Ur,Jr),c(Jr,Yr)},p:e,d(e){e&&f(o),e&&f(O),e&&f(N),e&&f(et),e&&f(tt),e&&f(wt),e&&f(vt),e&&f(Vt),e&&f(Ut),e&&f(Mo),e&&f(Oo),e&&f($a),e&&f(Fa)}}}function fe(e){let o,a;const r=[ue];let n={$$slots:{default:[he]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)n=t(n,r[e]);return o=new ce({props:n}),{c(){W(o.$$.fragment)},l(e){R(o.$$.fragment,e)},m(e,t){G(o,e,t),a=!0},p(e,[t]){const a=0&t?function(e,t){const o={},a={},r={$$scope:1};let n=e.length;for(;n--;){const s=e[n],l=t[n];if(l){for(const e in s)e in l||(a[e]=1);for(const e in l)r[e]||(o[e]=l[e],r[e]=1);e[n]=l}else for(const e in s)r[e]=1}for(const e in a)e in o||(o[e]=void 0);return o}(r,[(n=ue,"object"==typeof n&&null!==n?n:{})]):{};var n;1&t&&(a.$$scope={dirty:t,ctx:e}),o.$set(a)},i(e){a||(z(o.$$.fragment,e),a=!0)},o(e){q(o.$$.fragment,e),a=!1},d(e){V(o,e)}}}const ue={title:"Errors encountered upgrading Flow v0.85",date:"2019-04-22T08:00:00Z",description:"and how we solved them",slug:"errors-encountered-upgrading-flow-0.85",type:"blog"};class de extends Y{constructor(e){super(),J(this,e,null,fe,s,{})}}setTimeout(()=>{new de({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const e=document.createElement("script");e.async=!0,e.src="https://platform.twitter.com/widgets.js",e.charset="utf-8",document.body.appendChild(e)}},3e3);
