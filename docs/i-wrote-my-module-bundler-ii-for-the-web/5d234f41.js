function n(){}function a(n,a){for(const s in a)n[s]=a[s];return n}function s(n){return n()}function t(){return Object.create(null)}function e(n){n.forEach(s)}function o(n){return"function"==typeof n}function p(n,a){return n!=n?a==a:n!==a||n&&"object"==typeof n||"function"==typeof n}function c(n,s,t,e){return n[1]&&e?a(t.ctx.slice(),n[1](e(s))):t.ctx}function l(n,a,s,t,e,o,p){const l=function(n,a,s,t){if(n[2]&&t){const e=n[2](t(s));if(void 0===a.dirty)return e;if("object"==typeof e){const n=[],s=Math.max(a.dirty.length,e.length);for(let t=0;t<s;t+=1)n[t]=a.dirty[t]|e[t];return n}return a.dirty|e}return a.dirty}(a,t,e,o);if(l){const e=c(a,s,t,p);n.p(e,l)}}function i(n,a){n.appendChild(a)}function r(n,a,s){n.insertBefore(a,s||null)}function u(n){n.parentNode.removeChild(n)}function h(n,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].d(a)}function d(n){return document.createElement(n)}function k(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function f(n){return document.createTextNode(n)}function m(){return f(" ")}function g(){return f("")}function v(n,a,s){null==s?n.removeAttribute(a):n.getAttribute(a)!==s&&n.setAttribute(a,s)}function E(n){return Array.from(n.childNodes)}function y(n,a,s,t){for(let t=0;t<n.length;t+=1){const e=n[t];if(e.nodeName===a){let a=0;const o=[];for(;a<e.attributes.length;){const n=e.attributes[a++];s[n.name]||o.push(n.name)}for(let n=0;n<o.length;n++)e.removeAttribute(o[n]);return n.splice(t,1)[0]}}return t?k(a):d(a)}function w(n,a){for(let s=0;s<n.length;s+=1){const t=n[s];if(3===t.nodeType)return t.data=""+a,n.splice(s,1)[0]}return f(a)}function b(n){return w(n," ")}function S(n,a){a=""+a,n.wholeText!==a&&(n.data=a)}function T(n,a){n.value=null==a?"":a}class I{constructor(n=null){this.a=n,this.e=this.n=null}m(n,a,s=null){this.e||(this.e=d(a.nodeName),this.t=a,this.h(n)),this.i(s)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let a=0;a<this.n.length;a+=1)r(this.t,this.n[a],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(u)}}let A;function P(n){A=n}function L(n){(function(){if(!A)throw new Error("Function called outside component initialization");return A})().$$.on_mount.push(n)}const x=[],M=[],C=[],$=[],j=Promise.resolve();let H=!1;function O(n){C.push(n)}let D=!1;const N=new Set;function F(){if(!D){D=!0;do{for(let n=0;n<x.length;n+=1){const a=x[n];P(a),R(a.$$)}for(x.length=0;M.length;)M.pop()();for(let n=0;n<C.length;n+=1){const a=C[n];N.has(a)||(N.add(a),a())}C.length=0}while(x.length);for(;$.length;)$.pop()();H=!1,D=!1,N.clear()}}function R(n){if(null!==n.fragment){n.update(),e(n.before_update);const a=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,a),n.after_update.forEach(O)}}const q=new Set;function _(n,a){n&&n.i&&(q.delete(n),n.i(a))}function J(n,a,s,t){if(n&&n.o){if(q.has(n))return;q.add(n),(void 0).c.push(()=>{q.delete(n),t&&(s&&n.d(1),t())}),n.o(a)}}function U(n){n&&n.c()}function B(n,a){n&&n.l(a)}function W(n,a,t){const{fragment:p,on_mount:c,on_destroy:l,after_update:i}=n.$$;p&&p.m(a,t),O(()=>{const a=c.map(s).filter(o);l?l.push(...a):e(a),n.$$.on_mount=[]}),i.forEach(O)}function G(n,a){const s=n.$$;null!==s.fragment&&(e(s.on_destroy),s.fragment&&s.fragment.d(a),s.on_destroy=s.fragment=null,s.ctx=[])}function z(n,a){-1===n.$$.dirty[0]&&(x.push(n),H||(H=!0,j.then(F)),n.$$.dirty.fill(0)),n.$$.dirty[a/31|0]|=1<<a%31}function Y(a,s,o,p,c,l,i=[-1]){const r=A;P(a);const h=s.props||{},d=a.$$={fragment:null,ctx:null,props:l,update:n,not_equal:c,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:t(),dirty:i};let k=!1;if(d.ctx=o?o(a,h,(n,s,...t)=>{const e=t.length?t[0]:s;return d.ctx&&c(d.ctx[n],d.ctx[n]=e)&&(d.bound[n]&&d.bound[n](e),k&&z(a,n)),s}):[],d.update(),k=!0,e(d.before_update),d.fragment=!!p&&p(d.ctx),s.target){if(s.hydrate){const n=E(s.target);d.fragment&&d.fragment.l(n),n.forEach(u)}else d.fragment&&d.fragment.c();s.intro&&_(a.$$.fragment),W(a,s.target,s.anchor),F()}P(r)}class V{$destroy(){G(this,1),this.$destroy=n}$on(n,a){const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(a),()=>{const n=s.indexOf(a);-1!==n&&s.splice(n,1)}}$set(){}}function K(a){let s,t,e,o,p,c,l,h,g,S,T,I,A,P,L,x,M,C,$,j,H,O,D,N,F,R,q,_,J,U,B,W,G,z,Y;return{c(){s=d("header"),t=d("nav"),e=d("ul"),o=d("li"),p=d("a"),c=f("Tan Li Hau"),l=m(),h=d("li"),g=d("a"),S=f("About"),T=m(),I=d("li"),A=d("a"),P=f("Writings"),L=m(),x=d("li"),M=d("a"),C=f("Talks"),$=m(),j=d("li"),H=d("a"),O=f("Notes"),D=m(),N=d("li"),F=d("a"),R=f("Newsletter"),q=m(),_=d("li"),J=d("a"),U=k("svg"),B=k("path"),W=m(),G=d("a"),z=k("svg"),Y=k("path"),this.h()},l(n){s=y(n,"HEADER",{class:!0});var a=E(s);t=y(a,"NAV",{});var i=E(t);e=y(i,"UL",{class:!0});var r=E(e);o=y(r,"LI",{class:!0});var d=E(o);p=y(d,"A",{href:!0,class:!0});var k=E(p);c=w(k,"Tan Li Hau"),k.forEach(u),d.forEach(u),l=b(r),h=y(r,"LI",{class:!0});var f=E(h);g=y(f,"A",{href:!0,class:!0});var m=E(g);S=w(m,"About"),m.forEach(u),f.forEach(u),T=b(r),I=y(r,"LI",{class:!0});var v=E(I);A=y(v,"A",{href:!0,class:!0});var V=E(A);P=w(V,"Writings"),V.forEach(u),v.forEach(u),L=b(r),x=y(r,"LI",{class:!0});var K=E(x);M=y(K,"A",{href:!0,class:!0});var Q=E(M);C=w(Q,"Talks"),Q.forEach(u),K.forEach(u),$=b(r),j=y(r,"LI",{class:!0});var Z=E(j);H=y(Z,"A",{href:!0,class:!0});var X=E(H);O=w(X,"Notes"),X.forEach(u),Z.forEach(u),D=b(r),N=y(r,"LI",{class:!0});var nn=E(N);F=y(nn,"A",{href:!0,class:!0});var an=E(F);R=w(an,"Newsletter"),an.forEach(u),nn.forEach(u),q=b(r),_=y(r,"LI",{class:!0});var sn=E(_);J=y(sn,"A",{"aria-label":!0,href:!0,class:!0});var tn=E(J);U=y(tn,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var en=E(U);B=y(en,"path",{d:!0},1),E(B).forEach(u),en.forEach(u),tn.forEach(u),W=b(sn),G=y(sn,"A",{"aria-label":!0,href:!0,class:!0});var on=E(G);z=y(on,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var pn=E(z);Y=y(pn,"path",{d:!0},1),E(Y).forEach(u),pn.forEach(u),on.forEach(u),sn.forEach(u),r.forEach(u),i.forEach(u),a.forEach(u),this.h()},h(){v(p,"href","/"),v(p,"class","svelte-f3e4uo"),v(o,"class","svelte-f3e4uo"),v(g,"href","/about"),v(g,"class","svelte-f3e4uo"),v(h,"class","svelte-f3e4uo"),v(A,"href","/blogs"),v(A,"class","svelte-f3e4uo"),v(I,"class","svelte-f3e4uo"),v(M,"href","/talks"),v(M,"class","svelte-f3e4uo"),v(x,"class","svelte-f3e4uo"),v(H,"href","/notes"),v(H,"class","svelte-f3e4uo"),v(j,"class","svelte-f3e4uo"),v(F,"href","/newsletter"),v(F,"class","svelte-f3e4uo"),v(N,"class","svelte-f3e4uo"),v(B,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),v(U,"viewBox","0 0 24 24"),v(U,"width","1em"),v(U,"height","1em"),v(U,"class","svelte-f3e4uo"),v(J,"aria-label","Twitter account"),v(J,"href","https://twitter.com/lihautan"),v(J,"class","svelte-f3e4uo"),v(Y,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),v(z,"viewBox","0 0 24 24"),v(z,"width","1em"),v(z,"height","1em"),v(z,"class","svelte-f3e4uo"),v(G,"aria-label","Github account"),v(G,"href","https://github.com/tanhauhau"),v(G,"class","svelte-f3e4uo"),v(_,"class","social svelte-f3e4uo"),v(e,"class","svelte-f3e4uo"),v(s,"class","svelte-f3e4uo")},m(n,a){r(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(p,c),i(e,l),i(e,h),i(h,g),i(g,S),i(e,T),i(e,I),i(I,A),i(A,P),i(e,L),i(e,x),i(x,M),i(M,C),i(e,$),i(e,j),i(j,H),i(H,O),i(e,D),i(e,N),i(N,F),i(F,R),i(e,q),i(e,_),i(_,J),i(J,U),i(U,B),i(_,W),i(_,G),i(G,z),i(z,Y)},p:n,i:n,o:n,d(n){n&&u(s)}}}class Q extends V{constructor(n){super(),Y(this,n,null,K,p,{})}}function Z(a){let s,t,e,o,p,c,l,h,k,g,S,I,A,P,L,x,M,C,$,j;return{c(){s=d("div"),t=d("h1"),e=f("Subscribe to my newsletter"),o=m(),p=d("h2"),c=f("Get the latest blog posts and project updates delivered right to your inbox"),l=m(),h=d("form"),k=d("div"),g=d("input"),S=m(),I=d("input"),P=m(),L=d("input"),x=m(),M=d("p"),C=f("Powered by Buttondown."),this.h()},l(n){s=y(n,"DIV",{class:!0});var a=E(s);t=y(a,"H1",{});var i=E(t);e=w(i,"Subscribe to my newsletter"),i.forEach(u),o=b(a),p=y(a,"H2",{class:!0});var r=E(p);c=w(r,"Get the latest blog posts and project updates delivered right to your inbox"),r.forEach(u),l=b(a),h=y(a,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var d=E(h);k=y(d,"DIV",{class:!0});var f=E(k);g=y(f,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),S=b(f),I=y(f,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),f.forEach(u),P=b(d),L=y(d,"INPUT",{type:!0,value:!0,name:!0,class:!0}),x=b(d),M=y(d,"P",{class:!0});var m=E(M);C=w(m,"Powered by Buttondown."),m.forEach(u),d.forEach(u),a.forEach(u),this.h()},h(){v(p,"class","svelte-1k1s1co"),v(g,"type","email"),v(g,"name","email"),v(g,"id","bd-email"),v(g,"aria-label","email address"),v(g,"placeholder","youremail@example.com"),v(g,"class","svelte-1k1s1co"),v(I,"type","submit"),I.value="Subscribe",I.disabled=A=!a[0],v(I,"class","svelte-1k1s1co"),v(k,"class","form-item svelte-1k1s1co"),v(L,"type","hidden"),L.value="1",v(L,"name","embed"),v(L,"class","svelte-1k1s1co"),v(M,"class","svelte-1k1s1co"),v(h,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),v(h,"method","post"),v(h,"target","popupwindow"),v(h,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),v(h,"class","embeddable-buttondown-form"),v(s,"class","form svelte-1k1s1co")},m(n,u){var d,f,m,v;r(n,s,u),i(s,t),i(t,e),i(s,o),i(s,p),i(p,c),i(s,l),i(s,h),i(h,k),i(k,g),T(g,a[0]),i(k,S),i(k,I),i(h,P),i(h,L),i(h,x),i(h,M),i(M,C),$||(d=g,f="input",m=a[1],d.addEventListener(f,m,v),j=()=>d.removeEventListener(f,m,v),$=!0)},p(n,[a]){1&a&&g.value!==n[0]&&T(g,n[0]),1&a&&A!==(A=!n[0])&&(I.disabled=A)},i:n,o:n,d(n){n&&u(s),$=!1,j()}}}function X(n,a,s){let t;return[t,function(){t=this.value,s(0,t)}]}class nn extends V{constructor(n){super(),Y(this,n,X,Z,p,{})}}function an(n){return L(()=>(setTimeout(()=>{if(window.innerWidth>1080){const n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",n.id="_carbonads_js",document.body.appendChild(n)}},5e3),()=>{try{const n=document.getElementById("carbonads");n.parentNode.removeChild(n)}catch(n){}})),[]}class sn extends V{constructor(n){super(),Y(this,n,an,null,p,{})}}var tn="https://lihautan.com/i-wrote-my-module-bundler-ii-for-the-web/assets/hero-twitter-ac20dd41.jpg";function en(n,a,s){const t=n.slice();return t[6]=a[s],t}function on(n,a,s){const t=n.slice();return t[6]=a[s],t}function pn(n){let a,s;return{c(){a=d("meta"),this.h()},l(n){a=y(n,"META",{name:!0,content:!0}),this.h()},h(){v(a,"name","keywords"),v(a,"content",s=n[6])},m(n,s){r(n,a,s)},p(n,t){4&t&&s!==(s=n[6])&&v(a,"content",s)},d(n){n&&u(a)}}}function cn(n){let a,s,t=n[6]+"";return{c(){a=d("span"),s=f(t),this.h()},l(n){a=y(n,"SPAN",{class:!0});var e=E(a);s=w(e,t),e.forEach(u),this.h()},h(){v(a,"class","svelte-9tqnza")},m(n,t){r(n,a,t),i(a,s)},p(n,a){4&a&&t!==(t=n[6]+"")&&S(s,t)},d(n){n&&u(a)}}}function ln(n){let a,s,t,e,o,p,k,T,A,P,L,x,M,C,$,j,H,O,D,N,F,R,q,z,Y,V,K,Z,X,an,ln,rn,un,hn,dn,kn,fn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`,mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fi-wrote-my-module-bundler-ii-for-the-web",name:n[0]},name:n[0],position:2}]})}<\/script>`;document.title=a=n[0]+" | Tan Li Hau";let gn=n[2],vn=[];for(let a=0;a<gn.length;a+=1)vn[a]=pn(on(n,gn,a));q=new Q({});let En=n[2],yn=[];for(let a=0;a<En.length;a+=1)yn[a]=cn(en(n,En,a));const wn=n[5].default,bn=function(n,a,s,t){if(n){const e=c(n,a,s,t);return n[0](e)}}(wn,n,n[4],null);return un=new nn({}),dn=new sn({}),{c(){s=d("meta"),t=d("meta"),e=d("meta"),o=d("meta"),p=d("meta"),k=d("meta"),T=d("meta"),A=d("meta"),P=d("meta"),L=d("meta"),x=d("meta");for(let n=0;n<vn.length;n+=1)vn[n].c();M=d("meta"),C=d("meta"),j=g(),O=g(),D=m(),N=d("a"),F=f("Skip to content"),R=m(),U(q.$$.fragment),z=m(),Y=d("main"),V=d("h1"),K=f(n[0]),Z=m();for(let n=0;n<yn.length;n+=1)yn[n].c();X=m(),an=d("article"),bn&&bn.c(),ln=m(),rn=d("footer"),U(un.$$.fragment),hn=m(),U(dn.$$.fragment),this.h()},l(a){const c=function(n,a=document.body){return Array.from(a.querySelectorAll(n))}('[data-svelte="svelte-15e3uyc"]',document.head);s=y(c,"META",{name:!0,content:!0}),t=y(c,"META",{name:!0,content:!0}),e=y(c,"META",{name:!0,content:!0}),o=y(c,"META",{name:!0,content:!0}),p=y(c,"META",{name:!0,content:!0}),k=y(c,"META",{name:!0,content:!0}),T=y(c,"META",{name:!0,content:!0}),A=y(c,"META",{name:!0,content:!0}),P=y(c,"META",{name:!0,content:!0}),L=y(c,"META",{name:!0,content:!0}),x=y(c,"META",{name:!0,content:!0});for(let n=0;n<vn.length;n+=1)vn[n].l(c);M=y(c,"META",{itemprop:!0,content:!0}),C=y(c,"META",{itemprop:!0,content:!0}),j=g(),O=g(),c.forEach(u),D=b(a),N=y(a,"A",{href:!0,class:!0});var l=E(N);F=w(l,"Skip to content"),l.forEach(u),R=b(a),B(q.$$.fragment,a),z=b(a),Y=y(a,"MAIN",{id:!0,class:!0});var i=E(Y);V=y(i,"H1",{});var r=E(V);K=w(r,n[0]),r.forEach(u),Z=b(i);for(let n=0;n<yn.length;n+=1)yn[n].l(i);X=b(i),an=y(i,"ARTICLE",{});var h=E(an);bn&&bn.l(h),h.forEach(u),i.forEach(u),ln=b(a),rn=y(a,"FOOTER",{class:!0});var d=E(rn);B(un.$$.fragment,d),hn=b(d),B(dn.$$.fragment,d),d.forEach(u),this.h()},h(){v(s,"name","description"),v(s,"content",n[1]),v(t,"name","image"),v(t,"content",tn),v(e,"name","og:image"),v(e,"content",tn),v(o,"name","og:title"),v(o,"content",n[0]),v(p,"name","og:description"),v(p,"content",n[1]),v(k,"name","og:type"),v(k,"content","website"),v(T,"name","twitter:card"),v(T,"content","summary_large_image"),v(A,"name","twitter:creator"),v(A,"content","@lihautan"),v(P,"name","twitter:title"),v(P,"content",n[0]),v(L,"name","twitter:description"),v(L,"content",n[1]),v(x,"name","twitter:image"),v(x,"content",tn),v(M,"itemprop","url"),v(M,"content","https%3A%2F%2Flihautan.com%2Fi-wrote-my-module-bundler-ii-for-the-web"),v(C,"itemprop","image"),v(C,"content",tn),$=new I(j),H=new I(O),v(N,"href","#content"),v(N,"class","skip svelte-9tqnza"),v(Y,"id","content"),v(Y,"class","blog svelte-9tqnza"),v(rn,"class","svelte-9tqnza")},m(n,a){i(document.head,s),i(document.head,t),i(document.head,e),i(document.head,o),i(document.head,p),i(document.head,k),i(document.head,T),i(document.head,A),i(document.head,P),i(document.head,L),i(document.head,x);for(let n=0;n<vn.length;n+=1)vn[n].m(document.head,null);i(document.head,M),i(document.head,C),$.m(fn,document.head),i(document.head,j),H.m(mn,document.head),i(document.head,O),r(n,D,a),r(n,N,a),i(N,F),r(n,R,a),W(q,n,a),r(n,z,a),r(n,Y,a),i(Y,V),i(V,K),i(Y,Z);for(let n=0;n<yn.length;n+=1)yn[n].m(Y,null);i(Y,X),i(Y,an),bn&&bn.m(an,null),r(n,ln,a),r(n,rn,a),W(un,rn,null),i(rn,hn),W(dn,rn,null),kn=!0},p(n,[t]){if((!kn||1&t)&&a!==(a=n[0]+" | Tan Li Hau")&&(document.title=a),(!kn||2&t)&&v(s,"content",n[1]),(!kn||1&t)&&v(o,"content",n[0]),(!kn||2&t)&&v(p,"content",n[1]),(!kn||1&t)&&v(P,"content",n[0]),(!kn||2&t)&&v(L,"content",n[1]),4&t){let a;for(gn=n[2],a=0;a<gn.length;a+=1){const s=on(n,gn,a);vn[a]?vn[a].p(s,t):(vn[a]=pn(s),vn[a].c(),vn[a].m(M.parentNode,M))}for(;a<vn.length;a+=1)vn[a].d(1);vn.length=gn.length}if((!kn||3&t)&&fn!==(fn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`)&&$.p(fn),(!kn||1&t)&&mn!==(mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fi-wrote-my-module-bundler-ii-for-the-web",name:n[0]},name:n[0],position:2}]})}<\/script>`)&&H.p(mn),(!kn||1&t)&&S(K,n[0]),4&t){let a;for(En=n[2],a=0;a<En.length;a+=1){const s=en(n,En,a);yn[a]?yn[a].p(s,t):(yn[a]=cn(s),yn[a].c(),yn[a].m(Y,X))}for(;a<yn.length;a+=1)yn[a].d(1);yn.length=En.length}bn&&bn.p&&16&t&&l(bn,wn,n,n[4],t,null,null)},i(n){kn||(_(q.$$.fragment,n),_(bn,n),_(un.$$.fragment,n),_(dn.$$.fragment,n),kn=!0)},o(n){J(q.$$.fragment,n),J(bn,n),J(un.$$.fragment,n),J(dn.$$.fragment,n),kn=!1},d(n){u(s),u(t),u(e),u(o),u(p),u(k),u(T),u(A),u(P),u(L),u(x),h(vn,n),u(M),u(C),u(j),n&&$.d(),u(O),n&&H.d(),n&&u(D),n&&u(N),n&&u(R),G(q,n),n&&u(z),n&&u(Y),h(yn,n),bn&&bn.d(n),n&&u(ln),n&&u(rn),G(un),G(dn)}}}function rn(n,a,s){let{title:t=""}=a,{description:e=""}=a,{tags:o=[]}=a;const p={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:l}=a;return n.$set=n=>{"title"in n&&s(0,t=n.title),"description"in n&&s(1,e=n.description),"tags"in n&&s(2,o=n.tags),"$$scope"in n&&s(4,l=n.$$scope)},[t,e,o,p,l,c]}class un extends V{constructor(n){super(),Y(this,n,rn,ln,p,{title:0,description:1,tags:2})}}function hn(a){let s,t,e,o,p,c,l,h,k,g,S,T,I,A,P,L,x,M,C,$,j,H,O,D,N,F,R,q,_,J,U,B,W,G,z,Y,V,K,Q,Z,X,nn,an,sn,tn,en,on,pn,cn,ln,rn,un,hn,dn,kn,fn,mn,gn,vn,En,yn,wn,bn,Sn,Tn,In,An,Pn,Ln,xn,Mn,Cn,$n,jn,Hn,On,Dn,Nn,Fn,Rn,qn,_n,Jn,Un,Bn,Wn,Gn,zn,Yn,Vn,Kn,Qn,Zn,Xn,na,aa,sa,ta,ea,oa,pa,ca,la,ia,ra,ua,ha,da,ka,fa,ma,ga,va,Ea,ya,wa,ba,Sa,Ta,Ia,Aa,Pa,La,xa,Ma,Ca,$a,ja,Ha,Oa,Da,Na,Fa,Ra,qa,_a,Ja,Ua,Ba,Wa,Ga,za,Ya,Va,Ka,Qa,Za,Xa,ns,as,ss,ts,es,os,ps,cs,ls,is,rs,us,hs,ds,ks,fs,ms,gs,vs,Es,ys,ws,bs,Ss,Ts,Is,As,Ps,Ls,xs,Ms,Cs,$s,js,Hs,Os,Ds,Ns,Fs,Rs,qs,_s,Js,Us,Bs,Ws,Gs,zs,Ys,Vs,Ks,Qs,Zs,Xs,nt,at,st,tt,et,ot,pt,ct,lt,it,rt,ut,ht,dt,kt,ft,mt,gt,vt,Et,yt,wt,bt,St,Tt,It,At,Pt,Lt,xt,Mt,Ct,$t,jt,Ht,Ot,Dt,Nt,Ft,Rt,qt,_t,Jt,Ut,Bt,Wt,Gt,zt,Yt,Vt,Kt,Qt,Zt,Xt,ne,ae,se,te,ee,oe,pe,ce,le,ie,re,ue,he,de,ke,fe,me,ge,ve,Ee,ye,we,be,Se,Te,Ie,Ae,Pe,Le,xe,Me,Ce,$e,je,He,Oe,De,Ne,Fe,Re,qe,_e,Je,Ue,Be,We,Ge,ze,Ye,Ve,Ke,Qe,Ze,Xe,no,ao,so,to,eo,oo,po,co,lo,io,ro,uo,ho,ko,fo,mo,go,vo,Eo,yo,wo,bo,So,To,Io,Ao,Po,Lo,xo,Mo,Co,$o,jo,Ho,Oo,Do,No,Fo,Ro,qo,_o,Jo,Uo,Bo,Wo,Go,zo,Yo,Vo,Ko,Qo,Zo,Xo,np,ap,sp,tp,ep,op,pp,cp,lp,ip,rp,up,hp,dp,kp,fp,mp,gp,vp,Ep,yp,wp,bp,Sp,Tp,Ip,Ap,Pp,Lp,xp,Mp,Cp,$p,jp,Hp,Op,Dp,Np,Fp,Rp,qp,_p,Jp,Up,Bp,Wp,Gp,zp,Yp,Vp,Kp,Qp,Zp,Xp,nc,ac,sc,tc,ec,oc,pc,cc,lc,ic,rc,uc,hc,dc,kc,fc,mc,gc,vc,Ec,yc,wc,bc,Sc,Tc,Ic;return{c(){s=d("section"),t=d("ul"),e=d("li"),o=d("a"),p=f("Before we begin"),c=d("li"),l=d("a"),h=f("Adding HTML Template"),k=d("li"),g=d("a"),S=f("Adding CSS"),T=d("ul"),I=d("li"),A=d("a"),P=f("Loaders"),L=d("li"),x=d("a"),M=f("Dev Server"),C=d("li"),$=d("a"),j=f("Wrap it up"),H=d("li"),O=d("a"),D=f("Whats next?"),N=d("li"),F=d("a"),R=f("References"),q=m(),_=d("p"),J=f("In my "),U=d("a"),B=f("previous article"),W=f(", I showed you how I built a module bundler. With the module bundler I built, I bundled a simple Nodejs script to calculate the area for a square and a circle:"),G=m(),z=d("p"),Y=d("picture"),V=d("source"),K=d("source"),Q=d("img"),Z=m(),X=d("p"),nn=f("Today, I am going to share with y'all how I enhanced on my basic module bundler so that I can use it to bundle not just a NodeJS script, but a web application."),an=m(),sn=d("p"),tn=f("I will be showing how I added the following features:"),en=m(),on=d("ul"),pn=d("li"),cn=d("a"),ln=f("Adding HTML Template"),rn=m(),un=d("li"),hn=d("a"),dn=f("Adding CSS"),kn=m(),fn=d("li"),mn=d("a"),gn=f("Provide a dev server"),vn=m(),En=d("hr"),yn=m(),wn=d("p"),bn=f("‚ö†Ô∏è "),Sn=d("strong"),Tn=f("Warning: Tons of JavaScript code ahead. üôàüò±üò®"),In=f(" ‚ö†Ô∏è"),An=m(),Pn=d("hr"),Ln=m(),xn=d("section"),Mn=d("h2"),Cn=d("a"),$n=f("Before we begin"),jn=m(),Hn=d("p"),On=f("I found an edge case bug in my module bundler if the module ends with a line comment, the output bundle might have a syntax error."),Dn=m(),Nn=d("p"),Fn=f("I've fixed the bug by appending a newline character to the end of the module code:"),Rn=m(),qn=d("pre"),_n=m(),Jn=d("p"),Un=f("üòé"),Bn=m(),Wn=d("p"),Gn=f("Also, I've changed the resolver code, which used to only be able to resolve the relative path:"),zn=m(),Yn=d("pre"),Vn=m(),Kn=d("p"),Qn=f("Now I can import libraries from "),Zn=d("code"),Xn=f("node_modules/"),na=f("."),aa=m(),sa=d("p"),ta=d("em"),ea=f('Did I just said "import libraries"?'),oa=f(" üôä"),pa=m(),ca=d("section"),la=d("h2"),ia=d("a"),ra=f("Adding HTML Template"),ua=m(),ha=d("p"),da=f("To bundle for the web, the most important piece is to have the HTML."),ka=m(),fa=d("p"),ma=f("Usually, we provide an HTML template to the module bundler. And when the module bundler finishes the bundling process, it will come up with a list of files that is required to start the application and add them into the HTML file in the form of a "),ga=d("code"),va=f("<script>"),Ea=f(" tag."),ya=m(),wa=d("p"),ba=f("To illustrate here is the HTML template that I've prepared:"),Sa=m(),Ta=d("pre"),Ia=m(),Aa=d("p"),Pa=f("And at the end of the bundling process, the bundler generated the following files:"),La=m(),xa=d("pre"),Ma=m(),Ca=d("p"),$a=f("So the "),ja=d("code"),Ha=f("bundle.js"),Oa=f(" is added into the final HTML file like this:"),Da=m(),Na=d("pre"),Fa=m(),Ra=d("blockquote"),qa=d("small"),_a=f("**NOTE:** the preceding slash (`/`) allows us to always fetch the JavaScript file relative from the root path. This is extremely useful for Single Page Application (SPA), where we serve the same HTML file irrelevant to the URL path."),Ja=m(),Ua=d("p"),Ba=f("Code wise, it is quite straightforward to implement this:"),Wa=m(),Ga=d("pre"),za=m(),Ya=d("p"),Va=f("Here, I used a "),Ka=d("code"),Qa=f(".replace(END_BODY_TAG, '...' + END_BODY_TAG)"),Za=f(" to insert the "),Xa=d("code"),ns=f("<script>"),as=f(" tags before the end of the "),ss=d("code"),ts=f("</body>"),es=f(" tag."),os=m(),ps=d("blockquote"),cs=d("small"),ls=f("**Note:** Read [here](https://www.codecademy.com/forum_questions/55dee24b937676fb5e000139) to learn why it's a best practice to add `<script>` tag at the end of the `"),is=d("body"),rs=f("` tag."),us=m(),hs=d("section"),ds=d("h2"),ks=d("a"),fs=f("Adding CSS"),ms=m(),gs=d("p"),vs=f("Every web app has to have CSS in one way or another."),Es=m(),ys=d("p"),ws=f("I added a css file and imported it from "),bs=d("code"),Ss=f("index.js"),Ts=f(":"),Is=m(),As=d("pre"),Ps=m(),Ls=d("pre"),xs=m(),Ms=d("p"),Cs=f("If I bundle my application now, I would see a "),$s=d("code"),js=f("SyntaxError"),Hs=f(":"),Os=m(),Ds=d("pre"),Ns=m(),Fs=d("p"),Rs=f("That is because I assumed all files are JavaScript files, and Babel would complain when trying to parse out the import statements."),qs=m(),_s=d("p"),Js=f("So, I abstracted out "),Us=d("code"),Bs=f("Module"),Ws=f(" as a base class, and created "),Gs=d("code"),zs=f("JSModule"),Ys=f(" and "),Vs=d("code"),Ks=f("CSSModule"),Qs=f(":"),Zs=m(),Xs=d("pre"),nt=m(),at=d("p"),st=f("In the "),tt=d("code"),et=f("createModule"),ot=f(" function, I need to create different "),pt=d("code"),ct=f("Module"),lt=f(" based on the file extension:"),it=m(),rt=d("pre"),ut=m(),ht=d("section"),dt=d("h3"),kt=d("a"),ft=f("Loaders"),mt=m(),gt=d("p"),vt=f("Here I used the word "),Et=d("code"),yt=f('"LOADERS"'),wt=f(", which I borrowed from "),bt=d("a"),St=f("webpack"),Tt=f("."),It=m(),At=d("p"),Pt=f("According to webpack, "),Lt=d("em"),xt=f('"'),Mt=d("a"),Ct=f("[loaders]"),$t=f(' enable webpack to preprocess files, [which] allows you to bundle any static resource way beyond JavaScript."'),jt=m(),Ht=d("p"),Ot=f("To take it from a different perspective, "),Dt=d("strong"),Nt=f("loaders"),Ft=f(" are simple functions that transform any code into "),Rt=d("strong"),qt=f("browser-executable JavaScript code"),_t=f("."),Jt=m(),Ut=d("p"),Bt=f("For example, if you import a CSS file, the CSS code in the file will pass through the loader function to be transformed into JS code. So that you can import a CSS file as if you are importing a JS file."),Wt=m(),Gt=d("p"),zt=d("strong"),Yt=f("Wait, how are we going to transform CSS code into JS code?"),Vt=m(),Kt=d("p"),Qt=f("Well, one way you can do that is to make the CSS code into a string by wrapping it around with quote marks "),Zt=d("code"),Xt=f("'"),ne=f(", and programmatically add the CSS code into the HTML "),ae=d("code"),se=f("<head />"),te=f("."),ee=m(),oe=d("p"),pe=f("For example, taking the following CSS code:"),ce=m(),le=d("pre"),ie=m(),re=d("p"),ue=f("and transform it into the following JS code:"),he=m(),de=d("pre"),ke=m(),fe=d("p"),me=f("This is in essence what "),ge=d("a"),ve=f("style-loader"),Ee=f(" is doing, except "),ye=d("code"),we=f("style-loader"),be=f(" does even more:"),Se=m(),Te=d("ul"),Ie=d("li"),Ae=f("supports hot reloading"),Pe=m(),Le=d("li"),xe=f("provides different mode of injecting, "),Me=d("code"),Ce=f("styleTag"),$e=f(", "),je=d("code"),He=f("singletonStyleTag"),Oe=f(", "),De=d("code"),Ne=f("linkTag"),Fe=f(", ... etc."),Re=m(),qe=d("li"),_e=f("provides different points in dom for injecting the style tag."),Je=m(),Ue=d("p"),Be=d("strong"),We=f('Did I mentioned "browser-executable JavaScript code"?'),Ge=m(),ze=d("p"),Ye=f("Yes, not all JavaScript code is executable in a browser if you are using next-generation syntaxes or constructs that is not yet available in the browser. That's why you need "),Ve=d("a"),Ke=f("babel-loader"),Qe=f(" for your JavaScript files, to make sure they can be run in all supported browsers."),Ze=m(),Xe=d("hr"),no=m(),ao=d("p"),so=f("So, I implemented the loader transform in CSSModule with "),to=d("a"),eo=f("template literals"),oo=f(":"),po=m(),co=d("pre"),lo=m(),io=d("section"),ro=d("h2"),uo=d("a"),ho=f("Dev Server"),ko=m(),fo=d("p"),mo=f("Dev server is a default feature for frontend build tools nowadays, it's common feature are:"),go=m(),vo=d("ul"),Eo=d("li"),yo=f("Serving generated assets, assets can be either served from the filesystem or in memory"),wo=m(),bo=d("li"),So=f("Supports watch mode, reloading and hot module replacement"),To=m(),Io=d("li"),Ao=f("Act as a proxy to external APIs"),Po=m(),Lo=d("p"),xo=f("In this post, I will show you how I created a basic dev server using "),Mo=d("a"),Co=f("Express"),$o=f(" for serving the generated assets in memory, we will discuss the watch mode in the future post."),jo=m(),Ho=d("p"),Oo=f("I abstracted out the "),Do=d("code"),No=f("_build"),Fo=f(" function and supports both "),Ro=d("code"),qo=f("build"),_o=f(" and "),Jo=d("code"),Uo=f("dev"),Bo=f(" mode."),Wo=m(),Go=d("pre"),zo=m(),Yo=d("p"),Vo=f("In "),Ko=d("code"),Qo=f("dev"),Zo=f(" mode, I did not write files to the file system, instead I served them directly through the "),Xo=d("a"),np=f("Express"),ap=f(" server:"),sp=m(),tp=d("pre"),ep=m(),op=d("p"),pp=f("And that's it. You have a basic dev server that serves the bundled files!"),cp=m(),lp=d("section"),ip=d("h2"),rp=d("a"),up=f("Wrap it up"),hp=m(),dp=d("p"),kp=f("I've added "),fp=d("a"),mp=f("Preact"),gp=f(" and CSS into my app:"),vp=m(),Ep=d("pre"),yp=m(),wp=d("pre"),bp=m(),Sp=d("p"),Tp=f("And also an HTML template:"),Ip=m(),Ap=d("pre"),Pp=m(),Lp=d("p"),xp=f("Starting my bundler:"),Mp=m(),Cp=d("p"),$p=d("picture"),jp=d("source"),Hp=d("source"),Op=d("img"),Dp=m(),Np=d("p"),Fp=f("And voila!"),Rp=m(),qp=d("p"),_p=d("picture"),Jp=d("source"),Up=d("source"),Bp=d("img"),Wp=m(),Gp=d("section"),zp=d("h2"),Yp=d("a"),Vp=f("Whats next?"),Kp=m(),Qp=d("p"),Zp=f("I have promised in my previous post, features that I will implement:"),Xp=m(),nc=d("ul"),ac=d("li"),sc=f("code splitting"),tc=m(),ec=d("li"),oc=f("watch mode"),pc=m(),cc=d("p"),lc=f("and yes, I will implement them!"),ic=m(),rc=d("p"),uc=f("Till then. Cheers. üòé"),hc=m(),dc=d("section"),kc=d("h2"),fc=d("a"),mc=f("References"),gc=m(),vc=d("ul"),Ec=d("li"),yc=d("a"),wc=f("Webpack Dev Server"),bc=m(),Sc=d("li"),Tc=d("a"),Ic=f("style-loader"),this.h()},l(n){s=y(n,"SECTION",{});var a=E(s);t=y(a,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var i=E(t);e=y(i,"LI",{});var r=E(e);o=y(r,"A",{href:!0});var d=E(o);p=w(d,"Before we begin"),d.forEach(u),r.forEach(u),c=y(i,"LI",{});var f=E(c);l=y(f,"A",{href:!0});var m=E(l);h=w(m,"Adding HTML Template"),m.forEach(u),f.forEach(u),k=y(i,"LI",{});var v=E(k);g=y(v,"A",{href:!0});var Ac=E(g);S=w(Ac,"Adding CSS"),Ac.forEach(u),v.forEach(u),T=y(i,"UL",{});var Pc=E(T);I=y(Pc,"LI",{});var Lc=E(I);A=y(Lc,"A",{href:!0});var xc=E(A);P=w(xc,"Loaders"),xc.forEach(u),Lc.forEach(u),Pc.forEach(u),L=y(i,"LI",{});var Mc=E(L);x=y(Mc,"A",{href:!0});var Cc=E(x);M=w(Cc,"Dev Server"),Cc.forEach(u),Mc.forEach(u),C=y(i,"LI",{});var $c=E(C);$=y($c,"A",{href:!0});var jc=E($);j=w(jc,"Wrap it up"),jc.forEach(u),$c.forEach(u),H=y(i,"LI",{});var Hc=E(H);O=y(Hc,"A",{href:!0});var Oc=E(O);D=w(Oc,"Whats next?"),Oc.forEach(u),Hc.forEach(u),N=y(i,"LI",{});var Dc=E(N);F=y(Dc,"A",{href:!0});var Nc=E(F);R=w(Nc,"References"),Nc.forEach(u),Dc.forEach(u),i.forEach(u),a.forEach(u),q=b(n),_=y(n,"P",{});var Fc=E(_);J=w(Fc,"In my "),U=y(Fc,"A",{href:!0});var Rc=E(U);B=w(Rc,"previous article"),Rc.forEach(u),W=w(Fc,", I showed you how I built a module bundler. With the module bundler I built, I bundled a simple Nodejs script to calculate the area for a square and a circle:"),Fc.forEach(u),G=b(n),z=y(n,"P",{});var qc=E(z);Y=y(qc,"PICTURE",{});var _c=E(Y);V=y(_c,"SOURCE",{type:!0,srcset:!0}),K=y(_c,"SOURCE",{type:!0,srcset:!0}),Q=y(_c,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),_c.forEach(u),qc.forEach(u),Z=b(n),X=y(n,"P",{});var Jc=E(X);nn=w(Jc,"Today, I am going to share with y'all how I enhanced on my basic module bundler so that I can use it to bundle not just a NodeJS script, but a web application."),Jc.forEach(u),an=b(n),sn=y(n,"P",{});var Uc=E(sn);tn=w(Uc,"I will be showing how I added the following features:"),Uc.forEach(u),en=b(n),on=y(n,"UL",{});var Bc=E(on);pn=y(Bc,"LI",{});var Wc=E(pn);cn=y(Wc,"A",{href:!0});var Gc=E(cn);ln=w(Gc,"Adding HTML Template"),Gc.forEach(u),Wc.forEach(u),rn=b(Bc),un=y(Bc,"LI",{});var zc=E(un);hn=y(zc,"A",{href:!0});var Yc=E(hn);dn=w(Yc,"Adding CSS"),Yc.forEach(u),zc.forEach(u),kn=b(Bc),fn=y(Bc,"LI",{});var Vc=E(fn);mn=y(Vc,"A",{href:!0});var Kc=E(mn);gn=w(Kc,"Provide a dev server"),Kc.forEach(u),Vc.forEach(u),Bc.forEach(u),vn=b(n),En=y(n,"HR",{}),yn=b(n),wn=y(n,"P",{});var Qc=E(wn);bn=w(Qc,"‚ö†Ô∏è "),Sn=y(Qc,"STRONG",{});var Zc=E(Sn);Tn=w(Zc,"Warning: Tons of JavaScript code ahead. üôàüò±üò®"),Zc.forEach(u),In=w(Qc," ‚ö†Ô∏è"),Qc.forEach(u),An=b(n),Pn=y(n,"HR",{}),Ln=b(n),xn=y(n,"SECTION",{});var Xc=E(xn);Mn=y(Xc,"H2",{});var nl=E(Mn);Cn=y(nl,"A",{href:!0,id:!0});var al=E(Cn);$n=w(al,"Before we begin"),al.forEach(u),nl.forEach(u),jn=b(Xc),Hn=y(Xc,"P",{});var sl=E(Hn);On=w(sl,"I found an edge case bug in my module bundler if the module ends with a line comment, the output bundle might have a syntax error."),sl.forEach(u),Dn=b(Xc),Nn=y(Xc,"P",{});var tl=E(Nn);Fn=w(tl,"I've fixed the bug by appending a newline character to the end of the module code:"),tl.forEach(u),Rn=b(Xc),qn=y(Xc,"PRE",{class:!0}),E(qn).forEach(u),_n=b(Xc),Jn=y(Xc,"P",{});var el=E(Jn);Un=w(el,"üòé"),el.forEach(u),Bn=b(Xc),Wn=y(Xc,"P",{});var ol=E(Wn);Gn=w(ol,"Also, I've changed the resolver code, which used to only be able to resolve the relative path:"),ol.forEach(u),zn=b(Xc),Yn=y(Xc,"PRE",{class:!0}),E(Yn).forEach(u),Vn=b(Xc),Kn=y(Xc,"P",{});var pl=E(Kn);Qn=w(pl,"Now I can import libraries from "),Zn=y(pl,"CODE",{});var cl=E(Zn);Xn=w(cl,"node_modules/"),cl.forEach(u),na=w(pl,"."),pl.forEach(u),aa=b(Xc),sa=y(Xc,"P",{});var ll=E(sa);ta=y(ll,"EM",{});var il=E(ta);ea=w(il,'Did I just said "import libraries"?'),il.forEach(u),oa=w(ll," üôä"),ll.forEach(u),Xc.forEach(u),pa=b(n),ca=y(n,"SECTION",{});var rl=E(ca);la=y(rl,"H2",{});var ul=E(la);ia=y(ul,"A",{href:!0,id:!0});var hl=E(ia);ra=w(hl,"Adding HTML Template"),hl.forEach(u),ul.forEach(u),ua=b(rl),ha=y(rl,"P",{});var dl=E(ha);da=w(dl,"To bundle for the web, the most important piece is to have the HTML."),dl.forEach(u),ka=b(rl),fa=y(rl,"P",{});var kl=E(fa);ma=w(kl,"Usually, we provide an HTML template to the module bundler. And when the module bundler finishes the bundling process, it will come up with a list of files that is required to start the application and add them into the HTML file in the form of a "),ga=y(kl,"CODE",{});var fl=E(ga);va=w(fl,"<script>"),fl.forEach(u),Ea=w(kl," tag."),kl.forEach(u),ya=b(rl),wa=y(rl,"P",{});var ml=E(wa);ba=w(ml,"To illustrate here is the HTML template that I've prepared:"),ml.forEach(u),Sa=b(rl),Ta=y(rl,"PRE",{class:!0}),E(Ta).forEach(u),Ia=b(rl),Aa=y(rl,"P",{});var gl=E(Aa);Pa=w(gl,"And at the end of the bundling process, the bundler generated the following files:"),gl.forEach(u),La=b(rl),xa=y(rl,"PRE",{class:!0}),E(xa).forEach(u),Ma=b(rl),Ca=y(rl,"P",{});var vl=E(Ca);$a=w(vl,"So the "),ja=y(vl,"CODE",{});var El=E(ja);Ha=w(El,"bundle.js"),El.forEach(u),Oa=w(vl," is added into the final HTML file like this:"),vl.forEach(u),Da=b(rl),Na=y(rl,"PRE",{class:!0}),E(Na).forEach(u),Fa=b(rl),Ra=y(rl,"BLOCKQUOTE",{});var yl=E(Ra);qa=y(yl,"SMALL",{});var wl=E(qa);_a=w(wl,"**NOTE:** the preceding slash (`/`) allows us to always fetch the JavaScript file relative from the root path. This is extremely useful for Single Page Application (SPA), where we serve the same HTML file irrelevant to the URL path."),wl.forEach(u),yl.forEach(u),Ja=b(rl),Ua=y(rl,"P",{});var bl=E(Ua);Ba=w(bl,"Code wise, it is quite straightforward to implement this:"),bl.forEach(u),Wa=b(rl),Ga=y(rl,"PRE",{class:!0}),E(Ga).forEach(u),za=b(rl),Ya=y(rl,"P",{});var Sl=E(Ya);Va=w(Sl,"Here, I used a "),Ka=y(Sl,"CODE",{});var Tl=E(Ka);Qa=w(Tl,".replace(END_BODY_TAG, '...' + END_BODY_TAG)"),Tl.forEach(u),Za=w(Sl," to insert the "),Xa=y(Sl,"CODE",{});var Il=E(Xa);ns=w(Il,"<script>"),Il.forEach(u),as=w(Sl," tags before the end of the "),ss=y(Sl,"CODE",{});var Al=E(ss);ts=w(Al,"</body>"),Al.forEach(u),es=w(Sl," tag."),Sl.forEach(u),os=b(rl),ps=y(rl,"BLOCKQUOTE",{});var Pl=E(ps);cs=y(Pl,"SMALL",{});var Ll=E(cs);ls=w(Ll,"**Note:** Read [here](https://www.codecademy.com/forum_questions/55dee24b937676fb5e000139) to learn why it's a best practice to add `<script>` tag at the end of the `"),is=y(Ll,"BODY",{});var xl=E(is);rs=w(xl,"` tag."),xl.forEach(u),Ll.forEach(u),Pl.forEach(u),rl.forEach(u),us=b(n),hs=y(n,"SECTION",{});var Ml=E(hs);ds=y(Ml,"H2",{});var Cl=E(ds);ks=y(Cl,"A",{href:!0,id:!0});var $l=E(ks);fs=w($l,"Adding CSS"),$l.forEach(u),Cl.forEach(u),ms=b(Ml),gs=y(Ml,"P",{});var jl=E(gs);vs=w(jl,"Every web app has to have CSS in one way or another."),jl.forEach(u),Es=b(Ml),ys=y(Ml,"P",{});var Hl=E(ys);ws=w(Hl,"I added a css file and imported it from "),bs=y(Hl,"CODE",{});var Ol=E(bs);Ss=w(Ol,"index.js"),Ol.forEach(u),Ts=w(Hl,":"),Hl.forEach(u),Is=b(Ml),As=y(Ml,"PRE",{class:!0}),E(As).forEach(u),Ps=b(Ml),Ls=y(Ml,"PRE",{class:!0}),E(Ls).forEach(u),xs=b(Ml),Ms=y(Ml,"P",{});var Dl=E(Ms);Cs=w(Dl,"If I bundle my application now, I would see a "),$s=y(Dl,"CODE",{});var Nl=E($s);js=w(Nl,"SyntaxError"),Nl.forEach(u),Hs=w(Dl,":"),Dl.forEach(u),Os=b(Ml),Ds=y(Ml,"PRE",{class:!0}),E(Ds).forEach(u),Ns=b(Ml),Fs=y(Ml,"P",{});var Fl=E(Fs);Rs=w(Fl,"That is because I assumed all files are JavaScript files, and Babel would complain when trying to parse out the import statements."),Fl.forEach(u),qs=b(Ml),_s=y(Ml,"P",{});var Rl=E(_s);Js=w(Rl,"So, I abstracted out "),Us=y(Rl,"CODE",{});var ql=E(Us);Bs=w(ql,"Module"),ql.forEach(u),Ws=w(Rl," as a base class, and created "),Gs=y(Rl,"CODE",{});var _l=E(Gs);zs=w(_l,"JSModule"),_l.forEach(u),Ys=w(Rl," and "),Vs=y(Rl,"CODE",{});var Jl=E(Vs);Ks=w(Jl,"CSSModule"),Jl.forEach(u),Qs=w(Rl,":"),Rl.forEach(u),Zs=b(Ml),Xs=y(Ml,"PRE",{class:!0}),E(Xs).forEach(u),nt=b(Ml),at=y(Ml,"P",{});var Ul=E(at);st=w(Ul,"In the "),tt=y(Ul,"CODE",{});var Bl=E(tt);et=w(Bl,"createModule"),Bl.forEach(u),ot=w(Ul," function, I need to create different "),pt=y(Ul,"CODE",{});var Wl=E(pt);ct=w(Wl,"Module"),Wl.forEach(u),lt=w(Ul," based on the file extension:"),Ul.forEach(u),it=b(Ml),rt=y(Ml,"PRE",{class:!0}),E(rt).forEach(u),Ml.forEach(u),ut=b(n),ht=y(n,"SECTION",{});var Gl=E(ht);dt=y(Gl,"H3",{});var zl=E(dt);kt=y(zl,"A",{href:!0,id:!0});var Yl=E(kt);ft=w(Yl,"Loaders"),Yl.forEach(u),zl.forEach(u),mt=b(Gl),gt=y(Gl,"P",{});var Vl=E(gt);vt=w(Vl,"Here I used the word "),Et=y(Vl,"CODE",{});var Kl=E(Et);yt=w(Kl,'"LOADERS"'),Kl.forEach(u),wt=w(Vl,", which I borrowed from "),bt=y(Vl,"A",{href:!0,rel:!0});var Ql=E(bt);St=w(Ql,"webpack"),Ql.forEach(u),Tt=w(Vl,"."),Vl.forEach(u),It=b(Gl),At=y(Gl,"P",{});var Zl=E(At);Pt=w(Zl,"According to webpack, "),Lt=y(Zl,"EM",{});var Xl=E(Lt);xt=w(Xl,'"'),Mt=y(Xl,"A",{href:!0,rel:!0});var ni=E(Mt);Ct=w(ni,"[loaders]"),ni.forEach(u),$t=w(Xl,' enable webpack to preprocess files, [which] allows you to bundle any static resource way beyond JavaScript."'),Xl.forEach(u),Zl.forEach(u),jt=b(Gl),Ht=y(Gl,"P",{});var ai=E(Ht);Ot=w(ai,"To take it from a different perspective, "),Dt=y(ai,"STRONG",{});var si=E(Dt);Nt=w(si,"loaders"),si.forEach(u),Ft=w(ai," are simple functions that transform any code into "),Rt=y(ai,"STRONG",{});var ti=E(Rt);qt=w(ti,"browser-executable JavaScript code"),ti.forEach(u),_t=w(ai,"."),ai.forEach(u),Jt=b(Gl),Ut=y(Gl,"P",{});var ei=E(Ut);Bt=w(ei,"For example, if you import a CSS file, the CSS code in the file will pass through the loader function to be transformed into JS code. So that you can import a CSS file as if you are importing a JS file."),ei.forEach(u),Wt=b(Gl),Gt=y(Gl,"P",{});var oi=E(Gt);zt=y(oi,"STRONG",{});var pi=E(zt);Yt=w(pi,"Wait, how are we going to transform CSS code into JS code?"),pi.forEach(u),oi.forEach(u),Vt=b(Gl),Kt=y(Gl,"P",{});var ci=E(Kt);Qt=w(ci,"Well, one way you can do that is to make the CSS code into a string by wrapping it around with quote marks "),Zt=y(ci,"CODE",{});var li=E(Zt);Xt=w(li,"'"),li.forEach(u),ne=w(ci,", and programmatically add the CSS code into the HTML "),ae=y(ci,"CODE",{});var ii=E(ae);se=w(ii,"<head />"),ii.forEach(u),te=w(ci,"."),ci.forEach(u),ee=b(Gl),oe=y(Gl,"P",{});var ri=E(oe);pe=w(ri,"For example, taking the following CSS code:"),ri.forEach(u),ce=b(Gl),le=y(Gl,"PRE",{class:!0}),E(le).forEach(u),ie=b(Gl),re=y(Gl,"P",{});var ui=E(re);ue=w(ui,"and transform it into the following JS code:"),ui.forEach(u),he=b(Gl),de=y(Gl,"PRE",{class:!0}),E(de).forEach(u),ke=b(Gl),fe=y(Gl,"P",{});var hi=E(fe);me=w(hi,"This is in essence what "),ge=y(hi,"A",{href:!0,rel:!0});var di=E(ge);ve=w(di,"style-loader"),di.forEach(u),Ee=w(hi," is doing, except "),ye=y(hi,"CODE",{});var ki=E(ye);we=w(ki,"style-loader"),ki.forEach(u),be=w(hi," does even more:"),hi.forEach(u),Se=b(Gl),Te=y(Gl,"UL",{});var fi=E(Te);Ie=y(fi,"LI",{});var mi=E(Ie);Ae=w(mi,"supports hot reloading"),mi.forEach(u),Pe=b(fi),Le=y(fi,"LI",{});var gi=E(Le);xe=w(gi,"provides different mode of injecting, "),Me=y(gi,"CODE",{});var vi=E(Me);Ce=w(vi,"styleTag"),vi.forEach(u),$e=w(gi,", "),je=y(gi,"CODE",{});var Ei=E(je);He=w(Ei,"singletonStyleTag"),Ei.forEach(u),Oe=w(gi,", "),De=y(gi,"CODE",{});var yi=E(De);Ne=w(yi,"linkTag"),yi.forEach(u),Fe=w(gi,", ... etc."),gi.forEach(u),Re=b(fi),qe=y(fi,"LI",{});var wi=E(qe);_e=w(wi,"provides different points in dom for injecting the style tag."),wi.forEach(u),fi.forEach(u),Je=b(Gl),Ue=y(Gl,"P",{});var bi=E(Ue);Be=y(bi,"STRONG",{});var Si=E(Be);We=w(Si,'Did I mentioned "browser-executable JavaScript code"?'),Si.forEach(u),bi.forEach(u),Ge=b(Gl),ze=y(Gl,"P",{});var Ti=E(ze);Ye=w(Ti,"Yes, not all JavaScript code is executable in a browser if you are using next-generation syntaxes or constructs that is not yet available in the browser. That's why you need "),Ve=y(Ti,"A",{href:!0,rel:!0});var Ii=E(Ve);Ke=w(Ii,"babel-loader"),Ii.forEach(u),Qe=w(Ti," for your JavaScript files, to make sure they can be run in all supported browsers."),Ti.forEach(u),Ze=b(Gl),Xe=y(Gl,"HR",{}),no=b(Gl),ao=y(Gl,"P",{});var Ai=E(ao);so=w(Ai,"So, I implemented the loader transform in CSSModule with "),to=y(Ai,"A",{href:!0,rel:!0});var Pi=E(to);eo=w(Pi,"template literals"),Pi.forEach(u),oo=w(Ai,":"),Ai.forEach(u),po=b(Gl),co=y(Gl,"PRE",{class:!0}),E(co).forEach(u),Gl.forEach(u),lo=b(n),io=y(n,"SECTION",{});var Li=E(io);ro=y(Li,"H2",{});var xi=E(ro);uo=y(xi,"A",{href:!0,id:!0});var Mi=E(uo);ho=w(Mi,"Dev Server"),Mi.forEach(u),xi.forEach(u),ko=b(Li),fo=y(Li,"P",{});var Ci=E(fo);mo=w(Ci,"Dev server is a default feature for frontend build tools nowadays, it's common feature are:"),Ci.forEach(u),go=b(Li),vo=y(Li,"UL",{});var $i=E(vo);Eo=y($i,"LI",{});var ji=E(Eo);yo=w(ji,"Serving generated assets, assets can be either served from the filesystem or in memory"),ji.forEach(u),wo=b($i),bo=y($i,"LI",{});var Hi=E(bo);So=w(Hi,"Supports watch mode, reloading and hot module replacement"),Hi.forEach(u),To=b($i),Io=y($i,"LI",{});var Oi=E(Io);Ao=w(Oi,"Act as a proxy to external APIs"),Oi.forEach(u),$i.forEach(u),Po=b(Li),Lo=y(Li,"P",{});var Di=E(Lo);xo=w(Di,"In this post, I will show you how I created a basic dev server using "),Mo=y(Di,"A",{href:!0,rel:!0});var Ni=E(Mo);Co=w(Ni,"Express"),Ni.forEach(u),$o=w(Di," for serving the generated assets in memory, we will discuss the watch mode in the future post."),Di.forEach(u),jo=b(Li),Ho=y(Li,"P",{});var Fi=E(Ho);Oo=w(Fi,"I abstracted out the "),Do=y(Fi,"CODE",{});var Ri=E(Do);No=w(Ri,"_build"),Ri.forEach(u),Fo=w(Fi," function and supports both "),Ro=y(Fi,"CODE",{});var qi=E(Ro);qo=w(qi,"build"),qi.forEach(u),_o=w(Fi," and "),Jo=y(Fi,"CODE",{});var _i=E(Jo);Uo=w(_i,"dev"),_i.forEach(u),Bo=w(Fi," mode."),Fi.forEach(u),Wo=b(Li),Go=y(Li,"PRE",{class:!0}),E(Go).forEach(u),zo=b(Li),Yo=y(Li,"P",{});var Ji=E(Yo);Vo=w(Ji,"In "),Ko=y(Ji,"CODE",{});var Ui=E(Ko);Qo=w(Ui,"dev"),Ui.forEach(u),Zo=w(Ji," mode, I did not write files to the file system, instead I served them directly through the "),Xo=y(Ji,"A",{href:!0,rel:!0});var Bi=E(Xo);np=w(Bi,"Express"),Bi.forEach(u),ap=w(Ji," server:"),Ji.forEach(u),sp=b(Li),tp=y(Li,"PRE",{class:!0}),E(tp).forEach(u),ep=b(Li),op=y(Li,"P",{});var Wi=E(op);pp=w(Wi,"And that's it. You have a basic dev server that serves the bundled files!"),Wi.forEach(u),Li.forEach(u),cp=b(n),lp=y(n,"SECTION",{});var Gi=E(lp);ip=y(Gi,"H2",{});var zi=E(ip);rp=y(zi,"A",{href:!0,id:!0});var Yi=E(rp);up=w(Yi,"Wrap it up"),Yi.forEach(u),zi.forEach(u),hp=b(Gi),dp=y(Gi,"P",{});var Vi=E(dp);kp=w(Vi,"I've added "),fp=y(Vi,"A",{href:!0,rel:!0});var Ki=E(fp);mp=w(Ki,"Preact"),Ki.forEach(u),gp=w(Vi," and CSS into my app:"),Vi.forEach(u),vp=b(Gi),Ep=y(Gi,"PRE",{class:!0}),E(Ep).forEach(u),yp=b(Gi),wp=y(Gi,"PRE",{class:!0}),E(wp).forEach(u),bp=b(Gi),Sp=y(Gi,"P",{});var Qi=E(Sp);Tp=w(Qi,"And also an HTML template:"),Qi.forEach(u),Ip=b(Gi),Ap=y(Gi,"PRE",{class:!0}),E(Ap).forEach(u),Pp=b(Gi),Lp=y(Gi,"P",{});var Zi=E(Lp);xp=w(Zi,"Starting my bundler:"),Zi.forEach(u),Mp=b(Gi),Cp=y(Gi,"P",{});var Xi=E(Cp);$p=y(Xi,"PICTURE",{});var nr=E($p);jp=y(nr,"SOURCE",{type:!0,srcset:!0}),Hp=y(nr,"SOURCE",{type:!0,srcset:!0}),Op=y(nr,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),nr.forEach(u),Xi.forEach(u),Dp=b(Gi),Np=y(Gi,"P",{});var ar=E(Np);Fp=w(ar,"And voila!"),ar.forEach(u),Rp=b(Gi),qp=y(Gi,"P",{});var sr=E(qp);_p=y(sr,"PICTURE",{});var tr=E(_p);Jp=y(tr,"SOURCE",{type:!0,srcset:!0}),Up=y(tr,"SOURCE",{type:!0,srcset:!0}),Bp=y(tr,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),tr.forEach(u),sr.forEach(u),Gi.forEach(u),Wp=b(n),Gp=y(n,"SECTION",{});var er=E(Gp);zp=y(er,"H2",{});var or=E(zp);Yp=y(or,"A",{href:!0,id:!0});var pr=E(Yp);Vp=w(pr,"Whats next?"),pr.forEach(u),or.forEach(u),Kp=b(er),Qp=y(er,"P",{});var cr=E(Qp);Zp=w(cr,"I have promised in my previous post, features that I will implement:"),cr.forEach(u),Xp=b(er),nc=y(er,"UL",{});var lr=E(nc);ac=y(lr,"LI",{});var ir=E(ac);sc=w(ir,"code splitting"),ir.forEach(u),tc=b(lr),ec=y(lr,"LI",{});var rr=E(ec);oc=w(rr,"watch mode"),rr.forEach(u),lr.forEach(u),pc=b(er),cc=y(er,"P",{});var ur=E(cc);lc=w(ur,"and yes, I will implement them!"),ur.forEach(u),ic=b(er),rc=y(er,"P",{});var hr=E(rc);uc=w(hr,"Till then. Cheers. üòé"),hr.forEach(u),er.forEach(u),hc=b(n),dc=y(n,"SECTION",{});var dr=E(dc);kc=y(dr,"H2",{});var kr=E(kc);fc=y(kr,"A",{href:!0,id:!0});var fr=E(fc);mc=w(fr,"References"),fr.forEach(u),kr.forEach(u),gc=b(dr),vc=y(dr,"UL",{});var mr=E(vc);Ec=y(mr,"LI",{});var gr=E(Ec);yc=y(gr,"A",{href:!0,rel:!0});var vr=E(yc);wc=w(vr,"Webpack Dev Server"),vr.forEach(u),gr.forEach(u),bc=b(mr),Sc=y(mr,"LI",{});var Er=E(Sc);Tc=y(Er,"A",{href:!0,rel:!0});var yr=E(Tc);Ic=w(yr,"style-loader"),yr.forEach(u),Er.forEach(u),mr.forEach(u),dr.forEach(u),this.h()},h(){v(o,"href","#before-we-begin"),v(l,"href","#adding-html-template"),v(g,"href","#adding-css"),v(A,"href","#loaders"),v(x,"href","#dev-server"),v($,"href","#wrap-it-up"),v(O,"href","#whats-next"),v(F,"href","#references"),v(t,"class","sitemap"),v(t,"id","sitemap"),v(t,"role","navigation"),v(t,"aria-label","Table of Contents"),v(U,"href","/i-wrote-my-module-bundler/"),v(V,"type","image/webp"),v(V,"srcset","7449f3690b9af7f1.webp"),v(K,"type","image/jpeg"),v(K,"srcset","7449f3690b9af7f1.png"),v(Q,"title","null"),v(Q,"alt","bundled code demo"),v(Q,"data-src","7449f3690b9af7f1.png"),v(Q,"loading","lazy"),v(cn,"href","#adding-html-template"),v(hn,"href","#adding-css"),v(mn,"href","#dev-server"),v(Cn,"href","#before-we-begin"),v(Cn,"id","before-we-begin"),v(qn,"class","language-js"),v(Yn,"class","language-js"),v(ia,"href","#adding-html-template"),v(ia,"id","adding-html-template"),v(Ta,"class","language-html"),v(xa,"class","language-yml"),v(Na,"class","language-html"),v(Ga,"class","language-js"),v(ks,"href","#adding-css"),v(ks,"id","adding-css"),v(As,"class","language-js"),v(Ls,"class","language-css"),v(Ds,"class","language-null"),v(Xs,"class","language-js"),v(rt,"class","language-js"),v(kt,"href","#loaders"),v(kt,"id","loaders"),v(bt,"href","https://webpack.js.org/loaders/"),v(bt,"rel","nofollow"),v(Mt,"href","https://webpack.js.org/loaders/"),v(Mt,"rel","nofollow"),v(le,"class","language-css"),v(de,"class","language-js"),v(ge,"href","https://github.com/webpack-contrib/style-loader"),v(ge,"rel","nofollow"),v(Ve,"href","https://github.com/babel/babel-loader"),v(Ve,"rel","nofollow"),v(to,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals"),v(to,"rel","nofollow"),v(co,"class","language-js"),v(uo,"href","#dev-server"),v(uo,"id","dev-server"),v(Mo,"href","https://expressjs.com"),v(Mo,"rel","nofollow"),v(Go,"class","language-js"),v(Xo,"href","https://expressjs.com"),v(Xo,"rel","nofollow"),v(tp,"class","language-js"),v(rp,"href","#wrap-it-up"),v(rp,"id","wrap-it-up"),v(fp,"href","https://preactjs.com/"),v(fp,"rel","nofollow"),v(Ep,"class","language-js"),v(wp,"class","language-css"),v(Ap,"class","language-html"),v(jp,"type","image/webp"),v(jp,"srcset","804912f930114d08.webp"),v(Hp,"type","image/jpeg"),v(Hp,"srcset","804912f930114d08.png"),v(Op,"title","null"),v(Op,"alt","Running bundler + dev server"),v(Op,"data-src","804912f930114d08.png"),v(Op,"loading","lazy"),v(Jp,"type","image/webp"),v(Jp,"srcset","574ab990c5488a44.webp"),v(Up,"type","image/jpeg"),v(Up,"srcset","574ab990c5488a44.png"),v(Bp,"title","null"),v(Bp,"alt","Served results"),v(Bp,"data-src","574ab990c5488a44.png"),v(Bp,"loading","lazy"),v(Yp,"href","#whats-next"),v(Yp,"id","whats-next"),v(fc,"href","#references"),v(fc,"id","references"),v(yc,"href","https://github.com/webpack/webpack-dev-server"),v(yc,"rel","nofollow"),v(Tc,"href","https://github.com/webpack-contrib/style-loader"),v(Tc,"rel","nofollow")},m(n,a){r(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(t,c),i(c,l),i(l,h),i(t,k),i(k,g),i(g,S),i(t,T),i(T,I),i(I,A),i(A,P),i(t,L),i(L,x),i(x,M),i(t,C),i(C,$),i($,j),i(t,H),i(H,O),i(O,D),i(t,N),i(N,F),i(F,R),r(n,q,a),r(n,_,a),i(_,J),i(_,U),i(U,B),i(_,W),r(n,G,a),r(n,z,a),i(z,Y),i(Y,V),i(Y,K),i(Y,Q),r(n,Z,a),r(n,X,a),i(X,nn),r(n,an,a),r(n,sn,a),i(sn,tn),r(n,en,a),r(n,on,a),i(on,pn),i(pn,cn),i(cn,ln),i(on,rn),i(on,un),i(un,hn),i(hn,dn),i(on,kn),i(on,fn),i(fn,mn),i(mn,gn),r(n,vn,a),r(n,En,a),r(n,yn,a),r(n,wn,a),i(wn,bn),i(wn,Sn),i(Sn,Tn),i(wn,In),r(n,An,a),r(n,Pn,a),r(n,Ln,a),r(n,xn,a),i(xn,Mn),i(Mn,Cn),i(Cn,$n),i(xn,jn),i(xn,Hn),i(Hn,On),i(xn,Dn),i(xn,Nn),i(Nn,Fn),i(xn,Rn),i(xn,qn),qn.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">toModuleMap</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> modules<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  module<span class="token punctuation">.</span><span class="token function">transformModuleInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="prism-highlight-code-line">  moduleMap <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>module<span class="token punctuation">.</span>filePath<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">": function(exports, require) &#123; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>module<span class="token punctuation">.</span>content<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&#92;n &#125;,</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span></span>\n<span class="token punctuation">&#125;</span></code>',i(xn,_n),i(xn,Jn),i(Jn,Un),i(xn,Bn),i(xn,Wn),i(Wn,Gn),i(xn,zn),i(xn,Yn),Yn.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">resolveRequest</span><span class="token punctuation">(</span><span class="token parameter">requester<span class="token punctuation">,</span> requestPath</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="prism-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestPath<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">\'.\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">    <span class="token comment">// relative import</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>requester<span class="token punctuation">)</span><span class="token punctuation">,</span> requestPath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> requesterParts <span class="token operator">=</span> requester<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">\'/\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> requestPaths <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> requesterParts<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">      requestPaths<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>requesterParts<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">\'/\'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">\'/node_modules\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line">    <span class="token comment">// absolute import</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">return</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>requestPath<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> paths<span class="token punctuation">:</span> requestPaths <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span></span>\n<span class="token punctuation">&#125;</span></code>',i(xn,Vn),i(xn,Kn),i(Kn,Qn),i(Kn,Zn),i(Zn,Xn),i(Kn,na),i(xn,aa),i(xn,sa),i(sa,ta),i(ta,ea),i(sa,oa),r(n,pa,a),r(n,ca,a),i(ca,la),i(la,ia),i(ia,ra),i(ca,ua),i(ca,ha),i(ha,da),i(ca,ka),i(ca,fa),i(fa,ma),i(fa,ga),i(ga,va),i(fa,Ea),i(ca,ya),i(ca,wa),i(wa,ba),i(ca,Sa),i(ca,Ta),Ta.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- filename: index.html --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code>',i(ca,Ia),i(ca,Aa),i(Aa,Pa),i(ca,La),i(ca,xa),xa.innerHTML='<code class="language-yml"><span class="token punctuation">-</span> bundle.js</code>',i(ca,Ma),i(ca,Ca),i(Ca,$a),i(Ca,ja),i(ja,Ha),i(Ca,Oa),i(ca,Da),i(ca,Na),Na.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- filename: index.html --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code>',i(ca,Fa),i(ca,Ra),i(Ra,qa),i(qa,_a),i(ca,Ja),i(ca,Ua),i(Ua,Ba),i(ca,Wa),i(ca,Ga),Ga.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n<span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> outputFolder<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">const</span> outputFiles <span class="token operator">=</span> <span class="token function">bundle</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="prism-highlight-code-line">  outputFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">generateHTMLTemplate</span><span class="token punctuation">(</span>htmlTemplatePath<span class="token punctuation">,</span> outputFiles<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="prism-highlight-code-line"><span class="token keyword">const</span> <span class="token constant">END_BODY_TAG</span> <span class="token operator">=</span> <span class="token string">\'&lt;/body>\'</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line"><span class="token keyword">function</span> <span class="token function">generateHTMLTemplate</span><span class="token punctuation">(</span><span class="token parameter">htmlTemplatePath<span class="token punctuation">,</span> outputFiles</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">let</span> htmlTemplate <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>htmlTemplatePath<span class="token punctuation">,</span> <span class="token string">\'utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  htmlTemplate <span class="token operator">=</span> htmlTemplate<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span></span>\n<span class="prism-highlight-code-line">    <span class="token constant">END_BODY_TAG</span><span class="token punctuation">,</span></span>\n<span class="prism-highlight-code-line">    outputFiles<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;script src="/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">">&lt;/script></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span> <span class="token operator">+</span></span>\n<span class="prism-highlight-code-line">      <span class="token constant">END_BODY_TAG</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">:</span> <span class="token string">\'index.html\'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> htmlTemplate <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line"><span class="token punctuation">&#125;</span></span></code>',i(ca,za),i(ca,Ya),i(Ya,Va),i(Ya,Ka),i(Ka,Qa),i(Ya,Za),i(Ya,Xa),i(Xa,ns),i(Ya,as),i(Ya,ss),i(ss,ts),i(Ya,es),i(ca,os),i(ca,ps),i(ps,cs),i(cs,ls),i(cs,is),i(is,rs),r(n,us,a),r(n,hs,a),i(hs,ds),i(ds,ks),i(ks,fs),i(hs,ms),i(hs,gs),i(gs,vs),i(hs,Es),i(hs,ys),i(ys,ws),i(ys,bs),i(bs,Ss),i(ys,Ts),i(hs,Is),i(hs,As),As.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n<span class="token keyword">import</span> <span class="token string">\'./style.css\'</span><span class="token punctuation">;</span></code>',i(hs,Ps),i(hs,Ls),Ls.innerHTML='<code class="language-css"><span class="token comment">/* filename: style.css */</span>\n<span class="token selector">.square</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n<span class="token selector">.circle</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(hs,xs),i(hs,Ms),i(Ms,Cs),i(Ms,$s),i($s,js),i(Ms,Hs),i(hs,Os),i(hs,Ds),Ds.innerHTML='<code class="language-">SyntaxError: unknown: Unexpected token (1:0)\n&gt; 1 | .square &#123;\n    | ^\n  2 |   color: blue;\n  3 | &#125;\n  4 | .circle &#123;\n    at Parser.raise (node_modules/@babel/parser/lib/index.js:6344:17)</code>',i(hs,Ns),i(hs,Fs),i(Fs,Rs),i(hs,qs),i(hs,_s),i(_s,Js),i(_s,Us),i(Us,Bs),i(_s,Ws),i(_s,Gs),i(Gs,zs),i(_s,Ys),i(_s,Vs),i(Vs,Ks),i(_s,Qs),i(hs,Zs),i(hs,Xs),Xs.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n<span class="token keyword">class</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>filePath <span class="token operator">=</span> filePath<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">\'utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token function">initDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token function">transformModuleInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">JSModule</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">CSSModule</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code>',i(hs,nt),i(hs,at),i(at,st),i(at,tt),i(tt,et),i(at,ot),i(at,pt),i(pt,ct),i(at,lt),i(hs,it),i(hs,rt),rt.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n\n<span class="prism-highlight-code-line"><span class="token keyword">const</span> <span class="token constant">MODULE_LOADERS</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">  <span class="token string">\'.css\'</span><span class="token punctuation">:</span> CSSModule<span class="token punctuation">,</span></span>\n<span class="prism-highlight-code-line">  <span class="token string">\'.js\'</span><span class="token punctuation">:</span> JSModule<span class="token punctuation">,</span></span>\n<span class="prism-highlight-code-line"><span class="token punctuation">&#125;</span></span>\n\n<span class="token keyword">function</span> <span class="token function">createModule</span><span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> fileExtension <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> ModuleCls <span class="token operator">=</span> <span class="token constant">MODULE_LOADERS</span><span class="token punctuation">[</span>fileExtension<span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ModuleCls<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Unsupported extension "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>fileExtension<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">".</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModuleCls</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token comment">// hightlight-end</span></span>\n<span class="prism-highlight-code-line">    <span class="token constant">MODULE_CACHE</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token comment">// ...</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line"><span class="token punctuation">&#125;</span></span></code>',r(n,ut,a),r(n,ht,a),i(ht,dt),i(dt,kt),i(kt,ft),i(ht,mt),i(ht,gt),i(gt,vt),i(gt,Et),i(Et,yt),i(gt,wt),i(gt,bt),i(bt,St),i(gt,Tt),i(ht,It),i(ht,At),i(At,Pt),i(At,Lt),i(Lt,xt),i(Lt,Mt),i(Mt,Ct),i(Lt,$t),i(ht,jt),i(ht,Ht),i(Ht,Ot),i(Ht,Dt),i(Dt,Nt),i(Ht,Ft),i(Ht,Rt),i(Rt,qt),i(Ht,_t),i(ht,Jt),i(ht,Ut),i(Ut,Bt),i(ht,Wt),i(ht,Gt),i(Gt,zt),i(zt,Yt),i(ht,Vt),i(ht,Kt),i(Kt,Qt),i(Kt,Zt),i(Zt,Xt),i(Kt,ne),i(Kt,ae),i(ae,se),i(Kt,te),i(ht,ee),i(ht,oe),i(oe,pe),i(ht,ce),i(ht,le),le.innerHTML='<code class="language-css"><span class="token selector">.square</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n<span class="token selector">.circle</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(ht,ie),i(ht,re),i(re,ue),i(ht,he),i(ht,de),de.innerHTML='<code class="language-js"><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">.square &#123; color: blue; &#125; .circle &#123; color: red; &#125;</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n<span class="token comment">// create style tag</span>\n<span class="token keyword">const</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'style\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nstyle<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">\'text/css\'</span><span class="token punctuation">;</span>\n<span class="token comment">// for ie compatibility</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>style<span class="token punctuation">.</span>styleSheet<span class="token punctuation">)</span> style<span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText <span class="token operator">=</span> content<span class="token punctuation">;</span>\n<span class="token keyword">else</span> style<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// append to the head</span>\ndocument<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(ht,ke),i(ht,fe),i(fe,me),i(fe,ge),i(ge,ve),i(fe,Ee),i(fe,ye),i(ye,we),i(fe,be),i(ht,Se),i(ht,Te),i(Te,Ie),i(Ie,Ae),i(Te,Pe),i(Te,Le),i(Le,xe),i(Le,Me),i(Me,Ce),i(Le,$e),i(Le,je),i(je,He),i(Le,Oe),i(Le,De),i(De,Ne),i(Le,Fe),i(Te,Re),i(Te,qe),i(qe,_e),i(ht,Je),i(ht,Ue),i(Ue,Be),i(Be,We),i(ht,Ge),i(ht,ze),i(ze,Ye),i(ze,Ve),i(Ve,Ke),i(ze,Qe),i(ht,Ze),i(ht,Xe),i(ht,no),i(ht,ao),i(ao,so),i(ao,to),i(to,eo),i(ao,oo),i(ht,po),i(ht,co),co.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n<span class="token keyword">class</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// ...</span>\n<span class="prism-highlight-code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">CSSModule</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>\n<span class="prism-highlight-code-line">  <span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string"></span></span>\n<span class="prism-highlight-code-line"><span class="token string">      const content = \'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&#92;n/g</span><span class="token punctuation">,</span> <span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\';</span></span>\n<span class="prism-highlight-code-line"><span class="token string">      const style = document.createElement(\'style\');</span></span>\n<span class="prism-highlight-code-line"><span class="token string">      style.type = \'text/css\';</span></span>\n<span class="prism-highlight-code-line"><span class="token string">      if (style.styleSheet) style.styleSheet.cssText = content;</span></span>\n<span class="prism-highlight-code-line"><span class="token string">      else style.appendChild(document.createTextNode(content));</span></span>\n<span class="prism-highlight-code-line"><span class="token string">      document.head.appendChild(style);</span></span>\n<span class="prism-highlight-code-line"><span class="token string">    </span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span></span>\n<span class="token punctuation">&#125;</span></code>',r(n,lo,a),r(n,io,a),i(io,ro),i(ro,uo),i(uo,ho),i(io,ko),i(io,fo),i(fo,mo),i(io,go),i(io,vo),i(vo,Eo),i(Eo,yo),i(vo,wo),i(vo,bo),i(bo,So),i(vo,To),i(vo,Io),i(Io,Ao),i(io,Po),i(io,Lo),i(Lo,xo),i(Lo,Mo),i(Mo,Co),i(Lo,$o),i(io,jo),i(io,Ho),i(Ho,Oo),i(Ho,Do),i(Do,No),i(Ho,Fo),i(Ho,Ro),i(Ro,qo),i(Ho,_o),i(Ho,Jo),i(Jo,Uo),i(Ho,Bo),i(io,Wo),i(io,Go),Go.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n\n<span class="prism-highlight-code-line"><span class="token keyword">function</span> <span class="token function">_build</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">  <span class="token comment">// build dependency graph</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> graph <span class="token operator">=</span> <span class="token function">createDependencyGraph</span><span class="token punctuation">(</span>entryFile<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token comment">// bundle the asset</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> outputFiles <span class="token operator">=</span> <span class="token function">bundle</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  outputFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">generateHTMLTemplate</span><span class="token punctuation">(</span>htmlTemplatePath<span class="token punctuation">,</span> outputFiles<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> outputFiles<span class="token punctuation">,</span> graph <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line"><span class="token punctuation">&#125;</span></span>\n\n<span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> outputFolder<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> outputFiles <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">_build</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// write to output folder</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="prism-highlight-code-line"><span class="token keyword">function</span> <span class="token function">dev</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> outputFolder<span class="token punctuation">,</span> htmlTemplatePath<span class="token punctuation">,</span> devServerOptions <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> outputFiles <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">_build</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line"><span class="token punctuation">&#125;</span></span></code>',i(io,zo),i(io,Yo),i(Yo,Vo),i(Yo,Ko),i(Ko,Qo),i(Yo,Zo),i(Yo,Xo),i(Xo,np),i(Yo,ap),i(io,sp),i(io,tp),tp.innerHTML='<code class="language-js"><span class="token comment">// filename: index.js</span>\n<span class="token keyword">function</span> <span class="token function">dev</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> outputFolder<span class="token punctuation">,</span> htmlTemplatePath<span class="token punctuation">,</span> devServerOptions <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> outputFiles <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">_build</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> entryFile<span class="token punctuation">,</span> htmlTemplatePath <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="prism-highlight-code-line">  <span class="token comment">// create a map of [filename] -> content</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> outputFileMap <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> outputFile <span class="token keyword">of</span> outputFiles<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">    outputFileMap<span class="token punctuation">[</span>outputFile<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> outputFile<span class="token punctuation">.</span>content<span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> indexHtml <span class="token operator">=</span> outputFileMap<span class="token punctuation">[</span><span class="token string">\'index.html\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line"></span>\n<span class="prism-highlight-code-line">  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">    <span class="token comment">// trim off preceding slash \'/\'</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">const</span> requestFile <span class="token operator">=</span> req<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>outputFileMap<span class="token punctuation">[</span>requestFile<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>\n<span class="prism-highlight-code-line">      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>outputFileMap<span class="token punctuation">[</span>requestFile<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">    <span class="token punctuation">&#125;</span></span>\n<span class="prism-highlight-code-line">    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>indexHtml<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="prism-highlight-code-line">  app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>devServerOptions<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span>\n<span class="prism-highlight-code-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span></span>\n<span class="prism-highlight-code-line">      <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Dev server starts at http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>devServerOptions<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span></span>\n<span class="prism-highlight-code-line">    <span class="token punctuation">)</span></span>\n<span class="prism-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token punctuation">&#125;</span></code>',i(io,ep),i(io,op),i(op,pp),r(n,cp,a),r(n,lp,a),i(lp,ip),i(ip,rp),i(rp,up),i(lp,hp),i(lp,dp),i(dp,kp),i(dp,fp),i(fp,mp),i(dp,gp),i(lp,vp),i(lp,Ep),Ep.innerHTML='<code class="language-js"><span class="token comment">// filename: main.js</span>\n<span class="token keyword">import</span> squareArea <span class="token keyword">from</span> <span class="token string">\'./square.js\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> circleArea <span class="token keyword">from</span> <span class="token string">\'./circle.js\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createElement<span class="token punctuation">,</span> render <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">\'preact\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string">\'./style.css\'</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.141</span><span class="token punctuation">;</span>\n\n<span class="token function">render</span><span class="token punctuation">(</span>\n  <span class="token function">createElement</span><span class="token punctuation">(</span>\n    <span class="token string">\'p\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n    <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'p\'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">\'square\'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">\'area of square: \'</span> <span class="token operator">+</span> <span class="token function">squareArea</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'p\'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">\'circle\'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">\'area of circle: \'</span> <span class="token operator">+</span> <span class="token function">circleArea</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">)</span><span class="token punctuation">,</span>\n  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'root\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(lp,yp),i(lp,wp),wp.innerHTML='<code class="language-css"><span class="token comment">/* filename: style.css */</span>\n<span class="token selector">.square</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n<span class="token selector">.circle</span> <span class="token punctuation">&#123;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(lp,bp),i(lp,Sp),i(Sp,Tp),i(lp,Ip),i(lp,Ap),Ap.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- filename: index.html --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code>',i(lp,Pp),i(lp,Lp),i(Lp,xp),i(lp,Mp),i(lp,Cp),i(Cp,$p),i($p,jp),i($p,Hp),i($p,Op),i(lp,Dp),i(lp,Np),i(Np,Fp),i(lp,Rp),i(lp,qp),i(qp,_p),i(_p,Jp),i(_p,Up),i(_p,Bp),r(n,Wp,a),r(n,Gp,a),i(Gp,zp),i(zp,Yp),i(Yp,Vp),i(Gp,Kp),i(Gp,Qp),i(Qp,Zp),i(Gp,Xp),i(Gp,nc),i(nc,ac),i(ac,sc),i(nc,tc),i(nc,ec),i(ec,oc),i(Gp,pc),i(Gp,cc),i(cc,lc),i(Gp,ic),i(Gp,rc),i(rc,uc),r(n,hc,a),r(n,dc,a),i(dc,kc),i(kc,fc),i(fc,mc),i(dc,gc),i(dc,vc),i(vc,Ec),i(Ec,yc),i(yc,wc),i(vc,bc),i(vc,Sc),i(Sc,Tc),i(Tc,Ic)},p:n,d(n){n&&u(s),n&&u(q),n&&u(_),n&&u(G),n&&u(z),n&&u(Z),n&&u(X),n&&u(an),n&&u(sn),n&&u(en),n&&u(on),n&&u(vn),n&&u(En),n&&u(yn),n&&u(wn),n&&u(An),n&&u(Pn),n&&u(Ln),n&&u(xn),n&&u(pa),n&&u(ca),n&&u(us),n&&u(hs),n&&u(ut),n&&u(ht),n&&u(lo),n&&u(io),n&&u(cp),n&&u(lp),n&&u(Wp),n&&u(Gp),n&&u(hc),n&&u(dc)}}}function dn(n){let s,t;const e=[kn];let o={$$slots:{default:[hn]},$$scope:{ctx:n}};for(let n=0;n<e.length;n+=1)o=a(o,e[n]);return s=new un({props:o}),{c(){U(s.$$.fragment)},l(n){B(s.$$.fragment,n)},m(n,a){W(s,n,a),t=!0},p(n,[a]){const t=0&a?function(n,a){const s={},t={},e={$$scope:1};let o=n.length;for(;o--;){const p=n[o],c=a[o];if(c){for(const n in p)n in c||(t[n]=1);for(const n in c)e[n]||(s[n]=c[n],e[n]=1);n[o]=c}else for(const n in p)e[n]=1}for(const n in t)n in s||(s[n]=void 0);return s}(e,[(o=kn,"object"==typeof o&&null!==o?o:{})]):{};var o;1&a&&(t.$$scope={dirty:a,ctx:n}),s.$set(t)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){J(s.$$.fragment,n),t=!1},d(n){G(s,n)}}}const kn={title:"I wrote my module bundler II",date:"2019-10-16T08:00:00Z",tags:["JavaScript","module bundler","dev tool","webpack"],description:"We've built a simple bundler to bundle javascript code. Let's add CSS, HTML and serve it in the browser!",series:"Write a module bundler",slug:"i-wrote-my-module-bundler-ii-for-the-web",type:"blog"};class fn extends V{constructor(n){super(),Y(this,n,null,dn,p,{})}}setTimeout(()=>{new fn({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const n=document.createElement("script");n.async=!0,n.src="https://platform.twitter.com/widgets.js",n.charset="utf-8",document.body.appendChild(n)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(n=>{n.src=n.dataset.src})}else{const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(n)}},3e3);
